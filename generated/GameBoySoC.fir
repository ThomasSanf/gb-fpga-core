circuit GameBoySoC :
  module Interrupts :
    input clock : Clock
    input reset : Reset
    output io : { flip IE : UInt<8>, flip IF : UInt<8>, flip IME : UInt<1>, flip pc : UInt<16>, flip halted : UInt<1>, should_irq : UInt<1>, irq_vector : UInt<16>, halt_bug_triggered : UInt<1>}

    node active = and(io.IE, io.IF) @[Interrupts.scala 31:22]
    node anyActive = orr(active) @[Interrupts.scala 32:26]
    wire vector : UInt<16> @[Interrupts.scala 37:20]
    node _T = bits(active, 0, 0) @[Interrupts.scala 39:14]
    when _T : @[Interrupts.scala 39:24]
      vector <= UInt<7>("h40") @[Interrupts.scala 39:33]
    else :
      node _T_1 = bits(active, 1, 1) @[Interrupts.scala 40:21]
      when _T_1 : @[Interrupts.scala 40:26]
        vector <= UInt<7>("h48") @[Interrupts.scala 40:35]
      else :
        node _T_2 = bits(active, 2, 2) @[Interrupts.scala 41:21]
        when _T_2 : @[Interrupts.scala 41:26]
          vector <= UInt<7>("h50") @[Interrupts.scala 41:35]
        else :
          node _T_3 = bits(active, 3, 3) @[Interrupts.scala 42:21]
          when _T_3 : @[Interrupts.scala 42:26]
            vector <= UInt<7>("h58") @[Interrupts.scala 42:35]
          else :
            node _T_4 = bits(active, 4, 4) @[Interrupts.scala 43:21]
            when _T_4 : @[Interrupts.scala 43:26]
              vector <= UInt<7>("h60") @[Interrupts.scala 43:35]
            else :
              vector <= UInt<1>("h0") @[Interrupts.scala 44:35]
    node _io_should_irq_T = and(io.IME, anyActive) @[Interrupts.scala 49:27]
    io.should_irq <= _io_should_irq_T @[Interrupts.scala 49:17]
    io.irq_vector <= vector @[Interrupts.scala 50:17]
    node _io_halt_bug_triggered_T = eq(io.IME, UInt<1>("h0")) @[Interrupts.scala 58:29]
    node _io_halt_bug_triggered_T_1 = and(_io_halt_bug_triggered_T, anyActive) @[Interrupts.scala 58:38]
    node _io_halt_bug_triggered_T_2 = and(_io_halt_bug_triggered_T_1, io.halted) @[Interrupts.scala 58:51]
    io.halt_bug_triggered <= _io_halt_bug_triggered_T_2 @[Interrupts.scala 58:25]

  module LR35902_ALU :
    input clock : Clock
    input reset : Reset
    output io : { flip op : UInt<4>, flip a : UInt<8>, flip b : UInt<8>, flip carryIn : UInt<1>, out : UInt<8>, flagZ : UInt<1>, flagN : UInt<1>, flagH : UInt<1>, flagC : UInt<1>}

    io.out <= io.a @[LR35902_ALU.scala 26:12]
    io.flagZ <= UInt<1>("h0") @[LR35902_ALU.scala 27:12]
    io.flagN <= UInt<1>("h0") @[LR35902_ALU.scala 28:12]
    io.flagH <= UInt<1>("h0") @[LR35902_ALU.scala 29:12]
    io.flagC <= UInt<1>("h0") @[LR35902_ALU.scala 30:12]
    node _sum_T = add(io.a, io.b) @[LR35902_ALU.scala 32:19]
    node sum = tail(_sum_T, 1) @[LR35902_ALU.scala 32:19]
    node _sumc_T = add(io.a, io.b) @[LR35902_ALU.scala 33:19]
    node _sumc_T_1 = tail(_sumc_T, 1) @[LR35902_ALU.scala 33:19]
    node _sumc_T_2 = add(_sumc_T_1, io.carryIn) @[LR35902_ALU.scala 33:26]
    node sumc = tail(_sumc_T_2, 1) @[LR35902_ALU.scala 33:26]
    node _diff_T = sub(io.a, io.b) @[LR35902_ALU.scala 35:20]
    node diff = tail(_diff_T, 1) @[LR35902_ALU.scala 35:20]
    node _diffc_T = sub(io.a, io.b) @[LR35902_ALU.scala 36:20]
    node _diffc_T_1 = tail(_diffc_T, 1) @[LR35902_ALU.scala 36:20]
    node _diffc_T_2 = sub(_diffc_T_1, io.carryIn) @[LR35902_ALU.scala 36:27]
    node diffc = tail(_diffc_T_2, 1) @[LR35902_ALU.scala 36:27]
    node _T = eq(UInt<4>("h0"), io.op) @[LR35902_ALU.scala 48:17]
    when _T : @[LR35902_ALU.scala 48:17]
      io.out <= sum @[LR35902_ALU.scala 54:16]
      node _io_flagZ_T = eq(sum, UInt<1>("h0")) @[LR35902_ALU.scala 55:23]
      io.flagZ <= _io_flagZ_T @[LR35902_ALU.scala 55:16]
      io.flagN <= UInt<1>("h0") @[LR35902_ALU.scala 56:16]
      node _io_flagH_T = and(io.a, UInt<4>("hf")) @[LR35902_ALU.scala 40:9]
      node _io_flagH_T_1 = and(io.b, UInt<4>("hf")) @[LR35902_ALU.scala 40:23]
      node _io_flagH_T_2 = add(_io_flagH_T, _io_flagH_T_1) @[LR35902_ALU.scala 40:18]
      node _io_flagH_T_3 = tail(_io_flagH_T_2, 1) @[LR35902_ALU.scala 40:18]
      node _io_flagH_T_4 = add(_io_flagH_T_3, UInt<1>("h0")) @[LR35902_ALU.scala 40:32]
      node _io_flagH_T_5 = tail(_io_flagH_T_4, 1) @[LR35902_ALU.scala 40:32]
      node _io_flagH_T_6 = gt(_io_flagH_T_5, UInt<4>("hf")) @[LR35902_ALU.scala 40:37]
      io.flagH <= _io_flagH_T_6 @[LR35902_ALU.scala 57:16]
      node _io_flagC_T = gt(sum, UInt<8>("hff")) @[LR35902_ALU.scala 58:23]
      io.flagC <= _io_flagC_T @[LR35902_ALU.scala 58:16]
    else :
      node _T_1 = eq(UInt<4>("h1"), io.op) @[LR35902_ALU.scala 48:17]
      when _T_1 : @[LR35902_ALU.scala 48:17]
        io.out <= sumc @[LR35902_ALU.scala 65:16]
        node _io_flagZ_T_1 = eq(sumc, UInt<1>("h0")) @[LR35902_ALU.scala 66:24]
        io.flagZ <= _io_flagZ_T_1 @[LR35902_ALU.scala 66:16]
        io.flagN <= UInt<1>("h0") @[LR35902_ALU.scala 67:16]
        node _io_flagH_T_7 = and(io.a, UInt<4>("hf")) @[LR35902_ALU.scala 40:9]
        node _io_flagH_T_8 = and(io.b, UInt<4>("hf")) @[LR35902_ALU.scala 40:23]
        node _io_flagH_T_9 = add(_io_flagH_T_7, _io_flagH_T_8) @[LR35902_ALU.scala 40:18]
        node _io_flagH_T_10 = tail(_io_flagH_T_9, 1) @[LR35902_ALU.scala 40:18]
        node _io_flagH_T_11 = add(_io_flagH_T_10, io.carryIn) @[LR35902_ALU.scala 40:32]
        node _io_flagH_T_12 = tail(_io_flagH_T_11, 1) @[LR35902_ALU.scala 40:32]
        node _io_flagH_T_13 = gt(_io_flagH_T_12, UInt<4>("hf")) @[LR35902_ALU.scala 40:37]
        io.flagH <= _io_flagH_T_13 @[LR35902_ALU.scala 68:16]
        node _io_flagC_T_1 = gt(sumc, UInt<8>("hff")) @[LR35902_ALU.scala 69:24]
        io.flagC <= _io_flagC_T_1 @[LR35902_ALU.scala 69:16]
      else :
        node _T_2 = eq(UInt<4>("h2"), io.op) @[LR35902_ALU.scala 48:17]
        when _T_2 : @[LR35902_ALU.scala 48:17]
          io.out <= diff @[LR35902_ALU.scala 76:16]
          node _io_flagZ_T_2 = eq(diff, UInt<1>("h0")) @[LR35902_ALU.scala 77:24]
          io.flagZ <= _io_flagZ_T_2 @[LR35902_ALU.scala 77:16]
          io.flagN <= UInt<1>("h1") @[LR35902_ALU.scala 78:16]
          node _io_flagH_T_14 = and(io.a, UInt<4>("hf")) @[LR35902_ALU.scala 43:9]
          node _io_flagH_T_15 = and(io.b, UInt<4>("hf")) @[LR35902_ALU.scala 43:23]
          node _io_flagH_T_16 = sub(_io_flagH_T_14, _io_flagH_T_15) @[LR35902_ALU.scala 43:18]
          node _io_flagH_T_17 = tail(_io_flagH_T_16, 1) @[LR35902_ALU.scala 43:18]
          node _io_flagH_T_18 = sub(_io_flagH_T_17, UInt<1>("h0")) @[LR35902_ALU.scala 43:32]
          node _io_flagH_T_19 = tail(_io_flagH_T_18, 1) @[LR35902_ALU.scala 43:32]
          node _io_flagH_T_20 = lt(_io_flagH_T_19, UInt<1>("h0")) @[LR35902_ALU.scala 43:37]
          io.flagH <= _io_flagH_T_20 @[LR35902_ALU.scala 79:16]
          node _io_flagC_T_2 = lt(io.a, io.b) @[LR35902_ALU.scala 80:24]
          io.flagC <= _io_flagC_T_2 @[LR35902_ALU.scala 80:16]
        else :
          node _T_3 = eq(UInt<4>("h3"), io.op) @[LR35902_ALU.scala 48:17]
          when _T_3 : @[LR35902_ALU.scala 48:17]
            io.out <= diffc @[LR35902_ALU.scala 87:16]
            node _io_flagZ_T_3 = eq(diffc, UInt<1>("h0")) @[LR35902_ALU.scala 88:25]
            io.flagZ <= _io_flagZ_T_3 @[LR35902_ALU.scala 88:16]
            io.flagN <= UInt<1>("h1") @[LR35902_ALU.scala 89:16]
            node _io_flagH_T_21 = and(io.a, UInt<4>("hf")) @[LR35902_ALU.scala 43:9]
            node _io_flagH_T_22 = and(io.b, UInt<4>("hf")) @[LR35902_ALU.scala 43:23]
            node _io_flagH_T_23 = sub(_io_flagH_T_21, _io_flagH_T_22) @[LR35902_ALU.scala 43:18]
            node _io_flagH_T_24 = tail(_io_flagH_T_23, 1) @[LR35902_ALU.scala 43:18]
            node _io_flagH_T_25 = sub(_io_flagH_T_24, io.carryIn) @[LR35902_ALU.scala 43:32]
            node _io_flagH_T_26 = tail(_io_flagH_T_25, 1) @[LR35902_ALU.scala 43:32]
            node _io_flagH_T_27 = lt(_io_flagH_T_26, UInt<1>("h0")) @[LR35902_ALU.scala 43:37]
            io.flagH <= _io_flagH_T_27 @[LR35902_ALU.scala 90:16]
            node _io_flagC_T_3 = add(io.b, io.carryIn) @[LR35902_ALU.scala 91:32]
            node _io_flagC_T_4 = tail(_io_flagC_T_3, 1) @[LR35902_ALU.scala 91:32]
            node _io_flagC_T_5 = lt(io.a, _io_flagC_T_4) @[LR35902_ALU.scala 91:24]
            io.flagC <= _io_flagC_T_5 @[LR35902_ALU.scala 91:16]
          else :
            node _T_4 = eq(UInt<4>("h4"), io.op) @[LR35902_ALU.scala 48:17]
            when _T_4 : @[LR35902_ALU.scala 48:17]
              node r = and(io.a, io.b) @[LR35902_ALU.scala 98:20]
              io.out <= r @[LR35902_ALU.scala 99:16]
              node _io_flagZ_T_4 = eq(r, UInt<1>("h0")) @[LR35902_ALU.scala 100:21]
              io.flagZ <= _io_flagZ_T_4 @[LR35902_ALU.scala 100:16]
              io.flagN <= UInt<1>("h0") @[LR35902_ALU.scala 101:16]
              io.flagH <= UInt<1>("h1") @[LR35902_ALU.scala 102:16]
              io.flagC <= UInt<1>("h0") @[LR35902_ALU.scala 103:16]
            else :
              node _T_5 = eq(UInt<4>("h5"), io.op) @[LR35902_ALU.scala 48:17]
              when _T_5 : @[LR35902_ALU.scala 48:17]
                node r_1 = or(io.a, io.b) @[LR35902_ALU.scala 110:20]
                io.out <= r_1 @[LR35902_ALU.scala 111:16]
                node _io_flagZ_T_5 = eq(r_1, UInt<1>("h0")) @[LR35902_ALU.scala 112:21]
                io.flagZ <= _io_flagZ_T_5 @[LR35902_ALU.scala 112:16]
                io.flagN <= UInt<1>("h0") @[LR35902_ALU.scala 113:16]
                io.flagH <= UInt<1>("h0") @[LR35902_ALU.scala 114:16]
                io.flagC <= UInt<1>("h0") @[LR35902_ALU.scala 115:16]
              else :
                node _T_6 = eq(UInt<4>("h6"), io.op) @[LR35902_ALU.scala 48:17]
                when _T_6 : @[LR35902_ALU.scala 48:17]
                  node r_2 = xor(io.a, io.b) @[LR35902_ALU.scala 122:20]
                  io.out <= r_2 @[LR35902_ALU.scala 123:16]
                  node _io_flagZ_T_6 = eq(r_2, UInt<1>("h0")) @[LR35902_ALU.scala 124:21]
                  io.flagZ <= _io_flagZ_T_6 @[LR35902_ALU.scala 124:16]
                  io.flagN <= UInt<1>("h0") @[LR35902_ALU.scala 125:16]
                  io.flagH <= UInt<1>("h0") @[LR35902_ALU.scala 126:16]
                  io.flagC <= UInt<1>("h0") @[LR35902_ALU.scala 127:16]
                else :
                  node _T_7 = eq(UInt<4>("h7"), io.op) @[LR35902_ALU.scala 48:17]
                  when _T_7 : @[LR35902_ALU.scala 48:17]
                    io.out <= io.a @[LR35902_ALU.scala 135:16]
                    node _io_flagZ_T_7 = eq(diff, UInt<1>("h0")) @[LR35902_ALU.scala 136:21]
                    io.flagZ <= _io_flagZ_T_7 @[LR35902_ALU.scala 136:16]
                    io.flagN <= UInt<1>("h1") @[LR35902_ALU.scala 137:16]
                    node _io_flagH_T_28 = and(io.a, UInt<4>("hf")) @[LR35902_ALU.scala 43:9]
                    node _io_flagH_T_29 = and(io.b, UInt<4>("hf")) @[LR35902_ALU.scala 43:23]
                    node _io_flagH_T_30 = sub(_io_flagH_T_28, _io_flagH_T_29) @[LR35902_ALU.scala 43:18]
                    node _io_flagH_T_31 = tail(_io_flagH_T_30, 1) @[LR35902_ALU.scala 43:18]
                    node _io_flagH_T_32 = sub(_io_flagH_T_31, UInt<1>("h0")) @[LR35902_ALU.scala 43:32]
                    node _io_flagH_T_33 = tail(_io_flagH_T_32, 1) @[LR35902_ALU.scala 43:32]
                    node _io_flagH_T_34 = lt(_io_flagH_T_33, UInt<1>("h0")) @[LR35902_ALU.scala 43:37]
                    io.flagH <= _io_flagH_T_34 @[LR35902_ALU.scala 138:16]
                    node _io_flagC_T_6 = lt(io.a, io.b) @[LR35902_ALU.scala 139:24]
                    io.flagC <= _io_flagC_T_6 @[LR35902_ALU.scala 139:16]
                  else :
                    node _T_8 = eq(UInt<4>("h8"), io.op) @[LR35902_ALU.scala 48:17]
                    when _T_8 : @[LR35902_ALU.scala 48:17]
                      node _r_T = add(io.a, UInt<1>("h1")) @[LR35902_ALU.scala 146:20]
                      node r_3 = tail(_r_T, 1) @[LR35902_ALU.scala 146:20]
                      io.out <= r_3 @[LR35902_ALU.scala 147:16]
                      node _io_flagZ_T_8 = eq(r_3, UInt<1>("h0")) @[LR35902_ALU.scala 148:21]
                      io.flagZ <= _io_flagZ_T_8 @[LR35902_ALU.scala 148:16]
                      io.flagN <= UInt<1>("h0") @[LR35902_ALU.scala 149:16]
                      node _io_flagH_T_35 = and(io.a, UInt<4>("hf")) @[LR35902_ALU.scala 150:25]
                      node _io_flagH_T_36 = eq(_io_flagH_T_35, UInt<4>("hf")) @[LR35902_ALU.scala 150:35]
                      io.flagH <= _io_flagH_T_36 @[LR35902_ALU.scala 150:16]
                      io.flagC <= UInt<1>("h0") @[LR35902_ALU.scala 151:16]
                    else :
                      node _T_9 = eq(UInt<4>("h9"), io.op) @[LR35902_ALU.scala 48:17]
                      when _T_9 : @[LR35902_ALU.scala 48:17]
                        node _r_T_1 = sub(io.a, UInt<1>("h1")) @[LR35902_ALU.scala 158:20]
                        node r_4 = tail(_r_T_1, 1) @[LR35902_ALU.scala 158:20]
                        io.out <= r_4 @[LR35902_ALU.scala 159:16]
                        node _io_flagZ_T_9 = eq(r_4, UInt<1>("h0")) @[LR35902_ALU.scala 160:21]
                        io.flagZ <= _io_flagZ_T_9 @[LR35902_ALU.scala 160:16]
                        io.flagN <= UInt<1>("h1") @[LR35902_ALU.scala 161:16]
                        node _io_flagH_T_37 = and(io.a, UInt<4>("hf")) @[LR35902_ALU.scala 162:25]
                        node _io_flagH_T_38 = eq(_io_flagH_T_37, UInt<1>("h0")) @[LR35902_ALU.scala 162:35]
                        io.flagH <= _io_flagH_T_38 @[LR35902_ALU.scala 162:16]
                        io.flagC <= UInt<1>("h0") @[LR35902_ALU.scala 163:16]


  module LR35902_Core :
    input clock : Clock
    input reset : Reset
    output io : { memAddr : UInt<16>, memRead : UInt<1>, memWrite : UInt<1>, memWriteData : UInt<8>, flip memReadData : UInt<8>, flip ieReg : UInt<8>, flip ifReg : UInt<8>, dbg_pc : UInt<16>, dbg_opcode : UInt<8>, dbg_sp : UInt<16>, dbg_a : UInt<8>, dbg_f : UInt<8>, dbg_b : UInt<8>, dbg_c : UInt<8>, dbg_d : UInt<8>, dbg_e : UInt<8>, dbg_h : UInt<8>, dbg_l : UInt<8>, dbg_state : UInt<8>, dbg_tcycle : UInt<8>, dbg_mcycle : UInt<8>, dbg_IR : UInt<8>}

    reg A : UInt<8>, clock with :
      reset => (reset, UInt<8>("h1")) @[LR35902_Core.scala 44:18]
    reg F : UInt<8>, clock with :
      reset => (reset, UInt<8>("hb0")) @[LR35902_Core.scala 45:18]
    reg B : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[LR35902_Core.scala 46:18]
    reg C : UInt<8>, clock with :
      reset => (reset, UInt<8>("h13")) @[LR35902_Core.scala 47:18]
    reg D : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[LR35902_Core.scala 48:18]
    reg E : UInt<8>, clock with :
      reset => (reset, UInt<8>("hd8")) @[LR35902_Core.scala 49:18]
    reg H : UInt<8>, clock with :
      reset => (reset, UInt<8>("h1")) @[LR35902_Core.scala 50:18]
    reg L : UInt<8>, clock with :
      reset => (reset, UInt<8>("h4d")) @[LR35902_Core.scala 51:18]
    reg PC : UInt<16>, clock with :
      reset => (reset, UInt<16>("h0")) @[LR35902_Core.scala 53:19]
    reg SP : UInt<16>, clock with :
      reset => (reset, UInt<16>("hfffe")) @[LR35902_Core.scala 54:19]
    reg IR : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[LR35902_Core.scala 56:22]
    reg IR2 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[LR35902_Core.scala 57:22]
    reg imm8 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[LR35902_Core.scala 58:22]
    reg imm16 : UInt<16>, clock with :
      reset => (reset, UInt<16>("h0")) @[LR35902_Core.scala 59:22]
    reg CB_imm8 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[LR35902_Core.scala 60:24]
    reg IME : UInt<1>, clock with :
      reset => (reset, UInt<1>("h0")) @[LR35902_Core.scala 62:28]
    reg IME_pending : UInt<1>, clock with :
      reset => (reset, UInt<1>("h0")) @[LR35902_Core.scala 63:28]
    reg PC_sampled : UInt<16>, clock with :
      reset => (reset, UInt<16>("h0")) @[LR35902_Core.scala 68:27]
    reg SP_sampled : UInt<16>, clock with :
      reset => (reset, UInt<16>("hfffe")) @[LR35902_Core.scala 69:27]
    reg A_sampled : UInt<8>, clock with :
      reset => (reset, UInt<8>("h1")) @[LR35902_Core.scala 70:27]
    reg F_sampled : UInt<8>, clock with :
      reset => (reset, UInt<8>("hb0")) @[LR35902_Core.scala 71:27]
    reg B_sampled : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[LR35902_Core.scala 72:27]
    reg C_sampled : UInt<8>, clock with :
      reset => (reset, UInt<8>("h13")) @[LR35902_Core.scala 73:27]
    reg D_sampled : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[LR35902_Core.scala 74:27]
    reg E_sampled : UInt<8>, clock with :
      reset => (reset, UInt<8>("hd8")) @[LR35902_Core.scala 75:27]
    reg H_sampled : UInt<8>, clock with :
      reset => (reset, UInt<8>("h1")) @[LR35902_Core.scala 76:27]
    reg L_sampled : UInt<8>, clock with :
      reset => (reset, UInt<8>("h4d")) @[LR35902_Core.scala 77:27]
    reg state : UInt<3>, clock with :
      reset => (reset, UInt<3>("h0")) @[LR35902_Core.scala 85:23]
    reg tcycle : UInt<2>, clock with :
      reset => (reset, UInt<2>("h0")) @[LR35902_Core.scala 86:23]
    reg mcycle : UInt<3>, clock with :
      reset => (reset, UInt<3>("h0")) @[LR35902_Core.scala 87:23]
    reg halted : UInt<1>, clock with :
      reset => (reset, UInt<1>("h0")) @[LR35902_Core.scala 88:23]
    inst intr of Interrupts @[LR35902_Core.scala 93:20]
    intr.clock <= clock
    intr.reset <= reset
    intr.io.IE <= io.ieReg @[LR35902_Core.scala 94:18]
    intr.io.IF <= io.ifReg @[LR35902_Core.scala 95:18]
    intr.io.IME <= IME @[LR35902_Core.scala 96:18]
    intr.io.pc <= PC @[LR35902_Core.scala 97:18]
    intr.io.halted <= halted @[LR35902_Core.scala 98:18]
    wire mcBus : { memAddr : UInt<16>, memRead : UInt<1>, memWrite : UInt<1>, memWriteData : UInt<8>, memReadData : UInt<8>} @[LR35902_Core.scala 103:19]
    mcBus.memAddr <= UInt<1>("h0") @[LR35902_Core.scala 111:22]
    mcBus.memRead <= UInt<1>("h0") @[LR35902_Core.scala 112:22]
    mcBus.memWrite <= UInt<1>("h0") @[LR35902_Core.scala 113:22]
    mcBus.memWriteData <= UInt<1>("h0") @[LR35902_Core.scala 114:22]
    mcBus.memReadData <= io.memReadData @[LR35902_Core.scala 115:22]
    wire u : { PC : UInt<16>, SP : UInt<16>, A : UInt<8>, F : UInt<8>, B : UInt<8>, C : UInt<8>, D : UInt<8>, E : UInt<8>, H : UInt<8>, L : UInt<8>, imm8 : UInt<8>, imm16 : UInt<16>, IME : UInt<1>, IME_pending : UInt<1>, next_mcycle : UInt<3>, done : UInt<1>} @[Microcode.scala 54:19]
    u.PC <= PC_sampled @[Microcode.scala 59:15]
    u.SP <= SP_sampled @[Microcode.scala 60:15]
    u.A <= A_sampled @[Microcode.scala 61:15]
    u.F <= F_sampled @[Microcode.scala 62:15]
    u.B <= B_sampled @[Microcode.scala 63:15]
    u.C <= C_sampled @[Microcode.scala 64:15]
    u.D <= D_sampled @[Microcode.scala 65:15]
    u.E <= E_sampled @[Microcode.scala 66:15]
    u.H <= H_sampled @[Microcode.scala 67:15]
    u.L <= L_sampled @[Microcode.scala 68:15]
    u.imm8 <= imm8 @[Microcode.scala 69:15]
    u.imm16 <= imm16 @[Microcode.scala 70:15]
    u.IME <= IME @[Microcode.scala 72:21]
    u.IME_pending <= IME_pending @[Microcode.scala 73:21]
    u.next_mcycle <= mcycle @[Microcode.scala 75:21]
    u.done <= UInt<1>("h0") @[Microcode.scala 76:21]
    mcBus.memAddr <= UInt<1>("h0") @[Microcode.scala 78:21]
    mcBus.memRead <= UInt<1>("h0") @[Microcode.scala 79:21]
    mcBus.memWrite <= UInt<1>("h0") @[Microcode.scala 80:21]
    mcBus.memWriteData <= UInt<1>("h0") @[Microcode.scala 81:21]
    node u_HL = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
    inst u_alu of LR35902_ALU @[Microcode.scala 105:21]
    u_alu.clock <= clock
    u_alu.reset <= reset
    u_alu.io.a <= UInt<1>("h0") @[Microcode.scala 106:21]
    u_alu.io.b <= UInt<1>("h0") @[Microcode.scala 107:21]
    u_alu.io.op <= UInt<1>("h0") @[Microcode.scala 108:21]
    node _u_alu_io_carryIn_T = bits(F_sampled, 4, 4) @[Microcode.scala 109:28]
    u_alu.io.carryIn <= _u_alu_io_carryIn_T @[Microcode.scala 109:21]
    node _u_T = eq(IR, UInt<1>("h0")) @[Microcode.scala 118:13]
    when _u_T : @[Microcode.scala 118:26]
      node _u_T_1 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 119:19]
      when _u_T_1 : @[Microcode.scala 119:28]
        u.done <= UInt<1>("h1") @[Microcode.scala 119:39]
    else :
      node _u_T_2 = eq(IR, UInt<7>("h76")) @[Microcode.scala 124:19]
      when _u_T_2 : @[Microcode.scala 124:32]
        node _u_T_3 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 125:19]
        when _u_T_3 : @[Microcode.scala 125:28]
          u.done <= UInt<1>("h1") @[Microcode.scala 125:39]
      else :
        node _u_T_4 = and(IR, UInt<8>("hcf")) @[Microcode.scala 131:20]
        node _u_T_5 = eq(_u_T_4, UInt<1>("h1")) @[Microcode.scala 131:31]
        when _u_T_5 : @[Microcode.scala 131:44]
          node _u_rr_T = shr(IR, 4) @[Microcode.scala 132:20]
          node u_rr = and(_u_rr_T, UInt<2>("h3")) @[Microcode.scala 132:26]
          node _u_T_6 = eq(UInt<1>("h0"), u_rr) @[Microcode.scala 134:18]
          when _u_T_6 : @[Microcode.scala 134:18]
            node _u_out_C_T = bits(imm16, 7, 0) @[Microcode.scala 136:28]
            u.C <= _u_out_C_T @[Microcode.scala 136:17]
            node _u_out_B_T = bits(imm16, 15, 8) @[Microcode.scala 137:28]
            u.B <= _u_out_B_T @[Microcode.scala 137:17]
          else :
            node _u_T_7 = eq(UInt<1>("h1"), u_rr) @[Microcode.scala 134:18]
            when _u_T_7 : @[Microcode.scala 134:18]
              node _u_out_E_T = bits(imm16, 7, 0) @[Microcode.scala 140:28]
              u.E <= _u_out_E_T @[Microcode.scala 140:17]
              node _u_out_D_T = bits(imm16, 15, 8) @[Microcode.scala 141:28]
              u.D <= _u_out_D_T @[Microcode.scala 141:17]
            else :
              node _u_T_8 = eq(UInt<2>("h2"), u_rr) @[Microcode.scala 134:18]
              when _u_T_8 : @[Microcode.scala 134:18]
                node _u_out_L_T = bits(imm16, 7, 0) @[Microcode.scala 144:28]
                u.L <= _u_out_L_T @[Microcode.scala 144:17]
                node _u_out_H_T = bits(imm16, 15, 8) @[Microcode.scala 145:28]
                u.H <= _u_out_H_T @[Microcode.scala 145:17]
              else :
                node _u_T_9 = eq(UInt<2>("h3"), u_rr) @[Microcode.scala 134:18]
                when _u_T_9 : @[Microcode.scala 134:18]
                  u.SP <= imm16 @[Microcode.scala 148:18]
          node _u_T_10 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 151:19]
          when _u_T_10 : @[Microcode.scala 151:28]
            u.done <= UInt<1>("h1") @[Microcode.scala 151:39]
        else :
          node _u_T_11 = and(IR, UInt<8>("hcf")) @[Microcode.scala 156:20]
          node _u_T_12 = eq(_u_T_11, UInt<2>("h3")) @[Microcode.scala 156:31]
          when _u_T_12 : @[Microcode.scala 156:44]
            node _u_rr_T_1 = shr(IR, 4) @[Microcode.scala 157:20]
            node u_rr_1 = and(_u_rr_T_1, UInt<2>("h3")) @[Microcode.scala 157:26]
            node _u_result_T = cat(B_sampled, C_sampled) @[Cat.scala 33:92]
            node _u_result_T_1 = add(_u_result_T, UInt<1>("h1")) @[Microcode.scala 159:33]
            node _u_result_T_2 = tail(_u_result_T_1, 1) @[Microcode.scala 159:33]
            node _u_result_T_3 = cat(D_sampled, E_sampled) @[Cat.scala 33:92]
            node _u_result_T_4 = add(_u_result_T_3, UInt<1>("h1")) @[Microcode.scala 160:33]
            node _u_result_T_5 = tail(_u_result_T_4, 1) @[Microcode.scala 160:33]
            node _u_result_T_6 = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
            node _u_result_T_7 = add(_u_result_T_6, UInt<1>("h1")) @[Microcode.scala 161:33]
            node _u_result_T_8 = tail(_u_result_T_7, 1) @[Microcode.scala 161:33]
            node _u_result_T_9 = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 162:23]
            node _u_result_T_10 = tail(_u_result_T_9, 1) @[Microcode.scala 162:23]
            node _u_result_T_11 = eq(UInt<1>("h0"), u_rr_1) @[Mux.scala 81:61]
            node _u_result_T_12 = mux(_u_result_T_11, _u_result_T_2, UInt<16>("h0")) @[Mux.scala 81:58]
            node _u_result_T_13 = eq(UInt<1>("h1"), u_rr_1) @[Mux.scala 81:61]
            node _u_result_T_14 = mux(_u_result_T_13, _u_result_T_5, _u_result_T_12) @[Mux.scala 81:58]
            node _u_result_T_15 = eq(UInt<2>("h2"), u_rr_1) @[Mux.scala 81:61]
            node _u_result_T_16 = mux(_u_result_T_15, _u_result_T_8, _u_result_T_14) @[Mux.scala 81:58]
            node _u_result_T_17 = eq(UInt<2>("h3"), u_rr_1) @[Mux.scala 81:61]
            node u_result = mux(_u_result_T_17, _u_result_T_10, _u_result_T_16) @[Mux.scala 81:58]
            node _u_T_13 = eq(UInt<1>("h0"), u_rr_1) @[Microcode.scala 165:18]
            when _u_T_13 : @[Microcode.scala 165:18]
              node _u_out_B_T_1 = bits(u_result, 15, 8) @[Microcode.scala 166:34]
              u.B <= _u_out_B_T_1 @[Microcode.scala 166:25]
              node _u_out_C_T_1 = bits(u_result, 7, 0) @[Microcode.scala 166:58]
              u.C <= _u_out_C_T_1 @[Microcode.scala 166:49]
            else :
              node _u_T_14 = eq(UInt<1>("h1"), u_rr_1) @[Microcode.scala 165:18]
              when _u_T_14 : @[Microcode.scala 165:18]
                node _u_out_D_T_1 = bits(u_result, 15, 8) @[Microcode.scala 167:34]
                u.D <= _u_out_D_T_1 @[Microcode.scala 167:25]
                node _u_out_E_T_1 = bits(u_result, 7, 0) @[Microcode.scala 167:58]
                u.E <= _u_out_E_T_1 @[Microcode.scala 167:49]
              else :
                node _u_T_15 = eq(UInt<2>("h2"), u_rr_1) @[Microcode.scala 165:18]
                when _u_T_15 : @[Microcode.scala 165:18]
                  node _u_out_H_T_1 = bits(u_result, 15, 8) @[Microcode.scala 168:34]
                  u.H <= _u_out_H_T_1 @[Microcode.scala 168:25]
                  node _u_out_L_T_1 = bits(u_result, 7, 0) @[Microcode.scala 168:58]
                  u.L <= _u_out_L_T_1 @[Microcode.scala 168:49]
                else :
                  node _u_T_16 = eq(UInt<2>("h3"), u_rr_1) @[Microcode.scala 165:18]
                  when _u_T_16 : @[Microcode.scala 165:18]
                    u.SP <= u_result @[Microcode.scala 169:26]
            node _u_T_17 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 171:19]
            when _u_T_17 : @[Microcode.scala 171:28]
              u.done <= UInt<1>("h1") @[Microcode.scala 171:39]
          else :
            node _u_T_18 = and(IR, UInt<8>("hcf")) @[Microcode.scala 176:20]
            node _u_T_19 = eq(_u_T_18, UInt<4>("hb")) @[Microcode.scala 176:31]
            when _u_T_19 : @[Microcode.scala 176:44]
              node _u_rr_T_2 = shr(IR, 4) @[Microcode.scala 177:20]
              node u_rr_2 = and(_u_rr_T_2, UInt<2>("h3")) @[Microcode.scala 177:26]
              node _u_result_T_18 = cat(B_sampled, C_sampled) @[Cat.scala 33:92]
              node _u_result_T_19 = sub(_u_result_T_18, UInt<1>("h1")) @[Microcode.scala 179:33]
              node _u_result_T_20 = tail(_u_result_T_19, 1) @[Microcode.scala 179:33]
              node _u_result_T_21 = cat(D_sampled, E_sampled) @[Cat.scala 33:92]
              node _u_result_T_22 = sub(_u_result_T_21, UInt<1>("h1")) @[Microcode.scala 180:33]
              node _u_result_T_23 = tail(_u_result_T_22, 1) @[Microcode.scala 180:33]
              node _u_result_T_24 = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
              node _u_result_T_25 = sub(_u_result_T_24, UInt<1>("h1")) @[Microcode.scala 181:33]
              node _u_result_T_26 = tail(_u_result_T_25, 1) @[Microcode.scala 181:33]
              node _u_result_T_27 = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 182:23]
              node _u_result_T_28 = tail(_u_result_T_27, 1) @[Microcode.scala 182:23]
              node _u_result_T_29 = eq(UInt<1>("h0"), u_rr_2) @[Mux.scala 81:61]
              node _u_result_T_30 = mux(_u_result_T_29, _u_result_T_20, UInt<16>("h0")) @[Mux.scala 81:58]
              node _u_result_T_31 = eq(UInt<1>("h1"), u_rr_2) @[Mux.scala 81:61]
              node _u_result_T_32 = mux(_u_result_T_31, _u_result_T_23, _u_result_T_30) @[Mux.scala 81:58]
              node _u_result_T_33 = eq(UInt<2>("h2"), u_rr_2) @[Mux.scala 81:61]
              node _u_result_T_34 = mux(_u_result_T_33, _u_result_T_26, _u_result_T_32) @[Mux.scala 81:58]
              node _u_result_T_35 = eq(UInt<2>("h3"), u_rr_2) @[Mux.scala 81:61]
              node u_result_1 = mux(_u_result_T_35, _u_result_T_28, _u_result_T_34) @[Mux.scala 81:58]
              node _u_T_20 = eq(UInt<1>("h0"), u_rr_2) @[Microcode.scala 185:18]
              when _u_T_20 : @[Microcode.scala 185:18]
                node _u_out_B_T_2 = bits(u_result_1, 15, 8) @[Microcode.scala 186:34]
                u.B <= _u_out_B_T_2 @[Microcode.scala 186:25]
                node _u_out_C_T_2 = bits(u_result_1, 7, 0) @[Microcode.scala 186:58]
                u.C <= _u_out_C_T_2 @[Microcode.scala 186:49]
              else :
                node _u_T_21 = eq(UInt<1>("h1"), u_rr_2) @[Microcode.scala 185:18]
                when _u_T_21 : @[Microcode.scala 185:18]
                  node _u_out_D_T_2 = bits(u_result_1, 15, 8) @[Microcode.scala 187:34]
                  u.D <= _u_out_D_T_2 @[Microcode.scala 187:25]
                  node _u_out_E_T_2 = bits(u_result_1, 7, 0) @[Microcode.scala 187:58]
                  u.E <= _u_out_E_T_2 @[Microcode.scala 187:49]
                else :
                  node _u_T_22 = eq(UInt<2>("h2"), u_rr_2) @[Microcode.scala 185:18]
                  when _u_T_22 : @[Microcode.scala 185:18]
                    node _u_out_H_T_2 = bits(u_result_1, 15, 8) @[Microcode.scala 188:34]
                    u.H <= _u_out_H_T_2 @[Microcode.scala 188:25]
                    node _u_out_L_T_2 = bits(u_result_1, 7, 0) @[Microcode.scala 188:58]
                    u.L <= _u_out_L_T_2 @[Microcode.scala 188:49]
                  else :
                    node _u_T_23 = eq(UInt<2>("h3"), u_rr_2) @[Microcode.scala 185:18]
                    when _u_T_23 : @[Microcode.scala 185:18]
                      u.SP <= u_result_1 @[Microcode.scala 189:26]
              node _u_T_24 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 191:19]
              when _u_T_24 : @[Microcode.scala 191:28]
                u.done <= UInt<1>("h1") @[Microcode.scala 191:39]
            else :
              node _u_T_25 = and(IR, UInt<8>("hcf")) @[Microcode.scala 196:20]
              node _u_T_26 = eq(_u_T_25, UInt<4>("h9")) @[Microcode.scala 196:31]
              when _u_T_26 : @[Microcode.scala 196:44]
                node _u_rr_T_3 = shr(IR, 4) @[Microcode.scala 197:20]
                node u_rr_3 = and(_u_rr_T_3, UInt<2>("h3")) @[Microcode.scala 197:26]
                node _u_operand_T = cat(B_sampled, C_sampled) @[Cat.scala 33:92]
                node _u_operand_T_1 = cat(D_sampled, E_sampled) @[Cat.scala 33:92]
                node _u_operand_T_2 = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
                node _u_operand_T_3 = eq(UInt<1>("h0"), u_rr_3) @[Mux.scala 81:61]
                node _u_operand_T_4 = mux(_u_operand_T_3, _u_operand_T, UInt<16>("h0")) @[Mux.scala 81:58]
                node _u_operand_T_5 = eq(UInt<1>("h1"), u_rr_3) @[Mux.scala 81:61]
                node _u_operand_T_6 = mux(_u_operand_T_5, _u_operand_T_1, _u_operand_T_4) @[Mux.scala 81:58]
                node _u_operand_T_7 = eq(UInt<2>("h2"), u_rr_3) @[Mux.scala 81:61]
                node _u_operand_T_8 = mux(_u_operand_T_7, _u_operand_T_2, _u_operand_T_6) @[Mux.scala 81:58]
                node _u_operand_T_9 = eq(UInt<2>("h3"), u_rr_3) @[Mux.scala 81:61]
                node u_operand = mux(_u_operand_T_9, SP_sampled, _u_operand_T_8) @[Mux.scala 81:58]
                node u_hl = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
                node _u_result_T_36 = add(u_hl, u_operand) @[Microcode.scala 206:23]
                node u_result_2 = tail(_u_result_T_36, 1) @[Microcode.scala 206:23]
                node _u_out_H_T_3 = bits(u_result_2, 15, 8) @[Microcode.scala 207:22]
                u.H <= _u_out_H_T_3 @[Microcode.scala 207:13]
                node _u_out_L_T_3 = bits(u_result_2, 7, 0) @[Microcode.scala 208:22]
                u.L <= _u_out_L_T_3 @[Microcode.scala 208:13]
                node _u_halfCarry_T = and(u_hl, UInt<12>("hfff")) @[Microcode.scala 211:28]
                node _u_halfCarry_T_1 = and(u_operand, UInt<12>("hfff")) @[Microcode.scala 211:52]
                node _u_halfCarry_T_2 = add(_u_halfCarry_T, _u_halfCarry_T_1) @[Microcode.scala 211:41]
                node _u_halfCarry_T_3 = tail(_u_halfCarry_T_2, 1) @[Microcode.scala 211:41]
                node u_halfCarry = gt(_u_halfCarry_T_3, UInt<12>("hfff")) @[Microcode.scala 211:66]
                node u_carry = gt(u_result_2, UInt<16>("hffff")) @[Microcode.scala 212:26]
                node _u_T_27 = bits(F_sampled, 7, 7) @[Microcode.scala 213:20]
                node u_out_F_lo = cat(u_carry, UInt<4>("h0")) @[Cat.scala 33:92]
                node u_out_F_hi_hi = cat(_u_T_27, UInt<1>("h0")) @[Cat.scala 33:92]
                node u_out_F_hi = cat(u_out_F_hi_hi, u_halfCarry) @[Cat.scala 33:92]
                node _u_out_F_T = cat(u_out_F_hi, u_out_F_lo) @[Cat.scala 33:92]
                u.F <= _u_out_F_T @[Microcode.scala 103:13]
                node _u_T_28 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 215:19]
                when _u_T_28 : @[Microcode.scala 215:28]
                  u.done <= UInt<1>("h1") @[Microcode.scala 215:39]
              else :
                node _u_T_29 = and(IR, UInt<8>("hc7")) @[Microcode.scala 220:20]
                node _u_T_30 = eq(_u_T_29, UInt<3>("h4")) @[Microcode.scala 220:31]
                node _u_T_31 = shr(IR, 3) @[Microcode.scala 220:51]
                node _u_T_32 = and(_u_T_31, UInt<3>("h7")) @[Microcode.scala 220:57]
                node _u_T_33 = neq(_u_T_32, UInt<3>("h6")) @[Microcode.scala 220:64]
                node _u_T_34 = and(_u_T_30, _u_T_33) @[Microcode.scala 220:43]
                when _u_T_34 : @[Microcode.scala 220:73]
                  node _u_dst_T = shr(IR, 3) @[Microcode.scala 221:21]
                  node u_dst = and(_u_dst_T, UInt<3>("h7")) @[Microcode.scala 221:27]
                  node _u_oldVal_T = eq(UInt<1>("h0"), u_dst) @[Mux.scala 81:61]
                  node _u_oldVal_T_1 = mux(_u_oldVal_T, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                  node _u_oldVal_T_2 = eq(UInt<1>("h1"), u_dst) @[Mux.scala 81:61]
                  node _u_oldVal_T_3 = mux(_u_oldVal_T_2, C_sampled, _u_oldVal_T_1) @[Mux.scala 81:58]
                  node _u_oldVal_T_4 = eq(UInt<2>("h2"), u_dst) @[Mux.scala 81:61]
                  node _u_oldVal_T_5 = mux(_u_oldVal_T_4, D_sampled, _u_oldVal_T_3) @[Mux.scala 81:58]
                  node _u_oldVal_T_6 = eq(UInt<2>("h3"), u_dst) @[Mux.scala 81:61]
                  node _u_oldVal_T_7 = mux(_u_oldVal_T_6, E_sampled, _u_oldVal_T_5) @[Mux.scala 81:58]
                  node _u_oldVal_T_8 = eq(UInt<3>("h4"), u_dst) @[Mux.scala 81:61]
                  node _u_oldVal_T_9 = mux(_u_oldVal_T_8, H_sampled, _u_oldVal_T_7) @[Mux.scala 81:58]
                  node _u_oldVal_T_10 = eq(UInt<3>("h5"), u_dst) @[Mux.scala 81:61]
                  node _u_oldVal_T_11 = mux(_u_oldVal_T_10, L_sampled, _u_oldVal_T_9) @[Mux.scala 81:58]
                  node _u_oldVal_T_12 = eq(UInt<3>("h7"), u_dst) @[Mux.scala 81:61]
                  node u_oldVal = mux(_u_oldVal_T_12, A_sampled, _u_oldVal_T_11) @[Mux.scala 81:58]
                  u_alu.io.op <= UInt<4>("h8") @[Microcode.scala 224:17]
                  u_alu.io.a <= u_oldVal @[Microcode.scala 225:17]
                  u_alu.io.b <= UInt<1>("h0") @[Microcode.scala 226:17]
                  node _u_T_35 = eq(UInt<1>("h0"), u_dst) @[Microcode.scala 91:17]
                  when _u_T_35 : @[Microcode.scala 91:17]
                    u.B <= u_alu.io.out @[Microcode.scala 92:25]
                  else :
                    node _u_T_36 = eq(UInt<1>("h1"), u_dst) @[Microcode.scala 91:17]
                    when _u_T_36 : @[Microcode.scala 91:17]
                      u.C <= u_alu.io.out @[Microcode.scala 93:25]
                    else :
                      node _u_T_37 = eq(UInt<2>("h2"), u_dst) @[Microcode.scala 91:17]
                      when _u_T_37 : @[Microcode.scala 91:17]
                        u.D <= u_alu.io.out @[Microcode.scala 94:25]
                      else :
                        node _u_T_38 = eq(UInt<2>("h3"), u_dst) @[Microcode.scala 91:17]
                        when _u_T_38 : @[Microcode.scala 91:17]
                          u.E <= u_alu.io.out @[Microcode.scala 95:25]
                        else :
                          node _u_T_39 = eq(UInt<3>("h4"), u_dst) @[Microcode.scala 91:17]
                          when _u_T_39 : @[Microcode.scala 91:17]
                            u.H <= u_alu.io.out @[Microcode.scala 96:25]
                          else :
                            node _u_T_40 = eq(UInt<3>("h5"), u_dst) @[Microcode.scala 91:17]
                            when _u_T_40 : @[Microcode.scala 91:17]
                              u.L <= u_alu.io.out @[Microcode.scala 97:25]
                            else :
                              node _u_T_41 = eq(UInt<3>("h7"), u_dst) @[Microcode.scala 91:17]
                              when _u_T_41 : @[Microcode.scala 91:17]
                                u.A <= u_alu.io.out @[Microcode.scala 98:25]
                  node _u_T_42 = bits(F_sampled, 4, 4) @[Microcode.scala 228:62]
                  node u_out_F_lo_1 = cat(_u_T_42, UInt<4>("h0")) @[Cat.scala 33:92]
                  node u_out_F_hi_hi_1 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                  node u_out_F_hi_1 = cat(u_out_F_hi_hi_1, u_alu.io.flagH) @[Cat.scala 33:92]
                  node _u_out_F_T_1 = cat(u_out_F_hi_1, u_out_F_lo_1) @[Cat.scala 33:92]
                  u.F <= _u_out_F_T_1 @[Microcode.scala 103:13]
                  node _u_T_43 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 230:19]
                  when _u_T_43 : @[Microcode.scala 230:28]
                    u.done <= UInt<1>("h1") @[Microcode.scala 230:39]
                else :
                  node _u_T_44 = and(IR, UInt<8>("hc7")) @[Microcode.scala 235:20]
                  node _u_T_45 = eq(_u_T_44, UInt<3>("h5")) @[Microcode.scala 235:31]
                  node _u_T_46 = shr(IR, 3) @[Microcode.scala 235:51]
                  node _u_T_47 = and(_u_T_46, UInt<3>("h7")) @[Microcode.scala 235:57]
                  node _u_T_48 = neq(_u_T_47, UInt<3>("h6")) @[Microcode.scala 235:64]
                  node _u_T_49 = and(_u_T_45, _u_T_48) @[Microcode.scala 235:43]
                  when _u_T_49 : @[Microcode.scala 235:73]
                    node _u_dst_T_1 = shr(IR, 3) @[Microcode.scala 236:21]
                    node u_dst_1 = and(_u_dst_T_1, UInt<3>("h7")) @[Microcode.scala 236:27]
                    node _u_oldVal_T_13 = eq(UInt<1>("h0"), u_dst_1) @[Mux.scala 81:61]
                    node _u_oldVal_T_14 = mux(_u_oldVal_T_13, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                    node _u_oldVal_T_15 = eq(UInt<1>("h1"), u_dst_1) @[Mux.scala 81:61]
                    node _u_oldVal_T_16 = mux(_u_oldVal_T_15, C_sampled, _u_oldVal_T_14) @[Mux.scala 81:58]
                    node _u_oldVal_T_17 = eq(UInt<2>("h2"), u_dst_1) @[Mux.scala 81:61]
                    node _u_oldVal_T_18 = mux(_u_oldVal_T_17, D_sampled, _u_oldVal_T_16) @[Mux.scala 81:58]
                    node _u_oldVal_T_19 = eq(UInt<2>("h3"), u_dst_1) @[Mux.scala 81:61]
                    node _u_oldVal_T_20 = mux(_u_oldVal_T_19, E_sampled, _u_oldVal_T_18) @[Mux.scala 81:58]
                    node _u_oldVal_T_21 = eq(UInt<3>("h4"), u_dst_1) @[Mux.scala 81:61]
                    node _u_oldVal_T_22 = mux(_u_oldVal_T_21, H_sampled, _u_oldVal_T_20) @[Mux.scala 81:58]
                    node _u_oldVal_T_23 = eq(UInt<3>("h5"), u_dst_1) @[Mux.scala 81:61]
                    node _u_oldVal_T_24 = mux(_u_oldVal_T_23, L_sampled, _u_oldVal_T_22) @[Mux.scala 81:58]
                    node _u_oldVal_T_25 = eq(UInt<3>("h7"), u_dst_1) @[Mux.scala 81:61]
                    node u_oldVal_1 = mux(_u_oldVal_T_25, A_sampled, _u_oldVal_T_24) @[Mux.scala 81:58]
                    u_alu.io.op <= UInt<4>("h9") @[Microcode.scala 239:17]
                    u_alu.io.a <= u_oldVal_1 @[Microcode.scala 240:17]
                    u_alu.io.b <= UInt<1>("h0") @[Microcode.scala 241:17]
                    node _u_T_50 = eq(UInt<1>("h0"), u_dst_1) @[Microcode.scala 91:17]
                    when _u_T_50 : @[Microcode.scala 91:17]
                      u.B <= u_alu.io.out @[Microcode.scala 92:25]
                    else :
                      node _u_T_51 = eq(UInt<1>("h1"), u_dst_1) @[Microcode.scala 91:17]
                      when _u_T_51 : @[Microcode.scala 91:17]
                        u.C <= u_alu.io.out @[Microcode.scala 93:25]
                      else :
                        node _u_T_52 = eq(UInt<2>("h2"), u_dst_1) @[Microcode.scala 91:17]
                        when _u_T_52 : @[Microcode.scala 91:17]
                          u.D <= u_alu.io.out @[Microcode.scala 94:25]
                        else :
                          node _u_T_53 = eq(UInt<2>("h3"), u_dst_1) @[Microcode.scala 91:17]
                          when _u_T_53 : @[Microcode.scala 91:17]
                            u.E <= u_alu.io.out @[Microcode.scala 95:25]
                          else :
                            node _u_T_54 = eq(UInt<3>("h4"), u_dst_1) @[Microcode.scala 91:17]
                            when _u_T_54 : @[Microcode.scala 91:17]
                              u.H <= u_alu.io.out @[Microcode.scala 96:25]
                            else :
                              node _u_T_55 = eq(UInt<3>("h5"), u_dst_1) @[Microcode.scala 91:17]
                              when _u_T_55 : @[Microcode.scala 91:17]
                                u.L <= u_alu.io.out @[Microcode.scala 97:25]
                              else :
                                node _u_T_56 = eq(UInt<3>("h7"), u_dst_1) @[Microcode.scala 91:17]
                                when _u_T_56 : @[Microcode.scala 91:17]
                                  u.A <= u_alu.io.out @[Microcode.scala 98:25]
                    node _u_T_57 = bits(F_sampled, 4, 4) @[Microcode.scala 243:62]
                    node u_out_F_lo_2 = cat(_u_T_57, UInt<4>("h0")) @[Cat.scala 33:92]
                    node u_out_F_hi_hi_2 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                    node u_out_F_hi_2 = cat(u_out_F_hi_hi_2, u_alu.io.flagH) @[Cat.scala 33:92]
                    node _u_out_F_T_2 = cat(u_out_F_hi_2, u_out_F_lo_2) @[Cat.scala 33:92]
                    u.F <= _u_out_F_T_2 @[Microcode.scala 103:13]
                    node _u_T_58 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 245:19]
                    when _u_T_58 : @[Microcode.scala 245:28]
                      u.done <= UInt<1>("h1") @[Microcode.scala 245:39]
                  else :
                    node _u_T_59 = eq(IR, UInt<6>("h34")) @[Microcode.scala 250:19]
                    when _u_T_59 : @[Microcode.scala 250:32]
                      node _u_T_60 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 251:22]
                      when _u_T_60 : @[Microcode.scala 251:22]
                        mcBus.memAddr <= u_HL @[Microcode.scala 253:22]
                        mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 254:22]
                        node _u_T_61 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 255:23]
                        when _u_T_61 : @[Microcode.scala 255:32]
                          u.imm8 <= mcBus.memReadData @[Microcode.scala 255:43]
                        node _u_T_62 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 256:23]
                        when _u_T_62 : @[Microcode.scala 256:32]
                          u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 256:50]
                      else :
                        node _u_T_63 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 251:22]
                        when _u_T_63 : @[Microcode.scala 251:22]
                          u_alu.io.op <= UInt<4>("h8") @[Microcode.scala 259:21]
                          u_alu.io.a <= imm8 @[Microcode.scala 260:21]
                          u_alu.io.b <= UInt<1>("h0") @[Microcode.scala 261:21]
                          node _u_T_64 = bits(F_sampled, 4, 4) @[Microcode.scala 262:66]
                          node u_out_F_lo_3 = cat(_u_T_64, UInt<4>("h0")) @[Cat.scala 33:92]
                          node u_out_F_hi_hi_3 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                          node u_out_F_hi_3 = cat(u_out_F_hi_hi_3, u_alu.io.flagH) @[Cat.scala 33:92]
                          node _u_out_F_T_3 = cat(u_out_F_hi_3, u_out_F_lo_3) @[Cat.scala 33:92]
                          u.F <= _u_out_F_T_3 @[Microcode.scala 103:13]
                          node _u_T_65 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 263:23]
                          when _u_T_65 : @[Microcode.scala 263:32]
                            u.imm8 <= u_alu.io.out @[Microcode.scala 263:43]
                          node _u_T_66 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 264:23]
                          when _u_T_66 : @[Microcode.scala 264:32]
                            u.next_mcycle <= UInt<2>("h2") @[Microcode.scala 264:50]
                        else :
                          node _u_T_67 = eq(UInt<2>("h2"), mcycle) @[Microcode.scala 251:22]
                          when _u_T_67 : @[Microcode.scala 251:22]
                            mcBus.memAddr <= u_HL @[Microcode.scala 267:27]
                            mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 268:27]
                            mcBus.memWriteData <= imm8 @[Microcode.scala 269:27]
                            node _u_T_68 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 270:23]
                            when _u_T_68 : @[Microcode.scala 270:32]
                              u.done <= UInt<1>("h1") @[Microcode.scala 270:43]
                    else :
                      node _u_T_69 = eq(IR, UInt<6>("h35")) @[Microcode.scala 277:19]
                      when _u_T_69 : @[Microcode.scala 277:32]
                        node _u_T_70 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 278:22]
                        when _u_T_70 : @[Microcode.scala 278:22]
                          mcBus.memAddr <= u_HL @[Microcode.scala 280:22]
                          mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 281:22]
                          node _u_T_71 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 282:23]
                          when _u_T_71 : @[Microcode.scala 282:32]
                            u.imm8 <= mcBus.memReadData @[Microcode.scala 282:43]
                          node _u_T_72 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 283:23]
                          when _u_T_72 : @[Microcode.scala 283:32]
                            u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 283:50]
                        else :
                          node _u_T_73 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 278:22]
                          when _u_T_73 : @[Microcode.scala 278:22]
                            u_alu.io.op <= UInt<4>("h9") @[Microcode.scala 286:21]
                            u_alu.io.a <= imm8 @[Microcode.scala 287:21]
                            u_alu.io.b <= UInt<1>("h0") @[Microcode.scala 288:21]
                            node _u_T_74 = bits(F_sampled, 4, 4) @[Microcode.scala 289:66]
                            node u_out_F_lo_4 = cat(_u_T_74, UInt<4>("h0")) @[Cat.scala 33:92]
                            node u_out_F_hi_hi_4 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                            node u_out_F_hi_4 = cat(u_out_F_hi_hi_4, u_alu.io.flagH) @[Cat.scala 33:92]
                            node _u_out_F_T_4 = cat(u_out_F_hi_4, u_out_F_lo_4) @[Cat.scala 33:92]
                            u.F <= _u_out_F_T_4 @[Microcode.scala 103:13]
                            node _u_T_75 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 290:23]
                            when _u_T_75 : @[Microcode.scala 290:32]
                              u.imm8 <= u_alu.io.out @[Microcode.scala 290:43]
                            node _u_T_76 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 291:23]
                            when _u_T_76 : @[Microcode.scala 291:32]
                              u.next_mcycle <= UInt<2>("h2") @[Microcode.scala 291:50]
                          else :
                            node _u_T_77 = eq(UInt<2>("h2"), mcycle) @[Microcode.scala 278:22]
                            when _u_T_77 : @[Microcode.scala 278:22]
                              mcBus.memAddr <= u_HL @[Microcode.scala 294:27]
                              mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 295:27]
                              mcBus.memWriteData <= imm8 @[Microcode.scala 296:27]
                              node _u_T_78 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 297:23]
                              when _u_T_78 : @[Microcode.scala 297:32]
                                u.done <= UInt<1>("h1") @[Microcode.scala 297:43]
                      else :
                        node _u_T_79 = geq(IR, UInt<7>("h40")) @[Microcode.scala 304:20]
                        node _u_T_80 = leq(IR, UInt<7>("h7f")) @[Microcode.scala 304:37]
                        node _u_T_81 = and(_u_T_79, _u_T_80) @[Microcode.scala 304:31]
                        node _u_T_82 = neq(IR, UInt<7>("h76")) @[Microcode.scala 305:11]
                        node _u_T_83 = and(_u_T_81, _u_T_82) @[Microcode.scala 304:49]
                        node _u_T_84 = and(IR, UInt<3>("h7")) @[Microcode.scala 306:12]
                        node _u_T_85 = neq(_u_T_84, UInt<3>("h6")) @[Microcode.scala 306:23]
                        node _u_T_86 = and(_u_T_83, _u_T_85) @[Microcode.scala 305:24]
                        node _u_T_87 = and(IR, UInt<8>("hf8")) @[Microcode.scala 307:12]
                        node _u_T_88 = neq(_u_T_87, UInt<7>("h70")) @[Microcode.scala 307:23]
                        node _u_T_89 = and(_u_T_86, _u_T_88) @[Microcode.scala 306:36]
                        when _u_T_89 : @[Microcode.scala 307:37]
                          node _u_dst_T_2 = shr(IR, 3) @[Microcode.scala 308:21]
                          node u_dst_2 = and(_u_dst_T_2, UInt<3>("h7")) @[Microcode.scala 308:27]
                          node u_src = and(IR, UInt<3>("h7")) @[Microcode.scala 309:20]
                          node _u_T_90 = eq(UInt<1>("h0"), u_src) @[Mux.scala 81:61]
                          node _u_T_91 = mux(_u_T_90, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                          node _u_T_92 = eq(UInt<1>("h1"), u_src) @[Mux.scala 81:61]
                          node _u_T_93 = mux(_u_T_92, C_sampled, _u_T_91) @[Mux.scala 81:58]
                          node _u_T_94 = eq(UInt<2>("h2"), u_src) @[Mux.scala 81:61]
                          node _u_T_95 = mux(_u_T_94, D_sampled, _u_T_93) @[Mux.scala 81:58]
                          node _u_T_96 = eq(UInt<2>("h3"), u_src) @[Mux.scala 81:61]
                          node _u_T_97 = mux(_u_T_96, E_sampled, _u_T_95) @[Mux.scala 81:58]
                          node _u_T_98 = eq(UInt<3>("h4"), u_src) @[Mux.scala 81:61]
                          node _u_T_99 = mux(_u_T_98, H_sampled, _u_T_97) @[Mux.scala 81:58]
                          node _u_T_100 = eq(UInt<3>("h5"), u_src) @[Mux.scala 81:61]
                          node _u_T_101 = mux(_u_T_100, L_sampled, _u_T_99) @[Mux.scala 81:58]
                          node _u_T_102 = eq(UInt<3>("h7"), u_src) @[Mux.scala 81:61]
                          node _u_T_103 = mux(_u_T_102, A_sampled, _u_T_101) @[Mux.scala 81:58]
                          node _u_T_104 = eq(UInt<1>("h0"), u_dst_2) @[Microcode.scala 91:17]
                          when _u_T_104 : @[Microcode.scala 91:17]
                            u.B <= _u_T_103 @[Microcode.scala 92:25]
                          else :
                            node _u_T_105 = eq(UInt<1>("h1"), u_dst_2) @[Microcode.scala 91:17]
                            when _u_T_105 : @[Microcode.scala 91:17]
                              u.C <= _u_T_103 @[Microcode.scala 93:25]
                            else :
                              node _u_T_106 = eq(UInt<2>("h2"), u_dst_2) @[Microcode.scala 91:17]
                              when _u_T_106 : @[Microcode.scala 91:17]
                                u.D <= _u_T_103 @[Microcode.scala 94:25]
                              else :
                                node _u_T_107 = eq(UInt<2>("h3"), u_dst_2) @[Microcode.scala 91:17]
                                when _u_T_107 : @[Microcode.scala 91:17]
                                  u.E <= _u_T_103 @[Microcode.scala 95:25]
                                else :
                                  node _u_T_108 = eq(UInt<3>("h4"), u_dst_2) @[Microcode.scala 91:17]
                                  when _u_T_108 : @[Microcode.scala 91:17]
                                    u.H <= _u_T_103 @[Microcode.scala 96:25]
                                  else :
                                    node _u_T_109 = eq(UInt<3>("h5"), u_dst_2) @[Microcode.scala 91:17]
                                    when _u_T_109 : @[Microcode.scala 91:17]
                                      u.L <= _u_T_103 @[Microcode.scala 97:25]
                                    else :
                                      node _u_T_110 = eq(UInt<3>("h7"), u_dst_2) @[Microcode.scala 91:17]
                                      when _u_T_110 : @[Microcode.scala 91:17]
                                        u.A <= _u_T_103 @[Microcode.scala 98:25]
                          node _u_T_111 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 311:19]
                          when _u_T_111 : @[Microcode.scala 311:28]
                            u.done <= UInt<1>("h1") @[Microcode.scala 311:39]
                        else :
                          node _u_T_112 = and(IR, UInt<8>("hc7")) @[Microcode.scala 316:20]
                          node _u_T_113 = eq(_u_T_112, UInt<3>("h6")) @[Microcode.scala 316:31]
                          node _u_T_114 = shr(IR, 3) @[Microcode.scala 316:51]
                          node _u_T_115 = and(_u_T_114, UInt<3>("h7")) @[Microcode.scala 316:57]
                          node _u_T_116 = neq(_u_T_115, UInt<3>("h6")) @[Microcode.scala 316:64]
                          node _u_T_117 = and(_u_T_113, _u_T_116) @[Microcode.scala 316:43]
                          when _u_T_117 : @[Microcode.scala 316:73]
                            node _u_dst_T_3 = shr(IR, 3) @[Microcode.scala 317:21]
                            node u_dst_3 = and(_u_dst_T_3, UInt<3>("h7")) @[Microcode.scala 317:27]
                            node _u_T_118 = eq(UInt<1>("h0"), u_dst_3) @[Microcode.scala 91:17]
                            when _u_T_118 : @[Microcode.scala 91:17]
                              u.B <= imm8 @[Microcode.scala 92:25]
                            else :
                              node _u_T_119 = eq(UInt<1>("h1"), u_dst_3) @[Microcode.scala 91:17]
                              when _u_T_119 : @[Microcode.scala 91:17]
                                u.C <= imm8 @[Microcode.scala 93:25]
                              else :
                                node _u_T_120 = eq(UInt<2>("h2"), u_dst_3) @[Microcode.scala 91:17]
                                when _u_T_120 : @[Microcode.scala 91:17]
                                  u.D <= imm8 @[Microcode.scala 94:25]
                                else :
                                  node _u_T_121 = eq(UInt<2>("h3"), u_dst_3) @[Microcode.scala 91:17]
                                  when _u_T_121 : @[Microcode.scala 91:17]
                                    u.E <= imm8 @[Microcode.scala 95:25]
                                  else :
                                    node _u_T_122 = eq(UInt<3>("h4"), u_dst_3) @[Microcode.scala 91:17]
                                    when _u_T_122 : @[Microcode.scala 91:17]
                                      u.H <= imm8 @[Microcode.scala 96:25]
                                    else :
                                      node _u_T_123 = eq(UInt<3>("h5"), u_dst_3) @[Microcode.scala 91:17]
                                      when _u_T_123 : @[Microcode.scala 91:17]
                                        u.L <= imm8 @[Microcode.scala 97:25]
                                      else :
                                        node _u_T_124 = eq(UInt<3>("h7"), u_dst_3) @[Microcode.scala 91:17]
                                        when _u_T_124 : @[Microcode.scala 91:17]
                                          u.A <= imm8 @[Microcode.scala 98:25]
                            node _u_T_125 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 319:19]
                            when _u_T_125 : @[Microcode.scala 319:28]
                              u.done <= UInt<1>("h1") @[Microcode.scala 319:39]
                          else :
                            node _u_T_126 = geq(IR, UInt<7>("h70")) @[Microcode.scala 326:20]
                            node _u_T_127 = leq(IR, UInt<7>("h75")) @[Microcode.scala 326:37]
                            node _u_T_128 = and(_u_T_126, _u_T_127) @[Microcode.scala 326:31]
                            node _u_T_129 = eq(IR, UInt<7>("h77")) @[Microcode.scala 326:55]
                            node _u_T_130 = or(_u_T_128, _u_T_129) @[Microcode.scala 326:49]
                            when _u_T_130 : @[Microcode.scala 326:68]
                              node u_src_1 = and(IR, UInt<3>("h7")) @[Microcode.scala 327:20]
                              mcBus.memAddr <= u_HL @[Microcode.scala 329:23]
                              node _u_mcBus_memWrite_T = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 330:34]
                              mcBus.memWrite <= _u_mcBus_memWrite_T @[Microcode.scala 330:23]
                              node _u_mcBus_memWriteData_T = eq(UInt<1>("h0"), u_src_1) @[Mux.scala 81:61]
                              node _u_mcBus_memWriteData_T_1 = mux(_u_mcBus_memWriteData_T, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                              node _u_mcBus_memWriteData_T_2 = eq(UInt<1>("h1"), u_src_1) @[Mux.scala 81:61]
                              node _u_mcBus_memWriteData_T_3 = mux(_u_mcBus_memWriteData_T_2, C_sampled, _u_mcBus_memWriteData_T_1) @[Mux.scala 81:58]
                              node _u_mcBus_memWriteData_T_4 = eq(UInt<2>("h2"), u_src_1) @[Mux.scala 81:61]
                              node _u_mcBus_memWriteData_T_5 = mux(_u_mcBus_memWriteData_T_4, D_sampled, _u_mcBus_memWriteData_T_3) @[Mux.scala 81:58]
                              node _u_mcBus_memWriteData_T_6 = eq(UInt<2>("h3"), u_src_1) @[Mux.scala 81:61]
                              node _u_mcBus_memWriteData_T_7 = mux(_u_mcBus_memWriteData_T_6, E_sampled, _u_mcBus_memWriteData_T_5) @[Mux.scala 81:58]
                              node _u_mcBus_memWriteData_T_8 = eq(UInt<3>("h4"), u_src_1) @[Mux.scala 81:61]
                              node _u_mcBus_memWriteData_T_9 = mux(_u_mcBus_memWriteData_T_8, H_sampled, _u_mcBus_memWriteData_T_7) @[Mux.scala 81:58]
                              node _u_mcBus_memWriteData_T_10 = eq(UInt<3>("h5"), u_src_1) @[Mux.scala 81:61]
                              node _u_mcBus_memWriteData_T_11 = mux(_u_mcBus_memWriteData_T_10, L_sampled, _u_mcBus_memWriteData_T_9) @[Mux.scala 81:58]
                              node _u_mcBus_memWriteData_T_12 = eq(UInt<3>("h7"), u_src_1) @[Mux.scala 81:61]
                              node _u_mcBus_memWriteData_T_13 = mux(_u_mcBus_memWriteData_T_12, A_sampled, _u_mcBus_memWriteData_T_11) @[Mux.scala 81:58]
                              mcBus.memWriteData <= _u_mcBus_memWriteData_T_13 @[Microcode.scala 331:23]
                              node _u_T_131 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 333:19]
                              when _u_T_131 : @[Microcode.scala 333:28]
                                u.done <= UInt<1>("h1") @[Microcode.scala 333:39]
                            else :
                              node _u_T_132 = eq(IR, UInt<6>("h36")) @[Microcode.scala 338:19]
                              when _u_T_132 : @[Microcode.scala 338:32]
                                node u_HL_1 = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
                                node _u_T_133 = eq(mcycle, UInt<1>("h0")) @[Microcode.scala 343:19]
                                when _u_T_133 : @[Microcode.scala 343:28]
                                  mcBus.memAddr <= u_HL_1 @[Microcode.scala 344:20]
                                  mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 345:21]
                                  mcBus.memWriteData <= imm8 @[Microcode.scala 346:25]
                                  node _u_T_134 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 348:21]
                                  when _u_T_134 : @[Microcode.scala 348:30]
                                    u.done <= UInt<1>("h1") @[Microcode.scala 349:20]
                              else :
                                node _u_T_135 = eq(IR, UInt<6>("h2a")) @[Microcode.scala 356:19]
                                when _u_T_135 : @[Microcode.scala 356:32]
                                  node _u_T_136 = eq(UInt<1>("h0"), tcycle) @[Microcode.scala 357:22]
                                  when _u_T_136 : @[Microcode.scala 357:22]
                                    mcBus.memAddr <= u_HL @[Microcode.scala 358:30]
                                    mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 358:48]
                                  else :
                                    node _u_T_137 = eq(UInt<1>("h1"), tcycle) @[Microcode.scala 357:22]
                                    when _u_T_137 : @[Microcode.scala 357:22]
                                      mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 359:30]
                                    else :
                                      node _u_T_138 = eq(UInt<2>("h2"), tcycle) @[Microcode.scala 357:22]
                                      when _u_T_138 : @[Microcode.scala 357:22]
                                        u.A <= mcBus.memReadData @[Microcode.scala 361:17]
                                        node _u_newHL_T = add(u_HL, UInt<1>("h1")) @[Microcode.scala 362:26]
                                        node u_newHL = tail(_u_newHL_T, 1) @[Microcode.scala 362:26]
                                        node _u_out_H_T_4 = bits(u_newHL, 15, 8) @[Microcode.scala 363:25]
                                        u.H <= _u_out_H_T_4 @[Microcode.scala 363:17]
                                        node _u_out_L_T_4 = bits(u_newHL, 7, 0) @[Microcode.scala 364:25]
                                        u.L <= _u_out_L_T_4 @[Microcode.scala 364:17]
                                      else :
                                        node _u_T_139 = eq(UInt<2>("h3"), tcycle) @[Microcode.scala 357:22]
                                        when _u_T_139 : @[Microcode.scala 357:22]
                                          u.done <= UInt<1>("h1") @[Microcode.scala 366:28]
                                else :
                                  node _u_T_140 = eq(IR, UInt<6>("h3a")) @[Microcode.scala 372:19]
                                  when _u_T_140 : @[Microcode.scala 372:32]
                                    node _u_T_141 = eq(UInt<1>("h0"), tcycle) @[Microcode.scala 373:22]
                                    when _u_T_141 : @[Microcode.scala 373:22]
                                      mcBus.memAddr <= u_HL @[Microcode.scala 374:30]
                                      mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 374:48]
                                    else :
                                      node _u_T_142 = eq(UInt<1>("h1"), tcycle) @[Microcode.scala 373:22]
                                      when _u_T_142 : @[Microcode.scala 373:22]
                                        mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 375:30]
                                      else :
                                        node _u_T_143 = eq(UInt<2>("h2"), tcycle) @[Microcode.scala 373:22]
                                        when _u_T_143 : @[Microcode.scala 373:22]
                                          u.A <= mcBus.memReadData @[Microcode.scala 377:17]
                                          node _u_newHL_T_1 = sub(u_HL, UInt<1>("h1")) @[Microcode.scala 378:26]
                                          node u_newHL_1 = tail(_u_newHL_T_1, 1) @[Microcode.scala 378:26]
                                          node _u_out_H_T_5 = bits(u_newHL_1, 15, 8) @[Microcode.scala 379:25]
                                          u.H <= _u_out_H_T_5 @[Microcode.scala 379:17]
                                          node _u_out_L_T_5 = bits(u_newHL_1, 7, 0) @[Microcode.scala 380:25]
                                          u.L <= _u_out_L_T_5 @[Microcode.scala 380:17]
                                        else :
                                          node _u_T_144 = eq(UInt<2>("h3"), tcycle) @[Microcode.scala 373:22]
                                          when _u_T_144 : @[Microcode.scala 373:22]
                                            u.done <= UInt<1>("h1") @[Microcode.scala 382:28]
                                  else :
                                    node _u_T_145 = eq(IR, UInt<6>("h22")) @[Microcode.scala 388:19]
                                    when _u_T_145 : @[Microcode.scala 388:32]
                                      node _u_newHL_T_2 = add(u_HL, UInt<1>("h1")) @[Microcode.scala 390:22]
                                      node u_newHL_2 = tail(_u_newHL_T_2, 1) @[Microcode.scala 390:22]
                                      node _u_out_H_T_6 = bits(u_newHL_2, 15, 8) @[Microcode.scala 391:21]
                                      u.H <= _u_out_H_T_6 @[Microcode.scala 391:13]
                                      node _u_out_L_T_6 = bits(u_newHL_2, 7, 0) @[Microcode.scala 392:21]
                                      u.L <= _u_out_L_T_6 @[Microcode.scala 392:13]
                                      node _u_T_146 = eq(tcycle, UInt<1>("h0")) @[Microcode.scala 394:19]
                                      when _u_T_146 : @[Microcode.scala 394:28]
                                        mcBus.memAddr <= u_HL @[Microcode.scala 395:25]
                                        mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 396:25]
                                        mcBus.memWriteData <= A_sampled @[Microcode.scala 397:25]
                                      node _u_T_147 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 399:19]
                                      when _u_T_147 : @[Microcode.scala 399:28]
                                        u.done <= UInt<1>("h1") @[Microcode.scala 399:39]
                                    else :
                                      node _u_T_148 = eq(IR, UInt<6>("h32")) @[Microcode.scala 404:19]
                                      when _u_T_148 : @[Microcode.scala 404:32]
                                        node _u_newHL_T_3 = sub(u_HL, UInt<1>("h1")) @[Microcode.scala 406:22]
                                        node u_newHL_3 = tail(_u_newHL_T_3, 1) @[Microcode.scala 406:22]
                                        node _u_out_H_T_7 = bits(u_newHL_3, 15, 8) @[Microcode.scala 407:21]
                                        u.H <= _u_out_H_T_7 @[Microcode.scala 407:13]
                                        node _u_out_L_T_7 = bits(u_newHL_3, 7, 0) @[Microcode.scala 408:21]
                                        u.L <= _u_out_L_T_7 @[Microcode.scala 408:13]
                                        node _u_T_149 = eq(tcycle, UInt<1>("h0")) @[Microcode.scala 410:19]
                                        when _u_T_149 : @[Microcode.scala 410:28]
                                          mcBus.memAddr <= u_HL @[Microcode.scala 411:25]
                                          mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 412:25]
                                          mcBus.memWriteData <= A_sampled @[Microcode.scala 413:25]
                                        node _u_T_150 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 415:19]
                                        when _u_T_150 : @[Microcode.scala 415:28]
                                          u.done <= UInt<1>("h1") @[Microcode.scala 415:39]
                                      else :
                                        node _u_T_151 = eq(IR, UInt<8>("hf2")) @[Microcode.scala 420:19]
                                        when _u_T_151 : @[Microcode.scala 420:32]
                                          node _u_T_152 = eq(UInt<1>("h0"), tcycle) @[Microcode.scala 421:22]
                                          when _u_T_152 : @[Microcode.scala 421:22]
                                            node _u_mcBus_memAddr_T = cat(UInt<8>("hff"), C_sampled) @[Cat.scala 33:92]
                                            mcBus.memAddr <= _u_mcBus_memAddr_T @[Microcode.scala 423:22]
                                            mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 424:22]
                                          else :
                                            node _u_T_153 = eq(UInt<1>("h1"), tcycle) @[Microcode.scala 421:22]
                                            when _u_T_153 : @[Microcode.scala 421:22]
                                              mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 426:30]
                                            else :
                                              node _u_T_154 = eq(UInt<2>("h2"), tcycle) @[Microcode.scala 421:22]
                                              when _u_T_154 : @[Microcode.scala 421:22]
                                                u.A <= mcBus.memReadData @[Microcode.scala 427:25]
                                              else :
                                                node _u_T_155 = eq(UInt<2>("h3"), tcycle) @[Microcode.scala 421:22]
                                                when _u_T_155 : @[Microcode.scala 421:22]
                                                  u.done <= UInt<1>("h1") @[Microcode.scala 428:28]
                                        else :
                                          node _u_T_156 = eq(IR, UInt<8>("he2")) @[Microcode.scala 434:19]
                                          when _u_T_156 : @[Microcode.scala 434:32]
                                            node _u_T_157 = eq(tcycle, UInt<1>("h0")) @[Microcode.scala 435:19]
                                            when _u_T_157 : @[Microcode.scala 435:28]
                                              node _u_mcBus_memAddr_T_1 = cat(UInt<8>("hff"), C_sampled) @[Cat.scala 33:92]
                                              mcBus.memAddr <= _u_mcBus_memAddr_T_1 @[Microcode.scala 436:25]
                                              mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 437:25]
                                              mcBus.memWriteData <= A_sampled @[Microcode.scala 438:25]
                                            node _u_T_158 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 440:19]
                                            when _u_T_158 : @[Microcode.scala 440:28]
                                              u.done <= UInt<1>("h1") @[Microcode.scala 440:39]
                                          else :
                                            node _u_T_159 = eq(IR, UInt<8>("he0")) @[Microcode.scala 445:19]
                                            when _u_T_159 : @[Microcode.scala 445:32]
                                              node _u_T_160 = eq(tcycle, UInt<1>("h0")) @[Microcode.scala 446:19]
                                              when _u_T_160 : @[Microcode.scala 446:28]
                                                node _u_mcBus_memAddr_T_2 = cat(UInt<8>("hff"), imm8) @[Cat.scala 33:92]
                                                mcBus.memAddr <= _u_mcBus_memAddr_T_2 @[Microcode.scala 447:25]
                                                mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 448:25]
                                                mcBus.memWriteData <= A_sampled @[Microcode.scala 449:25]
                                              node _u_T_161 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 451:19]
                                              when _u_T_161 : @[Microcode.scala 451:28]
                                                u.done <= UInt<1>("h1") @[Microcode.scala 451:39]
                                            else :
                                              node _u_T_162 = eq(IR, UInt<8>("hf0")) @[Microcode.scala 456:19]
                                              when _u_T_162 : @[Microcode.scala 456:32]
                                                node _u_T_163 = eq(UInt<1>("h0"), tcycle) @[Microcode.scala 457:22]
                                                when _u_T_163 : @[Microcode.scala 457:22]
                                                  node _u_mcBus_memAddr_T_3 = cat(UInt<8>("hff"), imm8) @[Cat.scala 33:92]
                                                  mcBus.memAddr <= _u_mcBus_memAddr_T_3 @[Microcode.scala 459:22]
                                                  mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 460:22]
                                                else :
                                                  node _u_T_164 = eq(UInt<1>("h1"), tcycle) @[Microcode.scala 457:22]
                                                  when _u_T_164 : @[Microcode.scala 457:22]
                                                    mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 462:30]
                                                  else :
                                                    node _u_T_165 = eq(UInt<2>("h2"), tcycle) @[Microcode.scala 457:22]
                                                    when _u_T_165 : @[Microcode.scala 457:22]
                                                      u.A <= mcBus.memReadData @[Microcode.scala 463:25]
                                                    else :
                                                      node _u_T_166 = eq(UInt<2>("h3"), tcycle) @[Microcode.scala 457:22]
                                                      when _u_T_166 : @[Microcode.scala 457:22]
                                                        u.done <= UInt<1>("h1") @[Microcode.scala 464:28]
                                              else :
                                                node _u_T_167 = eq(IR, UInt<7>("h46")) @[Microcode.scala 471:19]
                                                node _u_T_168 = eq(IR, UInt<7>("h4e")) @[Microcode.scala 471:37]
                                                node _u_T_169 = or(_u_T_167, _u_T_168) @[Microcode.scala 471:31]
                                                node _u_T_170 = eq(IR, UInt<7>("h56")) @[Microcode.scala 471:55]
                                                node _u_T_171 = or(_u_T_169, _u_T_170) @[Microcode.scala 471:49]
                                                node _u_T_172 = eq(IR, UInt<7>("h5e")) @[Microcode.scala 472:10]
                                                node _u_T_173 = or(_u_T_171, _u_T_172) @[Microcode.scala 471:67]
                                                node _u_T_174 = eq(IR, UInt<7>("h66")) @[Microcode.scala 472:28]
                                                node _u_T_175 = or(_u_T_173, _u_T_174) @[Microcode.scala 472:22]
                                                node _u_T_176 = eq(IR, UInt<7>("h6e")) @[Microcode.scala 472:46]
                                                node _u_T_177 = or(_u_T_175, _u_T_176) @[Microcode.scala 472:40]
                                                node _u_T_178 = eq(IR, UInt<7>("h7e")) @[Microcode.scala 472:64]
                                                node _u_T_179 = or(_u_T_177, _u_T_178) @[Microcode.scala 472:58]
                                                when _u_T_179 : @[Microcode.scala 472:77]
                                                  node _u_dst_T_4 = shr(IR, 3) @[Microcode.scala 473:21]
                                                  node u_dst_4 = and(_u_dst_T_4, UInt<3>("h7")) @[Microcode.scala 473:27]
                                                  mcBus.memAddr <= u_HL @[Microcode.scala 475:18]
                                                  mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 476:18]
                                                  node _u_T_180 = eq(UInt<1>("h0"), u_dst_4) @[Microcode.scala 91:17]
                                                  when _u_T_180 : @[Microcode.scala 91:17]
                                                    u.B <= mcBus.memReadData @[Microcode.scala 92:25]
                                                  else :
                                                    node _u_T_181 = eq(UInt<1>("h1"), u_dst_4) @[Microcode.scala 91:17]
                                                    when _u_T_181 : @[Microcode.scala 91:17]
                                                      u.C <= mcBus.memReadData @[Microcode.scala 93:25]
                                                    else :
                                                      node _u_T_182 = eq(UInt<2>("h2"), u_dst_4) @[Microcode.scala 91:17]
                                                      when _u_T_182 : @[Microcode.scala 91:17]
                                                        u.D <= mcBus.memReadData @[Microcode.scala 94:25]
                                                      else :
                                                        node _u_T_183 = eq(UInt<2>("h3"), u_dst_4) @[Microcode.scala 91:17]
                                                        when _u_T_183 : @[Microcode.scala 91:17]
                                                          u.E <= mcBus.memReadData @[Microcode.scala 95:25]
                                                        else :
                                                          node _u_T_184 = eq(UInt<3>("h4"), u_dst_4) @[Microcode.scala 91:17]
                                                          when _u_T_184 : @[Microcode.scala 91:17]
                                                            u.H <= mcBus.memReadData @[Microcode.scala 96:25]
                                                          else :
                                                            node _u_T_185 = eq(UInt<3>("h5"), u_dst_4) @[Microcode.scala 91:17]
                                                            when _u_T_185 : @[Microcode.scala 91:17]
                                                              u.L <= mcBus.memReadData @[Microcode.scala 97:25]
                                                            else :
                                                              node _u_T_186 = eq(UInt<3>("h7"), u_dst_4) @[Microcode.scala 91:17]
                                                              when _u_T_186 : @[Microcode.scala 91:17]
                                                                u.A <= mcBus.memReadData @[Microcode.scala 98:25]
                                                  node _u_T_187 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 479:19]
                                                  when _u_T_187 : @[Microcode.scala 479:28]
                                                    u.done <= UInt<1>("h1") @[Microcode.scala 479:39]
                                                else :
                                                  node _u_T_188 = geq(IR, UInt<8>("h80")) @[Microcode.scala 484:19]
                                                  node _u_T_189 = leq(IR, UInt<8>("h87")) @[Microcode.scala 484:36]
                                                  node _u_T_190 = and(_u_T_188, _u_T_189) @[Microcode.scala 484:30]
                                                  when _u_T_190 : @[Microcode.scala 484:48]
                                                    node _u_src_T = and(IR, UInt<3>("h7")) @[Microcode.scala 485:28]
                                                    node _u_src_T_1 = eq(UInt<1>("h0"), _u_src_T) @[Mux.scala 81:61]
                                                    node _u_src_T_2 = mux(_u_src_T_1, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                                                    node _u_src_T_3 = eq(UInt<1>("h1"), _u_src_T) @[Mux.scala 81:61]
                                                    node _u_src_T_4 = mux(_u_src_T_3, C_sampled, _u_src_T_2) @[Mux.scala 81:58]
                                                    node _u_src_T_5 = eq(UInt<2>("h2"), _u_src_T) @[Mux.scala 81:61]
                                                    node _u_src_T_6 = mux(_u_src_T_5, D_sampled, _u_src_T_4) @[Mux.scala 81:58]
                                                    node _u_src_T_7 = eq(UInt<2>("h3"), _u_src_T) @[Mux.scala 81:61]
                                                    node _u_src_T_8 = mux(_u_src_T_7, E_sampled, _u_src_T_6) @[Mux.scala 81:58]
                                                    node _u_src_T_9 = eq(UInt<3>("h4"), _u_src_T) @[Mux.scala 81:61]
                                                    node _u_src_T_10 = mux(_u_src_T_9, H_sampled, _u_src_T_8) @[Mux.scala 81:58]
                                                    node _u_src_T_11 = eq(UInt<3>("h5"), _u_src_T) @[Mux.scala 81:61]
                                                    node _u_src_T_12 = mux(_u_src_T_11, L_sampled, _u_src_T_10) @[Mux.scala 81:58]
                                                    node _u_src_T_13 = eq(UInt<3>("h7"), _u_src_T) @[Mux.scala 81:61]
                                                    node u_src_2 = mux(_u_src_T_13, A_sampled, _u_src_T_12) @[Mux.scala 81:58]
                                                    u_alu.io.op <= UInt<4>("h0") @[Microcode.scala 486:17]
                                                    u_alu.io.a <= A_sampled @[Microcode.scala 487:17]
                                                    u_alu.io.b <= u_src_2 @[Microcode.scala 488:17]
                                                    u.A <= u_alu.io.out @[Microcode.scala 489:17]
                                                    node u_out_F_lo_5 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                    node u_out_F_hi_hi_5 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                    node u_out_F_hi_5 = cat(u_out_F_hi_hi_5, u_alu.io.flagH) @[Cat.scala 33:92]
                                                    node _u_out_F_T_5 = cat(u_out_F_hi_5, u_out_F_lo_5) @[Cat.scala 33:92]
                                                    u.F <= _u_out_F_T_5 @[Microcode.scala 103:13]
                                                    node _u_T_191 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 491:19]
                                                    when _u_T_191 : @[Microcode.scala 491:28]
                                                      u.done <= UInt<1>("h1") @[Microcode.scala 491:39]
                                                  else :
                                                    node _u_T_192 = geq(IR, UInt<8>("h88")) @[Microcode.scala 496:19]
                                                    node _u_T_193 = leq(IR, UInt<8>("h8f")) @[Microcode.scala 496:36]
                                                    node _u_T_194 = and(_u_T_192, _u_T_193) @[Microcode.scala 496:30]
                                                    when _u_T_194 : @[Microcode.scala 496:48]
                                                      node _u_src_T_14 = and(IR, UInt<3>("h7")) @[Microcode.scala 497:28]
                                                      node _u_src_T_15 = eq(UInt<1>("h0"), _u_src_T_14) @[Mux.scala 81:61]
                                                      node _u_src_T_16 = mux(_u_src_T_15, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                                                      node _u_src_T_17 = eq(UInt<1>("h1"), _u_src_T_14) @[Mux.scala 81:61]
                                                      node _u_src_T_18 = mux(_u_src_T_17, C_sampled, _u_src_T_16) @[Mux.scala 81:58]
                                                      node _u_src_T_19 = eq(UInt<2>("h2"), _u_src_T_14) @[Mux.scala 81:61]
                                                      node _u_src_T_20 = mux(_u_src_T_19, D_sampled, _u_src_T_18) @[Mux.scala 81:58]
                                                      node _u_src_T_21 = eq(UInt<2>("h3"), _u_src_T_14) @[Mux.scala 81:61]
                                                      node _u_src_T_22 = mux(_u_src_T_21, E_sampled, _u_src_T_20) @[Mux.scala 81:58]
                                                      node _u_src_T_23 = eq(UInt<3>("h4"), _u_src_T_14) @[Mux.scala 81:61]
                                                      node _u_src_T_24 = mux(_u_src_T_23, H_sampled, _u_src_T_22) @[Mux.scala 81:58]
                                                      node _u_src_T_25 = eq(UInt<3>("h5"), _u_src_T_14) @[Mux.scala 81:61]
                                                      node _u_src_T_26 = mux(_u_src_T_25, L_sampled, _u_src_T_24) @[Mux.scala 81:58]
                                                      node _u_src_T_27 = eq(UInt<3>("h7"), _u_src_T_14) @[Mux.scala 81:61]
                                                      node u_src_3 = mux(_u_src_T_27, A_sampled, _u_src_T_26) @[Mux.scala 81:58]
                                                      u_alu.io.op <= UInt<4>("h1") @[Microcode.scala 498:17]
                                                      u_alu.io.a <= A_sampled @[Microcode.scala 499:17]
                                                      u_alu.io.b <= u_src_3 @[Microcode.scala 500:17]
                                                      u.A <= u_alu.io.out @[Microcode.scala 501:17]
                                                      node u_out_F_lo_6 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                      node u_out_F_hi_hi_6 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                      node u_out_F_hi_6 = cat(u_out_F_hi_hi_6, u_alu.io.flagH) @[Cat.scala 33:92]
                                                      node _u_out_F_T_6 = cat(u_out_F_hi_6, u_out_F_lo_6) @[Cat.scala 33:92]
                                                      u.F <= _u_out_F_T_6 @[Microcode.scala 103:13]
                                                      node _u_T_195 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 503:19]
                                                      when _u_T_195 : @[Microcode.scala 503:28]
                                                        u.done <= UInt<1>("h1") @[Microcode.scala 503:39]
                                                    else :
                                                      node _u_T_196 = geq(IR, UInt<8>("h90")) @[Microcode.scala 508:19]
                                                      node _u_T_197 = leq(IR, UInt<8>("h97")) @[Microcode.scala 508:36]
                                                      node _u_T_198 = and(_u_T_196, _u_T_197) @[Microcode.scala 508:30]
                                                      when _u_T_198 : @[Microcode.scala 508:48]
                                                        node _u_src_T_28 = and(IR, UInt<3>("h7")) @[Microcode.scala 509:28]
                                                        node _u_src_T_29 = eq(UInt<1>("h0"), _u_src_T_28) @[Mux.scala 81:61]
                                                        node _u_src_T_30 = mux(_u_src_T_29, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                                                        node _u_src_T_31 = eq(UInt<1>("h1"), _u_src_T_28) @[Mux.scala 81:61]
                                                        node _u_src_T_32 = mux(_u_src_T_31, C_sampled, _u_src_T_30) @[Mux.scala 81:58]
                                                        node _u_src_T_33 = eq(UInt<2>("h2"), _u_src_T_28) @[Mux.scala 81:61]
                                                        node _u_src_T_34 = mux(_u_src_T_33, D_sampled, _u_src_T_32) @[Mux.scala 81:58]
                                                        node _u_src_T_35 = eq(UInt<2>("h3"), _u_src_T_28) @[Mux.scala 81:61]
                                                        node _u_src_T_36 = mux(_u_src_T_35, E_sampled, _u_src_T_34) @[Mux.scala 81:58]
                                                        node _u_src_T_37 = eq(UInt<3>("h4"), _u_src_T_28) @[Mux.scala 81:61]
                                                        node _u_src_T_38 = mux(_u_src_T_37, H_sampled, _u_src_T_36) @[Mux.scala 81:58]
                                                        node _u_src_T_39 = eq(UInt<3>("h5"), _u_src_T_28) @[Mux.scala 81:61]
                                                        node _u_src_T_40 = mux(_u_src_T_39, L_sampled, _u_src_T_38) @[Mux.scala 81:58]
                                                        node _u_src_T_41 = eq(UInt<3>("h7"), _u_src_T_28) @[Mux.scala 81:61]
                                                        node u_src_4 = mux(_u_src_T_41, A_sampled, _u_src_T_40) @[Mux.scala 81:58]
                                                        u_alu.io.op <= UInt<4>("h2") @[Microcode.scala 510:17]
                                                        u_alu.io.a <= A_sampled @[Microcode.scala 511:17]
                                                        u_alu.io.b <= u_src_4 @[Microcode.scala 512:17]
                                                        u.A <= u_alu.io.out @[Microcode.scala 513:17]
                                                        node u_out_F_lo_7 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                        node u_out_F_hi_hi_7 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                        node u_out_F_hi_7 = cat(u_out_F_hi_hi_7, u_alu.io.flagH) @[Cat.scala 33:92]
                                                        node _u_out_F_T_7 = cat(u_out_F_hi_7, u_out_F_lo_7) @[Cat.scala 33:92]
                                                        u.F <= _u_out_F_T_7 @[Microcode.scala 103:13]
                                                        node _u_T_199 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 515:19]
                                                        when _u_T_199 : @[Microcode.scala 515:28]
                                                          u.done <= UInt<1>("h1") @[Microcode.scala 515:39]
                                                      else :
                                                        node _u_T_200 = geq(IR, UInt<8>("h98")) @[Microcode.scala 520:19]
                                                        node _u_T_201 = leq(IR, UInt<8>("h9f")) @[Microcode.scala 520:36]
                                                        node _u_T_202 = and(_u_T_200, _u_T_201) @[Microcode.scala 520:30]
                                                        when _u_T_202 : @[Microcode.scala 520:48]
                                                          node _u_src_T_42 = and(IR, UInt<3>("h7")) @[Microcode.scala 521:28]
                                                          node _u_src_T_43 = eq(UInt<1>("h0"), _u_src_T_42) @[Mux.scala 81:61]
                                                          node _u_src_T_44 = mux(_u_src_T_43, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                                                          node _u_src_T_45 = eq(UInt<1>("h1"), _u_src_T_42) @[Mux.scala 81:61]
                                                          node _u_src_T_46 = mux(_u_src_T_45, C_sampled, _u_src_T_44) @[Mux.scala 81:58]
                                                          node _u_src_T_47 = eq(UInt<2>("h2"), _u_src_T_42) @[Mux.scala 81:61]
                                                          node _u_src_T_48 = mux(_u_src_T_47, D_sampled, _u_src_T_46) @[Mux.scala 81:58]
                                                          node _u_src_T_49 = eq(UInt<2>("h3"), _u_src_T_42) @[Mux.scala 81:61]
                                                          node _u_src_T_50 = mux(_u_src_T_49, E_sampled, _u_src_T_48) @[Mux.scala 81:58]
                                                          node _u_src_T_51 = eq(UInt<3>("h4"), _u_src_T_42) @[Mux.scala 81:61]
                                                          node _u_src_T_52 = mux(_u_src_T_51, H_sampled, _u_src_T_50) @[Mux.scala 81:58]
                                                          node _u_src_T_53 = eq(UInt<3>("h5"), _u_src_T_42) @[Mux.scala 81:61]
                                                          node _u_src_T_54 = mux(_u_src_T_53, L_sampled, _u_src_T_52) @[Mux.scala 81:58]
                                                          node _u_src_T_55 = eq(UInt<3>("h7"), _u_src_T_42) @[Mux.scala 81:61]
                                                          node u_src_5 = mux(_u_src_T_55, A_sampled, _u_src_T_54) @[Mux.scala 81:58]
                                                          u_alu.io.op <= UInt<4>("h3") @[Microcode.scala 522:17]
                                                          u_alu.io.a <= A_sampled @[Microcode.scala 523:17]
                                                          u_alu.io.b <= u_src_5 @[Microcode.scala 524:17]
                                                          u.A <= u_alu.io.out @[Microcode.scala 525:17]
                                                          node u_out_F_lo_8 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                          node u_out_F_hi_hi_8 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                          node u_out_F_hi_8 = cat(u_out_F_hi_hi_8, u_alu.io.flagH) @[Cat.scala 33:92]
                                                          node _u_out_F_T_8 = cat(u_out_F_hi_8, u_out_F_lo_8) @[Cat.scala 33:92]
                                                          u.F <= _u_out_F_T_8 @[Microcode.scala 103:13]
                                                          node _u_T_203 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 527:19]
                                                          when _u_T_203 : @[Microcode.scala 527:28]
                                                            u.done <= UInt<1>("h1") @[Microcode.scala 527:39]
                                                        else :
                                                          node _u_T_204 = geq(IR, UInt<8>("ha0")) @[Microcode.scala 532:19]
                                                          node _u_T_205 = leq(IR, UInt<8>("ha7")) @[Microcode.scala 532:36]
                                                          node _u_T_206 = and(_u_T_204, _u_T_205) @[Microcode.scala 532:30]
                                                          when _u_T_206 : @[Microcode.scala 532:48]
                                                            node _u_src_T_56 = and(IR, UInt<3>("h7")) @[Microcode.scala 533:28]
                                                            node _u_src_T_57 = eq(UInt<1>("h0"), _u_src_T_56) @[Mux.scala 81:61]
                                                            node _u_src_T_58 = mux(_u_src_T_57, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                                                            node _u_src_T_59 = eq(UInt<1>("h1"), _u_src_T_56) @[Mux.scala 81:61]
                                                            node _u_src_T_60 = mux(_u_src_T_59, C_sampled, _u_src_T_58) @[Mux.scala 81:58]
                                                            node _u_src_T_61 = eq(UInt<2>("h2"), _u_src_T_56) @[Mux.scala 81:61]
                                                            node _u_src_T_62 = mux(_u_src_T_61, D_sampled, _u_src_T_60) @[Mux.scala 81:58]
                                                            node _u_src_T_63 = eq(UInt<2>("h3"), _u_src_T_56) @[Mux.scala 81:61]
                                                            node _u_src_T_64 = mux(_u_src_T_63, E_sampled, _u_src_T_62) @[Mux.scala 81:58]
                                                            node _u_src_T_65 = eq(UInt<3>("h4"), _u_src_T_56) @[Mux.scala 81:61]
                                                            node _u_src_T_66 = mux(_u_src_T_65, H_sampled, _u_src_T_64) @[Mux.scala 81:58]
                                                            node _u_src_T_67 = eq(UInt<3>("h5"), _u_src_T_56) @[Mux.scala 81:61]
                                                            node _u_src_T_68 = mux(_u_src_T_67, L_sampled, _u_src_T_66) @[Mux.scala 81:58]
                                                            node _u_src_T_69 = eq(UInt<3>("h7"), _u_src_T_56) @[Mux.scala 81:61]
                                                            node u_src_6 = mux(_u_src_T_69, A_sampled, _u_src_T_68) @[Mux.scala 81:58]
                                                            u_alu.io.op <= UInt<4>("h4") @[Microcode.scala 534:17]
                                                            u_alu.io.a <= A_sampled @[Microcode.scala 535:17]
                                                            u_alu.io.b <= u_src_6 @[Microcode.scala 536:17]
                                                            u.A <= u_alu.io.out @[Microcode.scala 537:17]
                                                            node u_out_F_lo_9 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                            node u_out_F_hi_hi_9 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                            node u_out_F_hi_9 = cat(u_out_F_hi_hi_9, u_alu.io.flagH) @[Cat.scala 33:92]
                                                            node _u_out_F_T_9 = cat(u_out_F_hi_9, u_out_F_lo_9) @[Cat.scala 33:92]
                                                            u.F <= _u_out_F_T_9 @[Microcode.scala 103:13]
                                                            node _u_T_207 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 539:19]
                                                            when _u_T_207 : @[Microcode.scala 539:28]
                                                              u.done <= UInt<1>("h1") @[Microcode.scala 539:39]
                                                          else :
                                                            node _u_T_208 = geq(IR, UInt<8>("ha8")) @[Microcode.scala 544:19]
                                                            node _u_T_209 = leq(IR, UInt<8>("haf")) @[Microcode.scala 544:36]
                                                            node _u_T_210 = and(_u_T_208, _u_T_209) @[Microcode.scala 544:30]
                                                            when _u_T_210 : @[Microcode.scala 544:48]
                                                              node _u_src_T_70 = and(IR, UInt<3>("h7")) @[Microcode.scala 545:28]
                                                              node _u_src_T_71 = eq(UInt<1>("h0"), _u_src_T_70) @[Mux.scala 81:61]
                                                              node _u_src_T_72 = mux(_u_src_T_71, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                                                              node _u_src_T_73 = eq(UInt<1>("h1"), _u_src_T_70) @[Mux.scala 81:61]
                                                              node _u_src_T_74 = mux(_u_src_T_73, C_sampled, _u_src_T_72) @[Mux.scala 81:58]
                                                              node _u_src_T_75 = eq(UInt<2>("h2"), _u_src_T_70) @[Mux.scala 81:61]
                                                              node _u_src_T_76 = mux(_u_src_T_75, D_sampled, _u_src_T_74) @[Mux.scala 81:58]
                                                              node _u_src_T_77 = eq(UInt<2>("h3"), _u_src_T_70) @[Mux.scala 81:61]
                                                              node _u_src_T_78 = mux(_u_src_T_77, E_sampled, _u_src_T_76) @[Mux.scala 81:58]
                                                              node _u_src_T_79 = eq(UInt<3>("h4"), _u_src_T_70) @[Mux.scala 81:61]
                                                              node _u_src_T_80 = mux(_u_src_T_79, H_sampled, _u_src_T_78) @[Mux.scala 81:58]
                                                              node _u_src_T_81 = eq(UInt<3>("h5"), _u_src_T_70) @[Mux.scala 81:61]
                                                              node _u_src_T_82 = mux(_u_src_T_81, L_sampled, _u_src_T_80) @[Mux.scala 81:58]
                                                              node _u_src_T_83 = eq(UInt<3>("h7"), _u_src_T_70) @[Mux.scala 81:61]
                                                              node u_src_7 = mux(_u_src_T_83, A_sampled, _u_src_T_82) @[Mux.scala 81:58]
                                                              u_alu.io.op <= UInt<4>("h6") @[Microcode.scala 546:17]
                                                              u_alu.io.a <= A_sampled @[Microcode.scala 547:17]
                                                              u_alu.io.b <= u_src_7 @[Microcode.scala 548:17]
                                                              u.A <= u_alu.io.out @[Microcode.scala 549:17]
                                                              node u_out_F_lo_10 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                              node u_out_F_hi_hi_10 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                              node u_out_F_hi_10 = cat(u_out_F_hi_hi_10, u_alu.io.flagH) @[Cat.scala 33:92]
                                                              node _u_out_F_T_10 = cat(u_out_F_hi_10, u_out_F_lo_10) @[Cat.scala 33:92]
                                                              u.F <= _u_out_F_T_10 @[Microcode.scala 103:13]
                                                              node _u_T_211 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 551:19]
                                                              when _u_T_211 : @[Microcode.scala 551:28]
                                                                u.done <= UInt<1>("h1") @[Microcode.scala 551:39]
                                                            else :
                                                              node _u_T_212 = geq(IR, UInt<8>("hb0")) @[Microcode.scala 556:19]
                                                              node _u_T_213 = leq(IR, UInt<8>("hb7")) @[Microcode.scala 556:36]
                                                              node _u_T_214 = and(_u_T_212, _u_T_213) @[Microcode.scala 556:30]
                                                              when _u_T_214 : @[Microcode.scala 556:48]
                                                                node _u_src_T_84 = and(IR, UInt<3>("h7")) @[Microcode.scala 557:28]
                                                                node _u_src_T_85 = eq(UInt<1>("h0"), _u_src_T_84) @[Mux.scala 81:61]
                                                                node _u_src_T_86 = mux(_u_src_T_85, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                                                                node _u_src_T_87 = eq(UInt<1>("h1"), _u_src_T_84) @[Mux.scala 81:61]
                                                                node _u_src_T_88 = mux(_u_src_T_87, C_sampled, _u_src_T_86) @[Mux.scala 81:58]
                                                                node _u_src_T_89 = eq(UInt<2>("h2"), _u_src_T_84) @[Mux.scala 81:61]
                                                                node _u_src_T_90 = mux(_u_src_T_89, D_sampled, _u_src_T_88) @[Mux.scala 81:58]
                                                                node _u_src_T_91 = eq(UInt<2>("h3"), _u_src_T_84) @[Mux.scala 81:61]
                                                                node _u_src_T_92 = mux(_u_src_T_91, E_sampled, _u_src_T_90) @[Mux.scala 81:58]
                                                                node _u_src_T_93 = eq(UInt<3>("h4"), _u_src_T_84) @[Mux.scala 81:61]
                                                                node _u_src_T_94 = mux(_u_src_T_93, H_sampled, _u_src_T_92) @[Mux.scala 81:58]
                                                                node _u_src_T_95 = eq(UInt<3>("h5"), _u_src_T_84) @[Mux.scala 81:61]
                                                                node _u_src_T_96 = mux(_u_src_T_95, L_sampled, _u_src_T_94) @[Mux.scala 81:58]
                                                                node _u_src_T_97 = eq(UInt<3>("h7"), _u_src_T_84) @[Mux.scala 81:61]
                                                                node u_src_8 = mux(_u_src_T_97, A_sampled, _u_src_T_96) @[Mux.scala 81:58]
                                                                u_alu.io.op <= UInt<4>("h5") @[Microcode.scala 558:17]
                                                                u_alu.io.a <= A_sampled @[Microcode.scala 559:17]
                                                                u_alu.io.b <= u_src_8 @[Microcode.scala 560:17]
                                                                u.A <= u_alu.io.out @[Microcode.scala 561:17]
                                                                node u_out_F_lo_11 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                node u_out_F_hi_hi_11 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                node u_out_F_hi_11 = cat(u_out_F_hi_hi_11, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                node _u_out_F_T_11 = cat(u_out_F_hi_11, u_out_F_lo_11) @[Cat.scala 33:92]
                                                                u.F <= _u_out_F_T_11 @[Microcode.scala 103:13]
                                                                node _u_T_215 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 563:19]
                                                                when _u_T_215 : @[Microcode.scala 563:28]
                                                                  u.done <= UInt<1>("h1") @[Microcode.scala 563:39]
                                                              else :
                                                                node _u_T_216 = geq(IR, UInt<8>("hb8")) @[Microcode.scala 568:19]
                                                                node _u_T_217 = leq(IR, UInt<8>("hbf")) @[Microcode.scala 568:36]
                                                                node _u_T_218 = and(_u_T_216, _u_T_217) @[Microcode.scala 568:30]
                                                                when _u_T_218 : @[Microcode.scala 568:48]
                                                                  node _u_src_T_98 = and(IR, UInt<3>("h7")) @[Microcode.scala 569:28]
                                                                  node _u_src_T_99 = eq(UInt<1>("h0"), _u_src_T_98) @[Mux.scala 81:61]
                                                                  node _u_src_T_100 = mux(_u_src_T_99, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                                                                  node _u_src_T_101 = eq(UInt<1>("h1"), _u_src_T_98) @[Mux.scala 81:61]
                                                                  node _u_src_T_102 = mux(_u_src_T_101, C_sampled, _u_src_T_100) @[Mux.scala 81:58]
                                                                  node _u_src_T_103 = eq(UInt<2>("h2"), _u_src_T_98) @[Mux.scala 81:61]
                                                                  node _u_src_T_104 = mux(_u_src_T_103, D_sampled, _u_src_T_102) @[Mux.scala 81:58]
                                                                  node _u_src_T_105 = eq(UInt<2>("h3"), _u_src_T_98) @[Mux.scala 81:61]
                                                                  node _u_src_T_106 = mux(_u_src_T_105, E_sampled, _u_src_T_104) @[Mux.scala 81:58]
                                                                  node _u_src_T_107 = eq(UInt<3>("h4"), _u_src_T_98) @[Mux.scala 81:61]
                                                                  node _u_src_T_108 = mux(_u_src_T_107, H_sampled, _u_src_T_106) @[Mux.scala 81:58]
                                                                  node _u_src_T_109 = eq(UInt<3>("h5"), _u_src_T_98) @[Mux.scala 81:61]
                                                                  node _u_src_T_110 = mux(_u_src_T_109, L_sampled, _u_src_T_108) @[Mux.scala 81:58]
                                                                  node _u_src_T_111 = eq(UInt<3>("h7"), _u_src_T_98) @[Mux.scala 81:61]
                                                                  node u_src_9 = mux(_u_src_T_111, A_sampled, _u_src_T_110) @[Mux.scala 81:58]
                                                                  u_alu.io.op <= UInt<4>("h2") @[Microcode.scala 570:17]
                                                                  u_alu.io.a <= A_sampled @[Microcode.scala 571:17]
                                                                  u_alu.io.b <= u_src_9 @[Microcode.scala 572:17]
                                                                  node u_out_F_lo_12 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                  node u_out_F_hi_hi_12 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                  node u_out_F_hi_12 = cat(u_out_F_hi_hi_12, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                  node _u_out_F_T_12 = cat(u_out_F_hi_12, u_out_F_lo_12) @[Cat.scala 33:92]
                                                                  u.F <= _u_out_F_T_12 @[Microcode.scala 103:13]
                                                                  node _u_T_219 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 575:19]
                                                                  when _u_T_219 : @[Microcode.scala 575:28]
                                                                    u.done <= UInt<1>("h1") @[Microcode.scala 575:39]
                                                                else :
                                                                  node _u_T_220 = eq(IR, UInt<8>("hc6")) @[Microcode.scala 580:19]
                                                                  when _u_T_220 : @[Microcode.scala 580:32]
                                                                    u_alu.io.op <= UInt<4>("h0") @[Microcode.scala 581:17]
                                                                    u_alu.io.a <= A_sampled @[Microcode.scala 582:17]
                                                                    u_alu.io.b <= imm8 @[Microcode.scala 583:17]
                                                                    u.A <= u_alu.io.out @[Microcode.scala 584:17]
                                                                    node u_out_F_lo_13 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                    node u_out_F_hi_hi_13 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                    node u_out_F_hi_13 = cat(u_out_F_hi_hi_13, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                    node _u_out_F_T_13 = cat(u_out_F_hi_13, u_out_F_lo_13) @[Cat.scala 33:92]
                                                                    u.F <= _u_out_F_T_13 @[Microcode.scala 103:13]
                                                                    node _u_T_221 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 586:19]
                                                                    when _u_T_221 : @[Microcode.scala 586:28]
                                                                      u.done <= UInt<1>("h1") @[Microcode.scala 586:39]
                                                                  else :
                                                                    node _u_T_222 = eq(IR, UInt<8>("hd6")) @[Microcode.scala 591:19]
                                                                    when _u_T_222 : @[Microcode.scala 591:32]
                                                                      u_alu.io.op <= UInt<4>("h2") @[Microcode.scala 592:17]
                                                                      u_alu.io.a <= A_sampled @[Microcode.scala 593:17]
                                                                      u_alu.io.b <= imm8 @[Microcode.scala 594:17]
                                                                      u.A <= u_alu.io.out @[Microcode.scala 595:17]
                                                                      node u_out_F_lo_14 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                      node u_out_F_hi_hi_14 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                      node u_out_F_hi_14 = cat(u_out_F_hi_hi_14, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                      node _u_out_F_T_14 = cat(u_out_F_hi_14, u_out_F_lo_14) @[Cat.scala 33:92]
                                                                      u.F <= _u_out_F_T_14 @[Microcode.scala 103:13]
                                                                      node _u_T_223 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 597:19]
                                                                      when _u_T_223 : @[Microcode.scala 597:28]
                                                                        u.done <= UInt<1>("h1") @[Microcode.scala 597:39]
                                                                    else :
                                                                      node _u_T_224 = eq(IR, UInt<8>("he6")) @[Microcode.scala 602:19]
                                                                      when _u_T_224 : @[Microcode.scala 602:32]
                                                                        u_alu.io.op <= UInt<4>("h4") @[Microcode.scala 603:17]
                                                                        u_alu.io.a <= A_sampled @[Microcode.scala 604:17]
                                                                        u_alu.io.b <= imm8 @[Microcode.scala 605:17]
                                                                        u.A <= u_alu.io.out @[Microcode.scala 606:17]
                                                                        node u_out_F_lo_15 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                        node u_out_F_hi_hi_15 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                        node u_out_F_hi_15 = cat(u_out_F_hi_hi_15, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                        node _u_out_F_T_15 = cat(u_out_F_hi_15, u_out_F_lo_15) @[Cat.scala 33:92]
                                                                        u.F <= _u_out_F_T_15 @[Microcode.scala 103:13]
                                                                        node _u_T_225 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 608:19]
                                                                        when _u_T_225 : @[Microcode.scala 608:28]
                                                                          u.done <= UInt<1>("h1") @[Microcode.scala 608:39]
                                                                      else :
                                                                        node _u_T_226 = eq(IR, UInt<8>("hee")) @[Microcode.scala 613:19]
                                                                        when _u_T_226 : @[Microcode.scala 613:32]
                                                                          u_alu.io.op <= UInt<4>("h6") @[Microcode.scala 614:17]
                                                                          u_alu.io.a <= A_sampled @[Microcode.scala 615:17]
                                                                          u_alu.io.b <= imm8 @[Microcode.scala 616:17]
                                                                          u.A <= u_alu.io.out @[Microcode.scala 617:17]
                                                                          node u_out_F_lo_16 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                          node u_out_F_hi_hi_16 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                          node u_out_F_hi_16 = cat(u_out_F_hi_hi_16, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                          node _u_out_F_T_16 = cat(u_out_F_hi_16, u_out_F_lo_16) @[Cat.scala 33:92]
                                                                          u.F <= _u_out_F_T_16 @[Microcode.scala 103:13]
                                                                          node _u_T_227 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 619:19]
                                                                          when _u_T_227 : @[Microcode.scala 619:28]
                                                                            u.done <= UInt<1>("h1") @[Microcode.scala 619:39]
                                                                        else :
                                                                          node _u_T_228 = eq(IR, UInt<8>("hf6")) @[Microcode.scala 624:19]
                                                                          when _u_T_228 : @[Microcode.scala 624:32]
                                                                            u_alu.io.op <= UInt<4>("h5") @[Microcode.scala 625:17]
                                                                            u_alu.io.a <= A_sampled @[Microcode.scala 626:17]
                                                                            u_alu.io.b <= imm8 @[Microcode.scala 627:17]
                                                                            u.A <= u_alu.io.out @[Microcode.scala 628:17]
                                                                            node u_out_F_lo_17 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                            node u_out_F_hi_hi_17 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                            node u_out_F_hi_17 = cat(u_out_F_hi_hi_17, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                            node _u_out_F_T_17 = cat(u_out_F_hi_17, u_out_F_lo_17) @[Cat.scala 33:92]
                                                                            u.F <= _u_out_F_T_17 @[Microcode.scala 103:13]
                                                                            node _u_T_229 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 630:19]
                                                                            when _u_T_229 : @[Microcode.scala 630:28]
                                                                              u.done <= UInt<1>("h1") @[Microcode.scala 630:39]
                                                                          else :
                                                                            node _u_T_230 = eq(IR, UInt<8>("hfe")) @[Microcode.scala 635:19]
                                                                            when _u_T_230 : @[Microcode.scala 635:32]
                                                                              u_alu.io.op <= UInt<4>("h2") @[Microcode.scala 636:17]
                                                                              u_alu.io.a <= A_sampled @[Microcode.scala 637:17]
                                                                              u_alu.io.b <= imm8 @[Microcode.scala 638:17]
                                                                              node u_out_F_lo_18 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                              node u_out_F_hi_hi_18 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                              node u_out_F_hi_18 = cat(u_out_F_hi_hi_18, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                              node _u_out_F_T_18 = cat(u_out_F_hi_18, u_out_F_lo_18) @[Cat.scala 33:92]
                                                                              u.F <= _u_out_F_T_18 @[Microcode.scala 103:13]
                                                                              node _u_T_231 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 641:19]
                                                                              when _u_T_231 : @[Microcode.scala 641:28]
                                                                                u.done <= UInt<1>("h1") @[Microcode.scala 641:39]
                                                                            else :
                                                                              node _u_T_232 = eq(IR, UInt<5>("h18")) @[Microcode.scala 646:19]
                                                                              when _u_T_232 : @[Microcode.scala 646:32]
                                                                                node _u_off_T = bits(imm8, 7, 7) @[Microcode.scala 647:28]
                                                                                node _u_off_T_1 = cat(_u_off_T, imm8) @[Cat.scala 33:92]
                                                                                node u_off = asSInt(_u_off_T_1) @[Microcode.scala 647:42]
                                                                                node _u_out_PC_T = asSInt(PC_sampled) @[Microcode.scala 648:25]
                                                                                node _u_out_PC_T_1 = add(_u_out_PC_T, u_off) @[Microcode.scala 648:32]
                                                                                node _u_out_PC_T_2 = tail(_u_out_PC_T_1, 1) @[Microcode.scala 648:32]
                                                                                node _u_out_PC_T_3 = asSInt(_u_out_PC_T_2) @[Microcode.scala 648:32]
                                                                                node _u_out_PC_T_4 = asUInt(_u_out_PC_T_3) @[Microcode.scala 648:39]
                                                                                u.PC <= _u_out_PC_T_4 @[Microcode.scala 648:15]
                                                                                node _u_T_233 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 649:19]
                                                                                when _u_T_233 : @[Microcode.scala 649:28]
                                                                                  u.done <= UInt<1>("h1") @[Microcode.scala 649:39]
                                                                              else :
                                                                                node _u_T_234 = eq(IR, UInt<5>("h10")) @[Microcode.scala 654:19]
                                                                                when _u_T_234 : @[Microcode.scala 654:32]
                                                                                  node _u_T_235 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 655:19]
                                                                                  when _u_T_235 : @[Microcode.scala 655:28]
                                                                                    u.done <= UInt<1>("h1") @[Microcode.scala 655:39]
                                                                                else :
                                                                                  node _u_T_236 = and(IR, UInt<8>("hcf")) @[Microcode.scala 661:20]
                                                                                  node _u_T_237 = eq(_u_T_236, UInt<8>("hc5")) @[Microcode.scala 661:31]
                                                                                  when _u_T_237 : @[Microcode.scala 661:44]
                                                                                    node _u_rr_T_4 = shr(IR, 4) @[Microcode.scala 662:20]
                                                                                    node u_rr_4 = and(_u_rr_T_4, UInt<2>("h3")) @[Microcode.scala 662:26]
                                                                                    node _u_regPair_T = cat(B_sampled, C_sampled) @[Cat.scala 33:92]
                                                                                    node _u_regPair_T_1 = cat(D_sampled, E_sampled) @[Cat.scala 33:92]
                                                                                    node _u_regPair_T_2 = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
                                                                                    node _u_regPair_T_3 = cat(A_sampled, F_sampled) @[Cat.scala 33:92]
                                                                                    node _u_regPair_T_4 = eq(UInt<1>("h0"), u_rr_4) @[Mux.scala 81:61]
                                                                                    node _u_regPair_T_5 = mux(_u_regPair_T_4, _u_regPair_T, UInt<16>("h0")) @[Mux.scala 81:58]
                                                                                    node _u_regPair_T_6 = eq(UInt<1>("h1"), u_rr_4) @[Mux.scala 81:61]
                                                                                    node _u_regPair_T_7 = mux(_u_regPair_T_6, _u_regPair_T_1, _u_regPair_T_5) @[Mux.scala 81:58]
                                                                                    node _u_regPair_T_8 = eq(UInt<2>("h2"), u_rr_4) @[Mux.scala 81:61]
                                                                                    node _u_regPair_T_9 = mux(_u_regPair_T_8, _u_regPair_T_2, _u_regPair_T_7) @[Mux.scala 81:58]
                                                                                    node _u_regPair_T_10 = eq(UInt<2>("h3"), u_rr_4) @[Mux.scala 81:61]
                                                                                    node u_regPair = mux(_u_regPair_T_10, _u_regPair_T_3, _u_regPair_T_9) @[Mux.scala 81:58]
                                                                                    node _u_T_238 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 670:22]
                                                                                    when _u_T_238 : @[Microcode.scala 670:22]
                                                                                      node _u_sp1_T = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 672:27]
                                                                                      node u_sp1 = tail(_u_sp1_T, 1) @[Microcode.scala 672:27]
                                                                                      mcBus.memAddr <= u_sp1 @[Microcode.scala 673:27]
                                                                                      mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 674:27]
                                                                                      node _u_mcBus_memWriteData_T_14 = bits(u_regPair, 15, 8) @[Microcode.scala 675:37]
                                                                                      mcBus.memWriteData <= _u_mcBus_memWriteData_T_14 @[Microcode.scala 675:27]
                                                                                      u.SP <= u_sp1 @[Microcode.scala 676:18]
                                                                                      node _u_T_239 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 677:23]
                                                                                      when _u_T_239 : @[Microcode.scala 677:32]
                                                                                        u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 678:29]
                                                                                    else :
                                                                                      node _u_T_240 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 670:22]
                                                                                      when _u_T_240 : @[Microcode.scala 670:22]
                                                                                        node _u_sp2_T = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 682:27]
                                                                                        node u_sp2 = tail(_u_sp2_T, 1) @[Microcode.scala 682:27]
                                                                                        mcBus.memAddr <= u_sp2 @[Microcode.scala 683:27]
                                                                                        mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 684:27]
                                                                                        node _u_mcBus_memWriteData_T_15 = bits(u_regPair, 7, 0) @[Microcode.scala 685:37]
                                                                                        mcBus.memWriteData <= _u_mcBus_memWriteData_T_15 @[Microcode.scala 685:27]
                                                                                        u.SP <= u_sp2 @[Microcode.scala 686:18]
                                                                                        node _u_T_241 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 687:23]
                                                                                        when _u_T_241 : @[Microcode.scala 687:32]
                                                                                          u.done <= UInt<1>("h1") @[Microcode.scala 688:22]
                                                                                  else :
                                                                                    node _u_T_242 = and(IR, UInt<8>("hcf")) @[Microcode.scala 697:20]
                                                                                    node _u_T_243 = eq(_u_T_242, UInt<8>("hc1")) @[Microcode.scala 697:31]
                                                                                    when _u_T_243 : @[Microcode.scala 697:44]
                                                                                      node _u_rr_T_5 = shr(IR, 4) @[Microcode.scala 698:20]
                                                                                      node u_rr_5 = and(_u_rr_T_5, UInt<2>("h3")) @[Microcode.scala 698:26]
                                                                                      node _u_T_244 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 700:22]
                                                                                      when _u_T_244 : @[Microcode.scala 700:22]
                                                                                        mcBus.memAddr <= SP_sampled @[Microcode.scala 702:22]
                                                                                        mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 703:22]
                                                                                        u.imm8 <= mcBus.memReadData @[Microcode.scala 704:20]
                                                                                        node _u_out_SP_T = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 705:27]
                                                                                        node _u_out_SP_T_1 = tail(_u_out_SP_T, 1) @[Microcode.scala 705:27]
                                                                                        u.SP <= _u_out_SP_T_1 @[Microcode.scala 705:18]
                                                                                        node _u_T_245 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 706:23]
                                                                                        when _u_T_245 : @[Microcode.scala 706:32]
                                                                                          u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 707:29]
                                                                                      else :
                                                                                        node _u_T_246 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 700:22]
                                                                                        when _u_T_246 : @[Microcode.scala 700:22]
                                                                                          mcBus.memAddr <= SP_sampled @[Microcode.scala 711:22]
                                                                                          mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 712:22]
                                                                                          node _u_T_247 = eq(UInt<1>("h0"), u_rr_5) @[Microcode.scala 716:22]
                                                                                          when _u_T_247 : @[Microcode.scala 716:22]
                                                                                            u.B <= mcBus.memReadData @[Microcode.scala 717:29]
                                                                                            u.C <= imm8 @[Microcode.scala 717:44]
                                                                                          else :
                                                                                            node _u_T_248 = eq(UInt<1>("h1"), u_rr_5) @[Microcode.scala 716:22]
                                                                                            when _u_T_248 : @[Microcode.scala 716:22]
                                                                                              u.D <= mcBus.memReadData @[Microcode.scala 718:29]
                                                                                              u.E <= imm8 @[Microcode.scala 718:44]
                                                                                            else :
                                                                                              node _u_T_249 = eq(UInt<2>("h2"), u_rr_5) @[Microcode.scala 716:22]
                                                                                              when _u_T_249 : @[Microcode.scala 716:22]
                                                                                                u.H <= mcBus.memReadData @[Microcode.scala 719:29]
                                                                                                u.L <= imm8 @[Microcode.scala 719:44]
                                                                                              else :
                                                                                                node _u_T_250 = eq(UInt<2>("h3"), u_rr_5) @[Microcode.scala 716:22]
                                                                                                when _u_T_250 : @[Microcode.scala 716:22]
                                                                                                  u.A <= mcBus.memReadData @[Microcode.scala 720:29]
                                                                                                  u.F <= imm8 @[Microcode.scala 720:44]
                                                                                          node _u_out_SP_T_2 = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 722:27]
                                                                                          node _u_out_SP_T_3 = tail(_u_out_SP_T_2, 1) @[Microcode.scala 722:27]
                                                                                          u.SP <= _u_out_SP_T_3 @[Microcode.scala 722:18]
                                                                                          node _u_T_251 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 723:23]
                                                                                          when _u_T_251 : @[Microcode.scala 723:32]
                                                                                            u.done <= UInt<1>("h1") @[Microcode.scala 724:22]
                                                                                    else :
                                                                                      node _u_T_252 = eq(IR, UInt<8>("hcd")) @[Microcode.scala 733:19]
                                                                                      when _u_T_252 : @[Microcode.scala 733:32]
                                                                                        node _u_T_253 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 734:22]
                                                                                        when _u_T_253 : @[Microcode.scala 734:22]
                                                                                          node _u_sp1_T_1 = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 736:27]
                                                                                          node u_sp1_1 = tail(_u_sp1_T_1, 1) @[Microcode.scala 736:27]
                                                                                          mcBus.memAddr <= u_sp1_1 @[Microcode.scala 737:27]
                                                                                          mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 738:27]
                                                                                          node _u_mcBus_memWriteData_T_16 = bits(PC_sampled, 15, 8) @[Microcode.scala 739:35]
                                                                                          mcBus.memWriteData <= _u_mcBus_memWriteData_T_16 @[Microcode.scala 739:27]
                                                                                          u.SP <= u_sp1_1 @[Microcode.scala 740:18]
                                                                                          node _u_T_254 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 741:23]
                                                                                          when _u_T_254 : @[Microcode.scala 741:32]
                                                                                            u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 741:50]
                                                                                        else :
                                                                                          node _u_T_255 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 734:22]
                                                                                          when _u_T_255 : @[Microcode.scala 734:22]
                                                                                            node _u_sp2_T_1 = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 744:27]
                                                                                            node u_sp2_1 = tail(_u_sp2_T_1, 1) @[Microcode.scala 744:27]
                                                                                            mcBus.memAddr <= u_sp2_1 @[Microcode.scala 745:27]
                                                                                            mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 746:27]
                                                                                            node _u_mcBus_memWriteData_T_17 = bits(PC_sampled, 7, 0) @[Microcode.scala 747:35]
                                                                                            mcBus.memWriteData <= _u_mcBus_memWriteData_T_17 @[Microcode.scala 747:27]
                                                                                            u.SP <= u_sp2_1 @[Microcode.scala 748:18]
                                                                                            node _u_T_256 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 749:23]
                                                                                            when _u_T_256 : @[Microcode.scala 749:32]
                                                                                              u.next_mcycle <= UInt<2>("h2") @[Microcode.scala 749:50]
                                                                                          else :
                                                                                            node _u_T_257 = eq(UInt<2>("h2"), mcycle) @[Microcode.scala 734:22]
                                                                                            when _u_T_257 : @[Microcode.scala 734:22]
                                                                                              u.PC <= imm16 @[Microcode.scala 752:18]
                                                                                              node _u_T_258 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 753:23]
                                                                                              when _u_T_258 : @[Microcode.scala 753:32]
                                                                                                u.done <= UInt<1>("h1") @[Microcode.scala 753:43]
                                                                                      else :
                                                                                        node _u_T_259 = eq(IR, UInt<8>("hc9")) @[Microcode.scala 760:19]
                                                                                        when _u_T_259 : @[Microcode.scala 760:32]
                                                                                          node _u_T_260 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 761:22]
                                                                                          when _u_T_260 : @[Microcode.scala 761:22]
                                                                                            mcBus.memAddr <= SP_sampled @[Microcode.scala 763:22]
                                                                                            mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 764:22]
                                                                                            u.imm8 <= mcBus.memReadData @[Microcode.scala 765:20]
                                                                                            node _u_T_261 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 766:23]
                                                                                            when _u_T_261 : @[Microcode.scala 766:32]
                                                                                              node _u_out_SP_T_4 = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 767:29]
                                                                                              node _u_out_SP_T_5 = tail(_u_out_SP_T_4, 1) @[Microcode.scala 767:29]
                                                                                              u.SP <= _u_out_SP_T_5 @[Microcode.scala 767:20]
                                                                                              u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 768:29]
                                                                                          else :
                                                                                            node _u_T_262 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 761:22]
                                                                                            when _u_T_262 : @[Microcode.scala 761:22]
                                                                                              mcBus.memAddr <= SP_sampled @[Microcode.scala 772:22]
                                                                                              mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 773:22]
                                                                                              node _u_out_PC_T_5 = cat(mcBus.memReadData, imm8) @[Cat.scala 33:92]
                                                                                              u.PC <= _u_out_PC_T_5 @[Microcode.scala 775:18]
                                                                                              node _u_T_263 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 776:23]
                                                                                              when _u_T_263 : @[Microcode.scala 776:32]
                                                                                                node _u_out_SP_T_6 = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 777:29]
                                                                                                node _u_out_SP_T_7 = tail(_u_out_SP_T_6, 1) @[Microcode.scala 777:29]
                                                                                                u.SP <= _u_out_SP_T_7 @[Microcode.scala 777:20]
                                                                                                u.done <= UInt<1>("h1") @[Microcode.scala 778:22]
                                                                                        else :
                                                                                          node _u_T_264 = eq(IR, UInt<8>("hd9")) @[Microcode.scala 788:19]
                                                                                          when _u_T_264 : @[Microcode.scala 788:32]
                                                                                            node _u_T_265 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 789:22]
                                                                                            when _u_T_265 : @[Microcode.scala 789:22]
                                                                                              mcBus.memAddr <= SP_sampled @[Microcode.scala 791:22]
                                                                                              mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 792:22]
                                                                                              u.imm8 <= mcBus.memReadData @[Microcode.scala 793:20]
                                                                                              node _u_T_266 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 794:23]
                                                                                              when _u_T_266 : @[Microcode.scala 794:32]
                                                                                                node _u_out_SP_T_8 = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 795:29]
                                                                                                node _u_out_SP_T_9 = tail(_u_out_SP_T_8, 1) @[Microcode.scala 795:29]
                                                                                                u.SP <= _u_out_SP_T_9 @[Microcode.scala 795:20]
                                                                                                u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 796:29]
                                                                                            else :
                                                                                              node _u_T_267 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 789:22]
                                                                                              when _u_T_267 : @[Microcode.scala 789:22]
                                                                                                mcBus.memAddr <= SP_sampled @[Microcode.scala 800:22]
                                                                                                mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 801:22]
                                                                                                node _u_out_PC_T_6 = cat(mcBus.memReadData, imm8) @[Cat.scala 33:92]
                                                                                                u.PC <= _u_out_PC_T_6 @[Microcode.scala 803:18]
                                                                                                u.IME <= UInt<1>("h1") @[Microcode.scala 804:19]
                                                                                                node _u_T_268 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 805:23]
                                                                                                when _u_T_268 : @[Microcode.scala 805:32]
                                                                                                  node _u_out_SP_T_10 = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 806:29]
                                                                                                  node _u_out_SP_T_11 = tail(_u_out_SP_T_10, 1) @[Microcode.scala 806:29]
                                                                                                  u.SP <= _u_out_SP_T_11 @[Microcode.scala 806:20]
                                                                                                  u.done <= UInt<1>("h1") @[Microcode.scala 807:22]
                                                                                          else :
                                                                                            node _u_T_269 = and(IR, UInt<8>("hc7")) @[Microcode.scala 816:20]
                                                                                            node _u_T_270 = eq(_u_T_269, UInt<8>("hc7")) @[Microcode.scala 816:31]
                                                                                            when _u_T_270 : @[Microcode.scala 816:44]
                                                                                              node u_vec = and(IR, UInt<6>("h38")) @[Microcode.scala 817:21]
                                                                                              node _u_T_271 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 818:22]
                                                                                              when _u_T_271 : @[Microcode.scala 818:22]
                                                                                                node _u_sp1_T_2 = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 820:27]
                                                                                                node u_sp1_2 = tail(_u_sp1_T_2, 1) @[Microcode.scala 820:27]
                                                                                                mcBus.memAddr <= u_sp1_2 @[Microcode.scala 821:27]
                                                                                                mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 822:27]
                                                                                                node _u_mcBus_memWriteData_T_18 = bits(PC_sampled, 15, 8) @[Microcode.scala 823:35]
                                                                                                mcBus.memWriteData <= _u_mcBus_memWriteData_T_18 @[Microcode.scala 823:27]
                                                                                                u.SP <= u_sp1_2 @[Microcode.scala 824:18]
                                                                                                node _u_T_272 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 825:23]
                                                                                                when _u_T_272 : @[Microcode.scala 825:32]
                                                                                                  u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 825:50]
                                                                                              else :
                                                                                                node _u_T_273 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 818:22]
                                                                                                when _u_T_273 : @[Microcode.scala 818:22]
                                                                                                  node _u_sp2_T_2 = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 828:27]
                                                                                                  node u_sp2_2 = tail(_u_sp2_T_2, 1) @[Microcode.scala 828:27]
                                                                                                  mcBus.memAddr <= u_sp2_2 @[Microcode.scala 829:27]
                                                                                                  mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 830:27]
                                                                                                  node _u_mcBus_memWriteData_T_19 = bits(PC_sampled, 7, 0) @[Microcode.scala 831:35]
                                                                                                  mcBus.memWriteData <= _u_mcBus_memWriteData_T_19 @[Microcode.scala 831:27]
                                                                                                  u.PC <= u_vec @[Microcode.scala 832:18]
                                                                                                  u.SP <= u_sp2_2 @[Microcode.scala 833:18]
                                                                                                  node _u_T_274 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 834:23]
                                                                                                  when _u_T_274 : @[Microcode.scala 834:32]
                                                                                                    u.done <= UInt<1>("h1") @[Microcode.scala 834:43]
                                                                                            else :
                                                                                              node _u_T_275 = eq(IR, UInt<8>("hfb")) @[Microcode.scala 841:19]
                                                                                              when _u_T_275 : @[Microcode.scala 841:32]
                                                                                                u.IME_pending <= UInt<1>("h1") @[Microcode.scala 842:23]
                                                                                                node _u_T_276 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 843:19]
                                                                                                when _u_T_276 : @[Microcode.scala 843:28]
                                                                                                  u.done <= UInt<1>("h1") @[Microcode.scala 843:39]
                                                                                              else :
                                                                                                node _u_T_277 = eq(IR, UInt<8>("hf3")) @[Microcode.scala 848:19]
                                                                                                when _u_T_277 : @[Microcode.scala 848:32]
                                                                                                  u.IME <= UInt<1>("h0") @[Microcode.scala 849:15]
                                                                                                  u.IME_pending <= UInt<1>("h0") @[Microcode.scala 850:23]
                                                                                                  node _u_T_278 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 851:19]
                                                                                                  when _u_T_278 : @[Microcode.scala 851:28]
                                                                                                    u.done <= UInt<1>("h1") @[Microcode.scala 851:39]
                                                                                                else :
                                                                                                  node _u_T_279 = and(IR, UInt<8>("he7")) @[Microcode.scala 856:20]
                                                                                                  node _u_T_280 = eq(_u_T_279, UInt<6>("h20")) @[Microcode.scala 856:31]
                                                                                                  when _u_T_280 : @[Microcode.scala 856:44]
                                                                                                    node _u_cc_T = shr(IR, 3) @[Microcode.scala 857:20]
                                                                                                    node u_cc = and(_u_cc_T, UInt<2>("h3")) @[Microcode.scala 857:26]
                                                                                                    node u_flagZ = bits(F_sampled, 7, 7) @[Microcode.scala 858:23]
                                                                                                    node u_flagC = bits(F_sampled, 4, 4) @[Microcode.scala 859:23]
                                                                                                    node _u_condition_T = eq(u_flagZ, UInt<1>("h0")) @[Microcode.scala 862:16]
                                                                                                    node _u_condition_T_1 = eq(u_flagC, UInt<1>("h0")) @[Microcode.scala 864:16]
                                                                                                    node _u_condition_T_2 = eq(UInt<1>("h0"), u_cc) @[Mux.scala 81:61]
                                                                                                    node _u_condition_T_3 = mux(_u_condition_T_2, _u_condition_T, UInt<1>("h0")) @[Mux.scala 81:58]
                                                                                                    node _u_condition_T_4 = eq(UInt<1>("h1"), u_cc) @[Mux.scala 81:61]
                                                                                                    node _u_condition_T_5 = mux(_u_condition_T_4, u_flagZ, _u_condition_T_3) @[Mux.scala 81:58]
                                                                                                    node _u_condition_T_6 = eq(UInt<2>("h2"), u_cc) @[Mux.scala 81:61]
                                                                                                    node _u_condition_T_7 = mux(_u_condition_T_6, _u_condition_T_1, _u_condition_T_5) @[Mux.scala 81:58]
                                                                                                    node _u_condition_T_8 = eq(UInt<2>("h3"), u_cc) @[Mux.scala 81:61]
                                                                                                    node u_condition = mux(_u_condition_T_8, u_flagC, _u_condition_T_7) @[Mux.scala 81:58]
                                                                                                    when u_condition : @[Microcode.scala 868:23]
                                                                                                      node _u_off_T_2 = bits(imm8, 7, 7) @[Microcode.scala 869:30]
                                                                                                      node _u_off_T_3 = cat(_u_off_T_2, imm8) @[Cat.scala 33:92]
                                                                                                      node u_off_1 = asSInt(_u_off_T_3) @[Microcode.scala 869:44]
                                                                                                      node _u_out_PC_T_7 = asSInt(PC_sampled) @[Microcode.scala 870:26]
                                                                                                      node _u_out_PC_T_8 = add(_u_out_PC_T_7, u_off_1) @[Microcode.scala 870:33]
                                                                                                      node _u_out_PC_T_9 = tail(_u_out_PC_T_8, 1) @[Microcode.scala 870:33]
                                                                                                      node _u_out_PC_T_10 = asSInt(_u_out_PC_T_9) @[Microcode.scala 870:33]
                                                                                                      node _u_out_PC_T_11 = asUInt(_u_out_PC_T_10) @[Microcode.scala 870:40]
                                                                                                      u.PC <= _u_out_PC_T_11 @[Microcode.scala 870:16]
                                                                                                    node _u_T_281 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 872:19]
                                                                                                    when _u_T_281 : @[Microcode.scala 872:28]
                                                                                                      u.done <= UInt<1>("h1") @[Microcode.scala 872:39]
                                                                                                  else :
                                                                                                    node _u_T_282 = and(IR, UInt<8>("he7")) @[Microcode.scala 877:20]
                                                                                                    node _u_T_283 = eq(_u_T_282, UInt<8>("hc2")) @[Microcode.scala 877:31]
                                                                                                    when _u_T_283 : @[Microcode.scala 877:44]
                                                                                                      node _u_cc_T_1 = shr(IR, 3) @[Microcode.scala 878:20]
                                                                                                      node u_cc_1 = and(_u_cc_T_1, UInt<2>("h3")) @[Microcode.scala 878:26]
                                                                                                      node u_flagZ_1 = bits(F_sampled, 7, 7) @[Microcode.scala 879:23]
                                                                                                      node u_flagC_1 = bits(F_sampled, 4, 4) @[Microcode.scala 880:23]
                                                                                                      node _u_condition_T_9 = eq(u_flagZ_1, UInt<1>("h0")) @[Microcode.scala 883:16]
                                                                                                      node _u_condition_T_10 = eq(u_flagC_1, UInt<1>("h0")) @[Microcode.scala 885:16]
                                                                                                      node _u_condition_T_11 = eq(UInt<1>("h0"), u_cc_1) @[Mux.scala 81:61]
                                                                                                      node _u_condition_T_12 = mux(_u_condition_T_11, _u_condition_T_9, UInt<1>("h0")) @[Mux.scala 81:58]
                                                                                                      node _u_condition_T_13 = eq(UInt<1>("h1"), u_cc_1) @[Mux.scala 81:61]
                                                                                                      node _u_condition_T_14 = mux(_u_condition_T_13, u_flagZ_1, _u_condition_T_12) @[Mux.scala 81:58]
                                                                                                      node _u_condition_T_15 = eq(UInt<2>("h2"), u_cc_1) @[Mux.scala 81:61]
                                                                                                      node _u_condition_T_16 = mux(_u_condition_T_15, _u_condition_T_10, _u_condition_T_14) @[Mux.scala 81:58]
                                                                                                      node _u_condition_T_17 = eq(UInt<2>("h3"), u_cc_1) @[Mux.scala 81:61]
                                                                                                      node u_condition_1 = mux(_u_condition_T_17, u_flagC_1, _u_condition_T_16) @[Mux.scala 81:58]
                                                                                                      when u_condition_1 : @[Microcode.scala 889:23]
                                                                                                        u.PC <= imm16 @[Microcode.scala 890:16]
                                                                                                      node _u_T_284 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 892:19]
                                                                                                      when _u_T_284 : @[Microcode.scala 892:28]
                                                                                                        u.done <= UInt<1>("h1") @[Microcode.scala 892:39]
                                                                                                    else :
                                                                                                      node _u_T_285 = and(IR, UInt<8>("he7")) @[Microcode.scala 898:20]
                                                                                                      node _u_T_286 = eq(_u_T_285, UInt<8>("hc4")) @[Microcode.scala 898:31]
                                                                                                      when _u_T_286 : @[Microcode.scala 898:44]
                                                                                                        node _u_cc_T_2 = shr(IR, 3) @[Microcode.scala 899:20]
                                                                                                        node u_cc_2 = and(_u_cc_T_2, UInt<2>("h3")) @[Microcode.scala 899:26]
                                                                                                        node u_flagZ_2 = bits(F_sampled, 7, 7) @[Microcode.scala 900:23]
                                                                                                        node u_flagC_2 = bits(F_sampled, 4, 4) @[Microcode.scala 901:23]
                                                                                                        node _u_condition_T_18 = eq(u_flagZ_2, UInt<1>("h0")) @[Microcode.scala 904:16]
                                                                                                        node _u_condition_T_19 = eq(u_flagC_2, UInt<1>("h0")) @[Microcode.scala 906:16]
                                                                                                        node _u_condition_T_20 = eq(UInt<1>("h0"), u_cc_2) @[Mux.scala 81:61]
                                                                                                        node _u_condition_T_21 = mux(_u_condition_T_20, _u_condition_T_18, UInt<1>("h0")) @[Mux.scala 81:58]
                                                                                                        node _u_condition_T_22 = eq(UInt<1>("h1"), u_cc_2) @[Mux.scala 81:61]
                                                                                                        node _u_condition_T_23 = mux(_u_condition_T_22, u_flagZ_2, _u_condition_T_21) @[Mux.scala 81:58]
                                                                                                        node _u_condition_T_24 = eq(UInt<2>("h2"), u_cc_2) @[Mux.scala 81:61]
                                                                                                        node _u_condition_T_25 = mux(_u_condition_T_24, _u_condition_T_19, _u_condition_T_23) @[Mux.scala 81:58]
                                                                                                        node _u_condition_T_26 = eq(UInt<2>("h3"), u_cc_2) @[Mux.scala 81:61]
                                                                                                        node u_condition_2 = mux(_u_condition_T_26, u_flagC_2, _u_condition_T_25) @[Mux.scala 81:58]
                                                                                                        when u_condition_2 : @[Microcode.scala 910:23]
                                                                                                          node _u_T_287 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 911:24]
                                                                                                          when _u_T_287 : @[Microcode.scala 911:24]
                                                                                                            node _u_sp1_T_3 = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 913:29]
                                                                                                            node u_sp1_3 = tail(_u_sp1_T_3, 1) @[Microcode.scala 913:29]
                                                                                                            mcBus.memAddr <= u_sp1_3 @[Microcode.scala 914:29]
                                                                                                            mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 915:29]
                                                                                                            node _u_mcBus_memWriteData_T_20 = bits(PC_sampled, 15, 8) @[Microcode.scala 916:37]
                                                                                                            mcBus.memWriteData <= _u_mcBus_memWriteData_T_20 @[Microcode.scala 916:29]
                                                                                                            u.SP <= u_sp1_3 @[Microcode.scala 917:20]
                                                                                                            node _u_T_288 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 918:25]
                                                                                                            when _u_T_288 : @[Microcode.scala 918:34]
                                                                                                              u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 918:52]
                                                                                                          else :
                                                                                                            node _u_T_289 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 911:24]
                                                                                                            when _u_T_289 : @[Microcode.scala 911:24]
                                                                                                              node _u_sp2_T_3 = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 921:29]
                                                                                                              node u_sp2_3 = tail(_u_sp2_T_3, 1) @[Microcode.scala 921:29]
                                                                                                              mcBus.memAddr <= u_sp2_3 @[Microcode.scala 922:29]
                                                                                                              mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 923:29]
                                                                                                              node _u_mcBus_memWriteData_T_21 = bits(PC_sampled, 7, 0) @[Microcode.scala 924:37]
                                                                                                              mcBus.memWriteData <= _u_mcBus_memWriteData_T_21 @[Microcode.scala 924:29]
                                                                                                              u.PC <= imm16 @[Microcode.scala 925:20]
                                                                                                              u.SP <= u_sp2_3 @[Microcode.scala 926:20]
                                                                                                              node _u_T_290 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 927:25]
                                                                                                              when _u_T_290 : @[Microcode.scala 927:34]
                                                                                                                u.done <= UInt<1>("h1") @[Microcode.scala 927:45]
                                                                                                        else :
                                                                                                          node _u_T_291 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 931:21]
                                                                                                          when _u_T_291 : @[Microcode.scala 931:30]
                                                                                                            u.done <= UInt<1>("h1") @[Microcode.scala 931:41]
                                                                                                      else :
                                                                                                        node _u_T_292 = and(IR, UInt<8>("he7")) @[Microcode.scala 938:20]
                                                                                                        node _u_T_293 = eq(_u_T_292, UInt<8>("hc0")) @[Microcode.scala 938:31]
                                                                                                        when _u_T_293 : @[Microcode.scala 938:44]
                                                                                                          node _u_cc_T_3 = shr(IR, 3) @[Microcode.scala 939:20]
                                                                                                          node u_cc_3 = and(_u_cc_T_3, UInt<2>("h3")) @[Microcode.scala 939:26]
                                                                                                          node u_flagZ_3 = bits(F_sampled, 7, 7) @[Microcode.scala 940:23]
                                                                                                          node u_flagC_3 = bits(F_sampled, 4, 4) @[Microcode.scala 941:23]
                                                                                                          node _u_condition_T_27 = eq(u_flagZ_3, UInt<1>("h0")) @[Microcode.scala 944:16]
                                                                                                          node _u_condition_T_28 = eq(u_flagC_3, UInt<1>("h0")) @[Microcode.scala 946:16]
                                                                                                          node _u_condition_T_29 = eq(UInt<1>("h0"), u_cc_3) @[Mux.scala 81:61]
                                                                                                          node _u_condition_T_30 = mux(_u_condition_T_29, _u_condition_T_27, UInt<1>("h0")) @[Mux.scala 81:58]
                                                                                                          node _u_condition_T_31 = eq(UInt<1>("h1"), u_cc_3) @[Mux.scala 81:61]
                                                                                                          node _u_condition_T_32 = mux(_u_condition_T_31, u_flagZ_3, _u_condition_T_30) @[Mux.scala 81:58]
                                                                                                          node _u_condition_T_33 = eq(UInt<2>("h2"), u_cc_3) @[Mux.scala 81:61]
                                                                                                          node _u_condition_T_34 = mux(_u_condition_T_33, _u_condition_T_28, _u_condition_T_32) @[Mux.scala 81:58]
                                                                                                          node _u_condition_T_35 = eq(UInt<2>("h3"), u_cc_3) @[Mux.scala 81:61]
                                                                                                          node u_condition_3 = mux(_u_condition_T_35, u_flagC_3, _u_condition_T_34) @[Mux.scala 81:58]
                                                                                                          when u_condition_3 : @[Microcode.scala 950:23]
                                                                                                            node _u_T_294 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 951:24]
                                                                                                            when _u_T_294 : @[Microcode.scala 951:24]
                                                                                                              mcBus.memAddr <= SP_sampled @[Microcode.scala 953:24]
                                                                                                              mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 954:24]
                                                                                                              u.imm8 <= mcBus.memReadData @[Microcode.scala 955:22]
                                                                                                              node _u_T_295 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 956:25]
                                                                                                              when _u_T_295 : @[Microcode.scala 956:34]
                                                                                                                node _u_out_SP_T_12 = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 957:31]
                                                                                                                node _u_out_SP_T_13 = tail(_u_out_SP_T_12, 1) @[Microcode.scala 957:31]
                                                                                                                u.SP <= _u_out_SP_T_13 @[Microcode.scala 957:22]
                                                                                                                u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 958:31]
                                                                                                            else :
                                                                                                              node _u_T_296 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 951:24]
                                                                                                              when _u_T_296 : @[Microcode.scala 951:24]
                                                                                                                mcBus.memAddr <= SP_sampled @[Microcode.scala 962:24]
                                                                                                                mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 963:24]
                                                                                                                node _u_out_PC_T_12 = cat(mcBus.memReadData, imm8) @[Cat.scala 33:92]
                                                                                                                u.PC <= _u_out_PC_T_12 @[Microcode.scala 965:20]
                                                                                                                node _u_T_297 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 966:25]
                                                                                                                when _u_T_297 : @[Microcode.scala 966:34]
                                                                                                                  node _u_out_SP_T_14 = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 967:31]
                                                                                                                  node _u_out_SP_T_15 = tail(_u_out_SP_T_14, 1) @[Microcode.scala 967:31]
                                                                                                                  u.SP <= _u_out_SP_T_15 @[Microcode.scala 967:22]
                                                                                                                  u.done <= UInt<1>("h1") @[Microcode.scala 968:24]
                                                                                                          else :
                                                                                                            node _u_T_298 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 973:21]
                                                                                                            when _u_T_298 : @[Microcode.scala 973:30]
                                                                                                              u.done <= UInt<1>("h1") @[Microcode.scala 973:41]
                                                                                                        else :
                                                                                                          node _u_T_299 = eq(IR, UInt<8>("hc3")) @[Microcode.scala 979:19]
                                                                                                          when _u_T_299 : @[Microcode.scala 979:32]
                                                                                                            u.PC <= imm16 @[Microcode.scala 980:14]
                                                                                                            node _u_T_300 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 981:19]
                                                                                                            when _u_T_300 : @[Microcode.scala 981:28]
                                                                                                              u.done <= UInt<1>("h1") @[Microcode.scala 981:39]
                                                                                                          else :
                                                                                                            node _u_T_301 = eq(IR, UInt<6>("h37")) @[Microcode.scala 984:19]
                                                                                                            when _u_T_301 : @[Microcode.scala 984:32]
                                                                                                              node _u_out_F_T_19 = bits(F_sampled, 7, 7) @[Microcode.scala 985:24]
                                                                                                              node u_out_F_lo_19 = cat(UInt<1>("h1"), UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                                              node u_out_F_hi_hi_19 = cat(_u_out_F_T_19, UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                              node u_out_F_hi_19 = cat(u_out_F_hi_hi_19, UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                              node _u_out_F_T_20 = cat(u_out_F_hi_19, u_out_F_lo_19) @[Cat.scala 33:92]
                                                                                                              u.F <= _u_out_F_T_20 @[Microcode.scala 985:13]
                                                                                                              node _u_T_302 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 986:19]
                                                                                                              when _u_T_302 : @[Microcode.scala 986:28]
                                                                                                                u.done <= UInt<1>("h1") @[Microcode.scala 986:39]
                                                                                                            else :
                                                                                                              node _u_T_303 = eq(IR, UInt<6>("h3f")) @[Microcode.scala 989:19]
                                                                                                              when _u_T_303 : @[Microcode.scala 989:32]
                                                                                                                node _u_out_F_T_21 = bits(F_sampled, 7, 7) @[Microcode.scala 990:24]
                                                                                                                node _u_out_F_T_22 = bits(F_sampled, 4, 4) @[Microcode.scala 990:52]
                                                                                                                node _u_out_F_T_23 = eq(_u_out_F_T_22, UInt<1>("h0")) @[Microcode.scala 990:47]
                                                                                                                node u_out_F_lo_20 = cat(_u_out_F_T_23, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                                                node u_out_F_hi_hi_20 = cat(_u_out_F_T_21, UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                                node u_out_F_hi_20 = cat(u_out_F_hi_hi_20, UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                                node _u_out_F_T_24 = cat(u_out_F_hi_20, u_out_F_lo_20) @[Cat.scala 33:92]
                                                                                                                u.F <= _u_out_F_T_24 @[Microcode.scala 990:13]
                                                                                                                node _u_T_304 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 991:19]
                                                                                                                when _u_T_304 : @[Microcode.scala 991:28]
                                                                                                                  u.done <= UInt<1>("h1") @[Microcode.scala 991:39]
                                                                                                              else :
                                                                                                                node _u_T_305 = eq(IR, UInt<6>("h2f")) @[Microcode.scala 994:19]
                                                                                                                when _u_T_305 : @[Microcode.scala 994:32]
                                                                                                                  node _u_out_A_T = not(A_sampled) @[Microcode.scala 995:16]
                                                                                                                  u.A <= _u_out_A_T @[Microcode.scala 995:13]
                                                                                                                  node _u_out_F_T_25 = bits(F_sampled, 7, 7) @[Microcode.scala 996:24]
                                                                                                                  node _u_out_F_T_26 = bits(F_sampled, 4, 4) @[Microcode.scala 996:49]
                                                                                                                  node u_out_F_lo_21 = cat(_u_out_F_T_26, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                                                  node u_out_F_hi_hi_21 = cat(_u_out_F_T_25, UInt<1>("h1")) @[Cat.scala 33:92]
                                                                                                                  node u_out_F_hi_21 = cat(u_out_F_hi_hi_21, UInt<1>("h1")) @[Cat.scala 33:92]
                                                                                                                  node _u_out_F_T_27 = cat(u_out_F_hi_21, u_out_F_lo_21) @[Cat.scala 33:92]
                                                                                                                  u.F <= _u_out_F_T_27 @[Microcode.scala 996:13]
                                                                                                                  node _u_T_306 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 997:19]
                                                                                                                  when _u_T_306 : @[Microcode.scala 997:28]
                                                                                                                    u.done <= UInt<1>("h1") @[Microcode.scala 997:39]
                                                                                                                else :
                                                                                                                  node _u_T_307 = eq(IR, UInt<6>("h27")) @[Microcode.scala 1001:19]
                                                                                                                  when _u_T_307 : @[Microcode.scala 1001:32]
                                                                                                                    node u_N = bits(F_sampled, 6, 6) @[Microcode.scala 1002:19]
                                                                                                                    node u_H = bits(F_sampled, 5, 5) @[Microcode.scala 1003:19]
                                                                                                                    node u_C = bits(F_sampled, 4, 4) @[Microcode.scala 1004:19]
                                                                                                                    wire u_adjusted : UInt<8> @[Microcode.scala 1006:26]
                                                                                                                    wire u_newCarry : UInt<1> @[Microcode.scala 1007:26]
                                                                                                                    wire u_correction : UInt<8> @[Microcode.scala 1008:28]
                                                                                                                    u_correction <= UInt<1>("h0") @[Microcode.scala 1010:18]
                                                                                                                    u_adjusted <= A_sampled @[Microcode.scala 1011:16]
                                                                                                                    u_newCarry <= u_C @[Microcode.scala 1012:16]
                                                                                                                    node _u_T_308 = eq(u_N, UInt<1>("h0")) @[Microcode.scala 1014:12]
                                                                                                                    when _u_T_308 : @[Microcode.scala 1014:16]
                                                                                                                      wire u_upperCorrect : UInt<8> @[Microcode.scala 1016:32]
                                                                                                                      wire u_lowerCorrect : UInt<8> @[Microcode.scala 1017:32]
                                                                                                                      u_upperCorrect <= UInt<1>("h0") @[Microcode.scala 1019:22]
                                                                                                                      u_lowerCorrect <= UInt<1>("h0") @[Microcode.scala 1020:22]
                                                                                                                      node _u_T_309 = gt(A_sampled, UInt<8>("h99")) @[Microcode.scala 1023:25]
                                                                                                                      node _u_T_310 = or(u_C, _u_T_309) @[Microcode.scala 1023:16]
                                                                                                                      when _u_T_310 : @[Microcode.scala 1023:36]
                                                                                                                        u_upperCorrect <= UInt<7>("h60") @[Microcode.scala 1024:24]
                                                                                                                        u_newCarry <= UInt<1>("h1") @[Microcode.scala 1025:20]
                                                                                                                      node _u_T_311 = and(A_sampled, UInt<4>("hf")) @[Microcode.scala 1029:26]
                                                                                                                      node _u_T_312 = gt(_u_T_311, UInt<4>("h9")) @[Microcode.scala 1029:36]
                                                                                                                      node _u_T_313 = or(u_H, _u_T_312) @[Microcode.scala 1029:16]
                                                                                                                      when _u_T_313 : @[Microcode.scala 1029:47]
                                                                                                                        u_lowerCorrect <= UInt<3>("h6") @[Microcode.scala 1030:24]
                                                                                                                      node _u_correction_T = add(u_upperCorrect, u_lowerCorrect) @[Microcode.scala 1033:36]
                                                                                                                      node _u_correction_T_1 = tail(_u_correction_T, 1) @[Microcode.scala 1033:36]
                                                                                                                      u_correction <= _u_correction_T_1 @[Microcode.scala 1033:20]
                                                                                                                      node _u_adjusted_T = add(A_sampled, u_correction) @[Microcode.scala 1034:26]
                                                                                                                      node _u_adjusted_T_1 = tail(_u_adjusted_T, 1) @[Microcode.scala 1034:26]
                                                                                                                      u_adjusted <= _u_adjusted_T_1 @[Microcode.scala 1034:18]
                                                                                                                    else :
                                                                                                                      wire u_upperCorrect_1 : UInt<8> @[Microcode.scala 1038:32]
                                                                                                                      wire u_lowerCorrect_1 : UInt<8> @[Microcode.scala 1039:32]
                                                                                                                      u_upperCorrect_1 <= UInt<1>("h0") @[Microcode.scala 1041:22]
                                                                                                                      u_lowerCorrect_1 <= UInt<1>("h0") @[Microcode.scala 1042:22]
                                                                                                                      when u_C : @[Microcode.scala 1044:17]
                                                                                                                        u_upperCorrect_1 <= UInt<7>("h60") @[Microcode.scala 1045:24]
                                                                                                                      when u_H : @[Microcode.scala 1047:17]
                                                                                                                        u_lowerCorrect_1 <= UInt<3>("h6") @[Microcode.scala 1048:24]
                                                                                                                      node _u_correction_T_2 = add(u_upperCorrect_1, u_lowerCorrect_1) @[Microcode.scala 1051:36]
                                                                                                                      node _u_correction_T_3 = tail(_u_correction_T_2, 1) @[Microcode.scala 1051:36]
                                                                                                                      u_correction <= _u_correction_T_3 @[Microcode.scala 1051:20]
                                                                                                                      node _u_adjusted_T_2 = sub(A_sampled, u_correction) @[Microcode.scala 1052:26]
                                                                                                                      node _u_adjusted_T_3 = tail(_u_adjusted_T_2, 1) @[Microcode.scala 1052:26]
                                                                                                                      u_adjusted <= _u_adjusted_T_3 @[Microcode.scala 1052:18]
                                                                                                                      u_newCarry <= u_C @[Microcode.scala 1053:18]
                                                                                                                    u.A <= u_adjusted @[Microcode.scala 1056:13]
                                                                                                                    node _u_T_314 = eq(u_adjusted, UInt<1>("h0")) @[Microcode.scala 1057:25]
                                                                                                                    node u_out_F_lo_22 = cat(u_newCarry, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                                                    node u_out_F_hi_hi_22 = cat(_u_T_314, u_N) @[Cat.scala 33:92]
                                                                                                                    node u_out_F_hi_22 = cat(u_out_F_hi_hi_22, UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                                    node _u_out_F_T_28 = cat(u_out_F_hi_22, u_out_F_lo_22) @[Cat.scala 33:92]
                                                                                                                    u.F <= _u_out_F_T_28 @[Microcode.scala 103:13]
                                                                                                                    node _u_T_315 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1058:19]
                                                                                                                    when _u_T_315 : @[Microcode.scala 1058:28]
                                                                                                                      u.done <= UInt<1>("h1") @[Microcode.scala 1058:39]
                                                                                                                  else :
                                                                                                                    node _u_T_316 = eq(IR, UInt<8>("hfa")) @[Microcode.scala 1065:19]
                                                                                                                    when _u_T_316 : @[Microcode.scala 1065:32]
                                                                                                                      node _u_T_317 = eq(mcycle, UInt<1>("h0")) @[Microcode.scala 1066:19]
                                                                                                                      when _u_T_317 : @[Microcode.scala 1066:28]
                                                                                                                        mcBus.memAddr <= imm16 @[Microcode.scala 1067:20]
                                                                                                                        mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 1068:20]
                                                                                                                        node _u_T_318 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1070:21]
                                                                                                                        when _u_T_318 : @[Microcode.scala 1070:30]
                                                                                                                          u.A <= mcBus.memReadData @[Microcode.scala 1071:17]
                                                                                                                          u.done <= UInt<1>("h1") @[Microcode.scala 1072:20]
                                                                                                                    else :
                                                                                                                      node _u_T_319 = eq(IR, UInt<8>("hea")) @[Microcode.scala 1081:19]
                                                                                                                      when _u_T_319 : @[Microcode.scala 1081:32]
                                                                                                                        node _u_T_320 = eq(mcycle, UInt<1>("h0")) @[Microcode.scala 1082:19]
                                                                                                                        when _u_T_320 : @[Microcode.scala 1082:28]
                                                                                                                          mcBus.memAddr <= imm16 @[Microcode.scala 1083:20]
                                                                                                                          node _u_mcBus_memWrite_T_1 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 1084:32]
                                                                                                                          mcBus.memWrite <= _u_mcBus_memWrite_T_1 @[Microcode.scala 1084:21]
                                                                                                                          mcBus.memWriteData <= A_sampled @[Microcode.scala 1085:25]
                                                                                                                          node _u_T_321 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1087:21]
                                                                                                                          when _u_T_321 : @[Microcode.scala 1087:30]
                                                                                                                            u.done <= UInt<1>("h1") @[Microcode.scala 1088:20]
                                                                                                                      else :
                                                                                                                        node _u_T_322 = eq(IR, UInt<4>("h8")) @[Microcode.scala 1098:19]
                                                                                                                        when _u_T_322 : @[Microcode.scala 1098:32]
                                                                                                                          node _u_T_323 = eq(mcycle, UInt<1>("h0")) @[Microcode.scala 1099:19]
                                                                                                                          when _u_T_323 : @[Microcode.scala 1099:28]
                                                                                                                            mcBus.memAddr <= imm16 @[Microcode.scala 1100:20]
                                                                                                                            node _u_mcBus_memWrite_T_2 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 1101:32]
                                                                                                                            mcBus.memWrite <= _u_mcBus_memWrite_T_2 @[Microcode.scala 1101:21]
                                                                                                                            node _u_mcBus_memWriteData_T_22 = bits(SP_sampled, 7, 0) @[Microcode.scala 1102:33]
                                                                                                                            mcBus.memWriteData <= _u_mcBus_memWriteData_T_22 @[Microcode.scala 1102:25]
                                                                                                                            node _u_T_324 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1104:21]
                                                                                                                            when _u_T_324 : @[Microcode.scala 1104:30]
                                                                                                                              u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 1105:27]
                                                                                                                          else :
                                                                                                                            node _u_T_325 = eq(mcycle, UInt<1>("h1")) @[Microcode.scala 1107:25]
                                                                                                                            when _u_T_325 : @[Microcode.scala 1107:34]
                                                                                                                              node _u_mcBus_memAddr_T_4 = add(imm16, UInt<1>("h1")) @[Microcode.scala 1108:32]
                                                                                                                              node _u_mcBus_memAddr_T_5 = tail(_u_mcBus_memAddr_T_4, 1) @[Microcode.scala 1108:32]
                                                                                                                              mcBus.memAddr <= _u_mcBus_memAddr_T_5 @[Microcode.scala 1108:20]
                                                                                                                              node _u_mcBus_memWrite_T_3 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 1109:32]
                                                                                                                              mcBus.memWrite <= _u_mcBus_memWrite_T_3 @[Microcode.scala 1109:21]
                                                                                                                              node _u_mcBus_memWriteData_T_23 = bits(SP_sampled, 15, 8) @[Microcode.scala 1110:33]
                                                                                                                              mcBus.memWriteData <= _u_mcBus_memWriteData_T_23 @[Microcode.scala 1110:25]
                                                                                                                              node _u_T_326 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1112:21]
                                                                                                                              when _u_T_326 : @[Microcode.scala 1112:30]
                                                                                                                                u.done <= UInt<1>("h1") @[Microcode.scala 1113:20]
                                                                                                                        else :
                                                                                                                          node _u_T_327 = eq(IR, UInt<8>("hf9")) @[Microcode.scala 1121:19]
                                                                                                                          when _u_T_327 : @[Microcode.scala 1121:32]
                                                                                                                            u.SP <= u_HL @[Microcode.scala 1122:14]
                                                                                                                            node _u_T_328 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1123:19]
                                                                                                                            when _u_T_328 : @[Microcode.scala 1123:28]
                                                                                                                              u.done <= UInt<1>("h1") @[Microcode.scala 1123:39]
                                                                                                                          else :
                                                                                                                            node _u_T_329 = eq(IR, UInt<8>("hf8")) @[Microcode.scala 1126:19]
                                                                                                                            when _u_T_329 : @[Microcode.scala 1126:32]
                                                                                                                              node _u_offset_signed_T = bits(imm8, 7, 7) @[Microcode.scala 1127:46]
                                                                                                                              node _u_offset_signed_T_1 = bits(_u_offset_signed_T, 0, 0) @[Bitwise.scala 77:15]
                                                                                                                              node _u_offset_signed_T_2 = mux(_u_offset_signed_T_1, UInt<8>("hff"), UInt<8>("h0")) @[Bitwise.scala 77:12]
                                                                                                                              node _u_offset_signed_T_3 = cat(_u_offset_signed_T_2, imm8) @[Cat.scala 33:92]
                                                                                                                              node u_offset_signed = asSInt(_u_offset_signed_T_3) @[Microcode.scala 1127:61]
                                                                                                                              node u_sp_signed = asSInt(SP_sampled) @[Microcode.scala 1128:29]
                                                                                                                              node _u_result_T_37 = add(u_sp_signed, u_offset_signed) @[Microcode.scala 1129:30]
                                                                                                                              node _u_result_T_38 = tail(_u_result_T_37, 1) @[Microcode.scala 1129:30]
                                                                                                                              node u_result_3 = asSInt(_u_result_T_38) @[Microcode.scala 1129:30]
                                                                                                                              node _u_lower_sum_T = bits(SP_sampled, 7, 0) @[Microcode.scala 1132:28]
                                                                                                                              node u_lower_sum = add(_u_lower_sum_T, imm8) @[Microcode.scala 1132:35]
                                                                                                                              node _u_hc_T = bits(SP_sampled, 3, 0) @[Microcode.scala 1133:23]
                                                                                                                              node _u_hc_T_1 = bits(imm8, 3, 0) @[Microcode.scala 1133:40]
                                                                                                                              node _u_hc_T_2 = add(_u_hc_T, _u_hc_T_1) @[Microcode.scala 1133:30]
                                                                                                                              node u_hc = bits(_u_hc_T_2, 4, 4) @[Microcode.scala 1133:47]
                                                                                                                              node u_cy = bits(u_lower_sum, 8, 8) @[Microcode.scala 1134:25]
                                                                                                                              node _u_out_H_T_8 = asUInt(u_result_3) @[Microcode.scala 1136:23]
                                                                                                                              node _u_out_H_T_9 = bits(_u_out_H_T_8, 15, 8) @[Microcode.scala 1136:29]
                                                                                                                              u.H <= _u_out_H_T_9 @[Microcode.scala 1136:13]
                                                                                                                              node _u_out_L_T_8 = asUInt(u_result_3) @[Microcode.scala 1137:23]
                                                                                                                              node _u_out_L_T_9 = bits(_u_out_L_T_8, 7, 0) @[Microcode.scala 1137:29]
                                                                                                                              u.L <= _u_out_L_T_9 @[Microcode.scala 1137:13]
                                                                                                                              node u_out_F_lo_23 = cat(u_cy, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                                                              node u_out_F_hi_hi_23 = cat(UInt<1>("h0"), UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                                              node u_out_F_hi_23 = cat(u_out_F_hi_hi_23, u_hc) @[Cat.scala 33:92]
                                                                                                                              node _u_out_F_T_29 = cat(u_out_F_hi_23, u_out_F_lo_23) @[Cat.scala 33:92]
                                                                                                                              u.F <= _u_out_F_T_29 @[Microcode.scala 1138:13]
                                                                                                                              node _u_T_330 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1140:19]
                                                                                                                              when _u_T_330 : @[Microcode.scala 1140:28]
                                                                                                                                u.done <= UInt<1>("h1") @[Microcode.scala 1140:39]
                                                                                                                            else :
                                                                                                                              node _u_T_331 = eq(IR, UInt<8>("he8")) @[Microcode.scala 1143:19]
                                                                                                                              when _u_T_331 : @[Microcode.scala 1143:32]
                                                                                                                                node _u_offset_signed_T_4 = bits(imm8, 7, 7) @[Microcode.scala 1144:46]
                                                                                                                                node _u_offset_signed_T_5 = bits(_u_offset_signed_T_4, 0, 0) @[Bitwise.scala 77:15]
                                                                                                                                node _u_offset_signed_T_6 = mux(_u_offset_signed_T_5, UInt<8>("hff"), UInt<8>("h0")) @[Bitwise.scala 77:12]
                                                                                                                                node _u_offset_signed_T_7 = cat(_u_offset_signed_T_6, imm8) @[Cat.scala 33:92]
                                                                                                                                node u_offset_signed_1 = asSInt(_u_offset_signed_T_7) @[Microcode.scala 1144:61]
                                                                                                                                node u_sp_signed_1 = asSInt(SP_sampled) @[Microcode.scala 1145:29]
                                                                                                                                node _u_result_T_39 = add(u_sp_signed_1, u_offset_signed_1) @[Microcode.scala 1146:30]
                                                                                                                                node _u_result_T_40 = tail(_u_result_T_39, 1) @[Microcode.scala 1146:30]
                                                                                                                                node u_result_4 = asSInt(_u_result_T_40) @[Microcode.scala 1146:30]
                                                                                                                                node _u_lower_sum_T_1 = bits(SP_sampled, 7, 0) @[Microcode.scala 1149:28]
                                                                                                                                node u_lower_sum_1 = add(_u_lower_sum_T_1, imm8) @[Microcode.scala 1149:35]
                                                                                                                                node _u_hc_T_3 = bits(SP_sampled, 3, 0) @[Microcode.scala 1150:23]
                                                                                                                                node _u_hc_T_4 = bits(imm8, 3, 0) @[Microcode.scala 1150:40]
                                                                                                                                node _u_hc_T_5 = add(_u_hc_T_3, _u_hc_T_4) @[Microcode.scala 1150:30]
                                                                                                                                node u_hc_1 = bits(_u_hc_T_5, 4, 4) @[Microcode.scala 1150:47]
                                                                                                                                node u_cy_1 = bits(u_lower_sum_1, 8, 8) @[Microcode.scala 1151:25]
                                                                                                                                node _u_out_SP_T_16 = asUInt(u_result_4) @[Microcode.scala 1153:24]
                                                                                                                                u.SP <= _u_out_SP_T_16 @[Microcode.scala 1153:14]
                                                                                                                                node u_out_F_lo_24 = cat(u_cy_1, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                                                                node u_out_F_hi_hi_24 = cat(UInt<1>("h0"), UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                                                node u_out_F_hi_24 = cat(u_out_F_hi_hi_24, u_hc_1) @[Cat.scala 33:92]
                                                                                                                                node _u_out_F_T_30 = cat(u_out_F_hi_24, u_out_F_lo_24) @[Cat.scala 33:92]
                                                                                                                                u.F <= _u_out_F_T_30 @[Microcode.scala 1154:13]
                                                                                                                                node _u_T_332 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1156:19]
                                                                                                                                when _u_T_332 : @[Microcode.scala 1156:28]
                                                                                                                                  u.done <= UInt<1>("h1") @[Microcode.scala 1156:39]
                                                                                                                              else :
                                                                                                                                node _u_T_333 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1162:19]
                                                                                                                                when _u_T_333 : @[Microcode.scala 1162:28]
                                                                                                                                  u.done <= UInt<1>("h1") @[Microcode.scala 1162:39]
    wire busAddr : UInt<16> @[LR35902_Core.scala 135:33]
    busAddr <= UInt<16>("h0") @[LR35902_Core.scala 135:33]
    wire busRead : UInt<1> @[LR35902_Core.scala 136:33]
    busRead <= UInt<1>("h0") @[LR35902_Core.scala 136:33]
    wire busWrite : UInt<1> @[LR35902_Core.scala 137:33]
    busWrite <= UInt<1>("h0") @[LR35902_Core.scala 137:33]
    wire busWriteData : UInt<8> @[LR35902_Core.scala 138:33]
    busWriteData <= UInt<8>("h0") @[LR35902_Core.scala 138:33]
    node _T = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 143:15]
    when _T : @[LR35902_Core.scala 143:24]
      tcycle <= UInt<1>("h0") @[LR35902_Core.scala 144:12]
    else :
      node _tcycle_T = add(tcycle, UInt<1>("h1")) @[LR35902_Core.scala 146:22]
      node _tcycle_T_1 = tail(_tcycle_T, 1) @[LR35902_Core.scala 146:22]
      tcycle <= _tcycle_T_1 @[LR35902_Core.scala 146:12]
    node _T_1 = eq(UInt<3>("h0"), state) @[LR35902_Core.scala 152:17]
    when _T_1 : @[LR35902_Core.scala 152:17]
      busAddr <= PC @[LR35902_Core.scala 158:15]
      busRead <= UInt<1>("h1") @[LR35902_Core.scala 159:15]
      node _T_2 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 161:19]
      when _T_2 : @[LR35902_Core.scala 161:28]
        IR <= io.memReadData @[LR35902_Core.scala 163:12]
        node _PC_T = add(PC, UInt<1>("h1")) @[LR35902_Core.scala 164:18]
        node _PC_T_1 = tail(_PC_T, 1) @[LR35902_Core.scala 164:18]
        PC <= _PC_T_1 @[LR35902_Core.scala 164:12]
        mcycle <= UInt<1>("h0") @[LR35902_Core.scala 165:16]
        when IME_pending : @[LR35902_Core.scala 167:27]
          IME <= UInt<1>("h1") @[LR35902_Core.scala 168:15]
          IME_pending <= UInt<1>("h0") @[LR35902_Core.scala 169:23]
        node _isLDrImm_new_T = and(io.memReadData, UInt<8>("hc7")) @[LR35902_Core.scala 172:44]
        node isLDrImm_new = eq(_isLDrImm_new_T, UInt<3>("h6")) @[LR35902_Core.scala 172:55]
        node _needsImm8_new_T = eq(io.memReadData, UInt<5>("h18")) @[LR35902_Core.scala 176:28]
        node _needsImm8_new_T_1 = or(isLDrImm_new, _needsImm8_new_T) @[LR35902_Core.scala 175:24]
        node _needsImm8_new_T_2 = eq(io.memReadData, UInt<6>("h20")) @[LR35902_Core.scala 177:28]
        node _needsImm8_new_T_3 = or(_needsImm8_new_T_1, _needsImm8_new_T_2) @[LR35902_Core.scala 176:41]
        node _needsImm8_new_T_4 = eq(io.memReadData, UInt<6>("h28")) @[LR35902_Core.scala 177:59]
        node _needsImm8_new_T_5 = or(_needsImm8_new_T_3, _needsImm8_new_T_4) @[LR35902_Core.scala 177:41]
        node _needsImm8_new_T_6 = eq(io.memReadData, UInt<6>("h30")) @[LR35902_Core.scala 177:90]
        node _needsImm8_new_T_7 = or(_needsImm8_new_T_5, _needsImm8_new_T_6) @[LR35902_Core.scala 177:72]
        node _needsImm8_new_T_8 = eq(io.memReadData, UInt<6>("h38")) @[LR35902_Core.scala 177:121]
        node _needsImm8_new_T_9 = or(_needsImm8_new_T_7, _needsImm8_new_T_8) @[LR35902_Core.scala 177:103]
        node _needsImm8_new_T_10 = eq(io.memReadData, UInt<8>("hc6")) @[LR35902_Core.scala 178:28]
        node _needsImm8_new_T_11 = or(_needsImm8_new_T_9, _needsImm8_new_T_10) @[LR35902_Core.scala 177:134]
        node _needsImm8_new_T_12 = eq(io.memReadData, UInt<8>("hd6")) @[LR35902_Core.scala 179:28]
        node _needsImm8_new_T_13 = or(_needsImm8_new_T_11, _needsImm8_new_T_12) @[LR35902_Core.scala 178:41]
        node _needsImm8_new_T_14 = eq(io.memReadData, UInt<8>("he0")) @[LR35902_Core.scala 180:28]
        node _needsImm8_new_T_15 = or(_needsImm8_new_T_13, _needsImm8_new_T_14) @[LR35902_Core.scala 179:41]
        node _needsImm8_new_T_16 = eq(io.memReadData, UInt<8>("he6")) @[LR35902_Core.scala 181:28]
        node _needsImm8_new_T_17 = or(_needsImm8_new_T_15, _needsImm8_new_T_16) @[LR35902_Core.scala 180:41]
        node _needsImm8_new_T_18 = eq(io.memReadData, UInt<8>("he8")) @[LR35902_Core.scala 182:28]
        node _needsImm8_new_T_19 = or(_needsImm8_new_T_17, _needsImm8_new_T_18) @[LR35902_Core.scala 181:41]
        node _needsImm8_new_T_20 = eq(io.memReadData, UInt<8>("hee")) @[LR35902_Core.scala 183:28]
        node _needsImm8_new_T_21 = or(_needsImm8_new_T_19, _needsImm8_new_T_20) @[LR35902_Core.scala 182:41]
        node _needsImm8_new_T_22 = eq(io.memReadData, UInt<8>("hf0")) @[LR35902_Core.scala 184:28]
        node _needsImm8_new_T_23 = or(_needsImm8_new_T_21, _needsImm8_new_T_22) @[LR35902_Core.scala 183:41]
        node _needsImm8_new_T_24 = eq(io.memReadData, UInt<8>("hf6")) @[LR35902_Core.scala 185:28]
        node _needsImm8_new_T_25 = or(_needsImm8_new_T_23, _needsImm8_new_T_24) @[LR35902_Core.scala 184:41]
        node _needsImm8_new_T_26 = eq(io.memReadData, UInt<8>("hf8")) @[LR35902_Core.scala 186:28]
        node _needsImm8_new_T_27 = or(_needsImm8_new_T_25, _needsImm8_new_T_26) @[LR35902_Core.scala 185:41]
        node _needsImm8_new_T_28 = eq(io.memReadData, UInt<8>("hfe")) @[LR35902_Core.scala 187:28]
        node needsImm8_new = or(_needsImm8_new_T_27, _needsImm8_new_T_28) @[LR35902_Core.scala 186:41]
        node _needsImm16_new_T = eq(io.memReadData, UInt<8>("hc2")) @[LR35902_Core.scala 190:26]
        node _needsImm16_new_T_1 = eq(io.memReadData, UInt<8>("hca")) @[LR35902_Core.scala 190:57]
        node _needsImm16_new_T_2 = or(_needsImm16_new_T, _needsImm16_new_T_1) @[LR35902_Core.scala 190:39]
        node _needsImm16_new_T_3 = eq(io.memReadData, UInt<8>("hd2")) @[LR35902_Core.scala 190:88]
        node _needsImm16_new_T_4 = or(_needsImm16_new_T_2, _needsImm16_new_T_3) @[LR35902_Core.scala 190:70]
        node _needsImm16_new_T_5 = eq(io.memReadData, UInt<8>("hda")) @[LR35902_Core.scala 190:119]
        node _needsImm16_new_T_6 = or(_needsImm16_new_T_4, _needsImm16_new_T_5) @[LR35902_Core.scala 190:101]
        node _needsImm16_new_T_7 = eq(io.memReadData, UInt<8>("hc3")) @[LR35902_Core.scala 191:28]
        node _needsImm16_new_T_8 = or(_needsImm16_new_T_6, _needsImm16_new_T_7) @[LR35902_Core.scala 190:132]
        node _needsImm16_new_T_9 = eq(io.memReadData, UInt<8>("hc4")) @[LR35902_Core.scala 192:28]
        node _needsImm16_new_T_10 = or(_needsImm16_new_T_8, _needsImm16_new_T_9) @[LR35902_Core.scala 191:41]
        node _needsImm16_new_T_11 = eq(io.memReadData, UInt<8>("hcc")) @[LR35902_Core.scala 192:59]
        node _needsImm16_new_T_12 = or(_needsImm16_new_T_10, _needsImm16_new_T_11) @[LR35902_Core.scala 192:41]
        node _needsImm16_new_T_13 = eq(io.memReadData, UInt<8>("hd4")) @[LR35902_Core.scala 192:90]
        node _needsImm16_new_T_14 = or(_needsImm16_new_T_12, _needsImm16_new_T_13) @[LR35902_Core.scala 192:72]
        node _needsImm16_new_T_15 = eq(io.memReadData, UInt<8>("hdc")) @[LR35902_Core.scala 192:121]
        node _needsImm16_new_T_16 = or(_needsImm16_new_T_14, _needsImm16_new_T_15) @[LR35902_Core.scala 192:103]
        node _needsImm16_new_T_17 = eq(io.memReadData, UInt<8>("hcd")) @[LR35902_Core.scala 193:28]
        node _needsImm16_new_T_18 = or(_needsImm16_new_T_16, _needsImm16_new_T_17) @[LR35902_Core.scala 192:134]
        node _needsImm16_new_T_19 = eq(io.memReadData, UInt<8>("hea")) @[LR35902_Core.scala 194:28]
        node _needsImm16_new_T_20 = or(_needsImm16_new_T_18, _needsImm16_new_T_19) @[LR35902_Core.scala 193:41]
        node _needsImm16_new_T_21 = eq(io.memReadData, UInt<8>("hfa")) @[LR35902_Core.scala 195:28]
        node _needsImm16_new_T_22 = or(_needsImm16_new_T_20, _needsImm16_new_T_21) @[LR35902_Core.scala 194:41]
        node _needsImm16_new_T_23 = eq(io.memReadData, UInt<1>("h1")) @[LR35902_Core.scala 196:28]
        node _needsImm16_new_T_24 = or(_needsImm16_new_T_22, _needsImm16_new_T_23) @[LR35902_Core.scala 195:41]
        node _needsImm16_new_T_25 = eq(io.memReadData, UInt<4>("h8")) @[LR35902_Core.scala 197:28]
        node _needsImm16_new_T_26 = or(_needsImm16_new_T_24, _needsImm16_new_T_25) @[LR35902_Core.scala 196:41]
        node _needsImm16_new_T_27 = eq(io.memReadData, UInt<5>("h11")) @[LR35902_Core.scala 198:28]
        node _needsImm16_new_T_28 = or(_needsImm16_new_T_26, _needsImm16_new_T_27) @[LR35902_Core.scala 197:41]
        node _needsImm16_new_T_29 = eq(io.memReadData, UInt<6>("h21")) @[LR35902_Core.scala 199:28]
        node _needsImm16_new_T_30 = or(_needsImm16_new_T_28, _needsImm16_new_T_29) @[LR35902_Core.scala 198:41]
        node _needsImm16_new_T_31 = eq(io.memReadData, UInt<6>("h31")) @[LR35902_Core.scala 200:28]
        node needsImm16_new = or(_needsImm16_new_T_30, _needsImm16_new_T_31) @[LR35902_Core.scala 199:41]
        node _T_3 = eq(io.memReadData, UInt<8>("hcb")) @[LR35902_Core.scala 203:28]
        when _T_3 : @[LR35902_Core.scala 203:41]
          state <= UInt<3>("h5") @[LR35902_Core.scala 204:17]
        else :
          when needsImm8_new : @[LR35902_Core.scala 205:35]
            state <= UInt<3>("h1") @[LR35902_Core.scala 206:17]
          else :
            when needsImm16_new : @[LR35902_Core.scala 207:36]
              state <= UInt<3>("h2") @[LR35902_Core.scala 208:17]
            else :
              state <= UInt<3>("h4") @[LR35902_Core.scala 210:17]
              node _PC_sampled_T = add(PC, UInt<1>("h1")) @[LR35902_Core.scala 212:28]
              node _PC_sampled_T_1 = tail(_PC_sampled_T, 1) @[LR35902_Core.scala 212:28]
              PC_sampled <= _PC_sampled_T_1 @[LR35902_Core.scala 212:22]
              SP_sampled <= SP @[LR35902_Core.scala 213:22]
              A_sampled <= A @[LR35902_Core.scala 214:22]
              F_sampled <= F @[LR35902_Core.scala 215:22]
              B_sampled <= B @[LR35902_Core.scala 216:22]
              C_sampled <= C @[LR35902_Core.scala 217:22]
              D_sampled <= D @[LR35902_Core.scala 218:22]
              E_sampled <= E @[LR35902_Core.scala 219:22]
              H_sampled <= H @[LR35902_Core.scala 220:22]
              L_sampled <= L @[LR35902_Core.scala 221:22]
    else :
      node _T_4 = eq(UInt<3>("h1"), state) @[LR35902_Core.scala 152:17]
      when _T_4 : @[LR35902_Core.scala 152:17]
        busAddr <= PC @[LR35902_Core.scala 230:15]
        busRead <= UInt<1>("h1") @[LR35902_Core.scala 231:15]
        node _T_5 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 233:19]
        when _T_5 : @[LR35902_Core.scala 233:28]
          imm8 <= io.memReadData @[LR35902_Core.scala 234:16]
          node _PC_T_2 = add(PC, UInt<1>("h1")) @[LR35902_Core.scala 235:22]
          node _PC_T_3 = tail(_PC_T_2, 1) @[LR35902_Core.scala 235:22]
          PC <= _PC_T_3 @[LR35902_Core.scala 235:16]
          mcycle <= UInt<1>("h0") @[LR35902_Core.scala 236:16]
          state <= UInt<3>("h4") @[LR35902_Core.scala 237:16]
          node _PC_sampled_T_2 = add(PC, UInt<1>("h1")) @[LR35902_Core.scala 240:26]
          node _PC_sampled_T_3 = tail(_PC_sampled_T_2, 1) @[LR35902_Core.scala 240:26]
          PC_sampled <= _PC_sampled_T_3 @[LR35902_Core.scala 240:20]
          SP_sampled <= SP @[LR35902_Core.scala 241:20]
          A_sampled <= A @[LR35902_Core.scala 242:20]
          F_sampled <= F @[LR35902_Core.scala 243:20]
          B_sampled <= B @[LR35902_Core.scala 244:20]
          C_sampled <= C @[LR35902_Core.scala 245:20]
          D_sampled <= D @[LR35902_Core.scala 246:20]
          E_sampled <= E @[LR35902_Core.scala 247:20]
          H_sampled <= H @[LR35902_Core.scala 248:20]
          L_sampled <= L @[LR35902_Core.scala 249:20]
      else :
        node _T_6 = eq(UInt<3>("h2"), state) @[LR35902_Core.scala 152:17]
        when _T_6 : @[LR35902_Core.scala 152:17]
          busAddr <= PC @[LR35902_Core.scala 257:15]
          busRead <= UInt<1>("h1") @[LR35902_Core.scala 258:15]
          node _T_7 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 260:19]
          when _T_7 : @[LR35902_Core.scala 260:28]
            imm16 <= io.memReadData @[LR35902_Core.scala 261:16]
            node _PC_T_4 = add(PC, UInt<1>("h1")) @[LR35902_Core.scala 262:22]
            node _PC_T_5 = tail(_PC_T_4, 1) @[LR35902_Core.scala 262:22]
            PC <= _PC_T_5 @[LR35902_Core.scala 262:16]
            state <= UInt<3>("h3") @[LR35902_Core.scala 263:16]
        else :
          node _T_8 = eq(UInt<3>("h3"), state) @[LR35902_Core.scala 152:17]
          when _T_8 : @[LR35902_Core.scala 152:17]
            busAddr <= PC @[LR35902_Core.scala 271:15]
            busRead <= UInt<1>("h1") @[LR35902_Core.scala 272:15]
            node _T_9 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 274:19]
            when _T_9 : @[LR35902_Core.scala 274:28]
              node _imm16_T = bits(imm16, 7, 0) @[LR35902_Core.scala 275:44]
              node _imm16_T_1 = cat(io.memReadData, _imm16_T) @[Cat.scala 33:92]
              imm16 <= _imm16_T_1 @[LR35902_Core.scala 275:16]
              node _PC_T_6 = add(PC, UInt<1>("h1")) @[LR35902_Core.scala 276:22]
              node _PC_T_7 = tail(_PC_T_6, 1) @[LR35902_Core.scala 276:22]
              PC <= _PC_T_7 @[LR35902_Core.scala 276:16]
              mcycle <= UInt<1>("h0") @[LR35902_Core.scala 277:16]
              state <= UInt<3>("h4") @[LR35902_Core.scala 278:16]
              node _PC_sampled_T_4 = add(PC, UInt<1>("h1")) @[LR35902_Core.scala 281:26]
              node _PC_sampled_T_5 = tail(_PC_sampled_T_4, 1) @[LR35902_Core.scala 281:26]
              PC_sampled <= _PC_sampled_T_5 @[LR35902_Core.scala 281:20]
              SP_sampled <= SP @[LR35902_Core.scala 282:20]
              A_sampled <= A @[LR35902_Core.scala 283:20]
              F_sampled <= F @[LR35902_Core.scala 284:20]
              B_sampled <= B @[LR35902_Core.scala 285:20]
              C_sampled <= C @[LR35902_Core.scala 286:20]
              D_sampled <= D @[LR35902_Core.scala 287:20]
              E_sampled <= E @[LR35902_Core.scala 288:20]
              H_sampled <= H @[LR35902_Core.scala 289:20]
              L_sampled <= L @[LR35902_Core.scala 290:20]
          else :
            node _T_10 = eq(UInt<3>("h5"), state) @[LR35902_Core.scala 152:17]
            when _T_10 : @[LR35902_Core.scala 152:17]
              busAddr <= PC @[LR35902_Core.scala 298:15]
              busRead <= UInt<1>("h1") @[LR35902_Core.scala 299:15]
              node _T_11 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 301:19]
              when _T_11 : @[LR35902_Core.scala 301:28]
                IR2 <= io.memReadData @[LR35902_Core.scala 302:16]
                node _PC_T_8 = add(PC, UInt<1>("h1")) @[LR35902_Core.scala 303:22]
                node _PC_T_9 = tail(_PC_T_8, 1) @[LR35902_Core.scala 303:22]
                PC <= _PC_T_9 @[LR35902_Core.scala 303:16]
                mcycle <= UInt<1>("h1") @[LR35902_Core.scala 304:16]
                state <= UInt<3>("h4") @[LR35902_Core.scala 305:16]
                node _PC_sampled_T_6 = add(PC, UInt<1>("h1")) @[LR35902_Core.scala 308:26]
                node _PC_sampled_T_7 = tail(_PC_sampled_T_6, 1) @[LR35902_Core.scala 308:26]
                PC_sampled <= _PC_sampled_T_7 @[LR35902_Core.scala 308:20]
                SP_sampled <= SP @[LR35902_Core.scala 309:20]
                A_sampled <= A @[LR35902_Core.scala 310:20]
                F_sampled <= F @[LR35902_Core.scala 311:20]
                B_sampled <= B @[LR35902_Core.scala 312:20]
                C_sampled <= C @[LR35902_Core.scala 313:20]
                D_sampled <= D @[LR35902_Core.scala 314:20]
                E_sampled <= E @[LR35902_Core.scala 315:20]
                H_sampled <= H @[LR35902_Core.scala 316:20]
                L_sampled <= L @[LR35902_Core.scala 317:20]
            else :
              node _T_12 = eq(UInt<3>("h4"), state) @[LR35902_Core.scala 152:17]
              when _T_12 : @[LR35902_Core.scala 152:17]
                node _T_13 = eq(IR, UInt<8>("hcb")) @[LR35902_Core.scala 326:15]
                when _T_13 : @[LR35902_Core.scala 326:28]
                  wire cbOut : { A : UInt<8>, F : UInt<8>, B : UInt<8>, C : UInt<8>, D : UInt<8>, E : UInt<8>, H : UInt<8>, L : UInt<8>, imm8 : UInt<8>, done : UInt<1>, next_mcycle : UInt<3>} @[MicrocodeCB.scala 44:19]
                  cbOut.A <= A_sampled @[MicrocodeCB.scala 47:11]
                  cbOut.F <= F_sampled @[MicrocodeCB.scala 48:11]
                  cbOut.B <= B_sampled @[MicrocodeCB.scala 49:11]
                  cbOut.C <= C_sampled @[MicrocodeCB.scala 50:11]
                  cbOut.D <= D_sampled @[MicrocodeCB.scala 51:11]
                  cbOut.E <= E_sampled @[MicrocodeCB.scala 52:11]
                  cbOut.H <= H_sampled @[MicrocodeCB.scala 53:11]
                  cbOut.L <= L_sampled @[MicrocodeCB.scala 54:11]
                  cbOut.imm8 <= CB_imm8 @[MicrocodeCB.scala 56:14]
                  cbOut.done <= UInt<1>("h0") @[MicrocodeCB.scala 58:14]
                  cbOut.next_mcycle <= mcycle @[MicrocodeCB.scala 59:21]
                  mcBus.memAddr <= UInt<1>("h0") @[MicrocodeCB.scala 62:21]
                  mcBus.memRead <= UInt<1>("h0") @[MicrocodeCB.scala 63:21]
                  mcBus.memWrite <= UInt<1>("h0") @[MicrocodeCB.scala 64:21]
                  mcBus.memWriteData <= UInt<1>("h0") @[MicrocodeCB.scala 65:21]
                  node cbOut_group = bits(IR2, 7, 6) @[MicrocodeCB.scala 70:23]
                  node cbOut_bitIdx = bits(IR2, 5, 3) @[MicrocodeCB.scala 71:23]
                  node cbOut_regIdx = bits(IR2, 2, 0) @[MicrocodeCB.scala 72:23]
                  node cbOut_isHL = eq(cbOut_regIdx, UInt<3>("h6")) @[MicrocodeCB.scala 74:28]
                  node cbOut_HL = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
                  wire cbOut_operand : UInt<8> @[MicrocodeCB.scala 108:23]
                  node _cbOut_operand_T = eq(UInt<1>("h0"), cbOut_regIdx) @[Mux.scala 81:61]
                  node _cbOut_operand_T_1 = mux(_cbOut_operand_T, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                  node _cbOut_operand_T_2 = eq(UInt<1>("h1"), cbOut_regIdx) @[Mux.scala 81:61]
                  node _cbOut_operand_T_3 = mux(_cbOut_operand_T_2, C_sampled, _cbOut_operand_T_1) @[Mux.scala 81:58]
                  node _cbOut_operand_T_4 = eq(UInt<2>("h2"), cbOut_regIdx) @[Mux.scala 81:61]
                  node _cbOut_operand_T_5 = mux(_cbOut_operand_T_4, D_sampled, _cbOut_operand_T_3) @[Mux.scala 81:58]
                  node _cbOut_operand_T_6 = eq(UInt<2>("h3"), cbOut_regIdx) @[Mux.scala 81:61]
                  node _cbOut_operand_T_7 = mux(_cbOut_operand_T_6, E_sampled, _cbOut_operand_T_5) @[Mux.scala 81:58]
                  node _cbOut_operand_T_8 = eq(UInt<3>("h4"), cbOut_regIdx) @[Mux.scala 81:61]
                  node _cbOut_operand_T_9 = mux(_cbOut_operand_T_8, H_sampled, _cbOut_operand_T_7) @[Mux.scala 81:58]
                  node _cbOut_operand_T_10 = eq(UInt<3>("h5"), cbOut_regIdx) @[Mux.scala 81:61]
                  node _cbOut_operand_T_11 = mux(_cbOut_operand_T_10, L_sampled, _cbOut_operand_T_9) @[Mux.scala 81:58]
                  node _cbOut_operand_T_12 = eq(UInt<3>("h7"), cbOut_regIdx) @[Mux.scala 81:61]
                  node _cbOut_operand_T_13 = mux(_cbOut_operand_T_12, A_sampled, _cbOut_operand_T_11) @[Mux.scala 81:58]
                  cbOut_operand <= _cbOut_operand_T_13 @[MicrocodeCB.scala 109:13]
                  node _cbOut_T = eq(mcycle, UInt<1>("h1")) @[MicrocodeCB.scala 111:17]
                  when _cbOut_T : @[MicrocodeCB.scala 111:26]
                    when cbOut_isHL : @[MicrocodeCB.scala 113:18]
                      mcBus.memAddr <= cbOut_HL @[MicrocodeCB.scala 115:20]
                      mcBus.memRead <= UInt<1>("h1") @[MicrocodeCB.scala 116:20]
                      cbOut_operand <= mcBus.memReadData @[MicrocodeCB.scala 117:17]
                      cbOut.imm8 <= mcBus.memReadData @[MicrocodeCB.scala 118:18]
                      node _cbOut_T_1 = eq(tcycle, UInt<2>("h3")) @[MicrocodeCB.scala 120:21]
                      when _cbOut_T_1 : @[MicrocodeCB.scala 120:30]
                        cbOut.next_mcycle <= UInt<2>("h2") @[MicrocodeCB.scala 121:27]
                    else :
                      node _cbOut_T_2 = eq(tcycle, UInt<2>("h3")) @[MicrocodeCB.scala 126:21]
                      when _cbOut_T_2 : @[MicrocodeCB.scala 126:30]
                        cbOut.next_mcycle <= UInt<2>("h2") @[MicrocodeCB.scala 127:27]
                  wire cbOut_result : UInt<8> @[MicrocodeCB.scala 136:22]
                  node _cbOut_T_3 = eq(mcycle, UInt<2>("h2")) @[MicrocodeCB.scala 139:17]
                  node _cbOut_T_4 = and(_cbOut_T_3, cbOut_isHL) @[MicrocodeCB.scala 139:25]
                  when _cbOut_T_4 : @[MicrocodeCB.scala 139:34]
                    cbOut_operand <= CB_imm8 @[MicrocodeCB.scala 140:15]
                  cbOut_result <= cbOut_operand @[MicrocodeCB.scala 143:12]
                  wire cbOut_flagZ : UInt<1> @[MicrocodeCB.scala 146:21]
                  wire cbOut_flagN : UInt<1> @[MicrocodeCB.scala 147:21]
                  wire cbOut_flagH : UInt<1> @[MicrocodeCB.scala 148:21]
                  wire cbOut_flagC : UInt<1> @[MicrocodeCB.scala 149:21]
                  node _cbOut_flagZ_T = bits(F_sampled, 7, 7) @[MicrocodeCB.scala 152:18]
                  cbOut_flagZ <= _cbOut_flagZ_T @[MicrocodeCB.scala 152:11]
                  node _cbOut_flagN_T = bits(F_sampled, 6, 6) @[MicrocodeCB.scala 153:18]
                  cbOut_flagN <= _cbOut_flagN_T @[MicrocodeCB.scala 153:11]
                  node _cbOut_flagH_T = bits(F_sampled, 5, 5) @[MicrocodeCB.scala 154:18]
                  cbOut_flagH <= _cbOut_flagH_T @[MicrocodeCB.scala 154:11]
                  node _cbOut_flagC_T = bits(F_sampled, 4, 4) @[MicrocodeCB.scala 155:18]
                  cbOut_flagC <= _cbOut_flagC_T @[MicrocodeCB.scala 155:11]
                  node _cbOut_T_5 = eq(mcycle, UInt<2>("h2")) @[MicrocodeCB.scala 157:17]
                  when _cbOut_T_5 : @[MicrocodeCB.scala 157:26]
                    node _cbOut_T_6 = eq(UInt<1>("h0"), cbOut_group) @[MicrocodeCB.scala 158:21]
                    when _cbOut_T_6 : @[MicrocodeCB.scala 158:21]
                      node _cbOut_T_7 = eq(UInt<1>("h0"), cbOut_bitIdx) @[MicrocodeCB.scala 162:26]
                      when _cbOut_T_7 : @[MicrocodeCB.scala 162:26]
                        node cbOut_c = bits(cbOut_operand, 7, 7) @[MicrocodeCB.scala 165:30]
                        node _cbOut_result_T = bits(cbOut_operand, 6, 0) @[MicrocodeCB.scala 166:36]
                        node _cbOut_result_T_1 = cat(_cbOut_result_T, cbOut_c) @[Cat.scala 33:92]
                        cbOut_result <= _cbOut_result_T_1 @[MicrocodeCB.scala 166:22]
                        node _cbOut_flagZ_T_1 = eq(cbOut_result, UInt<1>("h0")) @[MicrocodeCB.scala 167:32]
                        cbOut_flagZ <= _cbOut_flagZ_T_1 @[MicrocodeCB.scala 167:21]
                        cbOut_flagN <= UInt<1>("h0") @[MicrocodeCB.scala 168:21]
                        cbOut_flagH <= UInt<1>("h0") @[MicrocodeCB.scala 169:21]
                        cbOut_flagC <= cbOut_c @[MicrocodeCB.scala 170:21]
                      else :
                        node _cbOut_T_8 = eq(UInt<1>("h1"), cbOut_bitIdx) @[MicrocodeCB.scala 162:26]
                        when _cbOut_T_8 : @[MicrocodeCB.scala 162:26]
                          node cbOut_c_1 = bits(cbOut_operand, 0, 0) @[MicrocodeCB.scala 174:30]
                          node _cbOut_result_T_2 = bits(cbOut_operand, 7, 1) @[MicrocodeCB.scala 175:39]
                          node _cbOut_result_T_3 = cat(cbOut_c_1, _cbOut_result_T_2) @[Cat.scala 33:92]
                          cbOut_result <= _cbOut_result_T_3 @[MicrocodeCB.scala 175:22]
                          node _cbOut_flagZ_T_2 = eq(cbOut_result, UInt<1>("h0")) @[MicrocodeCB.scala 176:32]
                          cbOut_flagZ <= _cbOut_flagZ_T_2 @[MicrocodeCB.scala 176:21]
                          cbOut_flagN <= UInt<1>("h0") @[MicrocodeCB.scala 177:21]
                          cbOut_flagH <= UInt<1>("h0") @[MicrocodeCB.scala 178:21]
                          cbOut_flagC <= cbOut_c_1 @[MicrocodeCB.scala 179:21]
                        else :
                          node _cbOut_T_9 = eq(UInt<2>("h2"), cbOut_bitIdx) @[MicrocodeCB.scala 162:26]
                          when _cbOut_T_9 : @[MicrocodeCB.scala 162:26]
                            node cbOut_c_2 = bits(cbOut_operand, 7, 7) @[MicrocodeCB.scala 183:30]
                            node _cbOut_result_T_4 = bits(cbOut_operand, 6, 0) @[MicrocodeCB.scala 184:36]
                            node _cbOut_result_T_5 = bits(F_sampled, 4, 4) @[MicrocodeCB.scala 184:47]
                            node _cbOut_result_T_6 = cat(_cbOut_result_T_4, _cbOut_result_T_5) @[Cat.scala 33:92]
                            cbOut_result <= _cbOut_result_T_6 @[MicrocodeCB.scala 184:22]
                            node _cbOut_flagZ_T_3 = eq(cbOut_result, UInt<1>("h0")) @[MicrocodeCB.scala 185:32]
                            cbOut_flagZ <= _cbOut_flagZ_T_3 @[MicrocodeCB.scala 185:21]
                            cbOut_flagN <= UInt<1>("h0") @[MicrocodeCB.scala 186:21]
                            cbOut_flagH <= UInt<1>("h0") @[MicrocodeCB.scala 187:21]
                            cbOut_flagC <= cbOut_c_2 @[MicrocodeCB.scala 188:21]
                          else :
                            node _cbOut_T_10 = eq(UInt<2>("h3"), cbOut_bitIdx) @[MicrocodeCB.scala 162:26]
                            when _cbOut_T_10 : @[MicrocodeCB.scala 162:26]
                              node cbOut_c_3 = bits(cbOut_operand, 0, 0) @[MicrocodeCB.scala 192:30]
                              node _cbOut_result_T_7 = bits(F_sampled, 4, 4) @[MicrocodeCB.scala 193:33]
                              node _cbOut_result_T_8 = bits(cbOut_operand, 7, 1) @[MicrocodeCB.scala 193:45]
                              node _cbOut_result_T_9 = cat(_cbOut_result_T_7, _cbOut_result_T_8) @[Cat.scala 33:92]
                              cbOut_result <= _cbOut_result_T_9 @[MicrocodeCB.scala 193:22]
                              node _cbOut_flagZ_T_4 = eq(cbOut_result, UInt<1>("h0")) @[MicrocodeCB.scala 194:32]
                              cbOut_flagZ <= _cbOut_flagZ_T_4 @[MicrocodeCB.scala 194:21]
                              cbOut_flagN <= UInt<1>("h0") @[MicrocodeCB.scala 195:21]
                              cbOut_flagH <= UInt<1>("h0") @[MicrocodeCB.scala 196:21]
                              cbOut_flagC <= cbOut_c_3 @[MicrocodeCB.scala 197:21]
                            else :
                              node _cbOut_T_11 = eq(UInt<3>("h4"), cbOut_bitIdx) @[MicrocodeCB.scala 162:26]
                              when _cbOut_T_11 : @[MicrocodeCB.scala 162:26]
                                node cbOut_c_4 = bits(cbOut_operand, 7, 7) @[MicrocodeCB.scala 201:30]
                                node _cbOut_result_T_10 = bits(cbOut_operand, 6, 0) @[MicrocodeCB.scala 202:36]
                                node _cbOut_result_T_11 = cat(_cbOut_result_T_10, UInt<1>("h0")) @[Cat.scala 33:92]
                                cbOut_result <= _cbOut_result_T_11 @[MicrocodeCB.scala 202:22]
                                node _cbOut_flagZ_T_5 = eq(cbOut_result, UInt<1>("h0")) @[MicrocodeCB.scala 203:32]
                                cbOut_flagZ <= _cbOut_flagZ_T_5 @[MicrocodeCB.scala 203:21]
                                cbOut_flagN <= UInt<1>("h0") @[MicrocodeCB.scala 204:21]
                                cbOut_flagH <= UInt<1>("h0") @[MicrocodeCB.scala 205:21]
                                cbOut_flagC <= cbOut_c_4 @[MicrocodeCB.scala 206:21]
                              else :
                                node _cbOut_T_12 = eq(UInt<3>("h5"), cbOut_bitIdx) @[MicrocodeCB.scala 162:26]
                                when _cbOut_T_12 : @[MicrocodeCB.scala 162:26]
                                  node cbOut_c_5 = bits(cbOut_operand, 0, 0) @[MicrocodeCB.scala 210:30]
                                  node _cbOut_result_T_12 = bits(cbOut_operand, 7, 7) @[MicrocodeCB.scala 211:36]
                                  node _cbOut_result_T_13 = bits(cbOut_operand, 7, 1) @[MicrocodeCB.scala 211:48]
                                  node _cbOut_result_T_14 = cat(_cbOut_result_T_12, _cbOut_result_T_13) @[Cat.scala 33:92]
                                  cbOut_result <= _cbOut_result_T_14 @[MicrocodeCB.scala 211:22]
                                  node _cbOut_flagZ_T_6 = eq(cbOut_result, UInt<1>("h0")) @[MicrocodeCB.scala 212:32]
                                  cbOut_flagZ <= _cbOut_flagZ_T_6 @[MicrocodeCB.scala 212:21]
                                  cbOut_flagN <= UInt<1>("h0") @[MicrocodeCB.scala 213:21]
                                  cbOut_flagH <= UInt<1>("h0") @[MicrocodeCB.scala 214:21]
                                  cbOut_flagC <= cbOut_c_5 @[MicrocodeCB.scala 215:21]
                                else :
                                  node _cbOut_T_13 = eq(UInt<3>("h6"), cbOut_bitIdx) @[MicrocodeCB.scala 162:26]
                                  when _cbOut_T_13 : @[MicrocodeCB.scala 162:26]
                                    node _cbOut_result_T_15 = bits(cbOut_operand, 3, 0) @[MicrocodeCB.scala 219:36]
                                    node _cbOut_result_T_16 = bits(cbOut_operand, 7, 4) @[MicrocodeCB.scala 219:50]
                                    node _cbOut_result_T_17 = cat(_cbOut_result_T_15, _cbOut_result_T_16) @[Cat.scala 33:92]
                                    cbOut_result <= _cbOut_result_T_17 @[MicrocodeCB.scala 219:22]
                                    node _cbOut_flagZ_T_7 = eq(cbOut_result, UInt<1>("h0")) @[MicrocodeCB.scala 220:32]
                                    cbOut_flagZ <= _cbOut_flagZ_T_7 @[MicrocodeCB.scala 220:21]
                                    cbOut_flagN <= UInt<1>("h0") @[MicrocodeCB.scala 221:21]
                                    cbOut_flagH <= UInt<1>("h0") @[MicrocodeCB.scala 222:21]
                                    cbOut_flagC <= UInt<1>("h0") @[MicrocodeCB.scala 223:21]
                                  else :
                                    node _cbOut_T_14 = eq(UInt<3>("h7"), cbOut_bitIdx) @[MicrocodeCB.scala 162:26]
                                    when _cbOut_T_14 : @[MicrocodeCB.scala 162:26]
                                      node cbOut_c_6 = bits(cbOut_operand, 0, 0) @[MicrocodeCB.scala 227:30]
                                      node _cbOut_result_T_18 = bits(cbOut_operand, 7, 1) @[MicrocodeCB.scala 228:41]
                                      node _cbOut_result_T_19 = cat(UInt<1>("h0"), _cbOut_result_T_18) @[Cat.scala 33:92]
                                      cbOut_result <= _cbOut_result_T_19 @[MicrocodeCB.scala 228:22]
                                      node _cbOut_flagZ_T_8 = eq(cbOut_result, UInt<1>("h0")) @[MicrocodeCB.scala 229:32]
                                      cbOut_flagZ <= _cbOut_flagZ_T_8 @[MicrocodeCB.scala 229:21]
                                      cbOut_flagN <= UInt<1>("h0") @[MicrocodeCB.scala 230:21]
                                      cbOut_flagH <= UInt<1>("h0") @[MicrocodeCB.scala 231:21]
                                      cbOut_flagC <= cbOut_c_6 @[MicrocodeCB.scala 232:21]
                    else :
                      node _cbOut_T_15 = eq(UInt<1>("h1"), cbOut_group) @[MicrocodeCB.scala 158:21]
                      when _cbOut_T_15 : @[MicrocodeCB.scala 158:21]
                        node _cbOut_bitVal_T = dshr(cbOut_operand, cbOut_bitIdx) @[MicrocodeCB.scala 239:31]
                        node cbOut_bitVal = bits(_cbOut_bitVal_T, 0, 0) @[MicrocodeCB.scala 239:31]
                        node _cbOut_flagZ_T_9 = eq(cbOut_bitVal, UInt<1>("h0")) @[MicrocodeCB.scala 240:20]
                        cbOut_flagZ <= _cbOut_flagZ_T_9 @[MicrocodeCB.scala 240:17]
                        cbOut_flagN <= UInt<1>("h0") @[MicrocodeCB.scala 241:17]
                        cbOut_flagH <= UInt<1>("h1") @[MicrocodeCB.scala 242:17]
                        node _cbOut_flagC_T_1 = bits(F_sampled, 4, 4) @[MicrocodeCB.scala 243:24]
                        cbOut_flagC <= _cbOut_flagC_T_1 @[MicrocodeCB.scala 243:17]
                        cbOut_result <= cbOut_operand @[MicrocodeCB.scala 244:18]
                      else :
                        node _cbOut_T_16 = eq(UInt<2>("h2"), cbOut_group) @[MicrocodeCB.scala 158:21]
                        when _cbOut_T_16 : @[MicrocodeCB.scala 158:21]
                          node _cbOut_mask_T = dshl(UInt<1>("h1"), cbOut_bitIdx) @[MicrocodeCB.scala 249:29]
                          node cbOut_mask = not(_cbOut_mask_T) @[MicrocodeCB.scala 249:23]
                          node _cbOut_result_T_20 = and(cbOut_operand, cbOut_mask) @[MicrocodeCB.scala 250:29]
                          cbOut_result <= _cbOut_result_T_20 @[MicrocodeCB.scala 250:18]
                        else :
                          node _cbOut_T_17 = eq(UInt<2>("h3"), cbOut_group) @[MicrocodeCB.scala 158:21]
                          when _cbOut_T_17 : @[MicrocodeCB.scala 158:21]
                            node cbOut_mask_1 = dshl(UInt<1>("h1"), cbOut_bitIdx) @[MicrocodeCB.scala 256:27]
                            node _cbOut_result_T_21 = or(cbOut_operand, cbOut_mask_1) @[MicrocodeCB.scala 257:29]
                            cbOut_result <= _cbOut_result_T_21 @[MicrocodeCB.scala 257:18]
                    node cbOut_out_F_lo = cat(cbOut_flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                    node cbOut_out_F_hi_hi = cat(cbOut_flagZ, cbOut_flagN) @[Cat.scala 33:92]
                    node cbOut_out_F_hi = cat(cbOut_out_F_hi_hi, cbOut_flagH) @[Cat.scala 33:92]
                    node _cbOut_out_F_T = cat(cbOut_out_F_hi, cbOut_out_F_lo) @[Cat.scala 33:92]
                    cbOut.F <= _cbOut_out_F_T @[MicrocodeCB.scala 264:13]
                    node _cbOut_T_18 = eq(cbOut_isHL, UInt<1>("h0")) @[MicrocodeCB.scala 267:12]
                    when _cbOut_T_18 : @[MicrocodeCB.scala 267:19]
                      node _cbOut_T_19 = eq(UInt<1>("h0"), cbOut_regIdx) @[MicrocodeCB.scala 94:17]
                      when _cbOut_T_19 : @[MicrocodeCB.scala 94:17]
                        cbOut.B <= cbOut_result @[MicrocodeCB.scala 95:25]
                      else :
                        node _cbOut_T_20 = eq(UInt<1>("h1"), cbOut_regIdx) @[MicrocodeCB.scala 94:17]
                        when _cbOut_T_20 : @[MicrocodeCB.scala 94:17]
                          cbOut.C <= cbOut_result @[MicrocodeCB.scala 96:25]
                        else :
                          node _cbOut_T_21 = eq(UInt<2>("h2"), cbOut_regIdx) @[MicrocodeCB.scala 94:17]
                          when _cbOut_T_21 : @[MicrocodeCB.scala 94:17]
                            cbOut.D <= cbOut_result @[MicrocodeCB.scala 97:25]
                          else :
                            node _cbOut_T_22 = eq(UInt<2>("h3"), cbOut_regIdx) @[MicrocodeCB.scala 94:17]
                            when _cbOut_T_22 : @[MicrocodeCB.scala 94:17]
                              cbOut.E <= cbOut_result @[MicrocodeCB.scala 98:25]
                            else :
                              node _cbOut_T_23 = eq(UInt<3>("h4"), cbOut_regIdx) @[MicrocodeCB.scala 94:17]
                              when _cbOut_T_23 : @[MicrocodeCB.scala 94:17]
                                cbOut.H <= cbOut_result @[MicrocodeCB.scala 99:25]
                              else :
                                node _cbOut_T_24 = eq(UInt<3>("h5"), cbOut_regIdx) @[MicrocodeCB.scala 94:17]
                                when _cbOut_T_24 : @[MicrocodeCB.scala 94:17]
                                  cbOut.L <= cbOut_result @[MicrocodeCB.scala 100:25]
                                else :
                                  node _cbOut_T_25 = eq(UInt<3>("h7"), cbOut_regIdx) @[MicrocodeCB.scala 94:17]
                                  when _cbOut_T_25 : @[MicrocodeCB.scala 94:17]
                                    cbOut.A <= cbOut_result @[MicrocodeCB.scala 101:25]
                    cbOut.imm8 <= cbOut_result @[MicrocodeCB.scala 272:16]
                    node _cbOut_T_26 = eq(tcycle, UInt<2>("h3")) @[MicrocodeCB.scala 275:19]
                    when _cbOut_T_26 : @[MicrocodeCB.scala 275:28]
                      when cbOut_isHL : @[MicrocodeCB.scala 276:20]
                        cbOut.next_mcycle <= UInt<2>("h3") @[MicrocodeCB.scala 277:27]
                      else :
                        cbOut.done <= UInt<1>("h1") @[MicrocodeCB.scala 279:20]
                  node _cbOut_T_27 = eq(mcycle, UInt<2>("h3")) @[MicrocodeCB.scala 288:17]
                  when _cbOut_T_27 : @[MicrocodeCB.scala 288:26]
                    mcBus.memAddr <= cbOut_HL @[MicrocodeCB.scala 289:23]
                    mcBus.memWrite <= UInt<1>("h1") @[MicrocodeCB.scala 290:23]
                    mcBus.memWriteData <= CB_imm8 @[MicrocodeCB.scala 291:23]
                    node _cbOut_T_28 = eq(tcycle, UInt<2>("h3")) @[MicrocodeCB.scala 293:19]
                    when _cbOut_T_28 : @[MicrocodeCB.scala 293:28]
                      cbOut.done <= UInt<1>("h1") @[MicrocodeCB.scala 294:18]
                  busAddr <= mcBus.memAddr @[LR35902_Core.scala 340:22]
                  busRead <= mcBus.memRead @[LR35902_Core.scala 341:22]
                  busWrite <= mcBus.memWrite @[LR35902_Core.scala 342:22]
                  busWriteData <= mcBus.memWriteData @[LR35902_Core.scala 343:22]
                  node _T_14 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 346:21]
                  when _T_14 : @[LR35902_Core.scala 346:30]
                    A <= cbOut.A @[LR35902_Core.scala 348:14]
                    F <= cbOut.F @[LR35902_Core.scala 349:14]
                    B <= cbOut.B @[LR35902_Core.scala 350:14]
                    C <= cbOut.C @[LR35902_Core.scala 351:14]
                    D <= cbOut.D @[LR35902_Core.scala 352:14]
                    E <= cbOut.E @[LR35902_Core.scala 353:14]
                    H <= cbOut.H @[LR35902_Core.scala 354:14]
                    L <= cbOut.L @[LR35902_Core.scala 355:14]
                    CB_imm8 <= cbOut.imm8 @[LR35902_Core.scala 357:19]
                    A_sampled <= cbOut.A @[LR35902_Core.scala 360:22]
                    F_sampled <= cbOut.F @[LR35902_Core.scala 361:22]
                    B_sampled <= cbOut.B @[LR35902_Core.scala 362:22]
                    C_sampled <= cbOut.C @[LR35902_Core.scala 363:22]
                    D_sampled <= cbOut.D @[LR35902_Core.scala 364:22]
                    E_sampled <= cbOut.E @[LR35902_Core.scala 365:22]
                    H_sampled <= cbOut.H @[LR35902_Core.scala 366:22]
                    L_sampled <= cbOut.L @[LR35902_Core.scala 367:22]
                    when cbOut.done : @[LR35902_Core.scala 369:28]
                      mcycle <= UInt<1>("h0") @[LR35902_Core.scala 370:20]
                      state <= UInt<3>("h0") @[LR35902_Core.scala 371:20]
                    else :
                      mcycle <= cbOut.next_mcycle @[LR35902_Core.scala 373:20]
                else :
                  busAddr <= mcBus.memAddr @[LR35902_Core.scala 379:22]
                  busRead <= mcBus.memRead @[LR35902_Core.scala 380:22]
                  busWrite <= mcBus.memWrite @[LR35902_Core.scala 381:22]
                  busWriteData <= mcBus.memWriteData @[LR35902_Core.scala 382:22]
                  node _T_15 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 385:21]
                  when _T_15 : @[LR35902_Core.scala 385:30]
                    node _T_16 = eq(IR, UInt<8>("hcd")) @[LR35902_Core.scala 387:19]
                    node _T_17 = eq(IR, UInt<8>("hc9")) @[LR35902_Core.scala 387:37]
                    node _T_18 = or(_T_16, _T_17) @[LR35902_Core.scala 387:31]
                    when _T_18 : @[LR35902_Core.scala 387:50]
                      node _T_19 = asUInt(reset) @[LR35902_Core.scala 388:19]
                      node _T_20 = eq(_T_19, UInt<1>("h0")) @[LR35902_Core.scala 388:19]
                      when _T_20 : @[LR35902_Core.scala 388:19]
                        printf(clock, UInt<1>("h1"), "[WRITEBACK T3] mcycle=%d IR=0x%x u.SP=0x%x (was SP=0x%x)\n", mcycle, IR, u.SP, SP) : printf @[LR35902_Core.scala 388:19]
                    PC <= u.PC @[LR35902_Core.scala 392:14]
                    SP <= u.SP @[LR35902_Core.scala 393:14]
                    A <= u.A @[LR35902_Core.scala 394:14]
                    F <= u.F @[LR35902_Core.scala 395:14]
                    B <= u.B @[LR35902_Core.scala 396:14]
                    C <= u.C @[LR35902_Core.scala 397:14]
                    D <= u.D @[LR35902_Core.scala 398:14]
                    E <= u.E @[LR35902_Core.scala 399:14]
                    H <= u.H @[LR35902_Core.scala 400:14]
                    L <= u.L @[LR35902_Core.scala 401:14]
                    PC_sampled <= u.PC @[LR35902_Core.scala 405:22]
                    SP_sampled <= u.SP @[LR35902_Core.scala 406:22]
                    A_sampled <= u.A @[LR35902_Core.scala 407:22]
                    F_sampled <= u.F @[LR35902_Core.scala 408:22]
                    B_sampled <= u.B @[LR35902_Core.scala 409:22]
                    C_sampled <= u.C @[LR35902_Core.scala 410:22]
                    D_sampled <= u.D @[LR35902_Core.scala 411:22]
                    E_sampled <= u.E @[LR35902_Core.scala 412:22]
                    H_sampled <= u.H @[LR35902_Core.scala 413:22]
                    L_sampled <= u.L @[LR35902_Core.scala 414:22]
                    imm8 <= u.imm8 @[LR35902_Core.scala 416:23]
                    imm16 <= u.imm16 @[LR35902_Core.scala 417:23]
                    IME <= u.IME @[LR35902_Core.scala 418:23]
                    IME_pending <= u.IME_pending @[LR35902_Core.scala 419:23]
                    when u.done : @[LR35902_Core.scala 421:24]
                      mcycle <= UInt<1>("h0") @[LR35902_Core.scala 422:20]
                      state <= UInt<3>("h0") @[LR35902_Core.scala 423:20]
                    else :
                      mcycle <= u.next_mcycle @[LR35902_Core.scala 425:20]
              else :
                node _T_21 = eq(UInt<3>("h6"), state) @[LR35902_Core.scala 152:17]
                when _T_21 : @[LR35902_Core.scala 152:17]
                  halted <= UInt<1>("h1") @[LR35902_Core.scala 435:14]
    io.memAddr <= busAddr @[LR35902_Core.scala 442:19]
    io.memRead <= busRead @[LR35902_Core.scala 443:19]
    io.memWrite <= busWrite @[LR35902_Core.scala 444:19]
    io.memWriteData <= busWriteData @[LR35902_Core.scala 445:19]
    io.dbg_pc <= PC @[LR35902_Core.scala 447:17]
    io.dbg_opcode <= IR @[LR35902_Core.scala 448:17]
    io.dbg_sp <= SP @[LR35902_Core.scala 449:17]
    io.dbg_a <= A @[LR35902_Core.scala 451:12]
    io.dbg_f <= F @[LR35902_Core.scala 452:12]
    io.dbg_b <= B @[LR35902_Core.scala 453:12]
    io.dbg_c <= C @[LR35902_Core.scala 454:12]
    io.dbg_d <= D @[LR35902_Core.scala 455:12]
    io.dbg_e <= E @[LR35902_Core.scala 456:12]
    io.dbg_h <= H @[LR35902_Core.scala 457:12]
    io.dbg_l <= L @[LR35902_Core.scala 458:12]
    io.dbg_state <= state @[LR35902_Core.scala 460:17]
    io.dbg_tcycle <= tcycle @[LR35902_Core.scala 461:17]
    io.dbg_mcycle <= mcycle @[LR35902_Core.scala 462:17]
    io.dbg_IR <= IR @[LR35902_Core.scala 463:17]

  module PPU :
    input clock : Clock
    input reset : Reset
    output io : { vramAddr : UInt<13>, vramRead : UInt<1>, flip vramData : UInt<8>, oamAddr : UInt<8>, oamRead : UInt<1>, flip oamData : UInt<8>, flip lcdc : UInt<8>, flip stat : UInt<8>, flip scy : UInt<8>, flip scx : UInt<8>, ly : UInt<8>, flip lyc : UInt<8>, flip bgp : UInt<8>, flip obp0 : UInt<8>, flip obp1 : UInt<8>, flip wy : UInt<8>, flip wx : UInt<8>, vblankIRQ : UInt<1>, lcdStatIRQ : UInt<1>, pixelValid : UInt<1>, pixelX : UInt<8>, pixelY : UInt<8>, pixelColor : UInt<2>}

    reg lineCycle : UInt<9>, clock with :
      reset => (reset, UInt<9>("h0")) @[PPU.scala 91:26]
    reg ly : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[PPU.scala 92:19]
    node lcdEnable = bits(io.lcdc, 7, 7) @[PPU.scala 94:26]
    node _lineCycle_T = add(lineCycle, UInt<1>("h1")) @[PPU.scala 97:26]
    node _lineCycle_T_1 = tail(_lineCycle_T, 1) @[PPU.scala 97:26]
    lineCycle <= _lineCycle_T_1 @[PPU.scala 97:13]
    node _T = eq(lineCycle, UInt<9>("h1c7")) @[PPU.scala 99:18]
    when _T : @[PPU.scala 99:47]
      lineCycle <= UInt<1>("h0") @[PPU.scala 100:15]
      node _ly_T = eq(ly, UInt<8>("h99")) @[PPU.scala 101:18]
      node _ly_T_1 = add(ly, UInt<1>("h1")) @[PPU.scala 101:37]
      node _ly_T_2 = tail(_ly_T_1, 1) @[PPU.scala 101:37]
      node _ly_T_3 = mux(_ly_T, UInt<1>("h0"), _ly_T_2) @[PPU.scala 101:14]
      ly <= _ly_T_3 @[PPU.scala 101:8]
    reg vblankIRQ : UInt<1>, clock with :
      reset => (reset, UInt<1>("h0")) @[PPU.scala 105:26]
    node _T_1 = eq(ly, UInt<8>("h8f")) @[PPU.scala 106:11]
    node _T_2 = eq(lineCycle, UInt<9>("h1c7")) @[PPU.scala 106:48]
    node _T_3 = and(_T_1, _T_2) @[PPU.scala 106:35]
    when _T_3 : @[PPU.scala 106:77]
      vblankIRQ <= UInt<1>("h1") @[PPU.scala 107:15]
    else :
      vblankIRQ <= UInt<1>("h0") @[PPU.scala 109:15]
    wire mode : UInt<2> @[PPU.scala 120:18]
    node _T_4 = geq(ly, UInt<8>("h90")) @[PPU.scala 121:11]
    when _T_4 : @[PPU.scala 121:29]
      mode <= UInt<2>("h1") @[PPU.scala 122:10]
    else :
      node _T_5 = lt(lineCycle, UInt<7>("h50")) @[PPU.scala 123:24]
      when _T_5 : @[PPU.scala 123:32]
        mode <= UInt<2>("h2") @[PPU.scala 124:10]
      else :
        node _T_6 = lt(lineCycle, UInt<8>("hfc")) @[PPU.scala 125:24]
        when _T_6 : @[PPU.scala 125:33]
          mode <= UInt<2>("h3") @[PPU.scala 126:10]
        else :
          mode <= UInt<2>("h0") @[PPU.scala 128:10]
    node bgWindowEnable = bits(io.lcdc, 0, 0) @[PPU.scala 134:31]
    node bgTileMap = bits(io.lcdc, 3, 3) @[PPU.scala 135:31]
    node bgWindowTiles = bits(io.lcdc, 4, 4) @[PPU.scala 136:31]
    io.vramAddr <= UInt<1>("h0") @[PPU.scala 138:15]
    io.vramRead <= UInt<1>("h0") @[PPU.scala 139:15]
    io.oamAddr <= UInt<1>("h0") @[PPU.scala 140:14]
    io.oamRead <= UInt<1>("h0") @[PPU.scala 141:14]
    wire pixelValid : UInt<1> @[PPU.scala 143:31]
    pixelValid <= UInt<1>("h0") @[PPU.scala 143:31]
    wire pixelColor : UInt<2> @[PPU.scala 144:31]
    pixelColor <= UInt<2>("h0") @[PPU.scala 144:31]
    node _T_7 = lt(ly, UInt<8>("h90")) @[PPU.scala 147:24]
    node _T_8 = and(lcdEnable, _T_7) @[PPU.scala 147:18]
    node _T_9 = eq(mode, UInt<2>("h3")) @[PPU.scala 147:48]
    node _T_10 = and(_T_8, _T_9) @[PPU.scala 147:40]
    when _T_10 : @[PPU.scala 147:66]
      node _xPos_T = sub(lineCycle, UInt<7>("h50")) @[PPU.scala 148:26]
      node xPos = tail(_xPos_T, 1) @[PPU.scala 148:26]
      node _T_11 = lt(xPos, UInt<8>("ha0")) @[PPU.scala 149:15]
      when _T_11 : @[PPU.scala 149:24]
        pixelValid <= UInt<1>("h1") @[PPU.scala 150:18]
        node _pixelColor_T = and(io.bgp, UInt<2>("h3")) @[PPU.scala 151:29]
        pixelColor <= _pixelColor_T @[PPU.scala 151:18]
    io.ly <= ly @[PPU.scala 158:9]
    io.vblankIRQ <= vblankIRQ @[PPU.scala 159:16]
    io.lcdStatIRQ <= UInt<1>("h0") @[PPU.scala 160:17]
    io.pixelValid <= pixelValid @[PPU.scala 161:17]
    node _io_pixelX_T = sub(lineCycle, UInt<7>("h50")) @[PPU.scala 162:42]
    node _io_pixelX_T_1 = tail(_io_pixelX_T, 1) @[PPU.scala 162:42]
    node _io_pixelX_T_2 = mux(pixelValid, _io_pixelX_T_1, UInt<1>("h0")) @[PPU.scala 162:19]
    io.pixelX <= _io_pixelX_T_2 @[PPU.scala 162:13]
    io.pixelY <= ly @[PPU.scala 163:13]
    io.pixelColor <= pixelColor @[PPU.scala 164:17]

  module BootRom :
    input clock : Clock
    input reset : Reset
    output io : { flip address : UInt<16>, dataOut : UInt<8>, valid : UInt<1>, flip enabled : UInt<1>}

    wire bootRomData : UInt<8>[256] @[BootRom.scala 25:28]
    bootRomData[0] <= UInt<6>("h31") @[BootRom.scala 25:28]
    bootRomData[1] <= UInt<8>("hfe") @[BootRom.scala 25:28]
    bootRomData[2] <= UInt<8>("hff") @[BootRom.scala 25:28]
    bootRomData[3] <= UInt<8>("haf") @[BootRom.scala 25:28]
    bootRomData[4] <= UInt<6>("h21") @[BootRom.scala 25:28]
    bootRomData[5] <= UInt<8>("hff") @[BootRom.scala 25:28]
    bootRomData[6] <= UInt<8>("h9f") @[BootRom.scala 25:28]
    bootRomData[7] <= UInt<6>("h32") @[BootRom.scala 25:28]
    bootRomData[8] <= UInt<8>("hcb") @[BootRom.scala 25:28]
    bootRomData[9] <= UInt<7>("h7c") @[BootRom.scala 25:28]
    bootRomData[10] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[11] <= UInt<8>("hfb") @[BootRom.scala 25:28]
    bootRomData[12] <= UInt<6>("h21") @[BootRom.scala 25:28]
    bootRomData[13] <= UInt<6>("h26") @[BootRom.scala 25:28]
    bootRomData[14] <= UInt<8>("hff") @[BootRom.scala 25:28]
    bootRomData[15] <= UInt<4>("he") @[BootRom.scala 25:28]
    bootRomData[16] <= UInt<5>("h11") @[BootRom.scala 25:28]
    bootRomData[17] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[18] <= UInt<8>("h80") @[BootRom.scala 25:28]
    bootRomData[19] <= UInt<6>("h32") @[BootRom.scala 25:28]
    bootRomData[20] <= UInt<8>("he2") @[BootRom.scala 25:28]
    bootRomData[21] <= UInt<4>("hc") @[BootRom.scala 25:28]
    bootRomData[22] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[23] <= UInt<8>("hf3") @[BootRom.scala 25:28]
    bootRomData[24] <= UInt<8>("he2") @[BootRom.scala 25:28]
    bootRomData[25] <= UInt<6>("h32") @[BootRom.scala 25:28]
    bootRomData[26] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[27] <= UInt<7>("h77") @[BootRom.scala 25:28]
    bootRomData[28] <= UInt<7>("h77") @[BootRom.scala 25:28]
    bootRomData[29] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[30] <= UInt<8>("hfc") @[BootRom.scala 25:28]
    bootRomData[31] <= UInt<8>("he0") @[BootRom.scala 25:28]
    bootRomData[32] <= UInt<7>("h47") @[BootRom.scala 25:28]
    bootRomData[33] <= UInt<5>("h11") @[BootRom.scala 25:28]
    bootRomData[34] <= UInt<3>("h4") @[BootRom.scala 25:28]
    bootRomData[35] <= UInt<1>("h1") @[BootRom.scala 25:28]
    bootRomData[36] <= UInt<6>("h21") @[BootRom.scala 25:28]
    bootRomData[37] <= UInt<5>("h10") @[BootRom.scala 25:28]
    bootRomData[38] <= UInt<8>("h80") @[BootRom.scala 25:28]
    bootRomData[39] <= UInt<5>("h1a") @[BootRom.scala 25:28]
    bootRomData[40] <= UInt<8>("hcd") @[BootRom.scala 25:28]
    bootRomData[41] <= UInt<8>("h95") @[BootRom.scala 25:28]
    bootRomData[42] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[43] <= UInt<8>("hcd") @[BootRom.scala 25:28]
    bootRomData[44] <= UInt<8>("h96") @[BootRom.scala 25:28]
    bootRomData[45] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[46] <= UInt<5>("h13") @[BootRom.scala 25:28]
    bootRomData[47] <= UInt<7>("h7b") @[BootRom.scala 25:28]
    bootRomData[48] <= UInt<8>("hfe") @[BootRom.scala 25:28]
    bootRomData[49] <= UInt<6>("h34") @[BootRom.scala 25:28]
    bootRomData[50] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[51] <= UInt<8>("hf3") @[BootRom.scala 25:28]
    bootRomData[52] <= UInt<5>("h11") @[BootRom.scala 25:28]
    bootRomData[53] <= UInt<8>("hd8") @[BootRom.scala 25:28]
    bootRomData[54] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[55] <= UInt<3>("h6") @[BootRom.scala 25:28]
    bootRomData[56] <= UInt<4>("h8") @[BootRom.scala 25:28]
    bootRomData[57] <= UInt<5>("h1a") @[BootRom.scala 25:28]
    bootRomData[58] <= UInt<5>("h13") @[BootRom.scala 25:28]
    bootRomData[59] <= UInt<6>("h22") @[BootRom.scala 25:28]
    bootRomData[60] <= UInt<6>("h23") @[BootRom.scala 25:28]
    bootRomData[61] <= UInt<3>("h5") @[BootRom.scala 25:28]
    bootRomData[62] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[63] <= UInt<8>("hf9") @[BootRom.scala 25:28]
    bootRomData[64] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[65] <= UInt<5>("h19") @[BootRom.scala 25:28]
    bootRomData[66] <= UInt<8>("hea") @[BootRom.scala 25:28]
    bootRomData[67] <= UInt<5>("h10") @[BootRom.scala 25:28]
    bootRomData[68] <= UInt<8>("h99") @[BootRom.scala 25:28]
    bootRomData[69] <= UInt<6>("h21") @[BootRom.scala 25:28]
    bootRomData[70] <= UInt<6>("h2f") @[BootRom.scala 25:28]
    bootRomData[71] <= UInt<8>("h99") @[BootRom.scala 25:28]
    bootRomData[72] <= UInt<4>("he") @[BootRom.scala 25:28]
    bootRomData[73] <= UInt<4>("hc") @[BootRom.scala 25:28]
    bootRomData[74] <= UInt<6>("h3d") @[BootRom.scala 25:28]
    bootRomData[75] <= UInt<6>("h28") @[BootRom.scala 25:28]
    bootRomData[76] <= UInt<4>("h8") @[BootRom.scala 25:28]
    bootRomData[77] <= UInt<6>("h32") @[BootRom.scala 25:28]
    bootRomData[78] <= UInt<4>("hd") @[BootRom.scala 25:28]
    bootRomData[79] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[80] <= UInt<8>("hf9") @[BootRom.scala 25:28]
    bootRomData[81] <= UInt<6>("h2e") @[BootRom.scala 25:28]
    bootRomData[82] <= UInt<4>("hf") @[BootRom.scala 25:28]
    bootRomData[83] <= UInt<5>("h18") @[BootRom.scala 25:28]
    bootRomData[84] <= UInt<8>("hf3") @[BootRom.scala 25:28]
    bootRomData[85] <= UInt<7>("h67") @[BootRom.scala 25:28]
    bootRomData[86] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[87] <= UInt<7>("h64") @[BootRom.scala 25:28]
    bootRomData[88] <= UInt<7>("h57") @[BootRom.scala 25:28]
    bootRomData[89] <= UInt<8>("he0") @[BootRom.scala 25:28]
    bootRomData[90] <= UInt<7>("h42") @[BootRom.scala 25:28]
    bootRomData[91] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[92] <= UInt<8>("h91") @[BootRom.scala 25:28]
    bootRomData[93] <= UInt<8>("he0") @[BootRom.scala 25:28]
    bootRomData[94] <= UInt<7>("h40") @[BootRom.scala 25:28]
    bootRomData[95] <= UInt<3>("h4") @[BootRom.scala 25:28]
    bootRomData[96] <= UInt<5>("h1e") @[BootRom.scala 25:28]
    bootRomData[97] <= UInt<2>("h2") @[BootRom.scala 25:28]
    bootRomData[98] <= UInt<4>("he") @[BootRom.scala 25:28]
    bootRomData[99] <= UInt<4>("hc") @[BootRom.scala 25:28]
    bootRomData[100] <= UInt<8>("hf0") @[BootRom.scala 25:28]
    bootRomData[101] <= UInt<7>("h44") @[BootRom.scala 25:28]
    bootRomData[102] <= UInt<8>("hfe") @[BootRom.scala 25:28]
    bootRomData[103] <= UInt<8>("h90") @[BootRom.scala 25:28]
    bootRomData[104] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[105] <= UInt<8>("hfa") @[BootRom.scala 25:28]
    bootRomData[106] <= UInt<4>("hd") @[BootRom.scala 25:28]
    bootRomData[107] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[108] <= UInt<8>("hf7") @[BootRom.scala 25:28]
    bootRomData[109] <= UInt<5>("h1d") @[BootRom.scala 25:28]
    bootRomData[110] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[111] <= UInt<8>("hf2") @[BootRom.scala 25:28]
    bootRomData[112] <= UInt<4>("he") @[BootRom.scala 25:28]
    bootRomData[113] <= UInt<5>("h13") @[BootRom.scala 25:28]
    bootRomData[114] <= UInt<6>("h24") @[BootRom.scala 25:28]
    bootRomData[115] <= UInt<7>("h7c") @[BootRom.scala 25:28]
    bootRomData[116] <= UInt<5>("h1e") @[BootRom.scala 25:28]
    bootRomData[117] <= UInt<8>("h83") @[BootRom.scala 25:28]
    bootRomData[118] <= UInt<8>("hfe") @[BootRom.scala 25:28]
    bootRomData[119] <= UInt<7>("h62") @[BootRom.scala 25:28]
    bootRomData[120] <= UInt<6>("h28") @[BootRom.scala 25:28]
    bootRomData[121] <= UInt<3>("h6") @[BootRom.scala 25:28]
    bootRomData[122] <= UInt<5>("h1e") @[BootRom.scala 25:28]
    bootRomData[123] <= UInt<8>("hc1") @[BootRom.scala 25:28]
    bootRomData[124] <= UInt<8>("hfe") @[BootRom.scala 25:28]
    bootRomData[125] <= UInt<7>("h64") @[BootRom.scala 25:28]
    bootRomData[126] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[127] <= UInt<3>("h6") @[BootRom.scala 25:28]
    bootRomData[128] <= UInt<7>("h7b") @[BootRom.scala 25:28]
    bootRomData[129] <= UInt<8>("he2") @[BootRom.scala 25:28]
    bootRomData[130] <= UInt<4>("hc") @[BootRom.scala 25:28]
    bootRomData[131] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[132] <= UInt<8>("h87") @[BootRom.scala 25:28]
    bootRomData[133] <= UInt<8>("he2") @[BootRom.scala 25:28]
    bootRomData[134] <= UInt<8>("hf0") @[BootRom.scala 25:28]
    bootRomData[135] <= UInt<7>("h42") @[BootRom.scala 25:28]
    bootRomData[136] <= UInt<8>("h90") @[BootRom.scala 25:28]
    bootRomData[137] <= UInt<8>("he0") @[BootRom.scala 25:28]
    bootRomData[138] <= UInt<7>("h42") @[BootRom.scala 25:28]
    bootRomData[139] <= UInt<5>("h15") @[BootRom.scala 25:28]
    bootRomData[140] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[141] <= UInt<8>("hd2") @[BootRom.scala 25:28]
    bootRomData[142] <= UInt<3>("h5") @[BootRom.scala 25:28]
    bootRomData[143] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[144] <= UInt<7>("h4f") @[BootRom.scala 25:28]
    bootRomData[145] <= UInt<5>("h16") @[BootRom.scala 25:28]
    bootRomData[146] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[147] <= UInt<5>("h18") @[BootRom.scala 25:28]
    bootRomData[148] <= UInt<8>("hcb") @[BootRom.scala 25:28]
    bootRomData[149] <= UInt<7>("h4f") @[BootRom.scala 25:28]
    bootRomData[150] <= UInt<3>("h6") @[BootRom.scala 25:28]
    bootRomData[151] <= UInt<3>("h4") @[BootRom.scala 25:28]
    bootRomData[152] <= UInt<8>("hc5") @[BootRom.scala 25:28]
    bootRomData[153] <= UInt<8>("hcb") @[BootRom.scala 25:28]
    bootRomData[154] <= UInt<5>("h11") @[BootRom.scala 25:28]
    bootRomData[155] <= UInt<5>("h17") @[BootRom.scala 25:28]
    bootRomData[156] <= UInt<8>("hc1") @[BootRom.scala 25:28]
    bootRomData[157] <= UInt<8>("hcb") @[BootRom.scala 25:28]
    bootRomData[158] <= UInt<5>("h11") @[BootRom.scala 25:28]
    bootRomData[159] <= UInt<5>("h17") @[BootRom.scala 25:28]
    bootRomData[160] <= UInt<3>("h5") @[BootRom.scala 25:28]
    bootRomData[161] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[162] <= UInt<8>("hf5") @[BootRom.scala 25:28]
    bootRomData[163] <= UInt<6>("h22") @[BootRom.scala 25:28]
    bootRomData[164] <= UInt<6>("h23") @[BootRom.scala 25:28]
    bootRomData[165] <= UInt<6>("h22") @[BootRom.scala 25:28]
    bootRomData[166] <= UInt<6>("h23") @[BootRom.scala 25:28]
    bootRomData[167] <= UInt<8>("hc9") @[BootRom.scala 25:28]
    bootRomData[168] <= UInt<8>("hce") @[BootRom.scala 25:28]
    bootRomData[169] <= UInt<8>("hed") @[BootRom.scala 25:28]
    bootRomData[170] <= UInt<7>("h66") @[BootRom.scala 25:28]
    bootRomData[171] <= UInt<7>("h66") @[BootRom.scala 25:28]
    bootRomData[172] <= UInt<8>("hcc") @[BootRom.scala 25:28]
    bootRomData[173] <= UInt<4>("hd") @[BootRom.scala 25:28]
    bootRomData[174] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[175] <= UInt<4>("hb") @[BootRom.scala 25:28]
    bootRomData[176] <= UInt<2>("h3") @[BootRom.scala 25:28]
    bootRomData[177] <= UInt<7>("h73") @[BootRom.scala 25:28]
    bootRomData[178] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[179] <= UInt<8>("h83") @[BootRom.scala 25:28]
    bootRomData[180] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[181] <= UInt<4>("hc") @[BootRom.scala 25:28]
    bootRomData[182] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[183] <= UInt<4>("hd") @[BootRom.scala 25:28]
    bootRomData[184] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[185] <= UInt<4>("h8") @[BootRom.scala 25:28]
    bootRomData[186] <= UInt<5>("h11") @[BootRom.scala 25:28]
    bootRomData[187] <= UInt<5>("h1f") @[BootRom.scala 25:28]
    bootRomData[188] <= UInt<8>("h88") @[BootRom.scala 25:28]
    bootRomData[189] <= UInt<8>("h89") @[BootRom.scala 25:28]
    bootRomData[190] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[191] <= UInt<4>("he") @[BootRom.scala 25:28]
    bootRomData[192] <= UInt<8>("hdc") @[BootRom.scala 25:28]
    bootRomData[193] <= UInt<8>("hcc") @[BootRom.scala 25:28]
    bootRomData[194] <= UInt<7>("h6e") @[BootRom.scala 25:28]
    bootRomData[195] <= UInt<8>("he6") @[BootRom.scala 25:28]
    bootRomData[196] <= UInt<8>("hdd") @[BootRom.scala 25:28]
    bootRomData[197] <= UInt<8>("hdd") @[BootRom.scala 25:28]
    bootRomData[198] <= UInt<8>("hd9") @[BootRom.scala 25:28]
    bootRomData[199] <= UInt<8>("h99") @[BootRom.scala 25:28]
    bootRomData[200] <= UInt<8>("hbb") @[BootRom.scala 25:28]
    bootRomData[201] <= UInt<8>("hbb") @[BootRom.scala 25:28]
    bootRomData[202] <= UInt<7>("h67") @[BootRom.scala 25:28]
    bootRomData[203] <= UInt<7>("h63") @[BootRom.scala 25:28]
    bootRomData[204] <= UInt<7>("h6e") @[BootRom.scala 25:28]
    bootRomData[205] <= UInt<4>("he") @[BootRom.scala 25:28]
    bootRomData[206] <= UInt<8>("hec") @[BootRom.scala 25:28]
    bootRomData[207] <= UInt<8>("hcc") @[BootRom.scala 25:28]
    bootRomData[208] <= UInt<8>("hdd") @[BootRom.scala 25:28]
    bootRomData[209] <= UInt<8>("hdc") @[BootRom.scala 25:28]
    bootRomData[210] <= UInt<8>("h99") @[BootRom.scala 25:28]
    bootRomData[211] <= UInt<8>("h9f") @[BootRom.scala 25:28]
    bootRomData[212] <= UInt<8>("hbb") @[BootRom.scala 25:28]
    bootRomData[213] <= UInt<8>("hb9") @[BootRom.scala 25:28]
    bootRomData[214] <= UInt<6>("h33") @[BootRom.scala 25:28]
    bootRomData[215] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[216] <= UInt<6>("h3c") @[BootRom.scala 25:28]
    bootRomData[217] <= UInt<7>("h42") @[BootRom.scala 25:28]
    bootRomData[218] <= UInt<8>("hb9") @[BootRom.scala 25:28]
    bootRomData[219] <= UInt<8>("ha5") @[BootRom.scala 25:28]
    bootRomData[220] <= UInt<8>("hb9") @[BootRom.scala 25:28]
    bootRomData[221] <= UInt<8>("ha5") @[BootRom.scala 25:28]
    bootRomData[222] <= UInt<7>("h42") @[BootRom.scala 25:28]
    bootRomData[223] <= UInt<6>("h3c") @[BootRom.scala 25:28]
    bootRomData[224] <= UInt<6>("h21") @[BootRom.scala 25:28]
    bootRomData[225] <= UInt<3>("h4") @[BootRom.scala 25:28]
    bootRomData[226] <= UInt<1>("h1") @[BootRom.scala 25:28]
    bootRomData[227] <= UInt<5>("h11") @[BootRom.scala 25:28]
    bootRomData[228] <= UInt<8>("ha8") @[BootRom.scala 25:28]
    bootRomData[229] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[230] <= UInt<5>("h1a") @[BootRom.scala 25:28]
    bootRomData[231] <= UInt<5>("h13") @[BootRom.scala 25:28]
    bootRomData[232] <= UInt<8>("hbe") @[BootRom.scala 25:28]
    bootRomData[233] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[234] <= UInt<8>("hfe") @[BootRom.scala 25:28]
    bootRomData[235] <= UInt<6>("h23") @[BootRom.scala 25:28]
    bootRomData[236] <= UInt<7>("h7d") @[BootRom.scala 25:28]
    bootRomData[237] <= UInt<8>("hfe") @[BootRom.scala 25:28]
    bootRomData[238] <= UInt<6>("h34") @[BootRom.scala 25:28]
    bootRomData[239] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[240] <= UInt<8>("hf5") @[BootRom.scala 25:28]
    bootRomData[241] <= UInt<3>("h6") @[BootRom.scala 25:28]
    bootRomData[242] <= UInt<5>("h19") @[BootRom.scala 25:28]
    bootRomData[243] <= UInt<7>("h78") @[BootRom.scala 25:28]
    bootRomData[244] <= UInt<8>("h86") @[BootRom.scala 25:28]
    bootRomData[245] <= UInt<6>("h23") @[BootRom.scala 25:28]
    bootRomData[246] <= UInt<3>("h5") @[BootRom.scala 25:28]
    bootRomData[247] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[248] <= UInt<8>("hfb") @[BootRom.scala 25:28]
    bootRomData[249] <= UInt<8>("h86") @[BootRom.scala 25:28]
    bootRomData[250] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[251] <= UInt<8>("hfe") @[BootRom.scala 25:28]
    bootRomData[252] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[253] <= UInt<1>("h1") @[BootRom.scala 25:28]
    bootRomData[254] <= UInt<8>("he0") @[BootRom.scala 25:28]
    bootRomData[255] <= UInt<7>("h50") @[BootRom.scala 25:28]
    node inBootRange = lt(io.address, UInt<9>("h100")) @[BootRom.scala 61:32]
    node _io_valid_T = and(io.enabled, inBootRange) @[BootRom.scala 62:26]
    io.valid <= _io_valid_T @[BootRom.scala 62:12]
    when io.valid : @[BootRom.scala 65:18]
      node _io_dataOut_T = bits(io.address, 7, 0) @[BootRom.scala 66:41]
      io.dataOut <= bootRomData[_io_dataOut_T] @[BootRom.scala 66:16]
    else :
      io.dataOut <= UInt<1>("h0") @[BootRom.scala 68:16]


  module IORegisters :
    input clock : Clock
    input reset : Reset
    output io : { flip addr : UInt<8>, flip write : UInt<1>, flip writeData : UInt<8>, readData : UInt<8>, ifReg : UInt<8>, flip vblankIRQ : UInt<1>, flip lcdStatIRQ : UInt<1>, flip timerIRQ : UInt<1>, serialOut : UInt<8>, serialValid : UInt<1>, ppuLcdc : UInt<8>, ppuStat : UInt<8>, ppuScy : UInt<8>, ppuScx : UInt<8>, flip ppuLy : UInt<8>, ppuLyc : UInt<8>, ppuBgp : UInt<8>, ppuObp0 : UInt<8>, ppuObp1 : UInt<8>, ppuWy : UInt<8>, ppuWx : UInt<8>}

    reg regP1 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hff")) @[IORegisters.scala 52:22]
    reg regSB : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 57:22]
    reg regSC : UInt<8>, clock with :
      reset => (reset, UInt<8>("h7e")) @[IORegisters.scala 58:22]
    reg serialOutReg : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 61:29]
    reg serialValidReg : UInt<1>, clock with :
      reset => (reset, UInt<1>("h0")) @[IORegisters.scala 62:31]
    serialValidReg <= UInt<1>("h0") @[IORegisters.scala 63:18]
    reg regDIV : UInt<8>, clock with :
      reset => (reset, UInt<8>("hab")) @[IORegisters.scala 68:24]
    reg regTIMA : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 69:24]
    reg regTMA : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 70:24]
    reg regTAC : UInt<8>, clock with :
      reset => (reset, UInt<8>("hf8")) @[IORegisters.scala 71:24]
    reg divCounter : UInt<16>, clock with :
      reset => (reset, UInt<16>("h0")) @[IORegisters.scala 73:27]
    node _divCounter_T = add(divCounter, UInt<1>("h1")) @[IORegisters.scala 76:28]
    node _divCounter_T_1 = tail(_divCounter_T, 1) @[IORegisters.scala 76:28]
    divCounter <= _divCounter_T_1 @[IORegisters.scala 76:14]
    node _T = eq(divCounter, UInt<8>("hff")) @[IORegisters.scala 77:19]
    when _T : @[IORegisters.scala 77:30]
      node _regDIV_T = add(regDIV, UInt<1>("h1")) @[IORegisters.scala 78:22]
      node _regDIV_T_1 = tail(_regDIV_T, 1) @[IORegisters.scala 78:22]
      regDIV <= _regDIV_T_1 @[IORegisters.scala 78:12]
      divCounter <= UInt<1>("h0") @[IORegisters.scala 79:16]
    reg regIF : UInt<8>, clock with :
      reset => (reset, UInt<8>("he1")) @[IORegisters.scala 85:22]
    when io.vblankIRQ : @[IORegisters.scala 88:22]
      node _regIF_T = or(regIF, UInt<1>("h1")) @[IORegisters.scala 89:20]
      regIF <= _regIF_T @[IORegisters.scala 89:11]
    when io.lcdStatIRQ : @[IORegisters.scala 91:23]
      node _regIF_T_1 = or(regIF, UInt<2>("h2")) @[IORegisters.scala 92:20]
      regIF <= _regIF_T_1 @[IORegisters.scala 92:11]
    when io.timerIRQ : @[IORegisters.scala 94:21]
      node _regIF_T_2 = or(regIF, UInt<3>("h4")) @[IORegisters.scala 95:20]
      regIF <= _regIF_T_2 @[IORegisters.scala 95:11]
    io.ifReg <= regIF @[IORegisters.scala 98:12]
    reg regNR10 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h80")) @[IORegisters.scala 103:24]
    reg regNR11 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hbf")) @[IORegisters.scala 104:24]
    reg regNR12 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hf3")) @[IORegisters.scala 105:24]
    reg regNR13 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hff")) @[IORegisters.scala 106:24]
    reg regNR14 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hbf")) @[IORegisters.scala 107:24]
    reg regNR21 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h3f")) @[IORegisters.scala 108:24]
    reg regNR22 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 109:24]
    reg regNR23 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hff")) @[IORegisters.scala 110:24]
    reg regNR24 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hbf")) @[IORegisters.scala 111:24]
    reg regNR30 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h7f")) @[IORegisters.scala 112:24]
    reg regNR31 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hff")) @[IORegisters.scala 113:24]
    reg regNR32 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h9f")) @[IORegisters.scala 114:24]
    reg regNR33 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hff")) @[IORegisters.scala 115:24]
    reg regNR34 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hbf")) @[IORegisters.scala 116:24]
    reg regNR41 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hff")) @[IORegisters.scala 117:24]
    reg regNR42 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 118:24]
    reg regNR43 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 119:24]
    reg regNR44 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hbf")) @[IORegisters.scala 120:24]
    reg regNR50 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h77")) @[IORegisters.scala 121:24]
    reg regNR51 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hf3")) @[IORegisters.scala 122:24]
    reg regNR52 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hf1")) @[IORegisters.scala 123:24]
    reg regLCDC : UInt<8>, clock with :
      reset => (reset, UInt<8>("h91")) @[IORegisters.scala 128:24]
    reg regSTAT : UInt<8>, clock with :
      reset => (reset, UInt<8>("h85")) @[IORegisters.scala 129:24]
    reg regSCY : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 130:24]
    reg regSCX : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 131:24]
    reg regLYC : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 133:24]
    reg regDMA : UInt<8>, clock with :
      reset => (reset, UInt<8>("hff")) @[IORegisters.scala 134:24]
    reg regBGP : UInt<8>, clock with :
      reset => (reset, UInt<8>("hfc")) @[IORegisters.scala 135:24]
    reg regOBP0 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 136:24]
    reg regOBP1 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 137:24]
    reg regWY : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 138:24]
    reg regWX : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 139:24]
    reg regBOOT : UInt<8>, clock with :
      reset => (reset, UInt<8>("hff")) @[IORegisters.scala 144:24]
    wire readData : UInt<8> @[IORegisters.scala 150:29]
    readData <= UInt<8>("hff") @[IORegisters.scala 150:29]
    node _T_1 = eq(UInt<1>("h0"), io.addr) @[IORegisters.scala 152:19]
    when _T_1 : @[IORegisters.scala 152:19]
      readData <= regP1 @[IORegisters.scala 154:27]
    else :
      node _T_2 = eq(UInt<1>("h1"), io.addr) @[IORegisters.scala 152:19]
      when _T_2 : @[IORegisters.scala 152:19]
        readData <= regSB @[IORegisters.scala 157:27]
      else :
        node _T_3 = eq(UInt<2>("h2"), io.addr) @[IORegisters.scala 152:19]
        when _T_3 : @[IORegisters.scala 152:19]
          readData <= regSC @[IORegisters.scala 158:27]
        else :
          node _T_4 = eq(UInt<3>("h4"), io.addr) @[IORegisters.scala 152:19]
          when _T_4 : @[IORegisters.scala 152:19]
            readData <= regDIV @[IORegisters.scala 161:27]
          else :
            node _T_5 = eq(UInt<3>("h5"), io.addr) @[IORegisters.scala 152:19]
            when _T_5 : @[IORegisters.scala 152:19]
              readData <= regTIMA @[IORegisters.scala 162:27]
            else :
              node _T_6 = eq(UInt<3>("h6"), io.addr) @[IORegisters.scala 152:19]
              when _T_6 : @[IORegisters.scala 152:19]
                readData <= regTMA @[IORegisters.scala 163:27]
              else :
                node _T_7 = eq(UInt<3>("h7"), io.addr) @[IORegisters.scala 152:19]
                when _T_7 : @[IORegisters.scala 152:19]
                  readData <= regTAC @[IORegisters.scala 164:27]
                else :
                  node _T_8 = eq(UInt<4>("hf"), io.addr) @[IORegisters.scala 152:19]
                  when _T_8 : @[IORegisters.scala 152:19]
                    readData <= regIF @[IORegisters.scala 167:27]
                  else :
                    node _T_9 = eq(UInt<5>("h10"), io.addr) @[IORegisters.scala 152:19]
                    when _T_9 : @[IORegisters.scala 152:19]
                      readData <= regNR10 @[IORegisters.scala 170:27]
                    else :
                      node _T_10 = eq(UInt<5>("h11"), io.addr) @[IORegisters.scala 152:19]
                      when _T_10 : @[IORegisters.scala 152:19]
                        readData <= regNR11 @[IORegisters.scala 171:27]
                      else :
                        node _T_11 = eq(UInt<5>("h12"), io.addr) @[IORegisters.scala 152:19]
                        when _T_11 : @[IORegisters.scala 152:19]
                          readData <= regNR12 @[IORegisters.scala 172:27]
                        else :
                          node _T_12 = eq(UInt<5>("h13"), io.addr) @[IORegisters.scala 152:19]
                          when _T_12 : @[IORegisters.scala 152:19]
                            readData <= regNR13 @[IORegisters.scala 173:27]
                          else :
                            node _T_13 = eq(UInt<5>("h14"), io.addr) @[IORegisters.scala 152:19]
                            when _T_13 : @[IORegisters.scala 152:19]
                              readData <= regNR14 @[IORegisters.scala 174:27]
                            else :
                              node _T_14 = eq(UInt<5>("h16"), io.addr) @[IORegisters.scala 152:19]
                              when _T_14 : @[IORegisters.scala 152:19]
                                readData <= regNR21 @[IORegisters.scala 175:27]
                              else :
                                node _T_15 = eq(UInt<5>("h17"), io.addr) @[IORegisters.scala 152:19]
                                when _T_15 : @[IORegisters.scala 152:19]
                                  readData <= regNR22 @[IORegisters.scala 176:27]
                                else :
                                  node _T_16 = eq(UInt<5>("h18"), io.addr) @[IORegisters.scala 152:19]
                                  when _T_16 : @[IORegisters.scala 152:19]
                                    readData <= regNR23 @[IORegisters.scala 177:27]
                                  else :
                                    node _T_17 = eq(UInt<5>("h19"), io.addr) @[IORegisters.scala 152:19]
                                    when _T_17 : @[IORegisters.scala 152:19]
                                      readData <= regNR24 @[IORegisters.scala 178:27]
                                    else :
                                      node _T_18 = eq(UInt<5>("h1a"), io.addr) @[IORegisters.scala 152:19]
                                      when _T_18 : @[IORegisters.scala 152:19]
                                        readData <= regNR30 @[IORegisters.scala 179:27]
                                      else :
                                        node _T_19 = eq(UInt<5>("h1b"), io.addr) @[IORegisters.scala 152:19]
                                        when _T_19 : @[IORegisters.scala 152:19]
                                          readData <= regNR31 @[IORegisters.scala 180:27]
                                        else :
                                          node _T_20 = eq(UInt<5>("h1c"), io.addr) @[IORegisters.scala 152:19]
                                          when _T_20 : @[IORegisters.scala 152:19]
                                            readData <= regNR32 @[IORegisters.scala 181:27]
                                          else :
                                            node _T_21 = eq(UInt<5>("h1d"), io.addr) @[IORegisters.scala 152:19]
                                            when _T_21 : @[IORegisters.scala 152:19]
                                              readData <= regNR33 @[IORegisters.scala 182:27]
                                            else :
                                              node _T_22 = eq(UInt<5>("h1e"), io.addr) @[IORegisters.scala 152:19]
                                              when _T_22 : @[IORegisters.scala 152:19]
                                                readData <= regNR34 @[IORegisters.scala 183:27]
                                              else :
                                                node _T_23 = eq(UInt<6>("h20"), io.addr) @[IORegisters.scala 152:19]
                                                when _T_23 : @[IORegisters.scala 152:19]
                                                  readData <= regNR41 @[IORegisters.scala 184:27]
                                                else :
                                                  node _T_24 = eq(UInt<6>("h21"), io.addr) @[IORegisters.scala 152:19]
                                                  when _T_24 : @[IORegisters.scala 152:19]
                                                    readData <= regNR42 @[IORegisters.scala 185:27]
                                                  else :
                                                    node _T_25 = eq(UInt<6>("h22"), io.addr) @[IORegisters.scala 152:19]
                                                    when _T_25 : @[IORegisters.scala 152:19]
                                                      readData <= regNR43 @[IORegisters.scala 186:27]
                                                    else :
                                                      node _T_26 = eq(UInt<6>("h23"), io.addr) @[IORegisters.scala 152:19]
                                                      when _T_26 : @[IORegisters.scala 152:19]
                                                        readData <= regNR44 @[IORegisters.scala 187:27]
                                                      else :
                                                        node _T_27 = eq(UInt<6>("h24"), io.addr) @[IORegisters.scala 152:19]
                                                        when _T_27 : @[IORegisters.scala 152:19]
                                                          readData <= regNR50 @[IORegisters.scala 188:27]
                                                        else :
                                                          node _T_28 = eq(UInt<6>("h25"), io.addr) @[IORegisters.scala 152:19]
                                                          when _T_28 : @[IORegisters.scala 152:19]
                                                            readData <= regNR51 @[IORegisters.scala 189:27]
                                                          else :
                                                            node _T_29 = eq(UInt<6>("h26"), io.addr) @[IORegisters.scala 152:19]
                                                            when _T_29 : @[IORegisters.scala 152:19]
                                                              readData <= regNR52 @[IORegisters.scala 190:27]
                                                            else :
                                                              node _T_30 = eq(UInt<7>("h40"), io.addr) @[IORegisters.scala 152:19]
                                                              when _T_30 : @[IORegisters.scala 152:19]
                                                                readData <= regLCDC @[IORegisters.scala 193:27]
                                                              else :
                                                                node _T_31 = eq(UInt<7>("h41"), io.addr) @[IORegisters.scala 152:19]
                                                                when _T_31 : @[IORegisters.scala 152:19]
                                                                  readData <= regSTAT @[IORegisters.scala 194:27]
                                                                else :
                                                                  node _T_32 = eq(UInt<7>("h42"), io.addr) @[IORegisters.scala 152:19]
                                                                  when _T_32 : @[IORegisters.scala 152:19]
                                                                    readData <= regSCY @[IORegisters.scala 195:27]
                                                                  else :
                                                                    node _T_33 = eq(UInt<7>("h43"), io.addr) @[IORegisters.scala 152:19]
                                                                    when _T_33 : @[IORegisters.scala 152:19]
                                                                      readData <= regSCX @[IORegisters.scala 196:27]
                                                                    else :
                                                                      node _T_34 = eq(UInt<7>("h44"), io.addr) @[IORegisters.scala 152:19]
                                                                      when _T_34 : @[IORegisters.scala 152:19]
                                                                        readData <= io.ppuLy @[IORegisters.scala 197:27]
                                                                      else :
                                                                        node _T_35 = eq(UInt<7>("h45"), io.addr) @[IORegisters.scala 152:19]
                                                                        when _T_35 : @[IORegisters.scala 152:19]
                                                                          readData <= regLYC @[IORegisters.scala 198:27]
                                                                        else :
                                                                          node _T_36 = eq(UInt<7>("h46"), io.addr) @[IORegisters.scala 152:19]
                                                                          when _T_36 : @[IORegisters.scala 152:19]
                                                                            readData <= regDMA @[IORegisters.scala 199:27]
                                                                          else :
                                                                            node _T_37 = eq(UInt<7>("h47"), io.addr) @[IORegisters.scala 152:19]
                                                                            when _T_37 : @[IORegisters.scala 152:19]
                                                                              readData <= regBGP @[IORegisters.scala 200:27]
                                                                            else :
                                                                              node _T_38 = eq(UInt<7>("h48"), io.addr) @[IORegisters.scala 152:19]
                                                                              when _T_38 : @[IORegisters.scala 152:19]
                                                                                readData <= regOBP0 @[IORegisters.scala 201:27]
                                                                              else :
                                                                                node _T_39 = eq(UInt<7>("h49"), io.addr) @[IORegisters.scala 152:19]
                                                                                when _T_39 : @[IORegisters.scala 152:19]
                                                                                  readData <= regOBP1 @[IORegisters.scala 202:27]
                                                                                else :
                                                                                  node _T_40 = eq(UInt<7>("h4a"), io.addr) @[IORegisters.scala 152:19]
                                                                                  when _T_40 : @[IORegisters.scala 152:19]
                                                                                    readData <= regWY @[IORegisters.scala 203:27]
                                                                                  else :
                                                                                    node _T_41 = eq(UInt<7>("h4b"), io.addr) @[IORegisters.scala 152:19]
                                                                                    when _T_41 : @[IORegisters.scala 152:19]
                                                                                      readData <= regWX @[IORegisters.scala 204:27]
                                                                                    else :
                                                                                      node _T_42 = eq(UInt<7>("h50"), io.addr) @[IORegisters.scala 152:19]
                                                                                      when _T_42 : @[IORegisters.scala 152:19]
                                                                                        readData <= regBOOT @[IORegisters.scala 207:27]
    io.readData <= readData @[IORegisters.scala 210:15]
    when io.write : @[IORegisters.scala 215:18]
      node _T_43 = eq(UInt<1>("h0"), io.addr) @[IORegisters.scala 216:21]
      when _T_43 : @[IORegisters.scala 216:21]
        node _regP1_T = or(io.writeData, UInt<8>("hcf")) @[IORegisters.scala 218:42]
        regP1 <= _regP1_T @[IORegisters.scala 218:26]
      else :
        node _T_44 = eq(UInt<1>("h1"), io.addr) @[IORegisters.scala 216:21]
        when _T_44 : @[IORegisters.scala 216:21]
          regSB <= io.writeData @[IORegisters.scala 222:15]
        else :
          node _T_45 = eq(UInt<2>("h2"), io.addr) @[IORegisters.scala 216:21]
          when _T_45 : @[IORegisters.scala 216:21]
            regSC <= io.writeData @[IORegisters.scala 225:15]
            node _T_46 = bits(io.writeData, 7, 7) @[IORegisters.scala 227:26]
            when _T_46 : @[IORegisters.scala 227:31]
              serialOutReg <= regSB @[IORegisters.scala 228:24]
              serialValidReg <= UInt<1>("h1") @[IORegisters.scala 229:26]
              node _T_47 = asUInt(reset) @[IORegisters.scala 231:17]
              node _T_48 = eq(_T_47, UInt<1>("h0")) @[IORegisters.scala 231:17]
              when _T_48 : @[IORegisters.scala 231:17]
                printf(clock, UInt<1>("h1"), "[SERIAL] 0x%x '%c'\n", regSB, regSB) : printf @[IORegisters.scala 231:17]
          else :
            node _T_49 = eq(UInt<3>("h4"), io.addr) @[IORegisters.scala 216:21]
            when _T_49 : @[IORegisters.scala 216:21]
              regDIV <= UInt<1>("h0") @[IORegisters.scala 236:27]
            else :
              node _T_50 = eq(UInt<3>("h5"), io.addr) @[IORegisters.scala 216:21]
              when _T_50 : @[IORegisters.scala 216:21]
                regTIMA <= io.writeData @[IORegisters.scala 237:28]
              else :
                node _T_51 = eq(UInt<3>("h6"), io.addr) @[IORegisters.scala 216:21]
                when _T_51 : @[IORegisters.scala 216:21]
                  regTMA <= io.writeData @[IORegisters.scala 238:27]
                else :
                  node _T_52 = eq(UInt<3>("h7"), io.addr) @[IORegisters.scala 216:21]
                  when _T_52 : @[IORegisters.scala 216:21]
                    regTAC <= io.writeData @[IORegisters.scala 239:27]
                  else :
                    node _T_53 = eq(UInt<4>("hf"), io.addr) @[IORegisters.scala 216:21]
                    when _T_53 : @[IORegisters.scala 216:21]
                      regIF <= io.writeData @[IORegisters.scala 242:26]
                    else :
                      node _T_54 = eq(UInt<5>("h10"), io.addr) @[IORegisters.scala 216:21]
                      when _T_54 : @[IORegisters.scala 216:21]
                        regNR10 <= io.writeData @[IORegisters.scala 245:28]
                      else :
                        node _T_55 = eq(UInt<5>("h11"), io.addr) @[IORegisters.scala 216:21]
                        when _T_55 : @[IORegisters.scala 216:21]
                          regNR11 <= io.writeData @[IORegisters.scala 246:28]
                        else :
                          node _T_56 = eq(UInt<5>("h12"), io.addr) @[IORegisters.scala 216:21]
                          when _T_56 : @[IORegisters.scala 216:21]
                            regNR12 <= io.writeData @[IORegisters.scala 247:28]
                          else :
                            node _T_57 = eq(UInt<5>("h13"), io.addr) @[IORegisters.scala 216:21]
                            when _T_57 : @[IORegisters.scala 216:21]
                              regNR13 <= io.writeData @[IORegisters.scala 248:28]
                            else :
                              node _T_58 = eq(UInt<5>("h14"), io.addr) @[IORegisters.scala 216:21]
                              when _T_58 : @[IORegisters.scala 216:21]
                                regNR14 <= io.writeData @[IORegisters.scala 249:28]
                              else :
                                node _T_59 = eq(UInt<5>("h16"), io.addr) @[IORegisters.scala 216:21]
                                when _T_59 : @[IORegisters.scala 216:21]
                                  regNR21 <= io.writeData @[IORegisters.scala 250:28]
                                else :
                                  node _T_60 = eq(UInt<5>("h17"), io.addr) @[IORegisters.scala 216:21]
                                  when _T_60 : @[IORegisters.scala 216:21]
                                    regNR22 <= io.writeData @[IORegisters.scala 251:28]
                                  else :
                                    node _T_61 = eq(UInt<5>("h18"), io.addr) @[IORegisters.scala 216:21]
                                    when _T_61 : @[IORegisters.scala 216:21]
                                      regNR23 <= io.writeData @[IORegisters.scala 252:28]
                                    else :
                                      node _T_62 = eq(UInt<5>("h19"), io.addr) @[IORegisters.scala 216:21]
                                      when _T_62 : @[IORegisters.scala 216:21]
                                        regNR24 <= io.writeData @[IORegisters.scala 253:28]
                                      else :
                                        node _T_63 = eq(UInt<5>("h1a"), io.addr) @[IORegisters.scala 216:21]
                                        when _T_63 : @[IORegisters.scala 216:21]
                                          regNR30 <= io.writeData @[IORegisters.scala 254:28]
                                        else :
                                          node _T_64 = eq(UInt<5>("h1b"), io.addr) @[IORegisters.scala 216:21]
                                          when _T_64 : @[IORegisters.scala 216:21]
                                            regNR31 <= io.writeData @[IORegisters.scala 255:28]
                                          else :
                                            node _T_65 = eq(UInt<5>("h1c"), io.addr) @[IORegisters.scala 216:21]
                                            when _T_65 : @[IORegisters.scala 216:21]
                                              regNR32 <= io.writeData @[IORegisters.scala 256:28]
                                            else :
                                              node _T_66 = eq(UInt<5>("h1d"), io.addr) @[IORegisters.scala 216:21]
                                              when _T_66 : @[IORegisters.scala 216:21]
                                                regNR33 <= io.writeData @[IORegisters.scala 257:28]
                                              else :
                                                node _T_67 = eq(UInt<5>("h1e"), io.addr) @[IORegisters.scala 216:21]
                                                when _T_67 : @[IORegisters.scala 216:21]
                                                  regNR34 <= io.writeData @[IORegisters.scala 258:28]
                                                else :
                                                  node _T_68 = eq(UInt<6>("h20"), io.addr) @[IORegisters.scala 216:21]
                                                  when _T_68 : @[IORegisters.scala 216:21]
                                                    regNR41 <= io.writeData @[IORegisters.scala 259:28]
                                                  else :
                                                    node _T_69 = eq(UInt<6>("h21"), io.addr) @[IORegisters.scala 216:21]
                                                    when _T_69 : @[IORegisters.scala 216:21]
                                                      regNR42 <= io.writeData @[IORegisters.scala 260:28]
                                                    else :
                                                      node _T_70 = eq(UInt<6>("h22"), io.addr) @[IORegisters.scala 216:21]
                                                      when _T_70 : @[IORegisters.scala 216:21]
                                                        regNR43 <= io.writeData @[IORegisters.scala 261:28]
                                                      else :
                                                        node _T_71 = eq(UInt<6>("h23"), io.addr) @[IORegisters.scala 216:21]
                                                        when _T_71 : @[IORegisters.scala 216:21]
                                                          regNR44 <= io.writeData @[IORegisters.scala 262:28]
                                                        else :
                                                          node _T_72 = eq(UInt<6>("h24"), io.addr) @[IORegisters.scala 216:21]
                                                          when _T_72 : @[IORegisters.scala 216:21]
                                                            regNR50 <= io.writeData @[IORegisters.scala 263:28]
                                                          else :
                                                            node _T_73 = eq(UInt<6>("h25"), io.addr) @[IORegisters.scala 216:21]
                                                            when _T_73 : @[IORegisters.scala 216:21]
                                                              regNR51 <= io.writeData @[IORegisters.scala 264:28]
                                                            else :
                                                              node _T_74 = eq(UInt<6>("h26"), io.addr) @[IORegisters.scala 216:21]
                                                              when _T_74 : @[IORegisters.scala 216:21]
                                                                regNR52 <= io.writeData @[IORegisters.scala 265:28]
                                                              else :
                                                                node _T_75 = eq(UInt<7>("h40"), io.addr) @[IORegisters.scala 216:21]
                                                                when _T_75 : @[IORegisters.scala 216:21]
                                                                  regLCDC <= io.writeData @[IORegisters.scala 268:28]
                                                                else :
                                                                  node _T_76 = eq(UInt<7>("h41"), io.addr) @[IORegisters.scala 216:21]
                                                                  when _T_76 : @[IORegisters.scala 216:21]
                                                                    regSTAT <= io.writeData @[IORegisters.scala 269:28]
                                                                  else :
                                                                    node _T_77 = eq(UInt<7>("h42"), io.addr) @[IORegisters.scala 216:21]
                                                                    when _T_77 : @[IORegisters.scala 216:21]
                                                                      regSCY <= io.writeData @[IORegisters.scala 270:27]
                                                                    else :
                                                                      node _T_78 = eq(UInt<7>("h43"), io.addr) @[IORegisters.scala 216:21]
                                                                      when _T_78 : @[IORegisters.scala 216:21]
                                                                        regSCX <= io.writeData @[IORegisters.scala 271:27]
                                                                      else :
                                                                        node _T_79 = eq(UInt<7>("h44"), io.addr) @[IORegisters.scala 216:21]
                                                                        when _T_79 : @[IORegisters.scala 216:21]
                                                                          skip
                                                                        else :
                                                                          node _T_80 = eq(UInt<7>("h45"), io.addr) @[IORegisters.scala 216:21]
                                                                          when _T_80 : @[IORegisters.scala 216:21]
                                                                            regLYC <= io.writeData @[IORegisters.scala 273:27]
                                                                          else :
                                                                            node _T_81 = eq(UInt<7>("h46"), io.addr) @[IORegisters.scala 216:21]
                                                                            when _T_81 : @[IORegisters.scala 216:21]
                                                                              regDMA <= io.writeData @[IORegisters.scala 274:27]
                                                                            else :
                                                                              node _T_82 = eq(UInt<7>("h47"), io.addr) @[IORegisters.scala 216:21]
                                                                              when _T_82 : @[IORegisters.scala 216:21]
                                                                                regBGP <= io.writeData @[IORegisters.scala 275:27]
                                                                              else :
                                                                                node _T_83 = eq(UInt<7>("h48"), io.addr) @[IORegisters.scala 216:21]
                                                                                when _T_83 : @[IORegisters.scala 216:21]
                                                                                  regOBP0 <= io.writeData @[IORegisters.scala 276:28]
                                                                                else :
                                                                                  node _T_84 = eq(UInt<7>("h49"), io.addr) @[IORegisters.scala 216:21]
                                                                                  when _T_84 : @[IORegisters.scala 216:21]
                                                                                    regOBP1 <= io.writeData @[IORegisters.scala 277:28]
                                                                                  else :
                                                                                    node _T_85 = eq(UInt<7>("h4a"), io.addr) @[IORegisters.scala 216:21]
                                                                                    when _T_85 : @[IORegisters.scala 216:21]
                                                                                      regWY <= io.writeData @[IORegisters.scala 278:26]
                                                                                    else :
                                                                                      node _T_86 = eq(UInt<7>("h4b"), io.addr) @[IORegisters.scala 216:21]
                                                                                      when _T_86 : @[IORegisters.scala 216:21]
                                                                                        regWX <= io.writeData @[IORegisters.scala 279:26]
                                                                                      else :
                                                                                        node _T_87 = eq(UInt<7>("h50"), io.addr) @[IORegisters.scala 216:21]
                                                                                        when _T_87 : @[IORegisters.scala 216:21]
                                                                                          regBOOT <= io.writeData @[IORegisters.scala 282:28]
    io.serialOut <= serialOutReg @[IORegisters.scala 287:16]
    io.serialValid <= serialValidReg @[IORegisters.scala 288:18]
    io.ppuLcdc <= regLCDC @[IORegisters.scala 291:14]
    io.ppuStat <= regSTAT @[IORegisters.scala 292:14]
    io.ppuScy <= regSCY @[IORegisters.scala 293:14]
    io.ppuScx <= regSCX @[IORegisters.scala 294:14]
    io.ppuLyc <= regLYC @[IORegisters.scala 295:14]
    io.ppuBgp <= regBGP @[IORegisters.scala 296:14]
    io.ppuObp0 <= regOBP0 @[IORegisters.scala 297:14]
    io.ppuObp1 <= regOBP1 @[IORegisters.scala 298:14]
    io.ppuWy <= regWY @[IORegisters.scala 299:14]
    io.ppuWx <= regWX @[IORegisters.scala 300:14]

  module MemoryMap :
    input clock : Clock
    input reset : Reset
    output io : { flip cpuAddress : UInt<16>, flip cpuRead : UInt<1>, flip cpuWrite : UInt<1>, flip cpuWriteData : UInt<8>, cpuReadData : UInt<8>, ieReg : UInt<8>, ifReg : UInt<8>, flip ppuVramAddr : UInt<13>, flip ppuVramRead : UInt<1>, ppuVramData : UInt<8>, flip ppuOamAddr : UInt<8>, flip ppuOamRead : UInt<1>, ppuOamData : UInt<8>, flip ppuLY : UInt<8>, flip ppuVblankIRQ : UInt<1>, flip ppuLcdStatIRQ : UInt<1>, ppuLcdc : UInt<8>, ppuStat : UInt<8>, ppuScy : UInt<8>, ppuScx : UInt<8>, ppuLyc : UInt<8>, ppuBgp : UInt<8>, ppuObp0 : UInt<8>, ppuObp1 : UInt<8>, ppuWy : UInt<8>, ppuWx : UInt<8>, bootRomEnabled : UInt<1>, flip extRomLoadAddr : UInt<32>, flip extRomLoadData : UInt<8>, flip extRomLoadEn : UInt<1>}

    inst bootRom of BootRom @[MemoryMap.scala 59:23]
    bootRom.clock <= clock
    bootRom.reset <= reset
    reg bootRomEnable : UInt<1>, clock with :
      reset => (reset, UInt<1>("h1")) @[MemoryMap.scala 60:30]
    bootRom.io.enabled <= bootRomEnable @[MemoryMap.scala 62:22]
    bootRom.io.address <= io.cpuAddress @[MemoryMap.scala 63:22]
    inst ioRegs of IORegisters @[MemoryMap.scala 68:22]
    ioRegs.clock <= clock
    ioRegs.reset <= reset
    ioRegs.io.vblankIRQ <= io.ppuVblankIRQ @[MemoryMap.scala 69:23]
    ioRegs.io.lcdStatIRQ <= io.ppuLcdStatIRQ @[MemoryMap.scala 70:24]
    ioRegs.io.timerIRQ <= UInt<1>("h0") @[MemoryMap.scala 71:22]
    ioRegs.io.ppuLy <= io.ppuLY @[MemoryMap.scala 72:19]
    smem rom : UInt<8> [1048576] @[MemoryMap.scala 77:24]
    when io.extRomLoadEn : @[MemoryMap.scala 79:25]
      node _T = bits(io.extRomLoadAddr, 19, 0)
      write mport MPORT = rom[_T], clock
      MPORT <= io.extRomLoadData
    smem vram : UInt<8> [8192] @[MemoryMap.scala 86:25]
    smem extRam : UInt<8> [8192] @[MemoryMap.scala 87:27]
    smem wram : UInt<8> [8192] @[MemoryMap.scala 88:25]
    smem oam : UInt<8> [160] @[MemoryMap.scala 89:25]
    cmem hram : UInt<8> [127] @[MemoryMap.scala 90:17]
    reg ramEnabled : UInt<1>, clock with :
      reset => (reset, UInt<1>("h0")) @[MemoryMap.scala 92:27]
    reg regIE : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[MemoryMap.scala 94:22]
    reg romBankNumber : UInt<7>, clock with :
      reset => (reset, UInt<7>("h1")) @[MemoryMap.scala 95:30]
    reg ramBankNumber : UInt<2>, clock with :
      reset => (reset, UInt<2>("h0")) @[MemoryMap.scala 96:30]
    wire _cartRomOut_WIRE : UInt @[MemoryMap.scala 103:28]
    _cartRomOut_WIRE is invalid @[MemoryMap.scala 103:28]
    when io.cpuRead : @[MemoryMap.scala 103:28]
      _cartRomOut_WIRE <= io.cpuAddress @[MemoryMap.scala 103:28]
      node _cartRomOut_T = or(_cartRomOut_WIRE, UInt<20>("h0")) @[MemoryMap.scala 103:28]
      node _cartRomOut_T_1 = bits(_cartRomOut_T, 19, 0) @[MemoryMap.scala 103:28]
      read mport cartRomOut = rom[_cartRomOut_T_1], clock @[MemoryMap.scala 103:28]
    node bootOut = mux(bootRom.io.valid, bootRom.io.dataOut, UInt<1>("h0")) @[MemoryMap.scala 106:20]
    wire rdata : UInt<8> @[MemoryMap.scala 108:26]
    rdata <= UInt<8>("h0") @[MemoryMap.scala 108:26]
    ioRegs.io.addr <= UInt<1>("h0") @[MemoryMap.scala 110:18]
    ioRegs.io.write <= UInt<1>("h0") @[MemoryMap.scala 111:19]
    ioRegs.io.writeData <= UInt<1>("h0") @[MemoryMap.scala 112:23]
    when io.cpuRead : @[MemoryMap.scala 114:20]
      when bootRom.io.valid : @[MemoryMap.scala 117:28]
        rdata <= bootOut @[MemoryMap.scala 118:13]
      else :
        node _T_1 = lt(io.cpuAddress, UInt<16>("h8000")) @[MemoryMap.scala 121:30]
        when _T_1 : @[MemoryMap.scala 121:42]
          rdata <= cartRomOut @[MemoryMap.scala 122:13]
        else :
          node _T_2 = lt(io.cpuAddress, UInt<16>("ha000")) @[MemoryMap.scala 125:30]
          when _T_2 : @[MemoryMap.scala 125:42]
            node _rdata_T = sub(io.cpuAddress, UInt<16>("h8000")) @[MemoryMap.scala 126:40]
            node _rdata_T_1 = tail(_rdata_T, 1) @[MemoryMap.scala 126:40]
            wire _rdata_WIRE : UInt @[MemoryMap.scala 126:25]
            _rdata_WIRE is invalid @[MemoryMap.scala 126:25]
            when UInt<1>("h1") : @[MemoryMap.scala 126:25]
              _rdata_WIRE <= _rdata_T_1 @[MemoryMap.scala 126:25]
              node _rdata_T_2 = or(_rdata_WIRE, UInt<13>("h0")) @[MemoryMap.scala 126:25]
              node _rdata_T_3 = bits(_rdata_T_2, 12, 0) @[MemoryMap.scala 126:25]
              read mport rdata_MPORT = vram[_rdata_T_3], clock @[MemoryMap.scala 126:25]
            rdata <= rdata_MPORT @[MemoryMap.scala 126:13]
          else :
            node _T_3 = lt(io.cpuAddress, UInt<16>("hc000")) @[MemoryMap.scala 129:30]
            when _T_3 : @[MemoryMap.scala 129:42]
              node _rdata_T_4 = sub(io.cpuAddress, UInt<16>("ha000")) @[MemoryMap.scala 130:58]
              node _rdata_T_5 = tail(_rdata_T_4, 1) @[MemoryMap.scala 130:58]
              wire _rdata_WIRE_1 : UInt @[MemoryMap.scala 130:43]
              _rdata_WIRE_1 is invalid @[MemoryMap.scala 130:43]
              when UInt<1>("h1") : @[MemoryMap.scala 130:43]
                _rdata_WIRE_1 <= _rdata_T_5 @[MemoryMap.scala 130:43]
                node _rdata_T_6 = or(_rdata_WIRE_1, UInt<13>("h0")) @[MemoryMap.scala 130:43]
                node _rdata_T_7 = bits(_rdata_T_6, 12, 0) @[MemoryMap.scala 130:43]
                read mport rdata_MPORT_1 = extRam[_rdata_T_7], clock @[MemoryMap.scala 130:43]
              node _rdata_T_8 = mux(ramEnabled, rdata_MPORT_1, UInt<8>("hff")) @[MemoryMap.scala 130:19]
              rdata <= _rdata_T_8 @[MemoryMap.scala 130:13]
            else :
              node _T_4 = lt(io.cpuAddress, UInt<16>("he000")) @[MemoryMap.scala 133:30]
              when _T_4 : @[MemoryMap.scala 133:42]
                node _rdata_T_9 = sub(io.cpuAddress, UInt<16>("hc000")) @[MemoryMap.scala 134:40]
                node _rdata_T_10 = tail(_rdata_T_9, 1) @[MemoryMap.scala 134:40]
                wire _rdata_WIRE_2 : UInt @[MemoryMap.scala 134:25]
                _rdata_WIRE_2 is invalid @[MemoryMap.scala 134:25]
                when UInt<1>("h1") : @[MemoryMap.scala 134:25]
                  _rdata_WIRE_2 <= _rdata_T_10 @[MemoryMap.scala 134:25]
                  node _rdata_T_11 = or(_rdata_WIRE_2, UInt<13>("h0")) @[MemoryMap.scala 134:25]
                  node _rdata_T_12 = bits(_rdata_T_11, 12, 0) @[MemoryMap.scala 134:25]
                  read mport rdata_MPORT_2 = wram[_rdata_T_12], clock @[MemoryMap.scala 134:25]
                rdata <= rdata_MPORT_2 @[MemoryMap.scala 134:13]
              else :
                node _T_5 = lt(io.cpuAddress, UInt<16>("hfe00")) @[MemoryMap.scala 137:30]
                when _T_5 : @[MemoryMap.scala 137:42]
                  node _rdata_T_13 = sub(io.cpuAddress, UInt<16>("he000")) @[MemoryMap.scala 138:40]
                  node _rdata_T_14 = tail(_rdata_T_13, 1) @[MemoryMap.scala 138:40]
                  wire _rdata_WIRE_3 : UInt @[MemoryMap.scala 138:25]
                  _rdata_WIRE_3 is invalid @[MemoryMap.scala 138:25]
                  when UInt<1>("h1") : @[MemoryMap.scala 138:25]
                    _rdata_WIRE_3 <= _rdata_T_14 @[MemoryMap.scala 138:25]
                    node _rdata_T_15 = or(_rdata_WIRE_3, UInt<13>("h0")) @[MemoryMap.scala 138:25]
                    node _rdata_T_16 = bits(_rdata_T_15, 12, 0) @[MemoryMap.scala 138:25]
                    read mport rdata_MPORT_3 = wram[_rdata_T_16], clock @[MemoryMap.scala 138:25]
                  rdata <= rdata_MPORT_3 @[MemoryMap.scala 138:13]
                else :
                  node _T_6 = lt(io.cpuAddress, UInt<16>("hfea0")) @[MemoryMap.scala 141:30]
                  when _T_6 : @[MemoryMap.scala 141:42]
                    node _rdata_T_17 = sub(io.cpuAddress, UInt<16>("hfe00")) @[MemoryMap.scala 142:39]
                    node _rdata_T_18 = tail(_rdata_T_17, 1) @[MemoryMap.scala 142:39]
                    wire _rdata_WIRE_4 : UInt @[MemoryMap.scala 142:24]
                    _rdata_WIRE_4 is invalid @[MemoryMap.scala 142:24]
                    when UInt<1>("h1") : @[MemoryMap.scala 142:24]
                      _rdata_WIRE_4 <= _rdata_T_18 @[MemoryMap.scala 142:24]
                      node _rdata_T_19 = or(_rdata_WIRE_4, UInt<8>("h0")) @[MemoryMap.scala 142:24]
                      node _rdata_T_20 = bits(_rdata_T_19, 7, 0) @[MemoryMap.scala 142:24]
                      read mport rdata_MPORT_4 = oam[_rdata_T_20], clock @[MemoryMap.scala 142:24]
                    rdata <= rdata_MPORT_4 @[MemoryMap.scala 142:13]
                  else :
                    node _T_7 = lt(io.cpuAddress, UInt<16>("hff00")) @[MemoryMap.scala 145:30]
                    when _T_7 : @[MemoryMap.scala 145:42]
                      rdata <= UInt<8>("hff") @[MemoryMap.scala 146:13]
                    else :
                      node _T_8 = lt(io.cpuAddress, UInt<16>("hff80")) @[MemoryMap.scala 149:30]
                      when _T_8 : @[MemoryMap.scala 149:42]
                        node _ioAddr_T = sub(io.cpuAddress, UInt<16>("hff00")) @[MemoryMap.scala 150:34]
                        node ioAddr = tail(_ioAddr_T, 1) @[MemoryMap.scala 150:34]
                        ioRegs.io.addr <= ioAddr @[MemoryMap.scala 151:22]
                        node _T_9 = eq(ioAddr, UInt<7>("h44")) @[MemoryMap.scala 153:19]
                        when _T_9 : @[MemoryMap.scala 153:31]
                          rdata <= io.ppuLY @[MemoryMap.scala 154:15]
                        else :
                          node _T_10 = eq(ioAddr, UInt<7>("h50")) @[MemoryMap.scala 156:25]
                          when _T_10 : @[MemoryMap.scala 156:37]
                            node _rdata_T_21 = mux(bootRomEnable, UInt<1>("h0"), UInt<1>("h1")) @[MemoryMap.scala 157:21]
                            rdata <= _rdata_T_21 @[MemoryMap.scala 157:15]
                          else :
                            rdata <= ioRegs.io.readData @[MemoryMap.scala 160:15]
                      else :
                        node _T_11 = lt(io.cpuAddress, UInt<16>("hffff")) @[MemoryMap.scala 164:30]
                        when _T_11 : @[MemoryMap.scala 164:42]
                          node _rdata_T_22 = sub(io.cpuAddress, UInt<16>("hff80")) @[MemoryMap.scala 165:35]
                          node _rdata_T_23 = tail(_rdata_T_22, 1) @[MemoryMap.scala 165:35]
                          node _rdata_T_24 = bits(_rdata_T_23, 6, 0) @[MemoryMap.scala 165:20]
                          infer mport rdata_MPORT_5 = hram[_rdata_T_24], clock @[MemoryMap.scala 165:20]
                          rdata <= rdata_MPORT_5 @[MemoryMap.scala 165:13]
                        else :
                          rdata <= regIE @[MemoryMap.scala 169:13]
    io.cpuReadData <= rdata @[MemoryMap.scala 173:18]
    when io.cpuWrite : @[MemoryMap.scala 178:21]
      node _T_12 = lt(io.cpuAddress, UInt<14>("h2000")) @[MemoryMap.scala 180:24]
      when _T_12 : @[MemoryMap.scala 180:36]
        node _ramEnabled_T = and(io.cpuWriteData, UInt<4>("hf")) @[MemoryMap.scala 181:38]
        node _ramEnabled_T_1 = eq(_ramEnabled_T, UInt<4>("ha")) @[MemoryMap.scala 181:48]
        ramEnabled <= _ramEnabled_T_1 @[MemoryMap.scala 181:18]
      else :
        node _T_13 = lt(io.cpuAddress, UInt<15>("h4000")) @[MemoryMap.scala 183:30]
        when _T_13 : @[MemoryMap.scala 183:42]
          node bank = and(io.cpuWriteData, UInt<5>("h1f")) @[MemoryMap.scala 184:34]
          node _romBankNumber_T = eq(bank, UInt<1>("h0")) @[MemoryMap.scala 185:33]
          node _romBankNumber_T_1 = mux(_romBankNumber_T, UInt<1>("h1"), bank) @[MemoryMap.scala 185:27]
          romBankNumber <= _romBankNumber_T_1 @[MemoryMap.scala 185:21]
        else :
          node _T_14 = lt(io.cpuAddress, UInt<15>("h6000")) @[MemoryMap.scala 187:30]
          when _T_14 : @[MemoryMap.scala 187:42]
            node _ramBankNumber_T = and(io.cpuWriteData, UInt<2>("h3")) @[MemoryMap.scala 188:40]
            ramBankNumber <= _ramBankNumber_T @[MemoryMap.scala 188:21]
          else :
            node _T_15 = lt(io.cpuAddress, UInt<16>("h8000")) @[MemoryMap.scala 190:30]
            when _T_15 : @[MemoryMap.scala 190:42]
              skip
            else :
              node _T_16 = lt(io.cpuAddress, UInt<16>("ha000")) @[MemoryMap.scala 193:30]
              when _T_16 : @[MemoryMap.scala 193:42]
                node _T_17 = sub(io.cpuAddress, UInt<16>("h8000")) @[MemoryMap.scala 194:32]
                node _T_18 = tail(_T_17, 1) @[MemoryMap.scala 194:32]
                node _T_19 = bits(_T_18, 12, 0)
                write mport MPORT_1 = vram[_T_19], clock
                MPORT_1 <= io.cpuWriteData
              else :
                node _T_20 = lt(io.cpuAddress, UInt<16>("hc000")) @[MemoryMap.scala 196:30]
                when _T_20 : @[MemoryMap.scala 196:42]
                  when ramEnabled : @[MemoryMap.scala 197:24]
                    node _T_21 = sub(io.cpuAddress, UInt<16>("ha000")) @[MemoryMap.scala 198:36]
                    node _T_22 = tail(_T_21, 1) @[MemoryMap.scala 198:36]
                    node _T_23 = bits(_T_22, 12, 0)
                    write mport MPORT_2 = extRam[_T_23], clock
                    MPORT_2 <= io.cpuWriteData
                else :
                  node _T_24 = lt(io.cpuAddress, UInt<16>("he000")) @[MemoryMap.scala 201:30]
                  when _T_24 : @[MemoryMap.scala 201:42]
                    node _T_25 = sub(io.cpuAddress, UInt<16>("hc000")) @[MemoryMap.scala 202:32]
                    node _T_26 = tail(_T_25, 1) @[MemoryMap.scala 202:32]
                    node _T_27 = bits(_T_26, 12, 0)
                    write mport MPORT_3 = wram[_T_27], clock
                    MPORT_3 <= io.cpuWriteData
                  else :
                    node _T_28 = lt(io.cpuAddress, UInt<16>("hfe00")) @[MemoryMap.scala 204:30]
                    when _T_28 : @[MemoryMap.scala 204:42]
                      node _T_29 = sub(io.cpuAddress, UInt<16>("he000")) @[MemoryMap.scala 205:32]
                      node _T_30 = tail(_T_29, 1) @[MemoryMap.scala 205:32]
                      node _T_31 = bits(_T_30, 12, 0)
                      write mport MPORT_4 = wram[_T_31], clock
                      MPORT_4 <= io.cpuWriteData
                    else :
                      node _T_32 = lt(io.cpuAddress, UInt<16>("hfea0")) @[MemoryMap.scala 207:30]
                      when _T_32 : @[MemoryMap.scala 207:42]
                        node _T_33 = sub(io.cpuAddress, UInt<16>("hfe00")) @[MemoryMap.scala 208:31]
                        node _T_34 = tail(_T_33, 1) @[MemoryMap.scala 208:31]
                        node _T_35 = bits(_T_34, 7, 0)
                        write mport MPORT_5 = oam[_T_35], clock
                        MPORT_5 <= io.cpuWriteData
                      else :
                        node _T_36 = lt(io.cpuAddress, UInt<16>("hff00")) @[MemoryMap.scala 210:30]
                        when _T_36 : @[MemoryMap.scala 210:42]
                          skip
                        else :
                          node _T_37 = lt(io.cpuAddress, UInt<16>("hff80")) @[MemoryMap.scala 213:30]
                          when _T_37 : @[MemoryMap.scala 213:42]
                            node _ioAddr_T_1 = sub(io.cpuAddress, UInt<16>("hff00")) @[MemoryMap.scala 214:34]
                            node ioAddr_1 = tail(_ioAddr_T_1, 1) @[MemoryMap.scala 214:34]
                            node _T_38 = eq(ioAddr_1, UInt<7>("h50")) @[MemoryMap.scala 216:19]
                            when _T_38 : @[MemoryMap.scala 216:31]
                              node _T_39 = neq(io.cpuWriteData, UInt<1>("h0")) @[MemoryMap.scala 217:30]
                              when _T_39 : @[MemoryMap.scala 217:39]
                                bootRomEnable <= UInt<1>("h0") @[MemoryMap.scala 218:25]
                            else :
                              ioRegs.io.addr <= ioAddr_1 @[MemoryMap.scala 221:24]
                              ioRegs.io.write <= UInt<1>("h1") @[MemoryMap.scala 222:25]
                              ioRegs.io.writeData <= io.cpuWriteData @[MemoryMap.scala 223:29]
                          else :
                            node _T_40 = lt(io.cpuAddress, UInt<16>("hffff")) @[MemoryMap.scala 226:30]
                            when _T_40 : @[MemoryMap.scala 226:42]
                              node _T_41 = sub(io.cpuAddress, UInt<16>("hff80")) @[MemoryMap.scala 227:26]
                              node _T_42 = tail(_T_41, 1) @[MemoryMap.scala 227:26]
                              node _T_43 = bits(_T_42, 6, 0) @[MemoryMap.scala 227:11]
                              infer mport MPORT_6 = hram[_T_43], clock @[MemoryMap.scala 227:11]
                              MPORT_6 <= io.cpuWriteData @[MemoryMap.scala 227:38]
                            else :
                              regIE <= io.cpuWriteData @[MemoryMap.scala 230:13]
    wire _io_ppuVramData_WIRE : UInt @[MemoryMap.scala 237:30]
    _io_ppuVramData_WIRE is invalid @[MemoryMap.scala 237:30]
    when io.ppuVramRead : @[MemoryMap.scala 237:30]
      _io_ppuVramData_WIRE <= io.ppuVramAddr @[MemoryMap.scala 237:30]
      node _io_ppuVramData_T = or(_io_ppuVramData_WIRE, UInt<13>("h0")) @[MemoryMap.scala 237:30]
      node _io_ppuVramData_T_1 = bits(_io_ppuVramData_T, 12, 0) @[MemoryMap.scala 237:30]
      read mport io_ppuVramData_MPORT = vram[_io_ppuVramData_T_1], clock @[MemoryMap.scala 237:30]
    io.ppuVramData <= io_ppuVramData_MPORT @[MemoryMap.scala 237:18]
    wire _io_ppuOamData_WIRE : UInt @[MemoryMap.scala 238:29]
    _io_ppuOamData_WIRE is invalid @[MemoryMap.scala 238:29]
    when io.ppuOamRead : @[MemoryMap.scala 238:29]
      _io_ppuOamData_WIRE <= io.ppuOamAddr @[MemoryMap.scala 238:29]
      node _io_ppuOamData_T = or(_io_ppuOamData_WIRE, UInt<8>("h0")) @[MemoryMap.scala 238:29]
      node _io_ppuOamData_T_1 = bits(_io_ppuOamData_T, 7, 0) @[MemoryMap.scala 238:29]
      read mport io_ppuOamData_MPORT = oam[_io_ppuOamData_T_1], clock @[MemoryMap.scala 238:29]
    io.ppuOamData <= io_ppuOamData_MPORT @[MemoryMap.scala 238:18]
    io.ieReg <= regIE @[MemoryMap.scala 243:12]
    io.ifReg <= ioRegs.io.ifReg @[MemoryMap.scala 244:12]
    io.ppuLcdc <= ioRegs.io.ppuLcdc @[MemoryMap.scala 246:14]
    io.ppuStat <= ioRegs.io.ppuStat @[MemoryMap.scala 247:14]
    io.ppuScy <= ioRegs.io.ppuScy @[MemoryMap.scala 248:14]
    io.ppuScx <= ioRegs.io.ppuScx @[MemoryMap.scala 249:14]
    io.ppuLyc <= ioRegs.io.ppuLyc @[MemoryMap.scala 250:14]
    io.ppuBgp <= ioRegs.io.ppuBgp @[MemoryMap.scala 251:14]
    io.ppuObp0 <= ioRegs.io.ppuObp0 @[MemoryMap.scala 252:14]
    io.ppuObp1 <= ioRegs.io.ppuObp1 @[MemoryMap.scala 253:14]
    io.ppuWy <= ioRegs.io.ppuWy @[MemoryMap.scala 254:14]
    io.ppuWx <= ioRegs.io.ppuWx @[MemoryMap.scala 255:14]
    io.bootRomEnabled <= bootRomEnable @[MemoryMap.scala 257:21]

  module GameBoySoC :
    input clock : Clock
    input reset : UInt<1>
    output io : { dbg_pc : UInt<16>, dbg_opcode : UInt<8>, dbg_a : UInt<8>, dbg_f : UInt<8>, dbg_b : UInt<8>, dbg_c : UInt<8>, dbg_d : UInt<8>, dbg_e : UInt<8>, dbg_h : UInt<8>, dbg_l : UInt<8>, dbg_state : UInt<8>, dbg_tcycle : UInt<8>, dbg_mcycle : UInt<8>, dbg_IR : UInt<8>, dbg_ly : UInt<8>, flip extRomLoadAddr : UInt<32>, flip extRomLoadData : UInt<8>, flip extRomLoadEn : UInt<1>, pixelValid : UInt<1>, pixelX : UInt<8>, pixelY : UInt<8>, pixelColor : UInt<2>}

    inst cpu of LR35902_Core @[GameBoySoc.scala 47:19]
    cpu.clock <= clock
    cpu.reset <= reset
    inst ppu of PPU @[GameBoySoc.scala 52:19]
    ppu.clock <= clock
    ppu.reset <= reset
    inst memory of MemoryMap @[GameBoySoc.scala 57:22]
    memory.clock <= clock
    memory.reset <= reset
    memory.io.cpuAddress <= cpu.io.memAddr @[GameBoySoc.scala 62:26]
    memory.io.cpuRead <= cpu.io.memRead @[GameBoySoc.scala 63:26]
    memory.io.cpuWrite <= cpu.io.memWrite @[GameBoySoc.scala 64:26]
    memory.io.cpuWriteData <= cpu.io.memWriteData @[GameBoySoc.scala 65:26]
    cpu.io.memReadData <= memory.io.cpuReadData @[GameBoySoc.scala 66:26]
    cpu.io.ieReg <= memory.io.ieReg @[GameBoySoc.scala 71:16]
    cpu.io.ifReg <= memory.io.ifReg @[GameBoySoc.scala 72:16]
    memory.io.ppuVramAddr <= ppu.io.vramAddr @[GameBoySoc.scala 77:25]
    memory.io.ppuVramRead <= ppu.io.vramRead @[GameBoySoc.scala 78:25]
    ppu.io.vramData <= memory.io.ppuVramData @[GameBoySoc.scala 79:25]
    memory.io.ppuOamAddr <= ppu.io.oamAddr @[GameBoySoc.scala 81:25]
    memory.io.ppuOamRead <= ppu.io.oamRead @[GameBoySoc.scala 82:25]
    ppu.io.oamData <= memory.io.ppuOamData @[GameBoySoc.scala 83:25]
    ppu.io.lcdc <= memory.io.ppuLcdc @[GameBoySoc.scala 86:15]
    ppu.io.stat <= memory.io.ppuStat @[GameBoySoc.scala 87:15]
    ppu.io.scy <= memory.io.ppuScy @[GameBoySoc.scala 88:15]
    ppu.io.scx <= memory.io.ppuScx @[GameBoySoc.scala 89:15]
    ppu.io.lyc <= memory.io.ppuLyc @[GameBoySoc.scala 90:15]
    ppu.io.bgp <= memory.io.ppuBgp @[GameBoySoc.scala 91:15]
    ppu.io.obp0 <= memory.io.ppuObp0 @[GameBoySoc.scala 92:15]
    ppu.io.obp1 <= memory.io.ppuObp1 @[GameBoySoc.scala 93:15]
    ppu.io.wy <= memory.io.ppuWy @[GameBoySoc.scala 94:15]
    ppu.io.wx <= memory.io.ppuWx @[GameBoySoc.scala 95:15]
    memory.io.ppuLY <= ppu.io.ly @[GameBoySoc.scala 98:26]
    memory.io.ppuVblankIRQ <= ppu.io.vblankIRQ @[GameBoySoc.scala 99:26]
    memory.io.ppuLcdStatIRQ <= ppu.io.lcdStatIRQ @[GameBoySoc.scala 100:27]
    memory.io.extRomLoadAddr <= io.extRomLoadAddr @[GameBoySoc.scala 105:28]
    memory.io.extRomLoadData <= io.extRomLoadData @[GameBoySoc.scala 106:28]
    memory.io.extRomLoadEn <= io.extRomLoadEn @[GameBoySoc.scala 107:28]
    io.pixelValid <= ppu.io.pixelValid @[GameBoySoc.scala 112:17]
    io.pixelX <= ppu.io.pixelX @[GameBoySoc.scala 113:17]
    io.pixelY <= ppu.io.pixelY @[GameBoySoc.scala 114:17]
    io.pixelColor <= ppu.io.pixelColor @[GameBoySoc.scala 115:17]
    io.dbg_pc <= cpu.io.dbg_pc @[GameBoySoc.scala 120:17]
    io.dbg_opcode <= cpu.io.dbg_opcode @[GameBoySoc.scala 121:17]
    io.dbg_a <= cpu.io.dbg_a @[GameBoySoc.scala 122:17]
    io.dbg_f <= cpu.io.dbg_f @[GameBoySoc.scala 123:17]
    io.dbg_b <= cpu.io.dbg_b @[GameBoySoc.scala 124:17]
    io.dbg_c <= cpu.io.dbg_c @[GameBoySoc.scala 125:17]
    io.dbg_d <= cpu.io.dbg_d @[GameBoySoc.scala 126:17]
    io.dbg_e <= cpu.io.dbg_e @[GameBoySoc.scala 127:17]
    io.dbg_h <= cpu.io.dbg_h @[GameBoySoc.scala 128:17]
    io.dbg_l <= cpu.io.dbg_l @[GameBoySoc.scala 129:17]
    io.dbg_state <= cpu.io.dbg_state @[GameBoySoc.scala 130:17]
    io.dbg_tcycle <= cpu.io.dbg_tcycle @[GameBoySoc.scala 131:17]
    io.dbg_mcycle <= cpu.io.dbg_mcycle @[GameBoySoc.scala 132:17]
    io.dbg_IR <= cpu.io.dbg_IR @[GameBoySoc.scala 133:17]
    io.dbg_ly <= ppu.io.ly @[GameBoySoc.scala 134:17]

