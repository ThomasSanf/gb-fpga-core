circuit GameBoySoC :
  module Interrupts :
    input clock : Clock
    input reset : Reset
    output io : { flip IE : UInt<8>, flip IF : UInt<8>, flip IME : UInt<1>, flip pc : UInt<16>, flip halted : UInt<1>, should_irq : UInt<1>, irq_vector : UInt<16>, irq_index : UInt<3>, halt_bug_triggered : UInt<1>}

    wire active : UInt<8> @[Interrupts.scala 25:20]
    node _active_T = and(io.IE, io.IF) @[Interrupts.scala 26:19]
    active <= _active_T @[Interrupts.scala 26:10]
    node anyActive = orr(active) @[Interrupts.scala 28:26]
    wire vector : UInt<16> @[Interrupts.scala 33:27]
    vector <= UInt<16>("h0") @[Interrupts.scala 33:27]
    wire index : UInt<3> @[Interrupts.scala 34:27]
    index <= UInt<3>("h0") @[Interrupts.scala 34:27]
    node _T = bits(active, 0, 0) @[Interrupts.scala 36:14]
    when _T : @[Interrupts.scala 36:19]
      vector <= UInt<7>("h40") @[Interrupts.scala 37:12]
      index <= UInt<1>("h0") @[Interrupts.scala 37:32]
    else :
      node _T_1 = bits(active, 1, 1) @[Interrupts.scala 38:20]
      when _T_1 : @[Interrupts.scala 38:25]
        vector <= UInt<7>("h48") @[Interrupts.scala 39:12]
        index <= UInt<1>("h1") @[Interrupts.scala 39:32]
      else :
        node _T_2 = bits(active, 2, 2) @[Interrupts.scala 40:20]
        when _T_2 : @[Interrupts.scala 40:25]
          vector <= UInt<7>("h50") @[Interrupts.scala 41:12]
          index <= UInt<2>("h2") @[Interrupts.scala 41:32]
        else :
          node _T_3 = bits(active, 3, 3) @[Interrupts.scala 42:20]
          when _T_3 : @[Interrupts.scala 42:25]
            vector <= UInt<7>("h58") @[Interrupts.scala 43:12]
            index <= UInt<2>("h3") @[Interrupts.scala 43:32]
          else :
            node _T_4 = bits(active, 4, 4) @[Interrupts.scala 44:20]
            when _T_4 : @[Interrupts.scala 44:25]
              vector <= UInt<7>("h60") @[Interrupts.scala 45:12]
              index <= UInt<3>("h4") @[Interrupts.scala 45:32]
    node _io_should_irq_T = and(io.IME, anyActive) @[Interrupts.scala 51:27]
    io.should_irq <= _io_should_irq_T @[Interrupts.scala 51:17]
    io.irq_vector <= vector @[Interrupts.scala 52:17]
    io.irq_index <= index @[Interrupts.scala 53:17]
    node _io_halt_bug_triggered_T = eq(io.IME, UInt<1>("h0")) @[Interrupts.scala 56:29]
    node _io_halt_bug_triggered_T_1 = and(_io_halt_bug_triggered_T, anyActive) @[Interrupts.scala 56:38]
    node _io_halt_bug_triggered_T_2 = and(_io_halt_bug_triggered_T_1, io.halted) @[Interrupts.scala 56:51]
    io.halt_bug_triggered <= _io_halt_bug_triggered_T_2 @[Interrupts.scala 56:25]

  module LR35902_ALU :
    input clock : Clock
    input reset : Reset
    output io : { flip op : UInt<4>, flip a : UInt<8>, flip b : UInt<8>, flip carryIn : UInt<1>, out : UInt<8>, flagZ : UInt<1>, flagN : UInt<1>, flagH : UInt<1>, flagC : UInt<1>}

    io.out <= io.a @[LR35902_ALU.scala 26:12]
    io.flagZ <= UInt<1>("h0") @[LR35902_ALU.scala 27:12]
    io.flagN <= UInt<1>("h0") @[LR35902_ALU.scala 28:12]
    io.flagH <= UInt<1>("h0") @[LR35902_ALU.scala 29:12]
    io.flagC <= UInt<1>("h0") @[LR35902_ALU.scala 30:12]
    node a9 = cat(UInt<1>("h0"), io.a) @[Cat.scala 33:92]
    node b9 = cat(UInt<1>("h0"), io.b) @[Cat.scala 33:92]
    node _sum9_T = add(a9, b9) @[LR35902_ALU.scala 36:18]
    node sum9 = tail(_sum9_T, 1) @[LR35902_ALU.scala 36:18]
    node _sumc9_T = add(a9, b9) @[LR35902_ALU.scala 37:18]
    node _sumc9_T_1 = tail(_sumc9_T, 1) @[LR35902_ALU.scala 37:18]
    node _sumc9_T_2 = add(_sumc9_T_1, io.carryIn) @[LR35902_ALU.scala 37:23]
    node sumc9 = tail(_sumc9_T_2, 1) @[LR35902_ALU.scala 37:23]
    node _diff9_T = sub(a9, b9) @[LR35902_ALU.scala 39:19]
    node diff9 = tail(_diff9_T, 1) @[LR35902_ALU.scala 39:19]
    node _diffc9_T = sub(a9, b9) @[LR35902_ALU.scala 40:19]
    node _diffc9_T_1 = tail(_diffc9_T, 1) @[LR35902_ALU.scala 40:19]
    node _diffc9_T_2 = sub(_diffc9_T_1, io.carryIn) @[LR35902_ALU.scala 40:24]
    node diffc9 = tail(_diffc9_T_2, 1) @[LR35902_ALU.scala 40:24]
    node _T = eq(UInt<4>("h0"), io.op) @[LR35902_ALU.scala 56:17]
    when _T : @[LR35902_ALU.scala 56:17]
      node _io_out_T = bits(sum9, 7, 0) @[LR35902_ALU.scala 62:23]
      io.out <= _io_out_T @[LR35902_ALU.scala 62:16]
      node _io_flagZ_T = bits(sum9, 7, 0) @[LR35902_ALU.scala 63:23]
      node _io_flagZ_T_1 = eq(_io_flagZ_T, UInt<1>("h0")) @[LR35902_ALU.scala 63:29]
      io.flagZ <= _io_flagZ_T_1 @[LR35902_ALU.scala 63:16]
      io.flagN <= UInt<1>("h0") @[LR35902_ALU.scala 64:16]
      node _io_flagH_T = and(io.a, UInt<4>("hf")) @[LR35902_ALU.scala 44:9]
      node _io_flagH_T_1 = and(io.b, UInt<4>("hf")) @[LR35902_ALU.scala 44:23]
      node _io_flagH_T_2 = add(_io_flagH_T, _io_flagH_T_1) @[LR35902_ALU.scala 44:18]
      node _io_flagH_T_3 = tail(_io_flagH_T_2, 1) @[LR35902_ALU.scala 44:18]
      node _io_flagH_T_4 = add(_io_flagH_T_3, UInt<1>("h0")) @[LR35902_ALU.scala 44:32]
      node _io_flagH_T_5 = tail(_io_flagH_T_4, 1) @[LR35902_ALU.scala 44:32]
      node _io_flagH_T_6 = gt(_io_flagH_T_5, UInt<4>("hf")) @[LR35902_ALU.scala 44:37]
      io.flagH <= _io_flagH_T_6 @[LR35902_ALU.scala 65:16]
      node _io_flagC_T = bits(sum9, 8, 8) @[LR35902_ALU.scala 66:23]
      io.flagC <= _io_flagC_T @[LR35902_ALU.scala 66:16]
    else :
      node _T_1 = eq(UInt<4>("h1"), io.op) @[LR35902_ALU.scala 56:17]
      when _T_1 : @[LR35902_ALU.scala 56:17]
        node _io_out_T_1 = bits(sumc9, 7, 0) @[LR35902_ALU.scala 74:24]
        io.out <= _io_out_T_1 @[LR35902_ALU.scala 74:16]
        node _io_flagZ_T_2 = bits(sumc9, 7, 0) @[LR35902_ALU.scala 75:24]
        node _io_flagZ_T_3 = eq(_io_flagZ_T_2, UInt<1>("h0")) @[LR35902_ALU.scala 75:30]
        io.flagZ <= _io_flagZ_T_3 @[LR35902_ALU.scala 75:16]
        io.flagN <= UInt<1>("h0") @[LR35902_ALU.scala 76:16]
        node _io_flagH_T_7 = and(io.a, UInt<4>("hf")) @[LR35902_ALU.scala 44:9]
        node _io_flagH_T_8 = and(io.b, UInt<4>("hf")) @[LR35902_ALU.scala 44:23]
        node _io_flagH_T_9 = add(_io_flagH_T_7, _io_flagH_T_8) @[LR35902_ALU.scala 44:18]
        node _io_flagH_T_10 = tail(_io_flagH_T_9, 1) @[LR35902_ALU.scala 44:18]
        node _io_flagH_T_11 = add(_io_flagH_T_10, io.carryIn) @[LR35902_ALU.scala 44:32]
        node _io_flagH_T_12 = tail(_io_flagH_T_11, 1) @[LR35902_ALU.scala 44:32]
        node _io_flagH_T_13 = gt(_io_flagH_T_12, UInt<4>("hf")) @[LR35902_ALU.scala 44:37]
        io.flagH <= _io_flagH_T_13 @[LR35902_ALU.scala 77:16]
        node _io_flagC_T_1 = bits(sumc9, 8, 8) @[LR35902_ALU.scala 78:24]
        io.flagC <= _io_flagC_T_1 @[LR35902_ALU.scala 78:16]
      else :
        node _T_2 = eq(UInt<4>("h2"), io.op) @[LR35902_ALU.scala 56:17]
        when _T_2 : @[LR35902_ALU.scala 56:17]
          node _io_out_T_2 = bits(diff9, 7, 0) @[LR35902_ALU.scala 86:24]
          io.out <= _io_out_T_2 @[LR35902_ALU.scala 86:16]
          node _io_flagZ_T_4 = bits(diff9, 7, 0) @[LR35902_ALU.scala 87:24]
          node _io_flagZ_T_5 = eq(_io_flagZ_T_4, UInt<1>("h0")) @[LR35902_ALU.scala 87:30]
          io.flagZ <= _io_flagZ_T_5 @[LR35902_ALU.scala 87:16]
          io.flagN <= UInt<1>("h1") @[LR35902_ALU.scala 88:16]
          node io_flagH_aNib = bits(io.a, 3, 0) @[LR35902_ALU.scala 47:17]
          node io_flagH_bNib = bits(io.b, 3, 0) @[LR35902_ALU.scala 48:17]
          node _io_flagH_T_14 = add(io_flagH_bNib, UInt<1>("h0")) @[LR35902_ALU.scala 49:18]
          node _io_flagH_T_15 = lt(io_flagH_aNib, _io_flagH_T_14) @[LR35902_ALU.scala 49:10]
          io.flagH <= _io_flagH_T_15 @[LR35902_ALU.scala 89:16]
          node _io_flagC_T_2 = lt(io.a, io.b) @[LR35902_ALU.scala 90:24]
          io.flagC <= _io_flagC_T_2 @[LR35902_ALU.scala 90:16]
        else :
          node _T_3 = eq(UInt<4>("h3"), io.op) @[LR35902_ALU.scala 56:17]
          when _T_3 : @[LR35902_ALU.scala 56:17]
            node _io_out_T_3 = bits(diffc9, 7, 0) @[LR35902_ALU.scala 98:25]
            io.out <= _io_out_T_3 @[LR35902_ALU.scala 98:16]
            node _io_flagZ_T_6 = bits(diffc9, 7, 0) @[LR35902_ALU.scala 99:25]
            node _io_flagZ_T_7 = eq(_io_flagZ_T_6, UInt<1>("h0")) @[LR35902_ALU.scala 99:31]
            io.flagZ <= _io_flagZ_T_7 @[LR35902_ALU.scala 99:16]
            io.flagN <= UInt<1>("h1") @[LR35902_ALU.scala 100:16]
            node io_flagH_aNib_1 = bits(io.a, 3, 0) @[LR35902_ALU.scala 47:17]
            node io_flagH_bNib_1 = bits(io.b, 3, 0) @[LR35902_ALU.scala 48:17]
            node _io_flagH_T_16 = add(io_flagH_bNib_1, io.carryIn) @[LR35902_ALU.scala 49:18]
            node _io_flagH_T_17 = lt(io_flagH_aNib_1, _io_flagH_T_16) @[LR35902_ALU.scala 49:10]
            io.flagH <= _io_flagH_T_17 @[LR35902_ALU.scala 101:16]
            node _io_flagC_T_3 = add(io.b, io.carryIn) @[LR35902_ALU.scala 102:32]
            node _io_flagC_T_4 = tail(_io_flagC_T_3, 1) @[LR35902_ALU.scala 102:32]
            node _io_flagC_T_5 = lt(io.a, _io_flagC_T_4) @[LR35902_ALU.scala 102:24]
            io.flagC <= _io_flagC_T_5 @[LR35902_ALU.scala 102:16]
          else :
            node _T_4 = eq(UInt<4>("h4"), io.op) @[LR35902_ALU.scala 56:17]
            when _T_4 : @[LR35902_ALU.scala 56:17]
              node r = and(io.a, io.b) @[LR35902_ALU.scala 110:20]
              io.out <= r @[LR35902_ALU.scala 111:16]
              node _io_flagZ_T_8 = eq(r, UInt<1>("h0")) @[LR35902_ALU.scala 112:21]
              io.flagZ <= _io_flagZ_T_8 @[LR35902_ALU.scala 112:16]
              io.flagN <= UInt<1>("h0") @[LR35902_ALU.scala 113:16]
              io.flagH <= UInt<1>("h1") @[LR35902_ALU.scala 114:16]
              io.flagC <= UInt<1>("h0") @[LR35902_ALU.scala 115:16]
            else :
              node _T_5 = eq(UInt<4>("h5"), io.op) @[LR35902_ALU.scala 56:17]
              when _T_5 : @[LR35902_ALU.scala 56:17]
                node r_1 = or(io.a, io.b) @[LR35902_ALU.scala 122:20]
                io.out <= r_1 @[LR35902_ALU.scala 123:16]
                node _io_flagZ_T_9 = eq(r_1, UInt<1>("h0")) @[LR35902_ALU.scala 124:21]
                io.flagZ <= _io_flagZ_T_9 @[LR35902_ALU.scala 124:16]
                io.flagN <= UInt<1>("h0") @[LR35902_ALU.scala 125:16]
                io.flagH <= UInt<1>("h0") @[LR35902_ALU.scala 126:16]
                io.flagC <= UInt<1>("h0") @[LR35902_ALU.scala 127:16]
              else :
                node _T_6 = eq(UInt<4>("h6"), io.op) @[LR35902_ALU.scala 56:17]
                when _T_6 : @[LR35902_ALU.scala 56:17]
                  node r_2 = xor(io.a, io.b) @[LR35902_ALU.scala 134:20]
                  io.out <= r_2 @[LR35902_ALU.scala 135:16]
                  node _io_flagZ_T_10 = eq(r_2, UInt<1>("h0")) @[LR35902_ALU.scala 136:21]
                  io.flagZ <= _io_flagZ_T_10 @[LR35902_ALU.scala 136:16]
                  io.flagN <= UInt<1>("h0") @[LR35902_ALU.scala 137:16]
                  io.flagH <= UInt<1>("h0") @[LR35902_ALU.scala 138:16]
                  io.flagC <= UInt<1>("h0") @[LR35902_ALU.scala 139:16]
                else :
                  node _T_7 = eq(UInt<4>("h7"), io.op) @[LR35902_ALU.scala 56:17]
                  when _T_7 : @[LR35902_ALU.scala 56:17]
                    node r_3 = bits(diff9, 7, 0) @[LR35902_ALU.scala 146:20]
                    io.out <= io.a @[LR35902_ALU.scala 148:16]
                    node _io_flagZ_T_11 = eq(r_3, UInt<1>("h0")) @[LR35902_ALU.scala 149:21]
                    io.flagZ <= _io_flagZ_T_11 @[LR35902_ALU.scala 149:16]
                    io.flagN <= UInt<1>("h1") @[LR35902_ALU.scala 150:16]
                    node io_flagH_aNib_2 = bits(io.a, 3, 0) @[LR35902_ALU.scala 47:17]
                    node io_flagH_bNib_2 = bits(io.b, 3, 0) @[LR35902_ALU.scala 48:17]
                    node _io_flagH_T_18 = add(io_flagH_bNib_2, UInt<1>("h0")) @[LR35902_ALU.scala 49:18]
                    node _io_flagH_T_19 = lt(io_flagH_aNib_2, _io_flagH_T_18) @[LR35902_ALU.scala 49:10]
                    io.flagH <= _io_flagH_T_19 @[LR35902_ALU.scala 151:16]
                    node _io_flagC_T_6 = lt(io.a, io.b) @[LR35902_ALU.scala 152:24]
                    io.flagC <= _io_flagC_T_6 @[LR35902_ALU.scala 152:16]
                  else :
                    node _T_8 = eq(UInt<4>("h8"), io.op) @[LR35902_ALU.scala 56:17]
                    when _T_8 : @[LR35902_ALU.scala 56:17]
                      node _r_T = add(io.a, UInt<1>("h1")) @[LR35902_ALU.scala 160:20]
                      node r_4 = tail(_r_T, 1) @[LR35902_ALU.scala 160:20]
                      io.out <= r_4 @[LR35902_ALU.scala 161:16]
                      node _io_flagZ_T_12 = eq(r_4, UInt<1>("h0")) @[LR35902_ALU.scala 162:21]
                      io.flagZ <= _io_flagZ_T_12 @[LR35902_ALU.scala 162:16]
                      io.flagN <= UInt<1>("h0") @[LR35902_ALU.scala 163:16]
                      node _io_flagH_T_20 = and(io.a, UInt<4>("hf")) @[LR35902_ALU.scala 164:25]
                      node _io_flagH_T_21 = eq(_io_flagH_T_20, UInt<4>("hf")) @[LR35902_ALU.scala 164:35]
                      io.flagH <= _io_flagH_T_21 @[LR35902_ALU.scala 164:16]
                      io.flagC <= UInt<1>("h0") @[LR35902_ALU.scala 165:16]
                    else :
                      node _T_9 = eq(UInt<4>("h9"), io.op) @[LR35902_ALU.scala 56:17]
                      when _T_9 : @[LR35902_ALU.scala 56:17]
                        node _r_T_1 = sub(io.a, UInt<1>("h1")) @[LR35902_ALU.scala 172:20]
                        node r_5 = tail(_r_T_1, 1) @[LR35902_ALU.scala 172:20]
                        io.out <= r_5 @[LR35902_ALU.scala 173:16]
                        node _io_flagZ_T_13 = eq(r_5, UInt<1>("h0")) @[LR35902_ALU.scala 174:21]
                        io.flagZ <= _io_flagZ_T_13 @[LR35902_ALU.scala 174:16]
                        io.flagN <= UInt<1>("h1") @[LR35902_ALU.scala 175:16]
                        node _io_flagH_T_22 = and(io.a, UInt<4>("hf")) @[LR35902_ALU.scala 176:25]
                        node _io_flagH_T_23 = eq(_io_flagH_T_22, UInt<1>("h0")) @[LR35902_ALU.scala 176:35]
                        io.flagH <= _io_flagH_T_23 @[LR35902_ALU.scala 176:16]
                        io.flagC <= UInt<1>("h0") @[LR35902_ALU.scala 177:16]


  module LR35902_Core :
    input clock : Clock
    input reset : Reset
    output io : { memAddr : UInt<16>, memRead : UInt<1>, memWrite : UInt<1>, memWriteData : UInt<8>, flip memReadData : UInt<8>, flip ieReg : UInt<8>, flip ifReg : UInt<8>, dbg_pc : UInt<16>, dbg_opcode : UInt<8>, dbg_sp : UInt<16>, dbg_a : UInt<8>, dbg_f : UInt<8>, dbg_b : UInt<8>, dbg_c : UInt<8>, dbg_d : UInt<8>, dbg_e : UInt<8>, dbg_h : UInt<8>, dbg_l : UInt<8>, flip dbgBytes : UInt<8>[4], dbg_state : UInt<8>, dbg_tcycle : UInt<8>, dbg_mcycle : UInt<8>, dbg_IR : UInt<8>}

    reg A : UInt<8>, clock with :
      reset => (reset, UInt<8>("h1")) @[LR35902_Core.scala 45:18]
    reg F : UInt<8>, clock with :
      reset => (reset, UInt<8>("hb0")) @[LR35902_Core.scala 46:18]
    reg B : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[LR35902_Core.scala 47:18]
    reg C : UInt<8>, clock with :
      reset => (reset, UInt<8>("h13")) @[LR35902_Core.scala 48:18]
    reg D : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[LR35902_Core.scala 49:18]
    reg E : UInt<8>, clock with :
      reset => (reset, UInt<8>("hd8")) @[LR35902_Core.scala 50:18]
    reg H : UInt<8>, clock with :
      reset => (reset, UInt<8>("h1")) @[LR35902_Core.scala 51:18]
    reg L : UInt<8>, clock with :
      reset => (reset, UInt<8>("h4d")) @[LR35902_Core.scala 52:18]
    reg PC : UInt<16>, clock with :
      reset => (reset, UInt<16>("h100")) @[LR35902_Core.scala 54:19]
    reg SP : UInt<16>, clock with :
      reset => (reset, UInt<16>("hfffe")) @[LR35902_Core.scala 55:19]
    reg IR : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[LR35902_Core.scala 57:25]
    reg IR2 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[LR35902_Core.scala 58:25]
    reg imm8 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[LR35902_Core.scala 59:25]
    reg imm16 : UInt<16>, clock with :
      reset => (reset, UInt<16>("h0")) @[LR35902_Core.scala 60:25]
    reg CB_imm8 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[LR35902_Core.scala 61:25]
    reg IME : UInt<1>, clock with :
      reset => (reset, UInt<1>("h0")) @[LR35902_Core.scala 63:28]
    reg IME_pending : UInt<1>, clock with :
      reset => (reset, UInt<1>("h0")) @[LR35902_Core.scala 64:28]
    reg PC_sampled : UInt<16>, clock with :
      reset => (reset, UInt<16>("h100")) @[LR35902_Core.scala 69:27]
    reg SP_sampled : UInt<16>, clock with :
      reset => (reset, UInt<16>("hfffe")) @[LR35902_Core.scala 70:27]
    reg A_sampled : UInt<8>, clock with :
      reset => (reset, UInt<8>("h1")) @[LR35902_Core.scala 71:27]
    reg F_sampled : UInt<8>, clock with :
      reset => (reset, UInt<8>("hb0")) @[LR35902_Core.scala 72:27]
    reg B_sampled : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[LR35902_Core.scala 73:27]
    reg C_sampled : UInt<8>, clock with :
      reset => (reset, UInt<8>("h13")) @[LR35902_Core.scala 74:27]
    reg D_sampled : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[LR35902_Core.scala 75:27]
    reg E_sampled : UInt<8>, clock with :
      reset => (reset, UInt<8>("hd8")) @[LR35902_Core.scala 76:27]
    reg H_sampled : UInt<8>, clock with :
      reset => (reset, UInt<8>("h1")) @[LR35902_Core.scala 77:27]
    reg L_sampled : UInt<8>, clock with :
      reset => (reset, UInt<8>("h4d")) @[LR35902_Core.scala 78:27]
    reg state : UInt<3>, clock with :
      reset => (reset, UInt<3>("h0")) @[LR35902_Core.scala 96:23]
    reg tcycle : UInt<2>, clock with :
      reset => (reset, UInt<2>("h0")) @[LR35902_Core.scala 97:23]
    reg mcycle : UInt<3>, clock with :
      reset => (reset, UInt<3>("h0")) @[LR35902_Core.scala 98:23]
    reg halted : UInt<1>, clock with :
      reset => (reset, UInt<1>("h0")) @[LR35902_Core.scala 99:23]
    reg debugCounter : UInt<16>, clock with :
      reset => (reset, UInt<16>("h0")) @[LR35902_Core.scala 101:29]
    reg dbg_op0 : UInt<8>, clock with :
      reset => (UInt<1>("h0"), dbg_op0) @[LR35902_Core.scala 105:20]
    reg dbg_op1 : UInt<8>, clock with :
      reset => (UInt<1>("h0"), dbg_op1) @[LR35902_Core.scala 106:20]
    reg dbg_op2 : UInt<8>, clock with :
      reset => (UInt<1>("h0"), dbg_op2) @[LR35902_Core.scala 107:20]
    reg dbg_op3 : UInt<8>, clock with :
      reset => (UInt<1>("h0"), dbg_op3) @[LR35902_Core.scala 108:20]
    reg dbg_pc_fetch : UInt<16>, clock with :
      reset => (UInt<1>("h0"), dbg_pc_fetch) @[LR35902_Core.scala 110:25]
    inst intr of Interrupts @[LR35902_Core.scala 117:20]
    intr.clock <= clock
    intr.reset <= reset
    intr.io.IE <= io.ieReg @[LR35902_Core.scala 118:18]
    intr.io.IF <= io.ifReg @[LR35902_Core.scala 119:18]
    intr.io.IME <= IME @[LR35902_Core.scala 120:18]
    intr.io.pc <= PC @[LR35902_Core.scala 121:18]
    intr.io.halted <= halted @[LR35902_Core.scala 122:18]
    node _canTakeInterrupt_T = eq(state, UInt<3>("h0")) @[LR35902_Core.scala 125:11]
    node _canTakeInterrupt_T_1 = eq(tcycle, UInt<1>("h0")) @[LR35902_Core.scala 126:14]
    node canTakeInterrupt = and(_canTakeInterrupt_T, _canTakeInterrupt_T_1) @[LR35902_Core.scala 125:28]
    reg irqVectorLatched : UInt<16>, clock with :
      reset => (reset, UInt<16>("h0")) @[LR35902_Core.scala 129:33]
    reg irqIndexLatched : UInt<3>, clock with :
      reset => (reset, UInt<3>("h0")) @[LR35902_Core.scala 130:33]
    wire mcBus : { memAddr : UInt<16>, memRead : UInt<1>, memWrite : UInt<1>, memWriteData : UInt<8>, memReadData : UInt<8>} @[LR35902_Core.scala 137:19]
    mcBus.memAddr <= UInt<1>("h0") @[LR35902_Core.scala 145:22]
    mcBus.memRead <= UInt<1>("h0") @[LR35902_Core.scala 146:22]
    mcBus.memWrite <= UInt<1>("h0") @[LR35902_Core.scala 147:22]
    mcBus.memWriteData <= UInt<1>("h0") @[LR35902_Core.scala 148:22]
    mcBus.memReadData <= io.memReadData @[LR35902_Core.scala 149:22]
    wire u : { PC : UInt<16>, SP : UInt<16>, A : UInt<8>, F : UInt<8>, B : UInt<8>, C : UInt<8>, D : UInt<8>, E : UInt<8>, H : UInt<8>, L : UInt<8>, IME : UInt<1>, IME_pending : UInt<1>, next_mcycle : UInt<3>, done : UInt<1>} @[Microcode.scala 52:19]
    reg u_tmp8 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[Microcode.scala 56:24]
    reg u_tmp16 : UInt<16>, clock with :
      reset => (reset, UInt<16>("h0")) @[Microcode.scala 57:24]
    u.PC <= PC_sampled @[Microcode.scala 63:15]
    u.SP <= SP_sampled @[Microcode.scala 64:15]
    u.A <= A_sampled @[Microcode.scala 65:15]
    u.F <= F_sampled @[Microcode.scala 66:15]
    u.B <= B_sampled @[Microcode.scala 67:15]
    u.C <= C_sampled @[Microcode.scala 68:15]
    u.D <= D_sampled @[Microcode.scala 69:15]
    u.E <= E_sampled @[Microcode.scala 70:15]
    u.H <= H_sampled @[Microcode.scala 71:15]
    u.L <= L_sampled @[Microcode.scala 72:15]
    u.IME <= IME @[Microcode.scala 74:21]
    u.IME_pending <= IME_pending @[Microcode.scala 75:21]
    u.next_mcycle <= mcycle @[Microcode.scala 77:21]
    u.done <= UInt<1>("h0") @[Microcode.scala 78:21]
    mcBus.memAddr <= UInt<1>("h0") @[Microcode.scala 80:21]
    mcBus.memRead <= UInt<1>("h0") @[Microcode.scala 81:21]
    mcBus.memWrite <= UInt<1>("h0") @[Microcode.scala 82:21]
    mcBus.memWriteData <= UInt<1>("h0") @[Microcode.scala 83:21]
    node u_HL = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
    inst u_alu of LR35902_ALU @[Microcode.scala 107:21]
    u_alu.clock <= clock
    u_alu.reset <= reset
    u_alu.io.a <= UInt<1>("h0") @[Microcode.scala 108:21]
    u_alu.io.b <= UInt<1>("h0") @[Microcode.scala 109:21]
    u_alu.io.op <= UInt<1>("h0") @[Microcode.scala 110:21]
    node _u_alu_io_carryIn_T = bits(F_sampled, 4, 4) @[Microcode.scala 111:28]
    u_alu.io.carryIn <= _u_alu_io_carryIn_T @[Microcode.scala 111:21]
    node _u_T = eq(IR, UInt<1>("h0")) @[Microcode.scala 120:13]
    when _u_T : @[Microcode.scala 120:26]
      node _u_T_1 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 121:19]
      when _u_T_1 : @[Microcode.scala 121:28]
        u.done <= UInt<1>("h1") @[Microcode.scala 121:39]
    else :
      node _u_T_2 = eq(IR, UInt<7>("h76")) @[Microcode.scala 126:19]
      when _u_T_2 : @[Microcode.scala 126:32]
        node _u_T_3 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 128:19]
        when _u_T_3 : @[Microcode.scala 128:28]
          u.done <= UInt<1>("h1") @[Microcode.scala 129:18]
      else :
        node _u_T_4 = and(IR, UInt<8>("hcf")) @[Microcode.scala 136:20]
        node _u_T_5 = eq(_u_T_4, UInt<1>("h1")) @[Microcode.scala 136:31]
        when _u_T_5 : @[Microcode.scala 136:44]
          node _u_rr_T = shr(IR, 4) @[Microcode.scala 137:20]
          node u_rr = and(_u_rr_T, UInt<2>("h3")) @[Microcode.scala 137:26]
          node _u_T_6 = eq(UInt<1>("h0"), u_rr) @[Microcode.scala 139:18]
          when _u_T_6 : @[Microcode.scala 139:18]
            node _u_out_C_T = bits(imm16, 7, 0) @[Microcode.scala 141:28]
            u.C <= _u_out_C_T @[Microcode.scala 141:17]
            node _u_out_B_T = bits(imm16, 15, 8) @[Microcode.scala 142:28]
            u.B <= _u_out_B_T @[Microcode.scala 142:17]
          else :
            node _u_T_7 = eq(UInt<1>("h1"), u_rr) @[Microcode.scala 139:18]
            when _u_T_7 : @[Microcode.scala 139:18]
              node _u_out_E_T = bits(imm16, 7, 0) @[Microcode.scala 145:28]
              u.E <= _u_out_E_T @[Microcode.scala 145:17]
              node _u_out_D_T = bits(imm16, 15, 8) @[Microcode.scala 146:28]
              u.D <= _u_out_D_T @[Microcode.scala 146:17]
            else :
              node _u_T_8 = eq(UInt<2>("h2"), u_rr) @[Microcode.scala 139:18]
              when _u_T_8 : @[Microcode.scala 139:18]
                node _u_out_L_T = bits(imm16, 7, 0) @[Microcode.scala 149:28]
                u.L <= _u_out_L_T @[Microcode.scala 149:17]
                node _u_out_H_T = bits(imm16, 15, 8) @[Microcode.scala 150:28]
                u.H <= _u_out_H_T @[Microcode.scala 150:17]
              else :
                node _u_T_9 = eq(UInt<2>("h3"), u_rr) @[Microcode.scala 139:18]
                when _u_T_9 : @[Microcode.scala 139:18]
                  u.SP <= imm16 @[Microcode.scala 153:18]
          node _u_T_10 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 156:19]
          when _u_T_10 : @[Microcode.scala 156:28]
            u.done <= UInt<1>("h1") @[Microcode.scala 156:39]
        else :
          node _u_T_11 = and(IR, UInt<8>("hcf")) @[Microcode.scala 161:20]
          node _u_T_12 = eq(_u_T_11, UInt<2>("h3")) @[Microcode.scala 161:31]
          when _u_T_12 : @[Microcode.scala 161:44]
            node _u_rr_T_1 = shr(IR, 4) @[Microcode.scala 162:20]
            node u_rr_1 = and(_u_rr_T_1, UInt<2>("h3")) @[Microcode.scala 162:26]
            node _u_result_T = cat(B_sampled, C_sampled) @[Cat.scala 33:92]
            node _u_result_T_1 = add(_u_result_T, UInt<1>("h1")) @[Microcode.scala 164:33]
            node _u_result_T_2 = tail(_u_result_T_1, 1) @[Microcode.scala 164:33]
            node _u_result_T_3 = cat(D_sampled, E_sampled) @[Cat.scala 33:92]
            node _u_result_T_4 = add(_u_result_T_3, UInt<1>("h1")) @[Microcode.scala 165:33]
            node _u_result_T_5 = tail(_u_result_T_4, 1) @[Microcode.scala 165:33]
            node _u_result_T_6 = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
            node _u_result_T_7 = add(_u_result_T_6, UInt<1>("h1")) @[Microcode.scala 166:33]
            node _u_result_T_8 = tail(_u_result_T_7, 1) @[Microcode.scala 166:33]
            node _u_result_T_9 = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 167:23]
            node _u_result_T_10 = tail(_u_result_T_9, 1) @[Microcode.scala 167:23]
            node _u_result_T_11 = eq(UInt<1>("h0"), u_rr_1) @[Mux.scala 81:61]
            node _u_result_T_12 = mux(_u_result_T_11, _u_result_T_2, UInt<16>("h0")) @[Mux.scala 81:58]
            node _u_result_T_13 = eq(UInt<1>("h1"), u_rr_1) @[Mux.scala 81:61]
            node _u_result_T_14 = mux(_u_result_T_13, _u_result_T_5, _u_result_T_12) @[Mux.scala 81:58]
            node _u_result_T_15 = eq(UInt<2>("h2"), u_rr_1) @[Mux.scala 81:61]
            node _u_result_T_16 = mux(_u_result_T_15, _u_result_T_8, _u_result_T_14) @[Mux.scala 81:58]
            node _u_result_T_17 = eq(UInt<2>("h3"), u_rr_1) @[Mux.scala 81:61]
            node u_result = mux(_u_result_T_17, _u_result_T_10, _u_result_T_16) @[Mux.scala 81:58]
            node _u_T_13 = eq(UInt<1>("h0"), u_rr_1) @[Microcode.scala 170:18]
            when _u_T_13 : @[Microcode.scala 170:18]
              node _u_out_B_T_1 = bits(u_result, 15, 8) @[Microcode.scala 171:34]
              u.B <= _u_out_B_T_1 @[Microcode.scala 171:25]
              node _u_out_C_T_1 = bits(u_result, 7, 0) @[Microcode.scala 171:58]
              u.C <= _u_out_C_T_1 @[Microcode.scala 171:49]
            else :
              node _u_T_14 = eq(UInt<1>("h1"), u_rr_1) @[Microcode.scala 170:18]
              when _u_T_14 : @[Microcode.scala 170:18]
                node _u_out_D_T_1 = bits(u_result, 15, 8) @[Microcode.scala 172:34]
                u.D <= _u_out_D_T_1 @[Microcode.scala 172:25]
                node _u_out_E_T_1 = bits(u_result, 7, 0) @[Microcode.scala 172:58]
                u.E <= _u_out_E_T_1 @[Microcode.scala 172:49]
              else :
                node _u_T_15 = eq(UInt<2>("h2"), u_rr_1) @[Microcode.scala 170:18]
                when _u_T_15 : @[Microcode.scala 170:18]
                  node _u_out_H_T_1 = bits(u_result, 15, 8) @[Microcode.scala 173:34]
                  u.H <= _u_out_H_T_1 @[Microcode.scala 173:25]
                  node _u_out_L_T_1 = bits(u_result, 7, 0) @[Microcode.scala 173:58]
                  u.L <= _u_out_L_T_1 @[Microcode.scala 173:49]
                else :
                  node _u_T_16 = eq(UInt<2>("h3"), u_rr_1) @[Microcode.scala 170:18]
                  when _u_T_16 : @[Microcode.scala 170:18]
                    u.SP <= u_result @[Microcode.scala 174:26]
            node _u_T_17 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 176:19]
            when _u_T_17 : @[Microcode.scala 176:28]
              u.done <= UInt<1>("h1") @[Microcode.scala 176:39]
          else :
            node _u_T_18 = and(IR, UInt<8>("hcf")) @[Microcode.scala 181:20]
            node _u_T_19 = eq(_u_T_18, UInt<4>("hb")) @[Microcode.scala 181:31]
            when _u_T_19 : @[Microcode.scala 181:44]
              node _u_rr_T_2 = shr(IR, 4) @[Microcode.scala 182:20]
              node u_rr_2 = and(_u_rr_T_2, UInt<2>("h3")) @[Microcode.scala 182:26]
              node _u_result_T_18 = cat(B_sampled, C_sampled) @[Cat.scala 33:92]
              node _u_result_T_19 = sub(_u_result_T_18, UInt<1>("h1")) @[Microcode.scala 184:33]
              node _u_result_T_20 = tail(_u_result_T_19, 1) @[Microcode.scala 184:33]
              node _u_result_T_21 = cat(D_sampled, E_sampled) @[Cat.scala 33:92]
              node _u_result_T_22 = sub(_u_result_T_21, UInt<1>("h1")) @[Microcode.scala 185:33]
              node _u_result_T_23 = tail(_u_result_T_22, 1) @[Microcode.scala 185:33]
              node _u_result_T_24 = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
              node _u_result_T_25 = sub(_u_result_T_24, UInt<1>("h1")) @[Microcode.scala 186:33]
              node _u_result_T_26 = tail(_u_result_T_25, 1) @[Microcode.scala 186:33]
              node _u_result_T_27 = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 187:23]
              node _u_result_T_28 = tail(_u_result_T_27, 1) @[Microcode.scala 187:23]
              node _u_result_T_29 = eq(UInt<1>("h0"), u_rr_2) @[Mux.scala 81:61]
              node _u_result_T_30 = mux(_u_result_T_29, _u_result_T_20, UInt<16>("h0")) @[Mux.scala 81:58]
              node _u_result_T_31 = eq(UInt<1>("h1"), u_rr_2) @[Mux.scala 81:61]
              node _u_result_T_32 = mux(_u_result_T_31, _u_result_T_23, _u_result_T_30) @[Mux.scala 81:58]
              node _u_result_T_33 = eq(UInt<2>("h2"), u_rr_2) @[Mux.scala 81:61]
              node _u_result_T_34 = mux(_u_result_T_33, _u_result_T_26, _u_result_T_32) @[Mux.scala 81:58]
              node _u_result_T_35 = eq(UInt<2>("h3"), u_rr_2) @[Mux.scala 81:61]
              node u_result_1 = mux(_u_result_T_35, _u_result_T_28, _u_result_T_34) @[Mux.scala 81:58]
              node _u_T_20 = eq(UInt<1>("h0"), u_rr_2) @[Microcode.scala 190:18]
              when _u_T_20 : @[Microcode.scala 190:18]
                node _u_out_B_T_2 = bits(u_result_1, 15, 8) @[Microcode.scala 191:34]
                u.B <= _u_out_B_T_2 @[Microcode.scala 191:25]
                node _u_out_C_T_2 = bits(u_result_1, 7, 0) @[Microcode.scala 191:58]
                u.C <= _u_out_C_T_2 @[Microcode.scala 191:49]
              else :
                node _u_T_21 = eq(UInt<1>("h1"), u_rr_2) @[Microcode.scala 190:18]
                when _u_T_21 : @[Microcode.scala 190:18]
                  node _u_out_D_T_2 = bits(u_result_1, 15, 8) @[Microcode.scala 192:34]
                  u.D <= _u_out_D_T_2 @[Microcode.scala 192:25]
                  node _u_out_E_T_2 = bits(u_result_1, 7, 0) @[Microcode.scala 192:58]
                  u.E <= _u_out_E_T_2 @[Microcode.scala 192:49]
                else :
                  node _u_T_22 = eq(UInt<2>("h2"), u_rr_2) @[Microcode.scala 190:18]
                  when _u_T_22 : @[Microcode.scala 190:18]
                    node _u_out_H_T_2 = bits(u_result_1, 15, 8) @[Microcode.scala 193:34]
                    u.H <= _u_out_H_T_2 @[Microcode.scala 193:25]
                    node _u_out_L_T_2 = bits(u_result_1, 7, 0) @[Microcode.scala 193:58]
                    u.L <= _u_out_L_T_2 @[Microcode.scala 193:49]
                  else :
                    node _u_T_23 = eq(UInt<2>("h3"), u_rr_2) @[Microcode.scala 190:18]
                    when _u_T_23 : @[Microcode.scala 190:18]
                      u.SP <= u_result_1 @[Microcode.scala 194:26]
              node _u_T_24 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 196:19]
              when _u_T_24 : @[Microcode.scala 196:28]
                u.done <= UInt<1>("h1") @[Microcode.scala 196:39]
            else :
              node _u_T_25 = and(IR, UInt<8>("hcf")) @[Microcode.scala 201:20]
              node _u_T_26 = eq(_u_T_25, UInt<4>("h9")) @[Microcode.scala 201:31]
              when _u_T_26 : @[Microcode.scala 201:44]
                node _u_rr_T_3 = shr(IR, 4) @[Microcode.scala 202:20]
                node u_rr_3 = and(_u_rr_T_3, UInt<2>("h3")) @[Microcode.scala 202:26]
                node _u_operand_T = cat(B_sampled, C_sampled) @[Cat.scala 33:92]
                node _u_operand_T_1 = cat(D_sampled, E_sampled) @[Cat.scala 33:92]
                node _u_operand_T_2 = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
                node _u_operand_T_3 = eq(UInt<1>("h0"), u_rr_3) @[Mux.scala 81:61]
                node _u_operand_T_4 = mux(_u_operand_T_3, _u_operand_T, UInt<16>("h0")) @[Mux.scala 81:58]
                node _u_operand_T_5 = eq(UInt<1>("h1"), u_rr_3) @[Mux.scala 81:61]
                node _u_operand_T_6 = mux(_u_operand_T_5, _u_operand_T_1, _u_operand_T_4) @[Mux.scala 81:58]
                node _u_operand_T_7 = eq(UInt<2>("h2"), u_rr_3) @[Mux.scala 81:61]
                node _u_operand_T_8 = mux(_u_operand_T_7, _u_operand_T_2, _u_operand_T_6) @[Mux.scala 81:58]
                node _u_operand_T_9 = eq(UInt<2>("h3"), u_rr_3) @[Mux.scala 81:61]
                node u_operand = mux(_u_operand_T_9, SP_sampled, _u_operand_T_8) @[Mux.scala 81:58]
                node u_hl = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
                node _u_result_T_36 = add(u_hl, u_operand) @[Microcode.scala 211:23]
                node u_result_2 = tail(_u_result_T_36, 1) @[Microcode.scala 211:23]
                node _u_out_H_T_3 = bits(u_result_2, 15, 8) @[Microcode.scala 212:22]
                u.H <= _u_out_H_T_3 @[Microcode.scala 212:13]
                node _u_out_L_T_3 = bits(u_result_2, 7, 0) @[Microcode.scala 213:22]
                u.L <= _u_out_L_T_3 @[Microcode.scala 213:13]
                node _u_halfCarry_T = and(u_hl, UInt<12>("hfff")) @[Microcode.scala 216:28]
                node _u_halfCarry_T_1 = and(u_operand, UInt<12>("hfff")) @[Microcode.scala 216:52]
                node _u_halfCarry_T_2 = add(_u_halfCarry_T, _u_halfCarry_T_1) @[Microcode.scala 216:41]
                node _u_halfCarry_T_3 = tail(_u_halfCarry_T_2, 1) @[Microcode.scala 216:41]
                node u_halfCarry = gt(_u_halfCarry_T_3, UInt<12>("hfff")) @[Microcode.scala 216:66]
                node u_carry = gt(u_result_2, UInt<16>("hffff")) @[Microcode.scala 217:26]
                node _u_T_27 = bits(F_sampled, 7, 7) @[Microcode.scala 218:20]
                node u_out_F_lo = cat(u_carry, UInt<4>("h0")) @[Cat.scala 33:92]
                node u_out_F_hi_hi = cat(_u_T_27, UInt<1>("h0")) @[Cat.scala 33:92]
                node u_out_F_hi = cat(u_out_F_hi_hi, u_halfCarry) @[Cat.scala 33:92]
                node _u_out_F_T = cat(u_out_F_hi, u_out_F_lo) @[Cat.scala 33:92]
                u.F <= _u_out_F_T @[Microcode.scala 105:13]
                node _u_T_28 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 220:19]
                when _u_T_28 : @[Microcode.scala 220:28]
                  u.done <= UInt<1>("h1") @[Microcode.scala 220:39]
              else :
                node _u_T_29 = and(IR, UInt<8>("hc7")) @[Microcode.scala 225:20]
                node _u_T_30 = eq(_u_T_29, UInt<3>("h4")) @[Microcode.scala 225:31]
                node _u_T_31 = shr(IR, 3) @[Microcode.scala 225:51]
                node _u_T_32 = and(_u_T_31, UInt<3>("h7")) @[Microcode.scala 225:57]
                node _u_T_33 = neq(_u_T_32, UInt<3>("h6")) @[Microcode.scala 225:64]
                node _u_T_34 = and(_u_T_30, _u_T_33) @[Microcode.scala 225:43]
                when _u_T_34 : @[Microcode.scala 225:73]
                  node _u_dst_T = shr(IR, 3) @[Microcode.scala 226:21]
                  node u_dst = and(_u_dst_T, UInt<3>("h7")) @[Microcode.scala 226:27]
                  node _u_oldVal_T = eq(UInt<1>("h0"), u_dst) @[Mux.scala 81:61]
                  node _u_oldVal_T_1 = mux(_u_oldVal_T, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                  node _u_oldVal_T_2 = eq(UInt<1>("h1"), u_dst) @[Mux.scala 81:61]
                  node _u_oldVal_T_3 = mux(_u_oldVal_T_2, C_sampled, _u_oldVal_T_1) @[Mux.scala 81:58]
                  node _u_oldVal_T_4 = eq(UInt<2>("h2"), u_dst) @[Mux.scala 81:61]
                  node _u_oldVal_T_5 = mux(_u_oldVal_T_4, D_sampled, _u_oldVal_T_3) @[Mux.scala 81:58]
                  node _u_oldVal_T_6 = eq(UInt<2>("h3"), u_dst) @[Mux.scala 81:61]
                  node _u_oldVal_T_7 = mux(_u_oldVal_T_6, E_sampled, _u_oldVal_T_5) @[Mux.scala 81:58]
                  node _u_oldVal_T_8 = eq(UInt<3>("h4"), u_dst) @[Mux.scala 81:61]
                  node _u_oldVal_T_9 = mux(_u_oldVal_T_8, H_sampled, _u_oldVal_T_7) @[Mux.scala 81:58]
                  node _u_oldVal_T_10 = eq(UInt<3>("h5"), u_dst) @[Mux.scala 81:61]
                  node _u_oldVal_T_11 = mux(_u_oldVal_T_10, L_sampled, _u_oldVal_T_9) @[Mux.scala 81:58]
                  node _u_oldVal_T_12 = eq(UInt<3>("h7"), u_dst) @[Mux.scala 81:61]
                  node u_oldVal = mux(_u_oldVal_T_12, A_sampled, _u_oldVal_T_11) @[Mux.scala 81:58]
                  node u_carryIn = bits(F_sampled, 4, 4) @[Microcode.scala 229:25]
                  u_alu.io.op <= UInt<4>("h8") @[Microcode.scala 231:17]
                  u_alu.io.a <= u_oldVal @[Microcode.scala 232:17]
                  u_alu.io.b <= UInt<1>("h0") @[Microcode.scala 233:17]
                  node _u_T_35 = eq(UInt<1>("h0"), u_dst) @[Microcode.scala 93:17]
                  when _u_T_35 : @[Microcode.scala 93:17]
                    u.B <= u_alu.io.out @[Microcode.scala 94:25]
                  else :
                    node _u_T_36 = eq(UInt<1>("h1"), u_dst) @[Microcode.scala 93:17]
                    when _u_T_36 : @[Microcode.scala 93:17]
                      u.C <= u_alu.io.out @[Microcode.scala 95:25]
                    else :
                      node _u_T_37 = eq(UInt<2>("h2"), u_dst) @[Microcode.scala 93:17]
                      when _u_T_37 : @[Microcode.scala 93:17]
                        u.D <= u_alu.io.out @[Microcode.scala 96:25]
                      else :
                        node _u_T_38 = eq(UInt<2>("h3"), u_dst) @[Microcode.scala 93:17]
                        when _u_T_38 : @[Microcode.scala 93:17]
                          u.E <= u_alu.io.out @[Microcode.scala 97:25]
                        else :
                          node _u_T_39 = eq(UInt<3>("h4"), u_dst) @[Microcode.scala 93:17]
                          when _u_T_39 : @[Microcode.scala 93:17]
                            u.H <= u_alu.io.out @[Microcode.scala 98:25]
                          else :
                            node _u_T_40 = eq(UInt<3>("h5"), u_dst) @[Microcode.scala 93:17]
                            when _u_T_40 : @[Microcode.scala 93:17]
                              u.L <= u_alu.io.out @[Microcode.scala 99:25]
                            else :
                              node _u_T_41 = eq(UInt<3>("h7"), u_dst) @[Microcode.scala 93:17]
                              when _u_T_41 : @[Microcode.scala 93:17]
                                u.A <= u_alu.io.out @[Microcode.scala 100:25]
                  node u_out_F_lo_1 = cat(u_carryIn, UInt<4>("h0")) @[Cat.scala 33:92]
                  node u_out_F_hi_hi_1 = cat(u_alu.io.flagZ, UInt<1>("h0")) @[Cat.scala 33:92]
                  node u_out_F_hi_1 = cat(u_out_F_hi_hi_1, u_alu.io.flagH) @[Cat.scala 33:92]
                  node _u_out_F_T_1 = cat(u_out_F_hi_1, u_out_F_lo_1) @[Cat.scala 33:92]
                  u.F <= _u_out_F_T_1 @[Microcode.scala 105:13]
                  node _u_T_42 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 245:19]
                  when _u_T_42 : @[Microcode.scala 245:28]
                    u.done <= UInt<1>("h1") @[Microcode.scala 245:39]
                else :
                  node _u_T_43 = and(IR, UInt<8>("hc7")) @[Microcode.scala 250:20]
                  node _u_T_44 = eq(_u_T_43, UInt<3>("h5")) @[Microcode.scala 250:31]
                  node _u_T_45 = shr(IR, 3) @[Microcode.scala 250:51]
                  node _u_T_46 = and(_u_T_45, UInt<3>("h7")) @[Microcode.scala 250:57]
                  node _u_T_47 = neq(_u_T_46, UInt<3>("h6")) @[Microcode.scala 250:64]
                  node _u_T_48 = and(_u_T_44, _u_T_47) @[Microcode.scala 250:43]
                  when _u_T_48 : @[Microcode.scala 250:73]
                    node _u_dst_T_1 = shr(IR, 3) @[Microcode.scala 251:21]
                    node u_dst_1 = and(_u_dst_T_1, UInt<3>("h7")) @[Microcode.scala 251:27]
                    node _u_oldVal_T_13 = eq(UInt<1>("h0"), u_dst_1) @[Mux.scala 81:61]
                    node _u_oldVal_T_14 = mux(_u_oldVal_T_13, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                    node _u_oldVal_T_15 = eq(UInt<1>("h1"), u_dst_1) @[Mux.scala 81:61]
                    node _u_oldVal_T_16 = mux(_u_oldVal_T_15, C_sampled, _u_oldVal_T_14) @[Mux.scala 81:58]
                    node _u_oldVal_T_17 = eq(UInt<2>("h2"), u_dst_1) @[Mux.scala 81:61]
                    node _u_oldVal_T_18 = mux(_u_oldVal_T_17, D_sampled, _u_oldVal_T_16) @[Mux.scala 81:58]
                    node _u_oldVal_T_19 = eq(UInt<2>("h3"), u_dst_1) @[Mux.scala 81:61]
                    node _u_oldVal_T_20 = mux(_u_oldVal_T_19, E_sampled, _u_oldVal_T_18) @[Mux.scala 81:58]
                    node _u_oldVal_T_21 = eq(UInt<3>("h4"), u_dst_1) @[Mux.scala 81:61]
                    node _u_oldVal_T_22 = mux(_u_oldVal_T_21, H_sampled, _u_oldVal_T_20) @[Mux.scala 81:58]
                    node _u_oldVal_T_23 = eq(UInt<3>("h5"), u_dst_1) @[Mux.scala 81:61]
                    node _u_oldVal_T_24 = mux(_u_oldVal_T_23, L_sampled, _u_oldVal_T_22) @[Mux.scala 81:58]
                    node _u_oldVal_T_25 = eq(UInt<3>("h7"), u_dst_1) @[Mux.scala 81:61]
                    node u_oldVal_1 = mux(_u_oldVal_T_25, A_sampled, _u_oldVal_T_24) @[Mux.scala 81:58]
                    u_alu.io.op <= UInt<4>("h9") @[Microcode.scala 254:17]
                    u_alu.io.a <= u_oldVal_1 @[Microcode.scala 255:17]
                    u_alu.io.b <= UInt<1>("h0") @[Microcode.scala 256:17]
                    node _u_T_49 = eq(UInt<1>("h0"), u_dst_1) @[Microcode.scala 93:17]
                    when _u_T_49 : @[Microcode.scala 93:17]
                      u.B <= u_alu.io.out @[Microcode.scala 94:25]
                    else :
                      node _u_T_50 = eq(UInt<1>("h1"), u_dst_1) @[Microcode.scala 93:17]
                      when _u_T_50 : @[Microcode.scala 93:17]
                        u.C <= u_alu.io.out @[Microcode.scala 95:25]
                      else :
                        node _u_T_51 = eq(UInt<2>("h2"), u_dst_1) @[Microcode.scala 93:17]
                        when _u_T_51 : @[Microcode.scala 93:17]
                          u.D <= u_alu.io.out @[Microcode.scala 96:25]
                        else :
                          node _u_T_52 = eq(UInt<2>("h3"), u_dst_1) @[Microcode.scala 93:17]
                          when _u_T_52 : @[Microcode.scala 93:17]
                            u.E <= u_alu.io.out @[Microcode.scala 97:25]
                          else :
                            node _u_T_53 = eq(UInt<3>("h4"), u_dst_1) @[Microcode.scala 93:17]
                            when _u_T_53 : @[Microcode.scala 93:17]
                              u.H <= u_alu.io.out @[Microcode.scala 98:25]
                            else :
                              node _u_T_54 = eq(UInt<3>("h5"), u_dst_1) @[Microcode.scala 93:17]
                              when _u_T_54 : @[Microcode.scala 93:17]
                                u.L <= u_alu.io.out @[Microcode.scala 99:25]
                              else :
                                node _u_T_55 = eq(UInt<3>("h7"), u_dst_1) @[Microcode.scala 93:17]
                                when _u_T_55 : @[Microcode.scala 93:17]
                                  u.A <= u_alu.io.out @[Microcode.scala 100:25]
                    node _u_T_56 = bits(F_sampled, 4, 4) @[Microcode.scala 258:62]
                    node u_out_F_lo_2 = cat(_u_T_56, UInt<4>("h0")) @[Cat.scala 33:92]
                    node u_out_F_hi_hi_2 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                    node u_out_F_hi_2 = cat(u_out_F_hi_hi_2, u_alu.io.flagH) @[Cat.scala 33:92]
                    node _u_out_F_T_2 = cat(u_out_F_hi_2, u_out_F_lo_2) @[Cat.scala 33:92]
                    u.F <= _u_out_F_T_2 @[Microcode.scala 105:13]
                    node _u_T_57 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 260:19]
                    when _u_T_57 : @[Microcode.scala 260:28]
                      u.done <= UInt<1>("h1") @[Microcode.scala 260:39]
                  else :
                    node _u_T_58 = eq(IR, UInt<6>("h34")) @[Microcode.scala 265:19]
                    when _u_T_58 : @[Microcode.scala 265:32]
                      node u_carryIn_1 = bits(F_sampled, 4, 4) @[Microcode.scala 266:25]
                      node _u_T_59 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 268:22]
                      when _u_T_59 : @[Microcode.scala 268:22]
                        mcBus.memAddr <= u_HL @[Microcode.scala 271:22]
                        mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 272:22]
                        node _u_T_60 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 273:23]
                        when _u_T_60 : @[Microcode.scala 273:32]
                          u_tmp8 <= mcBus.memReadData @[Microcode.scala 274:18]
                          u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 275:29]
                      else :
                        node _u_T_61 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 268:22]
                        when _u_T_61 : @[Microcode.scala 268:22]
                          u_alu.io.op <= UInt<4>("h8") @[Microcode.scala 281:21]
                          u_alu.io.a <= u_tmp8 @[Microcode.scala 282:21]
                          u_alu.io.b <= UInt<1>("h0") @[Microcode.scala 283:21]
                          node u_out_F_lo_3 = cat(u_carryIn_1, UInt<4>("h0")) @[Cat.scala 33:92]
                          node u_out_F_hi_hi_3 = cat(u_alu.io.flagZ, UInt<1>("h0")) @[Cat.scala 33:92]
                          node u_out_F_hi_3 = cat(u_out_F_hi_hi_3, u_alu.io.flagH) @[Cat.scala 33:92]
                          node _u_out_F_T_3 = cat(u_out_F_hi_3, u_out_F_lo_3) @[Cat.scala 33:92]
                          u.F <= _u_out_F_T_3 @[Microcode.scala 105:13]
                          node _u_T_62 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 292:23]
                          when _u_T_62 : @[Microcode.scala 292:32]
                            u_tmp8 <= u_alu.io.out @[Microcode.scala 293:18]
                            u.next_mcycle <= UInt<2>("h2") @[Microcode.scala 294:29]
                        else :
                          node _u_T_63 = eq(UInt<2>("h2"), mcycle) @[Microcode.scala 268:22]
                          when _u_T_63 : @[Microcode.scala 268:22]
                            mcBus.memAddr <= u_HL @[Microcode.scala 300:27]
                            node _u_mcBus_memWrite_T = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 301:38]
                            mcBus.memWrite <= _u_mcBus_memWrite_T @[Microcode.scala 301:27]
                            mcBus.memWriteData <= u_tmp8 @[Microcode.scala 302:27]
                            node _u_T_64 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 303:23]
                            when _u_T_64 : @[Microcode.scala 303:32]
                              u.done <= UInt<1>("h1") @[Microcode.scala 303:43]
                    else :
                      node _u_T_65 = eq(IR, UInt<6>("h35")) @[Microcode.scala 310:19]
                      when _u_T_65 : @[Microcode.scala 310:32]
                        node u_carryIn_2 = bits(F_sampled, 4, 4) @[Microcode.scala 311:25]
                        node _u_T_66 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 313:22]
                        when _u_T_66 : @[Microcode.scala 313:22]
                          mcBus.memAddr <= u_HL @[Microcode.scala 316:22]
                          mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 317:22]
                          node _u_T_67 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 318:23]
                          when _u_T_67 : @[Microcode.scala 318:32]
                            u_tmp8 <= mcBus.memReadData @[Microcode.scala 319:18]
                            u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 320:29]
                        else :
                          node _u_T_68 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 313:22]
                          when _u_T_68 : @[Microcode.scala 313:22]
                            u_alu.io.op <= UInt<4>("h9") @[Microcode.scala 326:21]
                            u_alu.io.a <= u_tmp8 @[Microcode.scala 327:21]
                            u_alu.io.b <= UInt<1>("h0") @[Microcode.scala 328:21]
                            node u_out_F_lo_4 = cat(u_carryIn_2, UInt<4>("h0")) @[Cat.scala 33:92]
                            node u_out_F_hi_hi_4 = cat(u_alu.io.flagZ, UInt<1>("h1")) @[Cat.scala 33:92]
                            node u_out_F_hi_4 = cat(u_out_F_hi_hi_4, u_alu.io.flagH) @[Cat.scala 33:92]
                            node _u_out_F_T_4 = cat(u_out_F_hi_4, u_out_F_lo_4) @[Cat.scala 33:92]
                            u.F <= _u_out_F_T_4 @[Microcode.scala 105:13]
                            node _u_T_69 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 338:23]
                            when _u_T_69 : @[Microcode.scala 338:32]
                              u_tmp8 <= u_alu.io.out @[Microcode.scala 339:18]
                              u.next_mcycle <= UInt<2>("h2") @[Microcode.scala 340:29]
                          else :
                            node _u_T_70 = eq(UInt<2>("h2"), mcycle) @[Microcode.scala 313:22]
                            when _u_T_70 : @[Microcode.scala 313:22]
                              mcBus.memAddr <= u_HL @[Microcode.scala 346:27]
                              node _u_mcBus_memWrite_T_1 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 347:38]
                              mcBus.memWrite <= _u_mcBus_memWrite_T_1 @[Microcode.scala 347:27]
                              mcBus.memWriteData <= u_tmp8 @[Microcode.scala 348:27]
                              node _u_T_71 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 349:23]
                              when _u_T_71 : @[Microcode.scala 349:32]
                                u.done <= UInt<1>("h1") @[Microcode.scala 349:43]
                      else :
                        node _u_T_72 = eq(IR, UInt<8>("he9")) @[Microcode.scala 355:19]
                        when _u_T_72 : @[Microcode.scala 355:32]
                          u.PC <= u_HL @[Microcode.scala 356:14]
                          node _u_T_73 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 357:19]
                          when _u_T_73 : @[Microcode.scala 357:28]
                            u.done <= UInt<1>("h1") @[Microcode.scala 357:39]
                        else :
                          node _u_T_74 = geq(IR, UInt<7>("h40")) @[Microcode.scala 363:20]
                          node _u_T_75 = leq(IR, UInt<7>("h7f")) @[Microcode.scala 363:37]
                          node _u_T_76 = and(_u_T_74, _u_T_75) @[Microcode.scala 363:31]
                          node _u_T_77 = neq(IR, UInt<7>("h76")) @[Microcode.scala 364:11]
                          node _u_T_78 = and(_u_T_76, _u_T_77) @[Microcode.scala 363:49]
                          node _u_T_79 = and(IR, UInt<3>("h7")) @[Microcode.scala 365:12]
                          node _u_T_80 = neq(_u_T_79, UInt<3>("h6")) @[Microcode.scala 365:23]
                          node _u_T_81 = and(_u_T_78, _u_T_80) @[Microcode.scala 364:24]
                          node _u_T_82 = and(IR, UInt<8>("hf8")) @[Microcode.scala 366:12]
                          node _u_T_83 = neq(_u_T_82, UInt<7>("h70")) @[Microcode.scala 366:23]
                          node _u_T_84 = and(_u_T_81, _u_T_83) @[Microcode.scala 365:36]
                          when _u_T_84 : @[Microcode.scala 366:37]
                            node _u_dst_T_2 = shr(IR, 3) @[Microcode.scala 367:21]
                            node u_dst_2 = and(_u_dst_T_2, UInt<3>("h7")) @[Microcode.scala 367:27]
                            node u_src = and(IR, UInt<3>("h7")) @[Microcode.scala 368:20]
                            node _u_T_85 = eq(UInt<1>("h0"), u_src) @[Mux.scala 81:61]
                            node _u_T_86 = mux(_u_T_85, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                            node _u_T_87 = eq(UInt<1>("h1"), u_src) @[Mux.scala 81:61]
                            node _u_T_88 = mux(_u_T_87, C_sampled, _u_T_86) @[Mux.scala 81:58]
                            node _u_T_89 = eq(UInt<2>("h2"), u_src) @[Mux.scala 81:61]
                            node _u_T_90 = mux(_u_T_89, D_sampled, _u_T_88) @[Mux.scala 81:58]
                            node _u_T_91 = eq(UInt<2>("h3"), u_src) @[Mux.scala 81:61]
                            node _u_T_92 = mux(_u_T_91, E_sampled, _u_T_90) @[Mux.scala 81:58]
                            node _u_T_93 = eq(UInt<3>("h4"), u_src) @[Mux.scala 81:61]
                            node _u_T_94 = mux(_u_T_93, H_sampled, _u_T_92) @[Mux.scala 81:58]
                            node _u_T_95 = eq(UInt<3>("h5"), u_src) @[Mux.scala 81:61]
                            node _u_T_96 = mux(_u_T_95, L_sampled, _u_T_94) @[Mux.scala 81:58]
                            node _u_T_97 = eq(UInt<3>("h7"), u_src) @[Mux.scala 81:61]
                            node _u_T_98 = mux(_u_T_97, A_sampled, _u_T_96) @[Mux.scala 81:58]
                            node _u_T_99 = eq(UInt<1>("h0"), u_dst_2) @[Microcode.scala 93:17]
                            when _u_T_99 : @[Microcode.scala 93:17]
                              u.B <= _u_T_98 @[Microcode.scala 94:25]
                            else :
                              node _u_T_100 = eq(UInt<1>("h1"), u_dst_2) @[Microcode.scala 93:17]
                              when _u_T_100 : @[Microcode.scala 93:17]
                                u.C <= _u_T_98 @[Microcode.scala 95:25]
                              else :
                                node _u_T_101 = eq(UInt<2>("h2"), u_dst_2) @[Microcode.scala 93:17]
                                when _u_T_101 : @[Microcode.scala 93:17]
                                  u.D <= _u_T_98 @[Microcode.scala 96:25]
                                else :
                                  node _u_T_102 = eq(UInt<2>("h3"), u_dst_2) @[Microcode.scala 93:17]
                                  when _u_T_102 : @[Microcode.scala 93:17]
                                    u.E <= _u_T_98 @[Microcode.scala 97:25]
                                  else :
                                    node _u_T_103 = eq(UInt<3>("h4"), u_dst_2) @[Microcode.scala 93:17]
                                    when _u_T_103 : @[Microcode.scala 93:17]
                                      u.H <= _u_T_98 @[Microcode.scala 98:25]
                                    else :
                                      node _u_T_104 = eq(UInt<3>("h5"), u_dst_2) @[Microcode.scala 93:17]
                                      when _u_T_104 : @[Microcode.scala 93:17]
                                        u.L <= _u_T_98 @[Microcode.scala 99:25]
                                      else :
                                        node _u_T_105 = eq(UInt<3>("h7"), u_dst_2) @[Microcode.scala 93:17]
                                        when _u_T_105 : @[Microcode.scala 93:17]
                                          u.A <= _u_T_98 @[Microcode.scala 100:25]
                            node _u_T_106 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 370:19]
                            when _u_T_106 : @[Microcode.scala 370:28]
                              u.done <= UInt<1>("h1") @[Microcode.scala 370:39]
                          else :
                            node _u_T_107 = and(IR, UInt<8>("hc7")) @[Microcode.scala 375:20]
                            node _u_T_108 = eq(_u_T_107, UInt<3>("h6")) @[Microcode.scala 375:31]
                            node _u_T_109 = shr(IR, 3) @[Microcode.scala 375:51]
                            node _u_T_110 = and(_u_T_109, UInt<3>("h7")) @[Microcode.scala 375:57]
                            node _u_T_111 = neq(_u_T_110, UInt<3>("h6")) @[Microcode.scala 375:64]
                            node _u_T_112 = and(_u_T_108, _u_T_111) @[Microcode.scala 375:43]
                            when _u_T_112 : @[Microcode.scala 375:73]
                              node _u_dst_T_3 = shr(IR, 3) @[Microcode.scala 376:21]
                              node u_dst_3 = and(_u_dst_T_3, UInt<3>("h7")) @[Microcode.scala 376:27]
                              node _u_T_113 = eq(UInt<1>("h0"), u_dst_3) @[Microcode.scala 93:17]
                              when _u_T_113 : @[Microcode.scala 93:17]
                                u.B <= imm8 @[Microcode.scala 94:25]
                              else :
                                node _u_T_114 = eq(UInt<1>("h1"), u_dst_3) @[Microcode.scala 93:17]
                                when _u_T_114 : @[Microcode.scala 93:17]
                                  u.C <= imm8 @[Microcode.scala 95:25]
                                else :
                                  node _u_T_115 = eq(UInt<2>("h2"), u_dst_3) @[Microcode.scala 93:17]
                                  when _u_T_115 : @[Microcode.scala 93:17]
                                    u.D <= imm8 @[Microcode.scala 96:25]
                                  else :
                                    node _u_T_116 = eq(UInt<2>("h3"), u_dst_3) @[Microcode.scala 93:17]
                                    when _u_T_116 : @[Microcode.scala 93:17]
                                      u.E <= imm8 @[Microcode.scala 97:25]
                                    else :
                                      node _u_T_117 = eq(UInt<3>("h4"), u_dst_3) @[Microcode.scala 93:17]
                                      when _u_T_117 : @[Microcode.scala 93:17]
                                        u.H <= imm8 @[Microcode.scala 98:25]
                                      else :
                                        node _u_T_118 = eq(UInt<3>("h5"), u_dst_3) @[Microcode.scala 93:17]
                                        when _u_T_118 : @[Microcode.scala 93:17]
                                          u.L <= imm8 @[Microcode.scala 99:25]
                                        else :
                                          node _u_T_119 = eq(UInt<3>("h7"), u_dst_3) @[Microcode.scala 93:17]
                                          when _u_T_119 : @[Microcode.scala 93:17]
                                            u.A <= imm8 @[Microcode.scala 100:25]
                              node _u_T_120 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 378:19]
                              when _u_T_120 : @[Microcode.scala 378:28]
                                u.done <= UInt<1>("h1") @[Microcode.scala 378:39]
                            else :
                              node _u_T_121 = geq(IR, UInt<7>("h70")) @[Microcode.scala 385:20]
                              node _u_T_122 = leq(IR, UInt<7>("h75")) @[Microcode.scala 385:37]
                              node _u_T_123 = and(_u_T_121, _u_T_122) @[Microcode.scala 385:31]
                              node _u_T_124 = eq(IR, UInt<7>("h77")) @[Microcode.scala 385:55]
                              node _u_T_125 = or(_u_T_123, _u_T_124) @[Microcode.scala 385:49]
                              when _u_T_125 : @[Microcode.scala 385:68]
                                node u_src_1 = and(IR, UInt<3>("h7")) @[Microcode.scala 386:20]
                                mcBus.memAddr <= u_HL @[Microcode.scala 388:23]
                                node _u_mcBus_memWrite_T_2 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 389:34]
                                mcBus.memWrite <= _u_mcBus_memWrite_T_2 @[Microcode.scala 389:23]
                                node _u_mcBus_memWriteData_T = eq(UInt<1>("h0"), u_src_1) @[Mux.scala 81:61]
                                node _u_mcBus_memWriteData_T_1 = mux(_u_mcBus_memWriteData_T, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                                node _u_mcBus_memWriteData_T_2 = eq(UInt<1>("h1"), u_src_1) @[Mux.scala 81:61]
                                node _u_mcBus_memWriteData_T_3 = mux(_u_mcBus_memWriteData_T_2, C_sampled, _u_mcBus_memWriteData_T_1) @[Mux.scala 81:58]
                                node _u_mcBus_memWriteData_T_4 = eq(UInt<2>("h2"), u_src_1) @[Mux.scala 81:61]
                                node _u_mcBus_memWriteData_T_5 = mux(_u_mcBus_memWriteData_T_4, D_sampled, _u_mcBus_memWriteData_T_3) @[Mux.scala 81:58]
                                node _u_mcBus_memWriteData_T_6 = eq(UInt<2>("h3"), u_src_1) @[Mux.scala 81:61]
                                node _u_mcBus_memWriteData_T_7 = mux(_u_mcBus_memWriteData_T_6, E_sampled, _u_mcBus_memWriteData_T_5) @[Mux.scala 81:58]
                                node _u_mcBus_memWriteData_T_8 = eq(UInt<3>("h4"), u_src_1) @[Mux.scala 81:61]
                                node _u_mcBus_memWriteData_T_9 = mux(_u_mcBus_memWriteData_T_8, H_sampled, _u_mcBus_memWriteData_T_7) @[Mux.scala 81:58]
                                node _u_mcBus_memWriteData_T_10 = eq(UInt<3>("h5"), u_src_1) @[Mux.scala 81:61]
                                node _u_mcBus_memWriteData_T_11 = mux(_u_mcBus_memWriteData_T_10, L_sampled, _u_mcBus_memWriteData_T_9) @[Mux.scala 81:58]
                                node _u_mcBus_memWriteData_T_12 = eq(UInt<3>("h7"), u_src_1) @[Mux.scala 81:61]
                                node _u_mcBus_memWriteData_T_13 = mux(_u_mcBus_memWriteData_T_12, A_sampled, _u_mcBus_memWriteData_T_11) @[Mux.scala 81:58]
                                mcBus.memWriteData <= _u_mcBus_memWriteData_T_13 @[Microcode.scala 390:23]
                                node _u_T_126 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 392:19]
                                when _u_T_126 : @[Microcode.scala 392:28]
                                  u.done <= UInt<1>("h1") @[Microcode.scala 392:39]
                              else :
                                node _u_T_127 = eq(IR, UInt<6>("h36")) @[Microcode.scala 397:19]
                                when _u_T_127 : @[Microcode.scala 397:32]
                                  node u_HL_1 = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
                                  node _u_T_128 = eq(mcycle, UInt<1>("h0")) @[Microcode.scala 402:19]
                                  when _u_T_128 : @[Microcode.scala 402:28]
                                    mcBus.memAddr <= u_HL_1 @[Microcode.scala 403:20]
                                    mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 404:21]
                                    mcBus.memWriteData <= imm8 @[Microcode.scala 405:25]
                                    node _u_T_129 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 407:21]
                                    when _u_T_129 : @[Microcode.scala 407:30]
                                      u.done <= UInt<1>("h1") @[Microcode.scala 408:20]
                                else :
                                  node _u_T_130 = eq(IR, UInt<5>("h1a")) @[Microcode.scala 415:19]
                                  when _u_T_130 : @[Microcode.scala 415:32]
                                    node _u_T_131 = eq(tcycle, UInt<1>("h0")) @[Microcode.scala 416:19]
                                    node _u_T_132 = eq(tcycle, UInt<1>("h1")) @[Microcode.scala 416:37]
                                    node _u_T_133 = or(_u_T_131, _u_T_132) @[Microcode.scala 416:27]
                                    node _u_T_134 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 416:55]
                                    node _u_T_135 = or(_u_T_133, _u_T_134) @[Microcode.scala 416:45]
                                    node _u_T_136 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 416:73]
                                    node _u_T_137 = or(_u_T_135, _u_T_136) @[Microcode.scala 416:63]
                                    when _u_T_137 : @[Microcode.scala 416:82]
                                      node _u_mcBus_memAddr_T = cat(D_sampled, E_sampled) @[Cat.scala 33:92]
                                      mcBus.memAddr <= _u_mcBus_memAddr_T @[Microcode.scala 417:20]
                                      mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 418:20]
                                    node _u_T_138 = eq(tcycle, UInt<1>("h0")) @[Microcode.scala 420:19]
                                    when _u_T_138 : @[Microcode.scala 420:28]
                                      skip
                                    node _u_T_139 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 423:19]
                                    when _u_T_139 : @[Microcode.scala 423:28]
                                      u.A <= mcBus.memReadData @[Microcode.scala 425:15]
                                      u.done <= UInt<1>("h1") @[Microcode.scala 426:18]
                                  else :
                                    node _u_T_140 = eq(IR, UInt<6>("h2a")) @[Microcode.scala 431:19]
                                    when _u_T_140 : @[Microcode.scala 431:32]
                                      node _u_T_141 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 432:22]
                                      when _u_T_141 : @[Microcode.scala 432:22]
                                        mcBus.memAddr <= u_HL @[Microcode.scala 436:22]
                                        mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 437:22]
                                        node _u_T_142 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 439:23]
                                        when _u_T_142 : @[Microcode.scala 439:32]
                                          u_tmp8 <= mcBus.memReadData @[Microcode.scala 440:18]
                                          node _u_newHL_T = add(u_HL, UInt<1>("h1")) @[Microcode.scala 443:28]
                                          node u_newHL = tail(_u_newHL_T, 1) @[Microcode.scala 443:28]
                                          node _u_out_H_T_4 = bits(u_newHL, 15, 8) @[Microcode.scala 444:27]
                                          u.H <= _u_out_H_T_4 @[Microcode.scala 444:19]
                                          node _u_out_L_T_4 = bits(u_newHL, 7, 0) @[Microcode.scala 445:27]
                                          u.L <= _u_out_L_T_4 @[Microcode.scala 445:19]
                                          u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 447:29]
                                      else :
                                        node _u_T_143 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 432:22]
                                        when _u_T_143 : @[Microcode.scala 432:22]
                                          u.A <= u_tmp8 @[Microcode.scala 453:17]
                                          node _u_T_144 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 455:23]
                                          when _u_T_144 : @[Microcode.scala 455:32]
                                            u.done <= UInt<1>("h1") @[Microcode.scala 456:22]
                                    else :
                                      node _u_T_145 = eq(IR, UInt<6>("h3a")) @[Microcode.scala 467:19]
                                      when _u_T_145 : @[Microcode.scala 467:32]
                                        node _u_T_146 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 468:22]
                                        when _u_T_146 : @[Microcode.scala 468:22]
                                          mcBus.memAddr <= u_HL @[Microcode.scala 472:22]
                                          mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 473:22]
                                          node _u_T_147 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 475:23]
                                          when _u_T_147 : @[Microcode.scala 475:32]
                                            u_tmp8 <= mcBus.memReadData @[Microcode.scala 476:18]
                                            u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 477:29]
                                        else :
                                          node _u_T_148 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 468:22]
                                          when _u_T_148 : @[Microcode.scala 468:22]
                                            u.A <= u_tmp8 @[Microcode.scala 483:17]
                                            node _u_newHL_T_1 = sub(u_HL, UInt<1>("h1")) @[Microcode.scala 485:26]
                                            node u_newHL_1 = tail(_u_newHL_T_1, 1) @[Microcode.scala 485:26]
                                            node _u_out_H_T_5 = bits(u_newHL_1, 15, 8) @[Microcode.scala 486:25]
                                            u.H <= _u_out_H_T_5 @[Microcode.scala 486:17]
                                            node _u_out_L_T_5 = bits(u_newHL_1, 7, 0) @[Microcode.scala 487:25]
                                            u.L <= _u_out_L_T_5 @[Microcode.scala 487:17]
                                            node _u_T_149 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 489:23]
                                            when _u_T_149 : @[Microcode.scala 489:32]
                                              u.done <= UInt<1>("h1") @[Microcode.scala 490:22]
                                      else :
                                        node _u_T_150 = eq(IR, UInt<6>("h22")) @[Microcode.scala 498:19]
                                        when _u_T_150 : @[Microcode.scala 498:32]
                                          node u_HL_2 = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
                                          node _u_newHL_T_2 = add(u_HL_2, UInt<1>("h1")) @[Microcode.scala 500:22]
                                          node u_newHL_2 = tail(_u_newHL_T_2, 1) @[Microcode.scala 500:22]
                                          node _u_out_H_T_6 = bits(u_newHL_2, 15, 8) @[Microcode.scala 501:21]
                                          u.H <= _u_out_H_T_6 @[Microcode.scala 501:13]
                                          node _u_out_L_T_6 = bits(u_newHL_2, 7, 0) @[Microcode.scala 502:21]
                                          u.L <= _u_out_L_T_6 @[Microcode.scala 502:13]
                                          mcBus.memAddr <= u_HL_2 @[Microcode.scala 504:23]
                                          mcBus.memWriteData <= A_sampled @[Microcode.scala 505:23]
                                          node _u_mcBus_memWrite_T_3 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 506:34]
                                          mcBus.memWrite <= _u_mcBus_memWrite_T_3 @[Microcode.scala 506:23]
                                          node _u_T_151 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 508:19]
                                          when _u_T_151 : @[Microcode.scala 508:28]
                                            u.done <= UInt<1>("h1") @[Microcode.scala 508:39]
                                        else :
                                          node _u_T_152 = eq(IR, UInt<6>("h32")) @[Microcode.scala 513:19]
                                          when _u_T_152 : @[Microcode.scala 513:32]
                                            node u_HL_3 = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
                                            node _u_newHL_T_3 = sub(u_HL_3, UInt<1>("h1")) @[Microcode.scala 515:22]
                                            node u_newHL_3 = tail(_u_newHL_T_3, 1) @[Microcode.scala 515:22]
                                            node _u_out_H_T_7 = bits(u_newHL_3, 15, 8) @[Microcode.scala 516:21]
                                            u.H <= _u_out_H_T_7 @[Microcode.scala 516:13]
                                            node _u_out_L_T_7 = bits(u_newHL_3, 7, 0) @[Microcode.scala 517:21]
                                            u.L <= _u_out_L_T_7 @[Microcode.scala 517:13]
                                            mcBus.memAddr <= u_HL_3 @[Microcode.scala 519:23]
                                            mcBus.memWriteData <= A_sampled @[Microcode.scala 520:23]
                                            node _u_mcBus_memWrite_T_4 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 521:34]
                                            mcBus.memWrite <= _u_mcBus_memWrite_T_4 @[Microcode.scala 521:23]
                                            node _u_T_153 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 523:19]
                                            when _u_T_153 : @[Microcode.scala 523:28]
                                              u.done <= UInt<1>("h1") @[Microcode.scala 523:39]
                                          else :
                                            node _u_T_154 = eq(IR, UInt<8>("hf2")) @[Microcode.scala 528:19]
                                            when _u_T_154 : @[Microcode.scala 528:32]
                                              node u_addr = cat(UInt<8>("hff"), C_sampled) @[Cat.scala 33:92]
                                              node _u_T_155 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 531:22]
                                              when _u_T_155 : @[Microcode.scala 531:22]
                                                mcBus.memAddr <= u_addr @[Microcode.scala 533:22]
                                                mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 534:22]
                                                node _u_T_156 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 535:23]
                                                when _u_T_156 : @[Microcode.scala 535:32]
                                                  u_tmp8 <= mcBus.memReadData @[Microcode.scala 536:18]
                                                  u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 537:29]
                                              else :
                                                node _u_T_157 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 531:22]
                                                when _u_T_157 : @[Microcode.scala 531:22]
                                                  u.A <= u_tmp8 @[Microcode.scala 541:17]
                                                  node _u_T_158 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 542:23]
                                                  when _u_T_158 : @[Microcode.scala 542:32]
                                                    u.done <= UInt<1>("h1") @[Microcode.scala 542:43]
                                            else :
                                              node _u_T_159 = eq(IR, UInt<8>("he2")) @[Microcode.scala 549:19]
                                              when _u_T_159 : @[Microcode.scala 549:32]
                                                node _u_mcBus_memAddr_T_1 = cat(UInt<8>("hff"), C_sampled) @[Cat.scala 33:92]
                                                mcBus.memAddr <= _u_mcBus_memAddr_T_1 @[Microcode.scala 550:23]
                                                mcBus.memWriteData <= A_sampled @[Microcode.scala 551:23]
                                                node _u_mcBus_memWrite_T_5 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 552:34]
                                                mcBus.memWrite <= _u_mcBus_memWrite_T_5 @[Microcode.scala 552:23]
                                                node _u_T_160 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 554:19]
                                                when _u_T_160 : @[Microcode.scala 554:28]
                                                  u.done <= UInt<1>("h1") @[Microcode.scala 554:39]
                                              else :
                                                node _u_T_161 = eq(IR, UInt<8>("he0")) @[Microcode.scala 559:19]
                                                when _u_T_161 : @[Microcode.scala 559:32]
                                                  node _u_mcBus_memAddr_T_2 = cat(UInt<8>("hff"), imm8) @[Cat.scala 33:92]
                                                  mcBus.memAddr <= _u_mcBus_memAddr_T_2 @[Microcode.scala 560:23]
                                                  mcBus.memWriteData <= A_sampled @[Microcode.scala 561:23]
                                                  node _u_mcBus_memWrite_T_6 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 562:34]
                                                  mcBus.memWrite <= _u_mcBus_memWrite_T_6 @[Microcode.scala 562:23]
                                                  node _u_T_162 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 564:19]
                                                  when _u_T_162 : @[Microcode.scala 564:28]
                                                    u.done <= UInt<1>("h1") @[Microcode.scala 564:39]
                                                else :
                                                  node _u_T_163 = eq(IR, UInt<8>("hf0")) @[Microcode.scala 572:19]
                                                  when _u_T_163 : @[Microcode.scala 572:32]
                                                    node _u_T_164 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 573:22]
                                                    when _u_T_164 : @[Microcode.scala 573:22]
                                                      node _u_mcBus_memAddr_T_3 = cat(UInt<8>("hff"), imm8) @[Cat.scala 33:92]
                                                      mcBus.memAddr <= _u_mcBus_memAddr_T_3 @[Microcode.scala 577:22]
                                                      mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 578:22]
                                                      node _u_T_165 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 580:23]
                                                      when _u_T_165 : @[Microcode.scala 580:32]
                                                        u_tmp8 <= mcBus.memReadData @[Microcode.scala 581:18]
                                                        u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 582:29]
                                                    else :
                                                      node _u_T_166 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 573:22]
                                                      when _u_T_166 : @[Microcode.scala 573:22]
                                                        u.A <= u_tmp8 @[Microcode.scala 588:17]
                                                        node _u_T_167 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 590:23]
                                                        when _u_T_167 : @[Microcode.scala 590:32]
                                                          u.done <= UInt<1>("h1") @[Microcode.scala 591:22]
                                                  else :
                                                    node _u_T_168 = eq(IR, UInt<7>("h46")) @[Microcode.scala 600:19]
                                                    node _u_T_169 = eq(IR, UInt<7>("h4e")) @[Microcode.scala 600:37]
                                                    node _u_T_170 = or(_u_T_168, _u_T_169) @[Microcode.scala 600:31]
                                                    node _u_T_171 = eq(IR, UInt<7>("h56")) @[Microcode.scala 600:55]
                                                    node _u_T_172 = or(_u_T_170, _u_T_171) @[Microcode.scala 600:49]
                                                    node _u_T_173 = eq(IR, UInt<7>("h5e")) @[Microcode.scala 601:10]
                                                    node _u_T_174 = or(_u_T_172, _u_T_173) @[Microcode.scala 600:67]
                                                    node _u_T_175 = eq(IR, UInt<7>("h66")) @[Microcode.scala 601:28]
                                                    node _u_T_176 = or(_u_T_174, _u_T_175) @[Microcode.scala 601:22]
                                                    node _u_T_177 = eq(IR, UInt<7>("h6e")) @[Microcode.scala 601:46]
                                                    node _u_T_178 = or(_u_T_176, _u_T_177) @[Microcode.scala 601:40]
                                                    node _u_T_179 = eq(IR, UInt<7>("h7e")) @[Microcode.scala 601:64]
                                                    node _u_T_180 = or(_u_T_178, _u_T_179) @[Microcode.scala 601:58]
                                                    when _u_T_180 : @[Microcode.scala 601:77]
                                                      node _u_dst_T_4 = shr(IR, 3) @[Microcode.scala 602:21]
                                                      node u_dst_4 = and(_u_dst_T_4, UInt<3>("h7")) @[Microcode.scala 602:27]
                                                      mcBus.memAddr <= u_HL @[Microcode.scala 604:18]
                                                      mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 605:18]
                                                      node _u_T_181 = eq(UInt<1>("h0"), u_dst_4) @[Microcode.scala 93:17]
                                                      when _u_T_181 : @[Microcode.scala 93:17]
                                                        u.B <= mcBus.memReadData @[Microcode.scala 94:25]
                                                      else :
                                                        node _u_T_182 = eq(UInt<1>("h1"), u_dst_4) @[Microcode.scala 93:17]
                                                        when _u_T_182 : @[Microcode.scala 93:17]
                                                          u.C <= mcBus.memReadData @[Microcode.scala 95:25]
                                                        else :
                                                          node _u_T_183 = eq(UInt<2>("h2"), u_dst_4) @[Microcode.scala 93:17]
                                                          when _u_T_183 : @[Microcode.scala 93:17]
                                                            u.D <= mcBus.memReadData @[Microcode.scala 96:25]
                                                          else :
                                                            node _u_T_184 = eq(UInt<2>("h3"), u_dst_4) @[Microcode.scala 93:17]
                                                            when _u_T_184 : @[Microcode.scala 93:17]
                                                              u.E <= mcBus.memReadData @[Microcode.scala 97:25]
                                                            else :
                                                              node _u_T_185 = eq(UInt<3>("h4"), u_dst_4) @[Microcode.scala 93:17]
                                                              when _u_T_185 : @[Microcode.scala 93:17]
                                                                u.H <= mcBus.memReadData @[Microcode.scala 98:25]
                                                              else :
                                                                node _u_T_186 = eq(UInt<3>("h5"), u_dst_4) @[Microcode.scala 93:17]
                                                                when _u_T_186 : @[Microcode.scala 93:17]
                                                                  u.L <= mcBus.memReadData @[Microcode.scala 99:25]
                                                                else :
                                                                  node _u_T_187 = eq(UInt<3>("h7"), u_dst_4) @[Microcode.scala 93:17]
                                                                  when _u_T_187 : @[Microcode.scala 93:17]
                                                                    u.A <= mcBus.memReadData @[Microcode.scala 100:25]
                                                      node _u_T_188 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 608:19]
                                                      when _u_T_188 : @[Microcode.scala 608:28]
                                                        u.done <= UInt<1>("h1") @[Microcode.scala 608:39]
                                                    else :
                                                      node _u_T_189 = eq(IR, UInt<8>("h86")) @[Microcode.scala 613:19]
                                                      when _u_T_189 : @[Microcode.scala 613:32]
                                                        node _u_T_190 = eq(tcycle, UInt<1>("h0")) @[Microcode.scala 614:19]
                                                        node _u_T_191 = eq(tcycle, UInt<1>("h1")) @[Microcode.scala 614:37]
                                                        node _u_T_192 = or(_u_T_190, _u_T_191) @[Microcode.scala 614:27]
                                                        node _u_T_193 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 614:55]
                                                        node _u_T_194 = or(_u_T_192, _u_T_193) @[Microcode.scala 614:45]
                                                        node _u_T_195 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 614:73]
                                                        node _u_T_196 = or(_u_T_194, _u_T_195) @[Microcode.scala 614:63]
                                                        when _u_T_196 : @[Microcode.scala 614:82]
                                                          node _u_mcBus_memAddr_T_4 = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
                                                          mcBus.memAddr <= _u_mcBus_memAddr_T_4 @[Microcode.scala 615:20]
                                                          mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 616:20]
                                                        node _u_T_197 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 618:19]
                                                        when _u_T_197 : @[Microcode.scala 618:28]
                                                          u_alu.io.op <= UInt<4>("h0") @[Microcode.scala 619:19]
                                                          u_alu.io.a <= A_sampled @[Microcode.scala 620:19]
                                                          u_alu.io.b <= mcBus.memReadData @[Microcode.scala 621:19]
                                                          u.A <= u_alu.io.out @[Microcode.scala 622:19]
                                                          node u_out_F_lo_5 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                          node u_out_F_hi_hi_5 = cat(u_alu.io.flagZ, UInt<1>("h0")) @[Cat.scala 33:92]
                                                          node u_out_F_hi_5 = cat(u_out_F_hi_hi_5, u_alu.io.flagH) @[Cat.scala 33:92]
                                                          node _u_out_F_T_5 = cat(u_out_F_hi_5, u_out_F_lo_5) @[Cat.scala 33:92]
                                                          u.F <= _u_out_F_T_5 @[Microcode.scala 105:13]
                                                          u.done <= UInt<1>("h1") @[Microcode.scala 624:18]
                                                      else :
                                                        node _u_T_198 = eq(IR, UInt<8>("hae")) @[Microcode.scala 630:19]
                                                        when _u_T_198 : @[Microcode.scala 630:32]
                                                          node _u_T_199 = eq(tcycle, UInt<1>("h0")) @[Microcode.scala 632:19]
                                                          node _u_T_200 = eq(tcycle, UInt<1>("h1")) @[Microcode.scala 632:37]
                                                          node _u_T_201 = or(_u_T_199, _u_T_200) @[Microcode.scala 632:27]
                                                          node _u_T_202 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 632:55]
                                                          node _u_T_203 = or(_u_T_201, _u_T_202) @[Microcode.scala 632:45]
                                                          node _u_T_204 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 632:73]
                                                          node _u_T_205 = or(_u_T_203, _u_T_204) @[Microcode.scala 632:63]
                                                          when _u_T_205 : @[Microcode.scala 632:82]
                                                            node _u_mcBus_memAddr_T_5 = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
                                                            mcBus.memAddr <= _u_mcBus_memAddr_T_5 @[Microcode.scala 633:20]
                                                            mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 634:20]
                                                          node _u_T_206 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 637:19]
                                                          when _u_T_206 : @[Microcode.scala 637:28]
                                                            u_alu.io.op <= UInt<4>("h6") @[Microcode.scala 638:19]
                                                            u_alu.io.a <= A_sampled @[Microcode.scala 639:19]
                                                            u_alu.io.b <= mcBus.memReadData @[Microcode.scala 640:19]
                                                            u.A <= u_alu.io.out @[Microcode.scala 642:15]
                                                            node u_out_F_lo_6 = cat(UInt<1>("h0"), UInt<4>("h0")) @[Cat.scala 33:92]
                                                            node u_out_F_hi_hi_6 = cat(u_alu.io.flagZ, UInt<1>("h0")) @[Cat.scala 33:92]
                                                            node u_out_F_hi_6 = cat(u_out_F_hi_hi_6, UInt<1>("h0")) @[Cat.scala 33:92]
                                                            node _u_out_F_T_6 = cat(u_out_F_hi_6, u_out_F_lo_6) @[Cat.scala 33:92]
                                                            u.F <= _u_out_F_T_6 @[Microcode.scala 105:13]
                                                            u.done <= UInt<1>("h1") @[Microcode.scala 650:18]
                                                        else :
                                                          node _u_T_207 = geq(IR, UInt<8>("h80")) @[Microcode.scala 657:20]
                                                          node _u_T_208 = leq(IR, UInt<8>("h85")) @[Microcode.scala 657:37]
                                                          node _u_T_209 = and(_u_T_207, _u_T_208) @[Microcode.scala 657:31]
                                                          node _u_T_210 = eq(IR, UInt<8>("h87")) @[Microcode.scala 657:55]
                                                          node _u_T_211 = or(_u_T_209, _u_T_210) @[Microcode.scala 657:49]
                                                          when _u_T_211 : @[Microcode.scala 657:68]
                                                            node _u_src_T = and(IR, UInt<3>("h7")) @[Microcode.scala 658:28]
                                                            node _u_src_T_1 = eq(UInt<1>("h0"), _u_src_T) @[Mux.scala 81:61]
                                                            node _u_src_T_2 = mux(_u_src_T_1, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                                                            node _u_src_T_3 = eq(UInt<1>("h1"), _u_src_T) @[Mux.scala 81:61]
                                                            node _u_src_T_4 = mux(_u_src_T_3, C_sampled, _u_src_T_2) @[Mux.scala 81:58]
                                                            node _u_src_T_5 = eq(UInt<2>("h2"), _u_src_T) @[Mux.scala 81:61]
                                                            node _u_src_T_6 = mux(_u_src_T_5, D_sampled, _u_src_T_4) @[Mux.scala 81:58]
                                                            node _u_src_T_7 = eq(UInt<2>("h3"), _u_src_T) @[Mux.scala 81:61]
                                                            node _u_src_T_8 = mux(_u_src_T_7, E_sampled, _u_src_T_6) @[Mux.scala 81:58]
                                                            node _u_src_T_9 = eq(UInt<3>("h4"), _u_src_T) @[Mux.scala 81:61]
                                                            node _u_src_T_10 = mux(_u_src_T_9, H_sampled, _u_src_T_8) @[Mux.scala 81:58]
                                                            node _u_src_T_11 = eq(UInt<3>("h5"), _u_src_T) @[Mux.scala 81:61]
                                                            node _u_src_T_12 = mux(_u_src_T_11, L_sampled, _u_src_T_10) @[Mux.scala 81:58]
                                                            node _u_src_T_13 = eq(UInt<3>("h7"), _u_src_T) @[Mux.scala 81:61]
                                                            node u_src_2 = mux(_u_src_T_13, A_sampled, _u_src_T_12) @[Mux.scala 81:58]
                                                            u_alu.io.op <= UInt<4>("h0") @[Microcode.scala 659:17]
                                                            u_alu.io.a <= A_sampled @[Microcode.scala 660:17]
                                                            u_alu.io.b <= u_src_2 @[Microcode.scala 661:17]
                                                            u.A <= u_alu.io.out @[Microcode.scala 662:17]
                                                            node u_out_F_lo_7 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                            node u_out_F_hi_hi_7 = cat(u_alu.io.flagZ, UInt<1>("h0")) @[Cat.scala 33:92]
                                                            node u_out_F_hi_7 = cat(u_out_F_hi_hi_7, u_alu.io.flagH) @[Cat.scala 33:92]
                                                            node _u_out_F_T_7 = cat(u_out_F_hi_7, u_out_F_lo_7) @[Cat.scala 33:92]
                                                            u.F <= _u_out_F_T_7 @[Microcode.scala 105:13]
                                                            node _u_T_212 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 669:19]
                                                            when _u_T_212 : @[Microcode.scala 669:28]
                                                              u.done <= UInt<1>("h1") @[Microcode.scala 669:39]
                                                          else :
                                                            node _u_T_213 = geq(IR, UInt<8>("h88")) @[Microcode.scala 674:19]
                                                            node _u_T_214 = leq(IR, UInt<8>("h8f")) @[Microcode.scala 674:36]
                                                            node _u_T_215 = and(_u_T_213, _u_T_214) @[Microcode.scala 674:30]
                                                            when _u_T_215 : @[Microcode.scala 674:48]
                                                              node _u_src_T_14 = and(IR, UInt<3>("h7")) @[Microcode.scala 675:28]
                                                              node _u_src_T_15 = eq(UInt<1>("h0"), _u_src_T_14) @[Mux.scala 81:61]
                                                              node _u_src_T_16 = mux(_u_src_T_15, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                                                              node _u_src_T_17 = eq(UInt<1>("h1"), _u_src_T_14) @[Mux.scala 81:61]
                                                              node _u_src_T_18 = mux(_u_src_T_17, C_sampled, _u_src_T_16) @[Mux.scala 81:58]
                                                              node _u_src_T_19 = eq(UInt<2>("h2"), _u_src_T_14) @[Mux.scala 81:61]
                                                              node _u_src_T_20 = mux(_u_src_T_19, D_sampled, _u_src_T_18) @[Mux.scala 81:58]
                                                              node _u_src_T_21 = eq(UInt<2>("h3"), _u_src_T_14) @[Mux.scala 81:61]
                                                              node _u_src_T_22 = mux(_u_src_T_21, E_sampled, _u_src_T_20) @[Mux.scala 81:58]
                                                              node _u_src_T_23 = eq(UInt<3>("h4"), _u_src_T_14) @[Mux.scala 81:61]
                                                              node _u_src_T_24 = mux(_u_src_T_23, H_sampled, _u_src_T_22) @[Mux.scala 81:58]
                                                              node _u_src_T_25 = eq(UInt<3>("h5"), _u_src_T_14) @[Mux.scala 81:61]
                                                              node _u_src_T_26 = mux(_u_src_T_25, L_sampled, _u_src_T_24) @[Mux.scala 81:58]
                                                              node _u_src_T_27 = eq(UInt<3>("h7"), _u_src_T_14) @[Mux.scala 81:61]
                                                              node u_src_3 = mux(_u_src_T_27, A_sampled, _u_src_T_26) @[Mux.scala 81:58]
                                                              u_alu.io.op <= UInt<4>("h1") @[Microcode.scala 676:17]
                                                              u_alu.io.a <= A_sampled @[Microcode.scala 677:17]
                                                              u_alu.io.b <= u_src_3 @[Microcode.scala 678:17]
                                                              u.A <= u_alu.io.out @[Microcode.scala 679:17]
                                                              node u_out_F_lo_8 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                              node u_out_F_hi_hi_8 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                              node u_out_F_hi_8 = cat(u_out_F_hi_hi_8, u_alu.io.flagH) @[Cat.scala 33:92]
                                                              node _u_out_F_T_8 = cat(u_out_F_hi_8, u_out_F_lo_8) @[Cat.scala 33:92]
                                                              u.F <= _u_out_F_T_8 @[Microcode.scala 105:13]
                                                              node _u_T_216 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 681:19]
                                                              when _u_T_216 : @[Microcode.scala 681:28]
                                                                u.done <= UInt<1>("h1") @[Microcode.scala 681:39]
                                                            else :
                                                              node _u_T_217 = geq(IR, UInt<8>("h90")) @[Microcode.scala 686:19]
                                                              node _u_T_218 = leq(IR, UInt<8>("h97")) @[Microcode.scala 686:36]
                                                              node _u_T_219 = and(_u_T_217, _u_T_218) @[Microcode.scala 686:30]
                                                              when _u_T_219 : @[Microcode.scala 686:48]
                                                                node _u_src_T_28 = and(IR, UInt<3>("h7")) @[Microcode.scala 687:28]
                                                                node _u_src_T_29 = eq(UInt<1>("h0"), _u_src_T_28) @[Mux.scala 81:61]
                                                                node _u_src_T_30 = mux(_u_src_T_29, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                                                                node _u_src_T_31 = eq(UInt<1>("h1"), _u_src_T_28) @[Mux.scala 81:61]
                                                                node _u_src_T_32 = mux(_u_src_T_31, C_sampled, _u_src_T_30) @[Mux.scala 81:58]
                                                                node _u_src_T_33 = eq(UInt<2>("h2"), _u_src_T_28) @[Mux.scala 81:61]
                                                                node _u_src_T_34 = mux(_u_src_T_33, D_sampled, _u_src_T_32) @[Mux.scala 81:58]
                                                                node _u_src_T_35 = eq(UInt<2>("h3"), _u_src_T_28) @[Mux.scala 81:61]
                                                                node _u_src_T_36 = mux(_u_src_T_35, E_sampled, _u_src_T_34) @[Mux.scala 81:58]
                                                                node _u_src_T_37 = eq(UInt<3>("h4"), _u_src_T_28) @[Mux.scala 81:61]
                                                                node _u_src_T_38 = mux(_u_src_T_37, H_sampled, _u_src_T_36) @[Mux.scala 81:58]
                                                                node _u_src_T_39 = eq(UInt<3>("h5"), _u_src_T_28) @[Mux.scala 81:61]
                                                                node _u_src_T_40 = mux(_u_src_T_39, L_sampled, _u_src_T_38) @[Mux.scala 81:58]
                                                                node _u_src_T_41 = eq(UInt<3>("h7"), _u_src_T_28) @[Mux.scala 81:61]
                                                                node u_src_4 = mux(_u_src_T_41, A_sampled, _u_src_T_40) @[Mux.scala 81:58]
                                                                u_alu.io.op <= UInt<4>("h2") @[Microcode.scala 688:17]
                                                                u_alu.io.a <= A_sampled @[Microcode.scala 689:17]
                                                                u_alu.io.b <= u_src_4 @[Microcode.scala 690:17]
                                                                u.A <= u_alu.io.out @[Microcode.scala 691:17]
                                                                node u_out_F_lo_9 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                node u_out_F_hi_hi_9 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                node u_out_F_hi_9 = cat(u_out_F_hi_hi_9, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                node _u_out_F_T_9 = cat(u_out_F_hi_9, u_out_F_lo_9) @[Cat.scala 33:92]
                                                                u.F <= _u_out_F_T_9 @[Microcode.scala 105:13]
                                                                node _u_T_220 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 693:19]
                                                                when _u_T_220 : @[Microcode.scala 693:28]
                                                                  u.done <= UInt<1>("h1") @[Microcode.scala 693:39]
                                                              else :
                                                                node _u_T_221 = geq(IR, UInt<8>("h98")) @[Microcode.scala 698:19]
                                                                node _u_T_222 = leq(IR, UInt<8>("h9f")) @[Microcode.scala 698:36]
                                                                node _u_T_223 = and(_u_T_221, _u_T_222) @[Microcode.scala 698:30]
                                                                when _u_T_223 : @[Microcode.scala 698:48]
                                                                  node _u_src_T_42 = and(IR, UInt<3>("h7")) @[Microcode.scala 699:28]
                                                                  node _u_src_T_43 = eq(UInt<1>("h0"), _u_src_T_42) @[Mux.scala 81:61]
                                                                  node _u_src_T_44 = mux(_u_src_T_43, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                                                                  node _u_src_T_45 = eq(UInt<1>("h1"), _u_src_T_42) @[Mux.scala 81:61]
                                                                  node _u_src_T_46 = mux(_u_src_T_45, C_sampled, _u_src_T_44) @[Mux.scala 81:58]
                                                                  node _u_src_T_47 = eq(UInt<2>("h2"), _u_src_T_42) @[Mux.scala 81:61]
                                                                  node _u_src_T_48 = mux(_u_src_T_47, D_sampled, _u_src_T_46) @[Mux.scala 81:58]
                                                                  node _u_src_T_49 = eq(UInt<2>("h3"), _u_src_T_42) @[Mux.scala 81:61]
                                                                  node _u_src_T_50 = mux(_u_src_T_49, E_sampled, _u_src_T_48) @[Mux.scala 81:58]
                                                                  node _u_src_T_51 = eq(UInt<3>("h4"), _u_src_T_42) @[Mux.scala 81:61]
                                                                  node _u_src_T_52 = mux(_u_src_T_51, H_sampled, _u_src_T_50) @[Mux.scala 81:58]
                                                                  node _u_src_T_53 = eq(UInt<3>("h5"), _u_src_T_42) @[Mux.scala 81:61]
                                                                  node _u_src_T_54 = mux(_u_src_T_53, L_sampled, _u_src_T_52) @[Mux.scala 81:58]
                                                                  node _u_src_T_55 = eq(UInt<3>("h7"), _u_src_T_42) @[Mux.scala 81:61]
                                                                  node u_src_5 = mux(_u_src_T_55, A_sampled, _u_src_T_54) @[Mux.scala 81:58]
                                                                  u_alu.io.op <= UInt<4>("h3") @[Microcode.scala 700:17]
                                                                  u_alu.io.a <= A_sampled @[Microcode.scala 701:17]
                                                                  u_alu.io.b <= u_src_5 @[Microcode.scala 702:17]
                                                                  u.A <= u_alu.io.out @[Microcode.scala 703:17]
                                                                  node u_out_F_lo_10 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                  node u_out_F_hi_hi_10 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                  node u_out_F_hi_10 = cat(u_out_F_hi_hi_10, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                  node _u_out_F_T_10 = cat(u_out_F_hi_10, u_out_F_lo_10) @[Cat.scala 33:92]
                                                                  u.F <= _u_out_F_T_10 @[Microcode.scala 105:13]
                                                                  node _u_T_224 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 705:19]
                                                                  when _u_T_224 : @[Microcode.scala 705:28]
                                                                    u.done <= UInt<1>("h1") @[Microcode.scala 705:39]
                                                                else :
                                                                  node _u_T_225 = geq(IR, UInt<8>("ha0")) @[Microcode.scala 710:19]
                                                                  node _u_T_226 = leq(IR, UInt<8>("ha7")) @[Microcode.scala 710:36]
                                                                  node _u_T_227 = and(_u_T_225, _u_T_226) @[Microcode.scala 710:30]
                                                                  when _u_T_227 : @[Microcode.scala 710:48]
                                                                    node _u_src_T_56 = and(IR, UInt<3>("h7")) @[Microcode.scala 711:28]
                                                                    node _u_src_T_57 = eq(UInt<1>("h0"), _u_src_T_56) @[Mux.scala 81:61]
                                                                    node _u_src_T_58 = mux(_u_src_T_57, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                                                                    node _u_src_T_59 = eq(UInt<1>("h1"), _u_src_T_56) @[Mux.scala 81:61]
                                                                    node _u_src_T_60 = mux(_u_src_T_59, C_sampled, _u_src_T_58) @[Mux.scala 81:58]
                                                                    node _u_src_T_61 = eq(UInt<2>("h2"), _u_src_T_56) @[Mux.scala 81:61]
                                                                    node _u_src_T_62 = mux(_u_src_T_61, D_sampled, _u_src_T_60) @[Mux.scala 81:58]
                                                                    node _u_src_T_63 = eq(UInt<2>("h3"), _u_src_T_56) @[Mux.scala 81:61]
                                                                    node _u_src_T_64 = mux(_u_src_T_63, E_sampled, _u_src_T_62) @[Mux.scala 81:58]
                                                                    node _u_src_T_65 = eq(UInt<3>("h4"), _u_src_T_56) @[Mux.scala 81:61]
                                                                    node _u_src_T_66 = mux(_u_src_T_65, H_sampled, _u_src_T_64) @[Mux.scala 81:58]
                                                                    node _u_src_T_67 = eq(UInt<3>("h5"), _u_src_T_56) @[Mux.scala 81:61]
                                                                    node _u_src_T_68 = mux(_u_src_T_67, L_sampled, _u_src_T_66) @[Mux.scala 81:58]
                                                                    node _u_src_T_69 = eq(UInt<3>("h7"), _u_src_T_56) @[Mux.scala 81:61]
                                                                    node u_src_6 = mux(_u_src_T_69, A_sampled, _u_src_T_68) @[Mux.scala 81:58]
                                                                    u_alu.io.op <= UInt<4>("h4") @[Microcode.scala 712:17]
                                                                    u_alu.io.a <= A_sampled @[Microcode.scala 713:17]
                                                                    u_alu.io.b <= u_src_6 @[Microcode.scala 714:17]
                                                                    u.A <= u_alu.io.out @[Microcode.scala 715:17]
                                                                    node u_out_F_lo_11 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                    node u_out_F_hi_hi_11 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                    node u_out_F_hi_11 = cat(u_out_F_hi_hi_11, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                    node _u_out_F_T_11 = cat(u_out_F_hi_11, u_out_F_lo_11) @[Cat.scala 33:92]
                                                                    u.F <= _u_out_F_T_11 @[Microcode.scala 105:13]
                                                                    node _u_T_228 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 717:19]
                                                                    when _u_T_228 : @[Microcode.scala 717:28]
                                                                      u.done <= UInt<1>("h1") @[Microcode.scala 717:39]
                                                                  else :
                                                                    node _u_T_229 = geq(IR, UInt<8>("ha8")) @[Microcode.scala 722:19]
                                                                    node _u_T_230 = leq(IR, UInt<8>("haf")) @[Microcode.scala 722:36]
                                                                    node _u_T_231 = and(_u_T_229, _u_T_230) @[Microcode.scala 722:30]
                                                                    when _u_T_231 : @[Microcode.scala 722:48]
                                                                      node _u_src_T_70 = and(IR, UInt<3>("h7")) @[Microcode.scala 723:28]
                                                                      node _u_src_T_71 = eq(UInt<1>("h0"), _u_src_T_70) @[Mux.scala 81:61]
                                                                      node _u_src_T_72 = mux(_u_src_T_71, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                                                                      node _u_src_T_73 = eq(UInt<1>("h1"), _u_src_T_70) @[Mux.scala 81:61]
                                                                      node _u_src_T_74 = mux(_u_src_T_73, C_sampled, _u_src_T_72) @[Mux.scala 81:58]
                                                                      node _u_src_T_75 = eq(UInt<2>("h2"), _u_src_T_70) @[Mux.scala 81:61]
                                                                      node _u_src_T_76 = mux(_u_src_T_75, D_sampled, _u_src_T_74) @[Mux.scala 81:58]
                                                                      node _u_src_T_77 = eq(UInt<2>("h3"), _u_src_T_70) @[Mux.scala 81:61]
                                                                      node _u_src_T_78 = mux(_u_src_T_77, E_sampled, _u_src_T_76) @[Mux.scala 81:58]
                                                                      node _u_src_T_79 = eq(UInt<3>("h4"), _u_src_T_70) @[Mux.scala 81:61]
                                                                      node _u_src_T_80 = mux(_u_src_T_79, H_sampled, _u_src_T_78) @[Mux.scala 81:58]
                                                                      node _u_src_T_81 = eq(UInt<3>("h5"), _u_src_T_70) @[Mux.scala 81:61]
                                                                      node _u_src_T_82 = mux(_u_src_T_81, L_sampled, _u_src_T_80) @[Mux.scala 81:58]
                                                                      node _u_src_T_83 = eq(UInt<3>("h7"), _u_src_T_70) @[Mux.scala 81:61]
                                                                      node u_src_7 = mux(_u_src_T_83, A_sampled, _u_src_T_82) @[Mux.scala 81:58]
                                                                      u_alu.io.op <= UInt<4>("h6") @[Microcode.scala 724:17]
                                                                      u_alu.io.a <= A_sampled @[Microcode.scala 725:17]
                                                                      u_alu.io.b <= u_src_7 @[Microcode.scala 726:17]
                                                                      u.A <= u_alu.io.out @[Microcode.scala 727:17]
                                                                      node u_out_F_lo_12 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                      node u_out_F_hi_hi_12 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                      node u_out_F_hi_12 = cat(u_out_F_hi_hi_12, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                      node _u_out_F_T_12 = cat(u_out_F_hi_12, u_out_F_lo_12) @[Cat.scala 33:92]
                                                                      u.F <= _u_out_F_T_12 @[Microcode.scala 105:13]
                                                                      node _u_T_232 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 729:19]
                                                                      when _u_T_232 : @[Microcode.scala 729:28]
                                                                        u.done <= UInt<1>("h1") @[Microcode.scala 729:39]
                                                                    else :
                                                                      node _u_T_233 = geq(IR, UInt<8>("hb0")) @[Microcode.scala 734:19]
                                                                      node _u_T_234 = leq(IR, UInt<8>("hb7")) @[Microcode.scala 734:36]
                                                                      node _u_T_235 = and(_u_T_233, _u_T_234) @[Microcode.scala 734:30]
                                                                      when _u_T_235 : @[Microcode.scala 734:48]
                                                                        node _u_src_T_84 = and(IR, UInt<3>("h7")) @[Microcode.scala 735:28]
                                                                        node _u_src_T_85 = eq(UInt<1>("h0"), _u_src_T_84) @[Mux.scala 81:61]
                                                                        node _u_src_T_86 = mux(_u_src_T_85, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                                                                        node _u_src_T_87 = eq(UInt<1>("h1"), _u_src_T_84) @[Mux.scala 81:61]
                                                                        node _u_src_T_88 = mux(_u_src_T_87, C_sampled, _u_src_T_86) @[Mux.scala 81:58]
                                                                        node _u_src_T_89 = eq(UInt<2>("h2"), _u_src_T_84) @[Mux.scala 81:61]
                                                                        node _u_src_T_90 = mux(_u_src_T_89, D_sampled, _u_src_T_88) @[Mux.scala 81:58]
                                                                        node _u_src_T_91 = eq(UInt<2>("h3"), _u_src_T_84) @[Mux.scala 81:61]
                                                                        node _u_src_T_92 = mux(_u_src_T_91, E_sampled, _u_src_T_90) @[Mux.scala 81:58]
                                                                        node _u_src_T_93 = eq(UInt<3>("h4"), _u_src_T_84) @[Mux.scala 81:61]
                                                                        node _u_src_T_94 = mux(_u_src_T_93, H_sampled, _u_src_T_92) @[Mux.scala 81:58]
                                                                        node _u_src_T_95 = eq(UInt<3>("h5"), _u_src_T_84) @[Mux.scala 81:61]
                                                                        node _u_src_T_96 = mux(_u_src_T_95, L_sampled, _u_src_T_94) @[Mux.scala 81:58]
                                                                        node _u_src_T_97 = eq(UInt<3>("h7"), _u_src_T_84) @[Mux.scala 81:61]
                                                                        node u_src_8 = mux(_u_src_T_97, A_sampled, _u_src_T_96) @[Mux.scala 81:58]
                                                                        u_alu.io.op <= UInt<4>("h5") @[Microcode.scala 736:17]
                                                                        u_alu.io.a <= A_sampled @[Microcode.scala 737:17]
                                                                        u_alu.io.b <= u_src_8 @[Microcode.scala 738:17]
                                                                        u.A <= u_alu.io.out @[Microcode.scala 739:17]
                                                                        node u_out_F_lo_13 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                        node u_out_F_hi_hi_13 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                        node u_out_F_hi_13 = cat(u_out_F_hi_hi_13, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                        node _u_out_F_T_13 = cat(u_out_F_hi_13, u_out_F_lo_13) @[Cat.scala 33:92]
                                                                        u.F <= _u_out_F_T_13 @[Microcode.scala 105:13]
                                                                        node _u_T_236 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 741:19]
                                                                        when _u_T_236 : @[Microcode.scala 741:28]
                                                                          u.done <= UInt<1>("h1") @[Microcode.scala 741:39]
                                                                      else :
                                                                        node _u_T_237 = eq(IR, UInt<8>("hbe")) @[Microcode.scala 746:19]
                                                                        when _u_T_237 : @[Microcode.scala 746:32]
                                                                          node _u_T_238 = eq(tcycle, UInt<1>("h0")) @[Microcode.scala 747:19]
                                                                          node _u_T_239 = eq(tcycle, UInt<1>("h1")) @[Microcode.scala 747:37]
                                                                          node _u_T_240 = or(_u_T_238, _u_T_239) @[Microcode.scala 747:27]
                                                                          node _u_T_241 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 747:55]
                                                                          node _u_T_242 = or(_u_T_240, _u_T_241) @[Microcode.scala 747:45]
                                                                          node _u_T_243 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 747:73]
                                                                          node _u_T_244 = or(_u_T_242, _u_T_243) @[Microcode.scala 747:63]
                                                                          when _u_T_244 : @[Microcode.scala 747:82]
                                                                            node _u_mcBus_memAddr_T_6 = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
                                                                            mcBus.memAddr <= _u_mcBus_memAddr_T_6 @[Microcode.scala 748:20]
                                                                            mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 749:20]
                                                                          node _u_T_245 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 751:19]
                                                                          when _u_T_245 : @[Microcode.scala 751:28]
                                                                            u_alu.io.op <= UInt<4>("h2") @[Microcode.scala 752:19]
                                                                            u_alu.io.a <= A_sampled @[Microcode.scala 753:19]
                                                                            u_alu.io.b <= mcBus.memReadData @[Microcode.scala 754:19]
                                                                            u_alu.io.carryIn <= UInt<1>("h0") @[Microcode.scala 755:24]
                                                                            node u_out_F_lo_14 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                            node u_out_F_hi_hi_14 = cat(u_alu.io.flagZ, UInt<1>("h1")) @[Cat.scala 33:92]
                                                                            node u_out_F_hi_14 = cat(u_out_F_hi_hi_14, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                            node _u_out_F_T_14 = cat(u_out_F_hi_14, u_out_F_lo_14) @[Cat.scala 33:92]
                                                                            u.F <= _u_out_F_T_14 @[Microcode.scala 105:13]
                                                                            u.done <= UInt<1>("h1") @[Microcode.scala 757:18]
                                                                        else :
                                                                          node _u_T_246 = geq(IR, UInt<8>("hb8")) @[Microcode.scala 763:20]
                                                                          node _u_T_247 = leq(IR, UInt<8>("hbd")) @[Microcode.scala 763:37]
                                                                          node _u_T_248 = and(_u_T_246, _u_T_247) @[Microcode.scala 763:31]
                                                                          node _u_T_249 = eq(IR, UInt<8>("hbf")) @[Microcode.scala 763:55]
                                                                          node _u_T_250 = or(_u_T_248, _u_T_249) @[Microcode.scala 763:49]
                                                                          when _u_T_250 : @[Microcode.scala 763:68]
                                                                            node _u_src_T_98 = and(IR, UInt<3>("h7")) @[Microcode.scala 764:28]
                                                                            node _u_src_T_99 = eq(UInt<1>("h0"), _u_src_T_98) @[Mux.scala 81:61]
                                                                            node _u_src_T_100 = mux(_u_src_T_99, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                                                                            node _u_src_T_101 = eq(UInt<1>("h1"), _u_src_T_98) @[Mux.scala 81:61]
                                                                            node _u_src_T_102 = mux(_u_src_T_101, C_sampled, _u_src_T_100) @[Mux.scala 81:58]
                                                                            node _u_src_T_103 = eq(UInt<2>("h2"), _u_src_T_98) @[Mux.scala 81:61]
                                                                            node _u_src_T_104 = mux(_u_src_T_103, D_sampled, _u_src_T_102) @[Mux.scala 81:58]
                                                                            node _u_src_T_105 = eq(UInt<2>("h3"), _u_src_T_98) @[Mux.scala 81:61]
                                                                            node _u_src_T_106 = mux(_u_src_T_105, E_sampled, _u_src_T_104) @[Mux.scala 81:58]
                                                                            node _u_src_T_107 = eq(UInt<3>("h4"), _u_src_T_98) @[Mux.scala 81:61]
                                                                            node _u_src_T_108 = mux(_u_src_T_107, H_sampled, _u_src_T_106) @[Mux.scala 81:58]
                                                                            node _u_src_T_109 = eq(UInt<3>("h5"), _u_src_T_98) @[Mux.scala 81:61]
                                                                            node _u_src_T_110 = mux(_u_src_T_109, L_sampled, _u_src_T_108) @[Mux.scala 81:58]
                                                                            node _u_src_T_111 = eq(UInt<3>("h7"), _u_src_T_98) @[Mux.scala 81:61]
                                                                            node u_src_9 = mux(_u_src_T_111, A_sampled, _u_src_T_110) @[Mux.scala 81:58]
                                                                            u_alu.io.op <= UInt<4>("h2") @[Microcode.scala 765:17]
                                                                            u_alu.io.a <= A_sampled @[Microcode.scala 766:17]
                                                                            u_alu.io.b <= u_src_9 @[Microcode.scala 767:17]
                                                                            u_alu.io.carryIn <= UInt<1>("h0") @[Microcode.scala 768:22]
                                                                            node u_out_F_lo_15 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                            node u_out_F_hi_hi_15 = cat(u_alu.io.flagZ, UInt<1>("h1")) @[Cat.scala 33:92]
                                                                            node u_out_F_hi_15 = cat(u_out_F_hi_hi_15, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                            node _u_out_F_T_15 = cat(u_out_F_hi_15, u_out_F_lo_15) @[Cat.scala 33:92]
                                                                            u.F <= _u_out_F_T_15 @[Microcode.scala 105:13]
                                                                            node _u_T_251 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 775:19]
                                                                            when _u_T_251 : @[Microcode.scala 775:28]
                                                                              u.done <= UInt<1>("h1") @[Microcode.scala 775:39]
                                                                          else :
                                                                            node _u_T_252 = eq(IR, UInt<8>("hc6")) @[Microcode.scala 780:19]
                                                                            when _u_T_252 : @[Microcode.scala 780:32]
                                                                              u_alu.io.op <= UInt<4>("h0") @[Microcode.scala 781:17]
                                                                              u_alu.io.a <= A_sampled @[Microcode.scala 782:17]
                                                                              u_alu.io.b <= imm8 @[Microcode.scala 783:17]
                                                                              u.A <= u_alu.io.out @[Microcode.scala 784:17]
                                                                              node u_out_F_lo_16 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                              node u_out_F_hi_hi_16 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                              node u_out_F_hi_16 = cat(u_out_F_hi_hi_16, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                              node _u_out_F_T_16 = cat(u_out_F_hi_16, u_out_F_lo_16) @[Cat.scala 33:92]
                                                                              u.F <= _u_out_F_T_16 @[Microcode.scala 105:13]
                                                                              node _u_T_253 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 786:19]
                                                                              when _u_T_253 : @[Microcode.scala 786:28]
                                                                                u.done <= UInt<1>("h1") @[Microcode.scala 786:39]
                                                                            else :
                                                                              node _u_T_254 = eq(IR, UInt<8>("hce")) @[Microcode.scala 790:19]
                                                                              when _u_T_254 : @[Microcode.scala 790:32]
                                                                                u_alu.io.op <= UInt<4>("h1") @[Microcode.scala 791:17]
                                                                                u_alu.io.a <= A_sampled @[Microcode.scala 792:17]
                                                                                u_alu.io.b <= imm8 @[Microcode.scala 793:17]
                                                                                u.A <= u_alu.io.out @[Microcode.scala 795:13]
                                                                                node u_out_F_lo_17 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                node u_out_F_hi_hi_17 = cat(u_alu.io.flagZ, UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                node u_out_F_hi_17 = cat(u_out_F_hi_hi_17, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                                node _u_out_F_T_17 = cat(u_out_F_hi_17, u_out_F_lo_17) @[Cat.scala 33:92]
                                                                                u.F <= _u_out_F_T_17 @[Microcode.scala 105:13]
                                                                                node _u_T_255 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 803:19]
                                                                                when _u_T_255 : @[Microcode.scala 803:28]
                                                                                  u.done <= UInt<1>("h1") @[Microcode.scala 803:39]
                                                                              else :
                                                                                node _u_T_256 = eq(IR, UInt<8>("hd6")) @[Microcode.scala 808:19]
                                                                                when _u_T_256 : @[Microcode.scala 808:32]
                                                                                  u_alu.io.op <= UInt<4>("h2") @[Microcode.scala 809:17]
                                                                                  u_alu.io.a <= A_sampled @[Microcode.scala 810:17]
                                                                                  u_alu.io.b <= imm8 @[Microcode.scala 811:17]
                                                                                  u.A <= u_alu.io.out @[Microcode.scala 812:17]
                                                                                  node u_out_F_lo_18 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                  node u_out_F_hi_hi_18 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                                  node u_out_F_hi_18 = cat(u_out_F_hi_hi_18, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                                  node _u_out_F_T_18 = cat(u_out_F_hi_18, u_out_F_lo_18) @[Cat.scala 33:92]
                                                                                  u.F <= _u_out_F_T_18 @[Microcode.scala 105:13]
                                                                                  node _u_T_257 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 814:19]
                                                                                  when _u_T_257 : @[Microcode.scala 814:28]
                                                                                    u.done <= UInt<1>("h1") @[Microcode.scala 814:39]
                                                                                else :
                                                                                  node _u_T_258 = eq(IR, UInt<8>("he6")) @[Microcode.scala 819:19]
                                                                                  when _u_T_258 : @[Microcode.scala 819:32]
                                                                                    u_alu.io.op <= UInt<4>("h4") @[Microcode.scala 820:17]
                                                                                    u_alu.io.a <= A_sampled @[Microcode.scala 821:17]
                                                                                    u_alu.io.b <= imm8 @[Microcode.scala 822:17]
                                                                                    u.A <= u_alu.io.out @[Microcode.scala 823:17]
                                                                                    node u_out_F_lo_19 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                    node u_out_F_hi_hi_19 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                                    node u_out_F_hi_19 = cat(u_out_F_hi_hi_19, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                                    node _u_out_F_T_19 = cat(u_out_F_hi_19, u_out_F_lo_19) @[Cat.scala 33:92]
                                                                                    u.F <= _u_out_F_T_19 @[Microcode.scala 105:13]
                                                                                    node _u_T_259 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 825:19]
                                                                                    when _u_T_259 : @[Microcode.scala 825:28]
                                                                                      u.done <= UInt<1>("h1") @[Microcode.scala 825:39]
                                                                                  else :
                                                                                    node _u_T_260 = eq(IR, UInt<8>("hee")) @[Microcode.scala 830:19]
                                                                                    when _u_T_260 : @[Microcode.scala 830:32]
                                                                                      u_alu.io.op <= UInt<4>("h6") @[Microcode.scala 831:17]
                                                                                      u_alu.io.a <= A_sampled @[Microcode.scala 832:17]
                                                                                      u_alu.io.b <= imm8 @[Microcode.scala 833:17]
                                                                                      u.A <= u_alu.io.out @[Microcode.scala 834:17]
                                                                                      node u_out_F_lo_20 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                      node u_out_F_hi_hi_20 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                                      node u_out_F_hi_20 = cat(u_out_F_hi_hi_20, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                                      node _u_out_F_T_20 = cat(u_out_F_hi_20, u_out_F_lo_20) @[Cat.scala 33:92]
                                                                                      u.F <= _u_out_F_T_20 @[Microcode.scala 105:13]
                                                                                      node _u_T_261 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 836:19]
                                                                                      when _u_T_261 : @[Microcode.scala 836:28]
                                                                                        u.done <= UInt<1>("h1") @[Microcode.scala 836:39]
                                                                                    else :
                                                                                      node _u_T_262 = eq(IR, UInt<8>("hf6")) @[Microcode.scala 841:19]
                                                                                      when _u_T_262 : @[Microcode.scala 841:32]
                                                                                        u_alu.io.op <= UInt<4>("h5") @[Microcode.scala 842:17]
                                                                                        u_alu.io.a <= A_sampled @[Microcode.scala 843:17]
                                                                                        u_alu.io.b <= imm8 @[Microcode.scala 844:17]
                                                                                        u.A <= u_alu.io.out @[Microcode.scala 845:17]
                                                                                        node u_out_F_lo_21 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                        node u_out_F_hi_hi_21 = cat(u_alu.io.flagZ, u_alu.io.flagN) @[Cat.scala 33:92]
                                                                                        node u_out_F_hi_21 = cat(u_out_F_hi_hi_21, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                                        node _u_out_F_T_21 = cat(u_out_F_hi_21, u_out_F_lo_21) @[Cat.scala 33:92]
                                                                                        u.F <= _u_out_F_T_21 @[Microcode.scala 105:13]
                                                                                        node _u_T_263 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 847:19]
                                                                                        when _u_T_263 : @[Microcode.scala 847:28]
                                                                                          u.done <= UInt<1>("h1") @[Microcode.scala 847:39]
                                                                                      else :
                                                                                        node _u_T_264 = eq(IR, UInt<8>("hfe")) @[Microcode.scala 852:19]
                                                                                        when _u_T_264 : @[Microcode.scala 852:32]
                                                                                          u_alu.io.op <= UInt<4>("h2") @[Microcode.scala 853:17]
                                                                                          u_alu.io.a <= A_sampled @[Microcode.scala 854:17]
                                                                                          u_alu.io.b <= imm8 @[Microcode.scala 855:17]
                                                                                          u_alu.io.carryIn <= UInt<1>("h0") @[Microcode.scala 856:22]
                                                                                          node u_out_F_lo_22 = cat(u_alu.io.flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                          node u_out_F_hi_hi_22 = cat(u_alu.io.flagZ, UInt<1>("h1")) @[Cat.scala 33:92]
                                                                                          node u_out_F_hi_22 = cat(u_out_F_hi_hi_22, u_alu.io.flagH) @[Cat.scala 33:92]
                                                                                          node _u_out_F_T_22 = cat(u_out_F_hi_22, u_out_F_lo_22) @[Cat.scala 33:92]
                                                                                          u.F <= _u_out_F_T_22 @[Microcode.scala 105:13]
                                                                                          node _u_T_265 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 863:19]
                                                                                          when _u_T_265 : @[Microcode.scala 863:28]
                                                                                            u.done <= UInt<1>("h1") @[Microcode.scala 863:39]
                                                                                        else :
                                                                                          node _u_T_266 = eq(IR, UInt<5>("h18")) @[Microcode.scala 868:19]
                                                                                          when _u_T_266 : @[Microcode.scala 868:32]
                                                                                            node u_off = asSInt(imm8) @[Microcode.scala 869:25]
                                                                                            node _u_T_267 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 870:19]
                                                                                            when _u_T_267 : @[Microcode.scala 870:28]
                                                                                              node _u_out_PC_T = asSInt(PC_sampled) @[Microcode.scala 871:26]
                                                                                              node _u_out_PC_T_1 = add(_u_out_PC_T, u_off) @[Microcode.scala 871:33]
                                                                                              node _u_out_PC_T_2 = tail(_u_out_PC_T_1, 1) @[Microcode.scala 871:33]
                                                                                              node _u_out_PC_T_3 = asSInt(_u_out_PC_T_2) @[Microcode.scala 871:33]
                                                                                              node _u_out_PC_T_4 = asUInt(_u_out_PC_T_3) @[Microcode.scala 871:40]
                                                                                              u.PC <= _u_out_PC_T_4 @[Microcode.scala 871:16]
                                                                                              u.done <= UInt<1>("h1") @[Microcode.scala 872:18]
                                                                                          else :
                                                                                            node _u_T_268 = eq(IR, UInt<5>("h10")) @[Microcode.scala 881:19]
                                                                                            when _u_T_268 : @[Microcode.scala 881:32]
                                                                                              node _u_T_269 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 882:19]
                                                                                              when _u_T_269 : @[Microcode.scala 882:28]
                                                                                                u.done <= UInt<1>("h1") @[Microcode.scala 882:39]
                                                                                            else :
                                                                                              node _u_T_270 = and(IR, UInt<8>("hcf")) @[Microcode.scala 888:20]
                                                                                              node _u_T_271 = eq(_u_T_270, UInt<8>("hc5")) @[Microcode.scala 888:31]
                                                                                              when _u_T_271 : @[Microcode.scala 888:44]
                                                                                                node _u_rr_T_4 = shr(IR, 4) @[Microcode.scala 889:20]
                                                                                                node u_rr_4 = and(_u_rr_T_4, UInt<2>("h3")) @[Microcode.scala 889:26]
                                                                                                node _u_regPair_T = cat(B_sampled, C_sampled) @[Cat.scala 33:92]
                                                                                                node _u_regPair_T_1 = cat(D_sampled, E_sampled) @[Cat.scala 33:92]
                                                                                                node _u_regPair_T_2 = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
                                                                                                node _u_regPair_T_3 = cat(A_sampled, F_sampled) @[Cat.scala 33:92]
                                                                                                node _u_regPair_T_4 = eq(UInt<1>("h0"), u_rr_4) @[Mux.scala 81:61]
                                                                                                node _u_regPair_T_5 = mux(_u_regPair_T_4, _u_regPair_T, UInt<16>("h0")) @[Mux.scala 81:58]
                                                                                                node _u_regPair_T_6 = eq(UInt<1>("h1"), u_rr_4) @[Mux.scala 81:61]
                                                                                                node _u_regPair_T_7 = mux(_u_regPair_T_6, _u_regPair_T_1, _u_regPair_T_5) @[Mux.scala 81:58]
                                                                                                node _u_regPair_T_8 = eq(UInt<2>("h2"), u_rr_4) @[Mux.scala 81:61]
                                                                                                node _u_regPair_T_9 = mux(_u_regPair_T_8, _u_regPair_T_2, _u_regPair_T_7) @[Mux.scala 81:58]
                                                                                                node _u_regPair_T_10 = eq(UInt<2>("h3"), u_rr_4) @[Mux.scala 81:61]
                                                                                                node u_regPair = mux(_u_regPair_T_10, _u_regPair_T_3, _u_regPair_T_9) @[Mux.scala 81:58]
                                                                                                node _u_T_272 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 897:22]
                                                                                                when _u_T_272 : @[Microcode.scala 897:22]
                                                                                                  node _u_sp1_T = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 899:27]
                                                                                                  node u_sp1 = tail(_u_sp1_T, 1) @[Microcode.scala 899:27]
                                                                                                  mcBus.memAddr <= u_sp1 @[Microcode.scala 900:27]
                                                                                                  mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 901:27]
                                                                                                  node _u_mcBus_memWriteData_T_14 = bits(u_regPair, 15, 8) @[Microcode.scala 902:37]
                                                                                                  mcBus.memWriteData <= _u_mcBus_memWriteData_T_14 @[Microcode.scala 902:27]
                                                                                                  u.SP <= u_sp1 @[Microcode.scala 903:18]
                                                                                                  node _u_T_273 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 904:23]
                                                                                                  when _u_T_273 : @[Microcode.scala 904:32]
                                                                                                    u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 905:29]
                                                                                                else :
                                                                                                  node _u_T_274 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 897:22]
                                                                                                  when _u_T_274 : @[Microcode.scala 897:22]
                                                                                                    node _u_sp2_T = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 909:27]
                                                                                                    node u_sp2 = tail(_u_sp2_T, 1) @[Microcode.scala 909:27]
                                                                                                    mcBus.memAddr <= u_sp2 @[Microcode.scala 910:27]
                                                                                                    mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 911:27]
                                                                                                    node _u_mcBus_memWriteData_T_15 = bits(u_regPair, 7, 0) @[Microcode.scala 912:37]
                                                                                                    mcBus.memWriteData <= _u_mcBus_memWriteData_T_15 @[Microcode.scala 912:27]
                                                                                                    u.SP <= u_sp2 @[Microcode.scala 913:18]
                                                                                                    node _u_T_275 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 914:23]
                                                                                                    when _u_T_275 : @[Microcode.scala 914:32]
                                                                                                      u.done <= UInt<1>("h1") @[Microcode.scala 915:22]
                                                                                              else :
                                                                                                node _u_T_276 = and(IR, UInt<8>("hcf")) @[Microcode.scala 925:20]
                                                                                                node _u_T_277 = eq(_u_T_276, UInt<8>("hc1")) @[Microcode.scala 925:31]
                                                                                                when _u_T_277 : @[Microcode.scala 925:44]
                                                                                                  node _u_rr_T_5 = shr(IR, 4) @[Microcode.scala 926:20]
                                                                                                  node u_rr_5 = and(_u_rr_T_5, UInt<2>("h3")) @[Microcode.scala 926:26]
                                                                                                  node _u_T_278 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 928:22]
                                                                                                  when _u_T_278 : @[Microcode.scala 928:22]
                                                                                                    mcBus.memAddr <= SP_sampled @[Microcode.scala 931:22]
                                                                                                    mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 932:22]
                                                                                                    node _u_T_279 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 933:23]
                                                                                                    when _u_T_279 : @[Microcode.scala 933:32]
                                                                                                      u_tmp8 <= mcBus.memReadData @[Microcode.scala 934:18]
                                                                                                      node _u_out_SP_T = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 935:29]
                                                                                                      node _u_out_SP_T_1 = tail(_u_out_SP_T, 1) @[Microcode.scala 935:29]
                                                                                                      u.SP <= _u_out_SP_T_1 @[Microcode.scala 935:20]
                                                                                                      u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 936:29]
                                                                                                  else :
                                                                                                    node _u_T_280 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 928:22]
                                                                                                    when _u_T_280 : @[Microcode.scala 928:22]
                                                                                                      mcBus.memAddr <= SP_sampled @[Microcode.scala 942:22]
                                                                                                      mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 943:22]
                                                                                                      node _u_T_281 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 944:23]
                                                                                                      when _u_T_281 : @[Microcode.scala 944:32]
                                                                                                        node _u_T_282 = eq(UInt<1>("h0"), u_rr_5) @[Microcode.scala 948:24]
                                                                                                        when _u_T_282 : @[Microcode.scala 948:24]
                                                                                                          u.B <= mcBus.memReadData @[Microcode.scala 949:31]
                                                                                                          u.C <= u_tmp8 @[Microcode.scala 949:46]
                                                                                                        else :
                                                                                                          node _u_T_283 = eq(UInt<1>("h1"), u_rr_5) @[Microcode.scala 948:24]
                                                                                                          when _u_T_283 : @[Microcode.scala 948:24]
                                                                                                            u.D <= mcBus.memReadData @[Microcode.scala 950:31]
                                                                                                            u.E <= u_tmp8 @[Microcode.scala 950:46]
                                                                                                          else :
                                                                                                            node _u_T_284 = eq(UInt<2>("h2"), u_rr_5) @[Microcode.scala 948:24]
                                                                                                            when _u_T_284 : @[Microcode.scala 948:24]
                                                                                                              u.H <= mcBus.memReadData @[Microcode.scala 951:31]
                                                                                                              u.L <= u_tmp8 @[Microcode.scala 951:46]
                                                                                                            else :
                                                                                                              node _u_T_285 = eq(UInt<2>("h3"), u_rr_5) @[Microcode.scala 948:24]
                                                                                                              when _u_T_285 : @[Microcode.scala 948:24]
                                                                                                                u.A <= mcBus.memReadData @[Microcode.scala 952:31]
                                                                                                                node _u_out_F_T_23 = and(u_tmp8, UInt<8>("hf0")) @[Microcode.scala 952:54]
                                                                                                                u.F <= _u_out_F_T_23 @[Microcode.scala 952:46]
                                                                                                        node _u_out_SP_T_2 = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 955:29]
                                                                                                        node _u_out_SP_T_3 = tail(_u_out_SP_T_2, 1) @[Microcode.scala 955:29]
                                                                                                        u.SP <= _u_out_SP_T_3 @[Microcode.scala 955:20]
                                                                                                        u.done <= UInt<1>("h1") @[Microcode.scala 956:22]
                                                                                                else :
                                                                                                  node _u_T_286 = eq(IR, UInt<8>("hcd")) @[Microcode.scala 966:19]
                                                                                                  when _u_T_286 : @[Microcode.scala 966:32]
                                                                                                    node _u_T_287 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 967:22]
                                                                                                    when _u_T_287 : @[Microcode.scala 967:22]
                                                                                                      node _u_sp1_T_1 = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 969:27]
                                                                                                      node u_sp1_1 = tail(_u_sp1_T_1, 1) @[Microcode.scala 969:27]
                                                                                                      mcBus.memAddr <= u_sp1_1 @[Microcode.scala 970:27]
                                                                                                      mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 971:27]
                                                                                                      node _u_mcBus_memWriteData_T_16 = bits(PC_sampled, 15, 8) @[Microcode.scala 972:35]
                                                                                                      mcBus.memWriteData <= _u_mcBus_memWriteData_T_16 @[Microcode.scala 972:27]
                                                                                                      u.SP <= u_sp1_1 @[Microcode.scala 973:18]
                                                                                                      node _u_T_288 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 974:23]
                                                                                                      when _u_T_288 : @[Microcode.scala 974:32]
                                                                                                        u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 974:50]
                                                                                                    else :
                                                                                                      node _u_T_289 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 967:22]
                                                                                                      when _u_T_289 : @[Microcode.scala 967:22]
                                                                                                        node _u_sp2_T_1 = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 977:27]
                                                                                                        node u_sp2_1 = tail(_u_sp2_T_1, 1) @[Microcode.scala 977:27]
                                                                                                        mcBus.memAddr <= u_sp2_1 @[Microcode.scala 978:27]
                                                                                                        mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 979:27]
                                                                                                        node _u_mcBus_memWriteData_T_17 = bits(PC_sampled, 7, 0) @[Microcode.scala 980:35]
                                                                                                        mcBus.memWriteData <= _u_mcBus_memWriteData_T_17 @[Microcode.scala 980:27]
                                                                                                        u.SP <= u_sp2_1 @[Microcode.scala 981:18]
                                                                                                        node _u_T_290 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 982:23]
                                                                                                        when _u_T_290 : @[Microcode.scala 982:32]
                                                                                                          u.next_mcycle <= UInt<2>("h2") @[Microcode.scala 982:50]
                                                                                                      else :
                                                                                                        node _u_T_291 = eq(UInt<2>("h2"), mcycle) @[Microcode.scala 967:22]
                                                                                                        when _u_T_291 : @[Microcode.scala 967:22]
                                                                                                          u.PC <= imm16 @[Microcode.scala 985:18]
                                                                                                          node _u_T_292 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 986:23]
                                                                                                          when _u_T_292 : @[Microcode.scala 986:32]
                                                                                                            u.done <= UInt<1>("h1") @[Microcode.scala 986:43]
                                                                                                  else :
                                                                                                    node _u_T_293 = eq(IR, UInt<8>("hc9")) @[Microcode.scala 991:19]
                                                                                                    when _u_T_293 : @[Microcode.scala 991:32]
                                                                                                      node _u_T_294 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 992:22]
                                                                                                      when _u_T_294 : @[Microcode.scala 992:22]
                                                                                                        mcBus.memAddr <= SP_sampled @[Microcode.scala 996:22]
                                                                                                        mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 997:22]
                                                                                                        node _u_T_295 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 998:23]
                                                                                                        when _u_T_295 : @[Microcode.scala 998:32]
                                                                                                          u_tmp8 <= mcBus.memReadData @[Microcode.scala 999:18]
                                                                                                          node _u_out_SP_T_4 = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 1000:29]
                                                                                                          node _u_out_SP_T_5 = tail(_u_out_SP_T_4, 1) @[Microcode.scala 1000:29]
                                                                                                          u.SP <= _u_out_SP_T_5 @[Microcode.scala 1000:20]
                                                                                                          u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 1001:29]
                                                                                                      else :
                                                                                                        node _u_T_296 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 992:22]
                                                                                                        when _u_T_296 : @[Microcode.scala 992:22]
                                                                                                          mcBus.memAddr <= SP_sampled @[Microcode.scala 1007:22]
                                                                                                          mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 1008:22]
                                                                                                          node _u_T_297 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1009:23]
                                                                                                          when _u_T_297 : @[Microcode.scala 1009:32]
                                                                                                            node _u_out_PC_T_5 = cat(mcBus.memReadData, u_tmp8) @[Cat.scala 33:92]
                                                                                                            u.PC <= _u_out_PC_T_5 @[Microcode.scala 1010:20]
                                                                                                            node _u_out_SP_T_6 = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 1011:29]
                                                                                                            node _u_out_SP_T_7 = tail(_u_out_SP_T_6, 1) @[Microcode.scala 1011:29]
                                                                                                            u.SP <= _u_out_SP_T_7 @[Microcode.scala 1011:20]
                                                                                                            u.done <= UInt<1>("h1") @[Microcode.scala 1012:22]
                                                                                                    else :
                                                                                                      node _u_T_298 = eq(IR, UInt<8>("hd9")) @[Microcode.scala 1021:19]
                                                                                                      when _u_T_298 : @[Microcode.scala 1021:32]
                                                                                                        node _u_T_299 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 1022:22]
                                                                                                        when _u_T_299 : @[Microcode.scala 1022:22]
                                                                                                          mcBus.memAddr <= SP_sampled @[Microcode.scala 1026:22]
                                                                                                          mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 1027:22]
                                                                                                          node _u_T_300 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1029:23]
                                                                                                          when _u_T_300 : @[Microcode.scala 1029:32]
                                                                                                            u_tmp8 <= mcBus.memReadData @[Microcode.scala 1030:19]
                                                                                                            node _u_out_SP_T_8 = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 1031:31]
                                                                                                            node _u_out_SP_T_9 = tail(_u_out_SP_T_8, 1) @[Microcode.scala 1031:31]
                                                                                                            u.SP <= _u_out_SP_T_9 @[Microcode.scala 1031:22]
                                                                                                            u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 1032:29]
                                                                                                        else :
                                                                                                          node _u_T_301 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 1022:22]
                                                                                                          when _u_T_301 : @[Microcode.scala 1022:22]
                                                                                                            mcBus.memAddr <= SP_sampled @[Microcode.scala 1038:22]
                                                                                                            mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 1039:22]
                                                                                                            node _u_T_302 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1041:23]
                                                                                                            when _u_T_302 : @[Microcode.scala 1041:32]
                                                                                                              node _u_out_PC_T_6 = cat(mcBus.memReadData, u_tmp8) @[Cat.scala 33:92]
                                                                                                              u.PC <= _u_out_PC_T_6 @[Microcode.scala 1042:21]
                                                                                                              node _u_out_SP_T_10 = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 1043:30]
                                                                                                              node _u_out_SP_T_11 = tail(_u_out_SP_T_10, 1) @[Microcode.scala 1043:30]
                                                                                                              u.SP <= _u_out_SP_T_11 @[Microcode.scala 1043:21]
                                                                                                              u.IME <= UInt<1>("h1") @[Microcode.scala 1044:21]
                                                                                                              u.done <= UInt<1>("h1") @[Microcode.scala 1045:22]
                                                                                                      else :
                                                                                                        node _u_T_303 = and(IR, UInt<8>("hc7")) @[Microcode.scala 1054:20]
                                                                                                        node _u_T_304 = eq(_u_T_303, UInt<8>("hc7")) @[Microcode.scala 1054:31]
                                                                                                        when _u_T_304 : @[Microcode.scala 1054:44]
                                                                                                          node u_vec = and(IR, UInt<6>("h38")) @[Microcode.scala 1055:21]
                                                                                                          node _u_T_305 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 1056:22]
                                                                                                          when _u_T_305 : @[Microcode.scala 1056:22]
                                                                                                            node _u_sp1_T_2 = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 1058:27]
                                                                                                            node u_sp1_2 = tail(_u_sp1_T_2, 1) @[Microcode.scala 1058:27]
                                                                                                            mcBus.memAddr <= u_sp1_2 @[Microcode.scala 1059:27]
                                                                                                            mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 1060:27]
                                                                                                            node _u_mcBus_memWriteData_T_18 = bits(PC_sampled, 15, 8) @[Microcode.scala 1061:35]
                                                                                                            mcBus.memWriteData <= _u_mcBus_memWriteData_T_18 @[Microcode.scala 1061:27]
                                                                                                            u.SP <= u_sp1_2 @[Microcode.scala 1062:18]
                                                                                                            node _u_T_306 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1063:23]
                                                                                                            when _u_T_306 : @[Microcode.scala 1063:32]
                                                                                                              u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 1063:50]
                                                                                                          else :
                                                                                                            node _u_T_307 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 1056:22]
                                                                                                            when _u_T_307 : @[Microcode.scala 1056:22]
                                                                                                              node _u_sp2_T_2 = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 1066:27]
                                                                                                              node u_sp2_2 = tail(_u_sp2_T_2, 1) @[Microcode.scala 1066:27]
                                                                                                              mcBus.memAddr <= u_sp2_2 @[Microcode.scala 1067:27]
                                                                                                              mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 1068:27]
                                                                                                              node _u_mcBus_memWriteData_T_19 = bits(PC_sampled, 7, 0) @[Microcode.scala 1069:35]
                                                                                                              mcBus.memWriteData <= _u_mcBus_memWriteData_T_19 @[Microcode.scala 1069:27]
                                                                                                              u.PC <= u_vec @[Microcode.scala 1070:18]
                                                                                                              u.SP <= u_sp2_2 @[Microcode.scala 1071:18]
                                                                                                              node _u_T_308 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1072:23]
                                                                                                              when _u_T_308 : @[Microcode.scala 1072:32]
                                                                                                                u.done <= UInt<1>("h1") @[Microcode.scala 1072:43]
                                                                                                        else :
                                                                                                          node _u_T_309 = eq(IR, UInt<8>("hfb")) @[Microcode.scala 1079:19]
                                                                                                          when _u_T_309 : @[Microcode.scala 1079:32]
                                                                                                            u.IME_pending <= UInt<1>("h1") @[Microcode.scala 1080:23]
                                                                                                            node _u_T_310 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1081:19]
                                                                                                            when _u_T_310 : @[Microcode.scala 1081:28]
                                                                                                              u.done <= UInt<1>("h1") @[Microcode.scala 1081:39]
                                                                                                          else :
                                                                                                            node _u_T_311 = eq(IR, UInt<8>("hf3")) @[Microcode.scala 1086:19]
                                                                                                            when _u_T_311 : @[Microcode.scala 1086:32]
                                                                                                              u.IME <= UInt<1>("h0") @[Microcode.scala 1087:15]
                                                                                                              u.IME_pending <= UInt<1>("h0") @[Microcode.scala 1088:23]
                                                                                                              node _u_T_312 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1089:19]
                                                                                                              when _u_T_312 : @[Microcode.scala 1089:28]
                                                                                                                u.done <= UInt<1>("h1") @[Microcode.scala 1089:39]
                                                                                                            else :
                                                                                                              node _u_T_313 = and(IR, UInt<8>("he7")) @[Microcode.scala 1094:20]
                                                                                                              node _u_T_314 = eq(_u_T_313, UInt<6>("h20")) @[Microcode.scala 1094:31]
                                                                                                              when _u_T_314 : @[Microcode.scala 1094:44]
                                                                                                                node _u_cc_T = shr(IR, 3) @[Microcode.scala 1095:20]
                                                                                                                node u_cc = and(_u_cc_T, UInt<2>("h3")) @[Microcode.scala 1095:26]
                                                                                                                node u_flagZ = bits(F_sampled, 7, 7) @[Microcode.scala 1096:23]
                                                                                                                node u_flagC = bits(F_sampled, 4, 4) @[Microcode.scala 1097:23]
                                                                                                                node u_off_1 = asSInt(imm8) @[Microcode.scala 1098:25]
                                                                                                                node _u_condition_T = eq(u_flagZ, UInt<1>("h0")) @[Microcode.scala 1101:16]
                                                                                                                node _u_condition_T_1 = eq(u_flagC, UInt<1>("h0")) @[Microcode.scala 1103:16]
                                                                                                                node _u_condition_T_2 = eq(UInt<1>("h0"), u_cc) @[Mux.scala 81:61]
                                                                                                                node _u_condition_T_3 = mux(_u_condition_T_2, _u_condition_T, UInt<1>("h0")) @[Mux.scala 81:58]
                                                                                                                node _u_condition_T_4 = eq(UInt<1>("h1"), u_cc) @[Mux.scala 81:61]
                                                                                                                node _u_condition_T_5 = mux(_u_condition_T_4, u_flagZ, _u_condition_T_3) @[Mux.scala 81:58]
                                                                                                                node _u_condition_T_6 = eq(UInt<2>("h2"), u_cc) @[Mux.scala 81:61]
                                                                                                                node _u_condition_T_7 = mux(_u_condition_T_6, _u_condition_T_1, _u_condition_T_5) @[Mux.scala 81:58]
                                                                                                                node _u_condition_T_8 = eq(UInt<2>("h3"), u_cc) @[Mux.scala 81:61]
                                                                                                                node u_condition = mux(_u_condition_T_8, u_flagC, _u_condition_T_7) @[Mux.scala 81:58]
                                                                                                                when u_condition : @[Microcode.scala 1107:23]
                                                                                                                  node _u_out_PC_T_7 = asSInt(PC_sampled) @[Microcode.scala 1108:26]
                                                                                                                  node _u_out_PC_T_8 = add(_u_out_PC_T_7, u_off_1) @[Microcode.scala 1108:33]
                                                                                                                  node _u_out_PC_T_9 = tail(_u_out_PC_T_8, 1) @[Microcode.scala 1108:33]
                                                                                                                  node _u_out_PC_T_10 = asSInt(_u_out_PC_T_9) @[Microcode.scala 1108:33]
                                                                                                                  node _u_out_PC_T_11 = asUInt(_u_out_PC_T_10) @[Microcode.scala 1108:40]
                                                                                                                  u.PC <= _u_out_PC_T_11 @[Microcode.scala 1108:16]
                                                                                                                node _u_T_315 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1111:19]
                                                                                                                when _u_T_315 : @[Microcode.scala 1111:28]
                                                                                                                  u.done <= UInt<1>("h1") @[Microcode.scala 1111:39]
                                                                                                              else :
                                                                                                                node _u_T_316 = and(IR, UInt<8>("he7")) @[Microcode.scala 1116:20]
                                                                                                                node _u_T_317 = eq(_u_T_316, UInt<8>("hc2")) @[Microcode.scala 1116:31]
                                                                                                                when _u_T_317 : @[Microcode.scala 1116:44]
                                                                                                                  node _u_cc_T_1 = shr(IR, 3) @[Microcode.scala 1117:20]
                                                                                                                  node u_cc_1 = and(_u_cc_T_1, UInt<2>("h3")) @[Microcode.scala 1117:26]
                                                                                                                  node u_flagZ_1 = bits(F_sampled, 7, 7) @[Microcode.scala 1118:23]
                                                                                                                  node u_flagC_1 = bits(F_sampled, 4, 4) @[Microcode.scala 1119:23]
                                                                                                                  node _u_condition_T_9 = eq(u_flagZ_1, UInt<1>("h0")) @[Microcode.scala 1122:16]
                                                                                                                  node _u_condition_T_10 = eq(u_flagC_1, UInt<1>("h0")) @[Microcode.scala 1124:16]
                                                                                                                  node _u_condition_T_11 = eq(UInt<1>("h0"), u_cc_1) @[Mux.scala 81:61]
                                                                                                                  node _u_condition_T_12 = mux(_u_condition_T_11, _u_condition_T_9, UInt<1>("h0")) @[Mux.scala 81:58]
                                                                                                                  node _u_condition_T_13 = eq(UInt<1>("h1"), u_cc_1) @[Mux.scala 81:61]
                                                                                                                  node _u_condition_T_14 = mux(_u_condition_T_13, u_flagZ_1, _u_condition_T_12) @[Mux.scala 81:58]
                                                                                                                  node _u_condition_T_15 = eq(UInt<2>("h2"), u_cc_1) @[Mux.scala 81:61]
                                                                                                                  node _u_condition_T_16 = mux(_u_condition_T_15, _u_condition_T_10, _u_condition_T_14) @[Mux.scala 81:58]
                                                                                                                  node _u_condition_T_17 = eq(UInt<2>("h3"), u_cc_1) @[Mux.scala 81:61]
                                                                                                                  node u_condition_1 = mux(_u_condition_T_17, u_flagC_1, _u_condition_T_16) @[Mux.scala 81:58]
                                                                                                                  when u_condition_1 : @[Microcode.scala 1128:23]
                                                                                                                    u.PC <= imm16 @[Microcode.scala 1129:16]
                                                                                                                  node _u_T_318 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1131:19]
                                                                                                                  when _u_T_318 : @[Microcode.scala 1131:28]
                                                                                                                    u.done <= UInt<1>("h1") @[Microcode.scala 1131:39]
                                                                                                                else :
                                                                                                                  node _u_T_319 = and(IR, UInt<8>("he7")) @[Microcode.scala 1137:20]
                                                                                                                  node _u_T_320 = eq(_u_T_319, UInt<8>("hc4")) @[Microcode.scala 1137:31]
                                                                                                                  when _u_T_320 : @[Microcode.scala 1137:44]
                                                                                                                    node _u_cc_T_2 = shr(IR, 3) @[Microcode.scala 1138:20]
                                                                                                                    node u_cc_2 = and(_u_cc_T_2, UInt<2>("h3")) @[Microcode.scala 1138:26]
                                                                                                                    node u_flagZ_2 = bits(F_sampled, 7, 7) @[Microcode.scala 1139:23]
                                                                                                                    node u_flagC_2 = bits(F_sampled, 4, 4) @[Microcode.scala 1140:23]
                                                                                                                    node _u_condition_T_18 = eq(u_flagZ_2, UInt<1>("h0")) @[Microcode.scala 1143:16]
                                                                                                                    node _u_condition_T_19 = eq(u_flagC_2, UInt<1>("h0")) @[Microcode.scala 1145:16]
                                                                                                                    node _u_condition_T_20 = eq(UInt<1>("h0"), u_cc_2) @[Mux.scala 81:61]
                                                                                                                    node _u_condition_T_21 = mux(_u_condition_T_20, _u_condition_T_18, UInt<1>("h0")) @[Mux.scala 81:58]
                                                                                                                    node _u_condition_T_22 = eq(UInt<1>("h1"), u_cc_2) @[Mux.scala 81:61]
                                                                                                                    node _u_condition_T_23 = mux(_u_condition_T_22, u_flagZ_2, _u_condition_T_21) @[Mux.scala 81:58]
                                                                                                                    node _u_condition_T_24 = eq(UInt<2>("h2"), u_cc_2) @[Mux.scala 81:61]
                                                                                                                    node _u_condition_T_25 = mux(_u_condition_T_24, _u_condition_T_19, _u_condition_T_23) @[Mux.scala 81:58]
                                                                                                                    node _u_condition_T_26 = eq(UInt<2>("h3"), u_cc_2) @[Mux.scala 81:61]
                                                                                                                    node u_condition_2 = mux(_u_condition_T_26, u_flagC_2, _u_condition_T_25) @[Mux.scala 81:58]
                                                                                                                    when u_condition_2 : @[Microcode.scala 1149:23]
                                                                                                                      node _u_T_321 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 1150:24]
                                                                                                                      when _u_T_321 : @[Microcode.scala 1150:24]
                                                                                                                        node _u_sp1_T_3 = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 1152:29]
                                                                                                                        node u_sp1_3 = tail(_u_sp1_T_3, 1) @[Microcode.scala 1152:29]
                                                                                                                        mcBus.memAddr <= u_sp1_3 @[Microcode.scala 1153:29]
                                                                                                                        mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 1154:29]
                                                                                                                        node _u_mcBus_memWriteData_T_20 = bits(PC_sampled, 15, 8) @[Microcode.scala 1155:37]
                                                                                                                        mcBus.memWriteData <= _u_mcBus_memWriteData_T_20 @[Microcode.scala 1155:29]
                                                                                                                        u.SP <= u_sp1_3 @[Microcode.scala 1156:20]
                                                                                                                        node _u_T_322 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1157:25]
                                                                                                                        when _u_T_322 : @[Microcode.scala 1157:34]
                                                                                                                          u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 1157:52]
                                                                                                                      else :
                                                                                                                        node _u_T_323 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 1150:24]
                                                                                                                        when _u_T_323 : @[Microcode.scala 1150:24]
                                                                                                                          node _u_sp2_T_3 = sub(SP_sampled, UInt<1>("h1")) @[Microcode.scala 1160:29]
                                                                                                                          node u_sp2_3 = tail(_u_sp2_T_3, 1) @[Microcode.scala 1160:29]
                                                                                                                          mcBus.memAddr <= u_sp2_3 @[Microcode.scala 1161:29]
                                                                                                                          mcBus.memWrite <= UInt<1>("h1") @[Microcode.scala 1162:29]
                                                                                                                          node _u_mcBus_memWriteData_T_21 = bits(PC_sampled, 7, 0) @[Microcode.scala 1163:37]
                                                                                                                          mcBus.memWriteData <= _u_mcBus_memWriteData_T_21 @[Microcode.scala 1163:29]
                                                                                                                          u.PC <= imm16 @[Microcode.scala 1164:20]
                                                                                                                          u.SP <= u_sp2_3 @[Microcode.scala 1165:20]
                                                                                                                          node _u_T_324 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1166:25]
                                                                                                                          when _u_T_324 : @[Microcode.scala 1166:34]
                                                                                                                            u.done <= UInt<1>("h1") @[Microcode.scala 1166:45]
                                                                                                                    else :
                                                                                                                      node _u_T_325 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1170:21]
                                                                                                                      when _u_T_325 : @[Microcode.scala 1170:30]
                                                                                                                        u.done <= UInt<1>("h1") @[Microcode.scala 1170:41]
                                                                                                                  else :
                                                                                                                    node _u_T_326 = and(IR, UInt<8>("he7")) @[Microcode.scala 1177:20]
                                                                                                                    node _u_T_327 = eq(_u_T_326, UInt<8>("hc0")) @[Microcode.scala 1177:31]
                                                                                                                    when _u_T_327 : @[Microcode.scala 1177:44]
                                                                                                                      node _u_cc_T_3 = shr(IR, 3) @[Microcode.scala 1178:20]
                                                                                                                      node u_cc_3 = and(_u_cc_T_3, UInt<2>("h3")) @[Microcode.scala 1178:26]
                                                                                                                      node u_flagZ_3 = bits(F_sampled, 7, 7) @[Microcode.scala 1179:23]
                                                                                                                      node u_flagC_3 = bits(F_sampled, 4, 4) @[Microcode.scala 1180:23]
                                                                                                                      node _u_condition_T_27 = eq(u_flagZ_3, UInt<1>("h0")) @[Microcode.scala 1183:16]
                                                                                                                      node _u_condition_T_28 = eq(u_flagC_3, UInt<1>("h0")) @[Microcode.scala 1185:16]
                                                                                                                      node _u_condition_T_29 = eq(UInt<1>("h0"), u_cc_3) @[Mux.scala 81:61]
                                                                                                                      node _u_condition_T_30 = mux(_u_condition_T_29, _u_condition_T_27, UInt<1>("h0")) @[Mux.scala 81:58]
                                                                                                                      node _u_condition_T_31 = eq(UInt<1>("h1"), u_cc_3) @[Mux.scala 81:61]
                                                                                                                      node _u_condition_T_32 = mux(_u_condition_T_31, u_flagZ_3, _u_condition_T_30) @[Mux.scala 81:58]
                                                                                                                      node _u_condition_T_33 = eq(UInt<2>("h2"), u_cc_3) @[Mux.scala 81:61]
                                                                                                                      node _u_condition_T_34 = mux(_u_condition_T_33, _u_condition_T_28, _u_condition_T_32) @[Mux.scala 81:58]
                                                                                                                      node _u_condition_T_35 = eq(UInt<2>("h3"), u_cc_3) @[Mux.scala 81:61]
                                                                                                                      node u_condition_3 = mux(_u_condition_T_35, u_flagC_3, _u_condition_T_34) @[Mux.scala 81:58]
                                                                                                                      when u_condition_3 : @[Microcode.scala 1189:23]
                                                                                                                        node _u_T_328 = eq(UInt<1>("h0"), mcycle) @[Microcode.scala 1190:24]
                                                                                                                        when _u_T_328 : @[Microcode.scala 1190:24]
                                                                                                                          mcBus.memAddr <= SP_sampled @[Microcode.scala 1193:24]
                                                                                                                          mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 1194:24]
                                                                                                                          node _u_T_329 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1195:25]
                                                                                                                          when _u_T_329 : @[Microcode.scala 1195:34]
                                                                                                                            u_tmp8 <= mcBus.memReadData @[Microcode.scala 1196:20]
                                                                                                                            node _u_out_SP_T_12 = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 1197:31]
                                                                                                                            node _u_out_SP_T_13 = tail(_u_out_SP_T_12, 1) @[Microcode.scala 1197:31]
                                                                                                                            u.SP <= _u_out_SP_T_13 @[Microcode.scala 1197:22]
                                                                                                                            u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 1198:31]
                                                                                                                        else :
                                                                                                                          node _u_T_330 = eq(UInt<1>("h1"), mcycle) @[Microcode.scala 1190:24]
                                                                                                                          when _u_T_330 : @[Microcode.scala 1190:24]
                                                                                                                            mcBus.memAddr <= SP_sampled @[Microcode.scala 1204:24]
                                                                                                                            mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 1205:24]
                                                                                                                            node _u_T_331 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1206:25]
                                                                                                                            when _u_T_331 : @[Microcode.scala 1206:34]
                                                                                                                              node _u_out_PC_T_12 = cat(mcBus.memReadData, u_tmp8) @[Cat.scala 33:92]
                                                                                                                              u.PC <= _u_out_PC_T_12 @[Microcode.scala 1207:22]
                                                                                                                              node _u_out_SP_T_14 = add(SP_sampled, UInt<1>("h1")) @[Microcode.scala 1208:31]
                                                                                                                              node _u_out_SP_T_15 = tail(_u_out_SP_T_14, 1) @[Microcode.scala 1208:31]
                                                                                                                              u.SP <= _u_out_SP_T_15 @[Microcode.scala 1208:22]
                                                                                                                              u.done <= UInt<1>("h1") @[Microcode.scala 1209:24]
                                                                                                                      else :
                                                                                                                        node _u_T_332 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1214:21]
                                                                                                                        when _u_T_332 : @[Microcode.scala 1214:30]
                                                                                                                          u.done <= UInt<1>("h1") @[Microcode.scala 1214:41]
                                                                                                                    else :
                                                                                                                      node _u_T_333 = eq(IR, UInt<8>("hc3")) @[Microcode.scala 1220:19]
                                                                                                                      when _u_T_333 : @[Microcode.scala 1220:32]
                                                                                                                        u.PC <= imm16 @[Microcode.scala 1221:14]
                                                                                                                        node _u_T_334 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1222:19]
                                                                                                                        when _u_T_334 : @[Microcode.scala 1222:28]
                                                                                                                          u.done <= UInt<1>("h1") @[Microcode.scala 1222:39]
                                                                                                                      else :
                                                                                                                        node _u_T_335 = eq(IR, UInt<6>("h37")) @[Microcode.scala 1225:19]
                                                                                                                        when _u_T_335 : @[Microcode.scala 1225:32]
                                                                                                                          node _u_out_F_T_24 = bits(F_sampled, 7, 7) @[Microcode.scala 1226:24]
                                                                                                                          node u_out_F_lo_23 = cat(UInt<1>("h1"), UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                                                          node u_out_F_hi_hi_23 = cat(_u_out_F_T_24, UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                                          node u_out_F_hi_23 = cat(u_out_F_hi_hi_23, UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                                          node _u_out_F_T_25 = cat(u_out_F_hi_23, u_out_F_lo_23) @[Cat.scala 33:92]
                                                                                                                          u.F <= _u_out_F_T_25 @[Microcode.scala 1226:13]
                                                                                                                          node _u_T_336 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1227:19]
                                                                                                                          when _u_T_336 : @[Microcode.scala 1227:28]
                                                                                                                            u.done <= UInt<1>("h1") @[Microcode.scala 1227:39]
                                                                                                                        else :
                                                                                                                          node _u_T_337 = eq(IR, UInt<6>("h3f")) @[Microcode.scala 1230:19]
                                                                                                                          when _u_T_337 : @[Microcode.scala 1230:32]
                                                                                                                            node _u_out_F_T_26 = bits(F_sampled, 7, 7) @[Microcode.scala 1231:24]
                                                                                                                            node _u_out_F_T_27 = bits(F_sampled, 4, 4) @[Microcode.scala 1231:52]
                                                                                                                            node _u_out_F_T_28 = eq(_u_out_F_T_27, UInt<1>("h0")) @[Microcode.scala 1231:47]
                                                                                                                            node u_out_F_lo_24 = cat(_u_out_F_T_28, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                                                            node u_out_F_hi_hi_24 = cat(_u_out_F_T_26, UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                                            node u_out_F_hi_24 = cat(u_out_F_hi_hi_24, UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                                            node _u_out_F_T_29 = cat(u_out_F_hi_24, u_out_F_lo_24) @[Cat.scala 33:92]
                                                                                                                            u.F <= _u_out_F_T_29 @[Microcode.scala 1231:13]
                                                                                                                            node _u_T_338 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1232:19]
                                                                                                                            when _u_T_338 : @[Microcode.scala 1232:28]
                                                                                                                              u.done <= UInt<1>("h1") @[Microcode.scala 1232:39]
                                                                                                                          else :
                                                                                                                            node _u_T_339 = eq(IR, UInt<6>("h2f")) @[Microcode.scala 1235:19]
                                                                                                                            when _u_T_339 : @[Microcode.scala 1235:32]
                                                                                                                              node _u_out_A_T = not(A_sampled) @[Microcode.scala 1236:16]
                                                                                                                              u.A <= _u_out_A_T @[Microcode.scala 1236:13]
                                                                                                                              node _u_out_F_T_30 = bits(F_sampled, 7, 7) @[Microcode.scala 1237:24]
                                                                                                                              node _u_out_F_T_31 = bits(F_sampled, 4, 4) @[Microcode.scala 1237:49]
                                                                                                                              node u_out_F_lo_25 = cat(_u_out_F_T_31, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                                                              node u_out_F_hi_hi_25 = cat(_u_out_F_T_30, UInt<1>("h1")) @[Cat.scala 33:92]
                                                                                                                              node u_out_F_hi_25 = cat(u_out_F_hi_hi_25, UInt<1>("h1")) @[Cat.scala 33:92]
                                                                                                                              node _u_out_F_T_32 = cat(u_out_F_hi_25, u_out_F_lo_25) @[Cat.scala 33:92]
                                                                                                                              u.F <= _u_out_F_T_32 @[Microcode.scala 1237:13]
                                                                                                                              node _u_T_340 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1238:19]
                                                                                                                              when _u_T_340 : @[Microcode.scala 1238:28]
                                                                                                                                u.done <= UInt<1>("h1") @[Microcode.scala 1238:39]
                                                                                                                            else :
                                                                                                                              node _u_T_341 = eq(IR, UInt<6>("h27")) @[Microcode.scala 1242:19]
                                                                                                                              when _u_T_341 : @[Microcode.scala 1242:32]
                                                                                                                                node u_N = bits(F_sampled, 6, 6) @[Microcode.scala 1243:19]
                                                                                                                                node u_H = bits(F_sampled, 5, 5) @[Microcode.scala 1244:19]
                                                                                                                                node u_C = bits(F_sampled, 4, 4) @[Microcode.scala 1245:19]
                                                                                                                                wire u_adjusted : UInt<8> @[Microcode.scala 1247:26]
                                                                                                                                wire u_newCarry : UInt<1> @[Microcode.scala 1248:26]
                                                                                                                                wire u_correction : UInt<8> @[Microcode.scala 1249:28]
                                                                                                                                u_correction <= UInt<1>("h0") @[Microcode.scala 1251:18]
                                                                                                                                u_adjusted <= A_sampled @[Microcode.scala 1252:16]
                                                                                                                                u_newCarry <= u_C @[Microcode.scala 1253:16]
                                                                                                                                node _u_T_342 = eq(u_N, UInt<1>("h0")) @[Microcode.scala 1255:12]
                                                                                                                                when _u_T_342 : @[Microcode.scala 1255:16]
                                                                                                                                  wire u_upperCorrect : UInt<8> @[Microcode.scala 1257:32]
                                                                                                                                  wire u_lowerCorrect : UInt<8> @[Microcode.scala 1258:32]
                                                                                                                                  u_upperCorrect <= UInt<1>("h0") @[Microcode.scala 1260:22]
                                                                                                                                  u_lowerCorrect <= UInt<1>("h0") @[Microcode.scala 1261:22]
                                                                                                                                  node _u_T_343 = gt(A_sampled, UInt<8>("h99")) @[Microcode.scala 1264:25]
                                                                                                                                  node _u_T_344 = or(u_C, _u_T_343) @[Microcode.scala 1264:16]
                                                                                                                                  when _u_T_344 : @[Microcode.scala 1264:36]
                                                                                                                                    u_upperCorrect <= UInt<7>("h60") @[Microcode.scala 1265:24]
                                                                                                                                    u_newCarry <= UInt<1>("h1") @[Microcode.scala 1266:20]
                                                                                                                                  node _u_T_345 = and(A_sampled, UInt<4>("hf")) @[Microcode.scala 1270:26]
                                                                                                                                  node _u_T_346 = gt(_u_T_345, UInt<4>("h9")) @[Microcode.scala 1270:36]
                                                                                                                                  node _u_T_347 = or(u_H, _u_T_346) @[Microcode.scala 1270:16]
                                                                                                                                  when _u_T_347 : @[Microcode.scala 1270:47]
                                                                                                                                    u_lowerCorrect <= UInt<3>("h6") @[Microcode.scala 1271:24]
                                                                                                                                  node _u_correction_T = add(u_upperCorrect, u_lowerCorrect) @[Microcode.scala 1274:36]
                                                                                                                                  node _u_correction_T_1 = tail(_u_correction_T, 1) @[Microcode.scala 1274:36]
                                                                                                                                  u_correction <= _u_correction_T_1 @[Microcode.scala 1274:20]
                                                                                                                                  node _u_adjusted_T = add(A_sampled, u_correction) @[Microcode.scala 1275:26]
                                                                                                                                  node _u_adjusted_T_1 = tail(_u_adjusted_T, 1) @[Microcode.scala 1275:26]
                                                                                                                                  u_adjusted <= _u_adjusted_T_1 @[Microcode.scala 1275:18]
                                                                                                                                else :
                                                                                                                                  wire u_upperCorrect_1 : UInt<8> @[Microcode.scala 1279:32]
                                                                                                                                  wire u_lowerCorrect_1 : UInt<8> @[Microcode.scala 1280:32]
                                                                                                                                  u_upperCorrect_1 <= UInt<1>("h0") @[Microcode.scala 1282:22]
                                                                                                                                  u_lowerCorrect_1 <= UInt<1>("h0") @[Microcode.scala 1283:22]
                                                                                                                                  when u_C : @[Microcode.scala 1285:17]
                                                                                                                                    u_upperCorrect_1 <= UInt<7>("h60") @[Microcode.scala 1286:24]
                                                                                                                                  when u_H : @[Microcode.scala 1288:17]
                                                                                                                                    u_lowerCorrect_1 <= UInt<3>("h6") @[Microcode.scala 1289:24]
                                                                                                                                  node _u_correction_T_2 = add(u_upperCorrect_1, u_lowerCorrect_1) @[Microcode.scala 1292:36]
                                                                                                                                  node _u_correction_T_3 = tail(_u_correction_T_2, 1) @[Microcode.scala 1292:36]
                                                                                                                                  u_correction <= _u_correction_T_3 @[Microcode.scala 1292:20]
                                                                                                                                  node _u_adjusted_T_2 = sub(A_sampled, u_correction) @[Microcode.scala 1293:26]
                                                                                                                                  node _u_adjusted_T_3 = tail(_u_adjusted_T_2, 1) @[Microcode.scala 1293:26]
                                                                                                                                  u_adjusted <= _u_adjusted_T_3 @[Microcode.scala 1293:18]
                                                                                                                                  u_newCarry <= u_C @[Microcode.scala 1294:18]
                                                                                                                                u.A <= u_adjusted @[Microcode.scala 1297:13]
                                                                                                                                node _u_T_348 = eq(u_adjusted, UInt<1>("h0")) @[Microcode.scala 1298:25]
                                                                                                                                node u_out_F_lo_26 = cat(u_newCarry, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                                                                node u_out_F_hi_hi_26 = cat(_u_T_348, u_N) @[Cat.scala 33:92]
                                                                                                                                node u_out_F_hi_26 = cat(u_out_F_hi_hi_26, UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                                                node _u_out_F_T_33 = cat(u_out_F_hi_26, u_out_F_lo_26) @[Cat.scala 33:92]
                                                                                                                                u.F <= _u_out_F_T_33 @[Microcode.scala 105:13]
                                                                                                                                node _u_T_349 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1299:19]
                                                                                                                                when _u_T_349 : @[Microcode.scala 1299:28]
                                                                                                                                  u.done <= UInt<1>("h1") @[Microcode.scala 1299:39]
                                                                                                                              else :
                                                                                                                                node _u_T_350 = eq(IR, UInt<5>("h17")) @[Microcode.scala 1304:19]
                                                                                                                                when _u_T_350 : @[Microcode.scala 1304:32]
                                                                                                                                  node _u_T_351 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1305:19]
                                                                                                                                  when _u_T_351 : @[Microcode.scala 1305:28]
                                                                                                                                    node u_oldC = bits(F_sampled, 4, 4) @[Microcode.scala 1307:24]
                                                                                                                                    node u_newC = bits(A_sampled, 7, 7) @[Microcode.scala 1308:24]
                                                                                                                                    node _u_newA_T = bits(A_sampled, 6, 0) @[Microcode.scala 1310:28]
                                                                                                                                    node u_newA = cat(_u_newA_T, u_oldC) @[Cat.scala 33:92]
                                                                                                                                    u.A <= u_newA @[Microcode.scala 1312:15]
                                                                                                                                    node u_out_F_lo_27 = cat(u_newC, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                                                                    node u_out_F_hi_hi_27 = cat(UInt<1>("h0"), UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                                                    node u_out_F_hi_27 = cat(u_out_F_hi_hi_27, UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                                                    node _u_out_F_T_34 = cat(u_out_F_hi_27, u_out_F_lo_27) @[Cat.scala 33:92]
                                                                                                                                    u.F <= _u_out_F_T_34 @[Microcode.scala 1313:15]
                                                                                                                                    u.done <= UInt<1>("h1") @[Microcode.scala 1314:18]
                                                                                                                                else :
                                                                                                                                  node _u_T_352 = eq(IR, UInt<5>("h1f")) @[Microcode.scala 1320:19]
                                                                                                                                  when _u_T_352 : @[Microcode.scala 1320:32]
                                                                                                                                    node _u_T_353 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1321:19]
                                                                                                                                    when _u_T_353 : @[Microcode.scala 1321:28]
                                                                                                                                      node u_oldC_1 = bits(F_sampled, 4, 4) @[Microcode.scala 1323:24]
                                                                                                                                      node u_newC_1 = bits(A_sampled, 0, 0) @[Microcode.scala 1324:24]
                                                                                                                                      node _u_newA_T_1 = bits(A_sampled, 7, 1) @[Microcode.scala 1326:34]
                                                                                                                                      node u_newA_1 = cat(u_oldC_1, _u_newA_T_1) @[Cat.scala 33:92]
                                                                                                                                      u.A <= u_newA_1 @[Microcode.scala 1328:15]
                                                                                                                                      node u_out_F_lo_28 = cat(u_newC_1, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                                                                      node u_out_F_hi_hi_28 = cat(UInt<1>("h0"), UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                                                      node u_out_F_hi_28 = cat(u_out_F_hi_hi_28, UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                                                      node _u_out_F_T_35 = cat(u_out_F_hi_28, u_out_F_lo_28) @[Cat.scala 33:92]
                                                                                                                                      u.F <= _u_out_F_T_35 @[Microcode.scala 1329:15]
                                                                                                                                      u.done <= UInt<1>("h1") @[Microcode.scala 1337:18]
                                                                                                                                  else :
                                                                                                                                    node _u_T_354 = eq(IR, UInt<8>("hfa")) @[Microcode.scala 1345:19]
                                                                                                                                    when _u_T_354 : @[Microcode.scala 1345:32]
                                                                                                                                      node _u_T_355 = eq(mcycle, UInt<1>("h0")) @[Microcode.scala 1346:19]
                                                                                                                                      when _u_T_355 : @[Microcode.scala 1346:28]
                                                                                                                                        mcBus.memAddr <= imm16 @[Microcode.scala 1347:20]
                                                                                                                                        mcBus.memRead <= UInt<1>("h1") @[Microcode.scala 1348:20]
                                                                                                                                        node _u_T_356 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1350:21]
                                                                                                                                        when _u_T_356 : @[Microcode.scala 1350:30]
                                                                                                                                          u.A <= mcBus.memReadData @[Microcode.scala 1351:17]
                                                                                                                                          u.done <= UInt<1>("h1") @[Microcode.scala 1352:20]
                                                                                                                                    else :
                                                                                                                                      node _u_T_357 = eq(IR, UInt<8>("hea")) @[Microcode.scala 1361:19]
                                                                                                                                      when _u_T_357 : @[Microcode.scala 1361:32]
                                                                                                                                        node _u_T_358 = eq(mcycle, UInt<1>("h0")) @[Microcode.scala 1362:19]
                                                                                                                                        when _u_T_358 : @[Microcode.scala 1362:28]
                                                                                                                                          mcBus.memAddr <= imm16 @[Microcode.scala 1363:20]
                                                                                                                                          node _u_mcBus_memWrite_T_7 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 1364:32]
                                                                                                                                          mcBus.memWrite <= _u_mcBus_memWrite_T_7 @[Microcode.scala 1364:21]
                                                                                                                                          mcBus.memWriteData <= A_sampled @[Microcode.scala 1365:25]
                                                                                                                                          node _u_T_359 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1367:21]
                                                                                                                                          when _u_T_359 : @[Microcode.scala 1367:30]
                                                                                                                                            u.done <= UInt<1>("h1") @[Microcode.scala 1368:20]
                                                                                                                                      else :
                                                                                                                                        node _u_T_360 = eq(IR, UInt<4>("h8")) @[Microcode.scala 1378:19]
                                                                                                                                        when _u_T_360 : @[Microcode.scala 1378:32]
                                                                                                                                          node _u_T_361 = eq(mcycle, UInt<1>("h0")) @[Microcode.scala 1379:19]
                                                                                                                                          when _u_T_361 : @[Microcode.scala 1379:28]
                                                                                                                                            mcBus.memAddr <= imm16 @[Microcode.scala 1380:20]
                                                                                                                                            node _u_mcBus_memWrite_T_8 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 1381:32]
                                                                                                                                            mcBus.memWrite <= _u_mcBus_memWrite_T_8 @[Microcode.scala 1381:21]
                                                                                                                                            node _u_mcBus_memWriteData_T_22 = bits(SP_sampled, 7, 0) @[Microcode.scala 1382:33]
                                                                                                                                            mcBus.memWriteData <= _u_mcBus_memWriteData_T_22 @[Microcode.scala 1382:25]
                                                                                                                                            node _u_T_362 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1384:21]
                                                                                                                                            when _u_T_362 : @[Microcode.scala 1384:30]
                                                                                                                                              u.next_mcycle <= UInt<1>("h1") @[Microcode.scala 1385:27]
                                                                                                                                          else :
                                                                                                                                            node _u_T_363 = eq(mcycle, UInt<1>("h1")) @[Microcode.scala 1387:25]
                                                                                                                                            when _u_T_363 : @[Microcode.scala 1387:34]
                                                                                                                                              node _u_mcBus_memAddr_T_7 = add(imm16, UInt<1>("h1")) @[Microcode.scala 1388:32]
                                                                                                                                              node _u_mcBus_memAddr_T_8 = tail(_u_mcBus_memAddr_T_7, 1) @[Microcode.scala 1388:32]
                                                                                                                                              mcBus.memAddr <= _u_mcBus_memAddr_T_8 @[Microcode.scala 1388:20]
                                                                                                                                              node _u_mcBus_memWrite_T_9 = eq(tcycle, UInt<2>("h2")) @[Microcode.scala 1389:32]
                                                                                                                                              mcBus.memWrite <= _u_mcBus_memWrite_T_9 @[Microcode.scala 1389:21]
                                                                                                                                              node _u_mcBus_memWriteData_T_23 = bits(SP_sampled, 15, 8) @[Microcode.scala 1390:33]
                                                                                                                                              mcBus.memWriteData <= _u_mcBus_memWriteData_T_23 @[Microcode.scala 1390:25]
                                                                                                                                              node _u_T_364 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1392:21]
                                                                                                                                              when _u_T_364 : @[Microcode.scala 1392:30]
                                                                                                                                                u.done <= UInt<1>("h1") @[Microcode.scala 1393:20]
                                                                                                                                        else :
                                                                                                                                          node _u_T_365 = eq(IR, UInt<8>("hf9")) @[Microcode.scala 1401:19]
                                                                                                                                          when _u_T_365 : @[Microcode.scala 1401:32]
                                                                                                                                            u.SP <= u_HL @[Microcode.scala 1402:14]
                                                                                                                                            node _u_T_366 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1403:19]
                                                                                                                                            when _u_T_366 : @[Microcode.scala 1403:28]
                                                                                                                                              u.done <= UInt<1>("h1") @[Microcode.scala 1403:39]
                                                                                                                                          else :
                                                                                                                                            node _u_T_367 = eq(IR, UInt<8>("hf8")) @[Microcode.scala 1406:19]
                                                                                                                                            when _u_T_367 : @[Microcode.scala 1406:32]
                                                                                                                                              node _u_offset_signed_T = bits(imm8, 7, 7) @[Microcode.scala 1407:46]
                                                                                                                                              node _u_offset_signed_T_1 = bits(_u_offset_signed_T, 0, 0) @[Bitwise.scala 77:15]
                                                                                                                                              node _u_offset_signed_T_2 = mux(_u_offset_signed_T_1, UInt<8>("hff"), UInt<8>("h0")) @[Bitwise.scala 77:12]
                                                                                                                                              node _u_offset_signed_T_3 = cat(_u_offset_signed_T_2, imm8) @[Cat.scala 33:92]
                                                                                                                                              node u_offset_signed = asSInt(_u_offset_signed_T_3) @[Microcode.scala 1407:61]
                                                                                                                                              node u_sp_signed = asSInt(SP_sampled) @[Microcode.scala 1408:29]
                                                                                                                                              node _u_result_T_37 = add(u_sp_signed, u_offset_signed) @[Microcode.scala 1409:30]
                                                                                                                                              node _u_result_T_38 = tail(_u_result_T_37, 1) @[Microcode.scala 1409:30]
                                                                                                                                              node u_result_3 = asSInt(_u_result_T_38) @[Microcode.scala 1409:30]
                                                                                                                                              node _u_lower_sum_T = bits(SP_sampled, 7, 0) @[Microcode.scala 1412:28]
                                                                                                                                              node u_lower_sum = add(_u_lower_sum_T, imm8) @[Microcode.scala 1412:35]
                                                                                                                                              node _u_hc_T = bits(SP_sampled, 3, 0) @[Microcode.scala 1413:23]
                                                                                                                                              node _u_hc_T_1 = bits(imm8, 3, 0) @[Microcode.scala 1413:40]
                                                                                                                                              node _u_hc_T_2 = add(_u_hc_T, _u_hc_T_1) @[Microcode.scala 1413:30]
                                                                                                                                              node u_hc = bits(_u_hc_T_2, 4, 4) @[Microcode.scala 1413:47]
                                                                                                                                              node u_cy = bits(u_lower_sum, 8, 8) @[Microcode.scala 1414:25]
                                                                                                                                              node _u_out_H_T_8 = asUInt(u_result_3) @[Microcode.scala 1416:23]
                                                                                                                                              node _u_out_H_T_9 = bits(_u_out_H_T_8, 15, 8) @[Microcode.scala 1416:29]
                                                                                                                                              u.H <= _u_out_H_T_9 @[Microcode.scala 1416:13]
                                                                                                                                              node _u_out_L_T_8 = asUInt(u_result_3) @[Microcode.scala 1417:23]
                                                                                                                                              node _u_out_L_T_9 = bits(_u_out_L_T_8, 7, 0) @[Microcode.scala 1417:29]
                                                                                                                                              u.L <= _u_out_L_T_9 @[Microcode.scala 1417:13]
                                                                                                                                              node u_out_F_lo_29 = cat(u_cy, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                                                                              node u_out_F_hi_hi_29 = cat(UInt<1>("h0"), UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                                                              node u_out_F_hi_29 = cat(u_out_F_hi_hi_29, u_hc) @[Cat.scala 33:92]
                                                                                                                                              node _u_out_F_T_36 = cat(u_out_F_hi_29, u_out_F_lo_29) @[Cat.scala 33:92]
                                                                                                                                              u.F <= _u_out_F_T_36 @[Microcode.scala 1418:13]
                                                                                                                                              node _u_T_368 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1420:19]
                                                                                                                                              when _u_T_368 : @[Microcode.scala 1420:28]
                                                                                                                                                u.done <= UInt<1>("h1") @[Microcode.scala 1420:39]
                                                                                                                                            else :
                                                                                                                                              node _u_T_369 = eq(IR, UInt<8>("he8")) @[Microcode.scala 1423:19]
                                                                                                                                              when _u_T_369 : @[Microcode.scala 1423:32]
                                                                                                                                                node _u_offset_signed_T_4 = bits(imm8, 7, 7) @[Microcode.scala 1424:46]
                                                                                                                                                node _u_offset_signed_T_5 = bits(_u_offset_signed_T_4, 0, 0) @[Bitwise.scala 77:15]
                                                                                                                                                node _u_offset_signed_T_6 = mux(_u_offset_signed_T_5, UInt<8>("hff"), UInt<8>("h0")) @[Bitwise.scala 77:12]
                                                                                                                                                node _u_offset_signed_T_7 = cat(_u_offset_signed_T_6, imm8) @[Cat.scala 33:92]
                                                                                                                                                node u_offset_signed_1 = asSInt(_u_offset_signed_T_7) @[Microcode.scala 1424:61]
                                                                                                                                                node u_sp_signed_1 = asSInt(SP_sampled) @[Microcode.scala 1425:29]
                                                                                                                                                node _u_result_T_39 = add(u_sp_signed_1, u_offset_signed_1) @[Microcode.scala 1426:30]
                                                                                                                                                node _u_result_T_40 = tail(_u_result_T_39, 1) @[Microcode.scala 1426:30]
                                                                                                                                                node u_result_4 = asSInt(_u_result_T_40) @[Microcode.scala 1426:30]
                                                                                                                                                node _u_lower_sum_T_1 = bits(SP_sampled, 7, 0) @[Microcode.scala 1429:28]
                                                                                                                                                node u_lower_sum_1 = add(_u_lower_sum_T_1, imm8) @[Microcode.scala 1429:35]
                                                                                                                                                node _u_hc_T_3 = bits(SP_sampled, 3, 0) @[Microcode.scala 1430:23]
                                                                                                                                                node _u_hc_T_4 = bits(imm8, 3, 0) @[Microcode.scala 1430:40]
                                                                                                                                                node _u_hc_T_5 = add(_u_hc_T_3, _u_hc_T_4) @[Microcode.scala 1430:30]
                                                                                                                                                node u_hc_1 = bits(_u_hc_T_5, 4, 4) @[Microcode.scala 1430:47]
                                                                                                                                                node u_cy_1 = bits(u_lower_sum_1, 8, 8) @[Microcode.scala 1431:25]
                                                                                                                                                node _u_out_SP_T_16 = asUInt(u_result_4) @[Microcode.scala 1433:24]
                                                                                                                                                u.SP <= _u_out_SP_T_16 @[Microcode.scala 1433:14]
                                                                                                                                                node u_out_F_lo_30 = cat(u_cy_1, UInt<4>("h0")) @[Cat.scala 33:92]
                                                                                                                                                node u_out_F_hi_hi_30 = cat(UInt<1>("h0"), UInt<1>("h0")) @[Cat.scala 33:92]
                                                                                                                                                node u_out_F_hi_30 = cat(u_out_F_hi_hi_30, u_hc_1) @[Cat.scala 33:92]
                                                                                                                                                node _u_out_F_T_37 = cat(u_out_F_hi_30, u_out_F_lo_30) @[Cat.scala 33:92]
                                                                                                                                                u.F <= _u_out_F_T_37 @[Microcode.scala 1434:13]
                                                                                                                                                node _u_T_370 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1436:19]
                                                                                                                                                when _u_T_370 : @[Microcode.scala 1436:28]
                                                                                                                                                  u.done <= UInt<1>("h1") @[Microcode.scala 1436:39]
                                                                                                                                              else :
                                                                                                                                                node _u_T_371 = eq(tcycle, UInt<2>("h3")) @[Microcode.scala 1442:19]
                                                                                                                                                when _u_T_371 : @[Microcode.scala 1442:28]
                                                                                                                                                  u.done <= UInt<1>("h1") @[Microcode.scala 1442:39]
    wire busAddr : UInt<16> @[LR35902_Core.scala 169:33]
    busAddr <= UInt<16>("h0") @[LR35902_Core.scala 169:33]
    wire busRead : UInt<1> @[LR35902_Core.scala 170:33]
    busRead <= UInt<1>("h0") @[LR35902_Core.scala 170:33]
    wire busWrite : UInt<1> @[LR35902_Core.scala 171:33]
    busWrite <= UInt<1>("h0") @[LR35902_Core.scala 171:33]
    wire busWriteData : UInt<8> @[LR35902_Core.scala 172:33]
    busWriteData <= UInt<8>("h0") @[LR35902_Core.scala 172:33]
    reg state_prev : UInt, clock with :
      reset => (UInt<1>("h0"), state_prev) @[LR35902_Core.scala 177:28]
    state_prev <= state @[LR35902_Core.scala 177:28]
    reg mcycle_prev : UInt, clock with :
      reset => (UInt<1>("h0"), mcycle_prev) @[LR35902_Core.scala 178:28]
    mcycle_prev <= mcycle @[LR35902_Core.scala 178:28]
    node _T = eq(state, UInt<3>("h6")) @[LR35902_Core.scala 183:15]
    node _T_1 = neq(state_prev, UInt<3>("h6")) @[LR35902_Core.scala 183:39]
    node _T_2 = and(_T, _T_1) @[LR35902_Core.scala 183:25]
    when _T_2 : @[LR35902_Core.scala 183:50]
      node _T_3 = asUInt(reset) @[LR35902_Core.scala 184:11]
      node _T_4 = eq(_T_3, UInt<1>("h0")) @[LR35902_Core.scala 184:11]
      when _T_4 : @[LR35902_Core.scala 184:11]
        printf(clock, UInt<1>("h1"), "\n>>> ENTER HALT at PC=%x IF=%x IE=%x IME=%d\n", PC, io.ifReg, io.ieReg, IME) : printf @[LR35902_Core.scala 184:11]
    node _T_5 = eq(state_prev, UInt<3>("h6")) @[LR35902_Core.scala 187:20]
    node _T_6 = neq(state, UInt<3>("h6")) @[LR35902_Core.scala 187:39]
    node _T_7 = and(_T_5, _T_6) @[LR35902_Core.scala 187:30]
    when _T_7 : @[LR35902_Core.scala 187:50]
      node _T_8 = asUInt(reset) @[LR35902_Core.scala 188:11]
      node _T_9 = eq(_T_8, UInt<1>("h0")) @[LR35902_Core.scala 188:11]
      when _T_9 : @[LR35902_Core.scala 188:11]
        printf(clock, UInt<1>("h1"), "\n<<< EXIT HALT at PC=%x IF=%x IE=%x IME=%d\n", PC, io.ifReg, io.ieReg, IME) : printf_1 @[LR35902_Core.scala 188:11]
    node _haltActive_T = eq(state, UInt<3>("h6")) @[LR35902_Core.scala 193:11]
    node _haltActive_T_1 = eq(state_prev, UInt<3>("h6")) @[LR35902_Core.scala 193:35]
    node haltActive = or(_haltActive_T, _haltActive_T_1) @[LR35902_Core.scala 193:21]
    node _T_10 = and(io.ieReg, io.ifReg) @[LR35902_Core.scala 195:35]
    node _T_11 = orr(_T_10) @[LR35902_Core.scala 195:47]
    node _T_12 = eq(_T_11, UInt<1>("h0")) @[LR35902_Core.scala 195:23]
    node _T_13 = and(haltActive, _T_12) @[LR35902_Core.scala 195:20]
    when _T_13 : @[LR35902_Core.scala 195:53]
      tcycle <= tcycle @[LR35902_Core.scala 197:12]
    else :
      node _T_14 = neq(state, state_prev) @[LR35902_Core.scala 198:21]
      node _T_15 = neq(mcycle, mcycle_prev) @[LR35902_Core.scala 198:46]
      node _T_16 = or(_T_14, _T_15) @[LR35902_Core.scala 198:36]
      when _T_16 : @[LR35902_Core.scala 198:63]
        tcycle <= UInt<1>("h0") @[LR35902_Core.scala 199:12]
      else :
        node _T_17 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 200:22]
        when _T_17 : @[LR35902_Core.scala 200:31]
          tcycle <= UInt<1>("h0") @[LR35902_Core.scala 201:12]
        else :
          node _tcycle_T = add(tcycle, UInt<1>("h1")) @[LR35902_Core.scala 203:22]
          node _tcycle_T_1 = tail(_tcycle_T, 1) @[LR35902_Core.scala 203:22]
          tcycle <= _tcycle_T_1 @[LR35902_Core.scala 203:12]
    node _T_18 = eq(UInt<3>("h7"), state) @[LR35902_Core.scala 211:17]
    when _T_18 : @[LR35902_Core.scala 211:17]
      node _T_19 = eq(UInt<1>("h0"), mcycle) @[LR35902_Core.scala 216:22]
      when _T_19 : @[LR35902_Core.scala 216:22]
        busAddr <= UInt<16>("hff0f") @[LR35902_Core.scala 220:24]
        node _busWrite_T = eq(tcycle, UInt<2>("h2")) @[LR35902_Core.scala 221:35]
        busWrite <= _busWrite_T @[LR35902_Core.scala 221:24]
        node _busWriteData_T = dshl(UInt<1>("h1"), irqIndexLatched) @[LR35902_Core.scala 222:44]
        node _busWriteData_T_1 = not(_busWriteData_T) @[LR35902_Core.scala 222:38]
        node _busWriteData_T_2 = and(io.ifReg, _busWriteData_T_1) @[LR35902_Core.scala 222:36]
        busWriteData <= _busWriteData_T_2 @[LR35902_Core.scala 222:24]
        node _T_20 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 224:23]
        when _T_20 : @[LR35902_Core.scala 224:32]
          mcycle <= UInt<1>("h1") @[LR35902_Core.scala 224:41]
      else :
        node _T_21 = eq(UInt<1>("h1"), mcycle) @[LR35902_Core.scala 216:22]
        when _T_21 : @[LR35902_Core.scala 216:22]
          node _busAddr_T = sub(SP, UInt<1>("h1")) @[LR35902_Core.scala 229:30]
          node _busAddr_T_1 = tail(_busAddr_T, 1) @[LR35902_Core.scala 229:30]
          busAddr <= _busAddr_T_1 @[LR35902_Core.scala 229:24]
          node _busWrite_T_1 = eq(tcycle, UInt<2>("h2")) @[LR35902_Core.scala 230:35]
          busWrite <= _busWrite_T_1 @[LR35902_Core.scala 230:24]
          node _busWriteData_T_3 = bits(PC, 15, 8) @[LR35902_Core.scala 231:29]
          busWriteData <= _busWriteData_T_3 @[LR35902_Core.scala 231:24]
          node _T_22 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 233:23]
          when _T_22 : @[LR35902_Core.scala 233:32]
            node _SP_T = sub(SP, UInt<1>("h1")) @[LR35902_Core.scala 234:22]
            node _SP_T_1 = tail(_SP_T, 1) @[LR35902_Core.scala 234:22]
            SP <= _SP_T_1 @[LR35902_Core.scala 234:16]
            mcycle <= UInt<2>("h2") @[LR35902_Core.scala 235:20]
        else :
          node _T_23 = eq(UInt<2>("h2"), mcycle) @[LR35902_Core.scala 216:22]
          when _T_23 : @[LR35902_Core.scala 216:22]
            node _busAddr_T_2 = sub(SP, UInt<1>("h1")) @[LR35902_Core.scala 241:30]
            node _busAddr_T_3 = tail(_busAddr_T_2, 1) @[LR35902_Core.scala 241:30]
            busAddr <= _busAddr_T_3 @[LR35902_Core.scala 241:24]
            node _busWrite_T_2 = eq(tcycle, UInt<2>("h2")) @[LR35902_Core.scala 242:35]
            busWrite <= _busWrite_T_2 @[LR35902_Core.scala 242:24]
            node _busWriteData_T_4 = bits(PC, 7, 0) @[LR35902_Core.scala 243:29]
            busWriteData <= _busWriteData_T_4 @[LR35902_Core.scala 243:24]
            node _T_24 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 245:23]
            when _T_24 : @[LR35902_Core.scala 245:32]
              node _SP_T_2 = sub(SP, UInt<1>("h1")) @[LR35902_Core.scala 246:22]
              node _SP_T_3 = tail(_SP_T_2, 1) @[LR35902_Core.scala 246:22]
              SP <= _SP_T_3 @[LR35902_Core.scala 246:16]
              PC <= irqVectorLatched @[LR35902_Core.scala 247:16]
              mcycle <= UInt<1>("h0") @[LR35902_Core.scala 248:20]
              state <= UInt<3>("h0") @[LR35902_Core.scala 249:20]
    else :
      node _T_25 = eq(UInt<3>("h0"), state) @[LR35902_Core.scala 211:17]
      when _T_25 : @[LR35902_Core.scala 211:17]
        node _T_26 = and(canTakeInterrupt, intr.io.should_irq) @[LR35902_Core.scala 260:30]
        when _T_26 : @[LR35902_Core.scala 260:44]
          irqVectorLatched <= intr.io.irq_vector @[LR35902_Core.scala 262:26]
          irqIndexLatched <= intr.io.irq_index @[LR35902_Core.scala 263:26]
          halted <= UInt<1>("h0") @[LR35902_Core.scala 265:16]
          IME <= UInt<1>("h0") @[LR35902_Core.scala 266:16]
          mcycle <= UInt<1>("h0") @[LR35902_Core.scala 267:16]
          tcycle <= UInt<1>("h0") @[LR35902_Core.scala 268:16]
          state <= UInt<3>("h7") @[LR35902_Core.scala 269:16]
        else :
          busAddr <= PC @[LR35902_Core.scala 272:17]
          busRead <= UInt<1>("h1") @[LR35902_Core.scala 273:17]
          node _T_27 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 275:22]
          when _T_27 : @[LR35902_Core.scala 275:31]
            node _nextPC_T = add(PC, UInt<1>("h1")) @[LR35902_Core.scala 277:27]
            node nextPC = tail(_nextPC_T, 1) @[LR35902_Core.scala 277:27]
            dbg_pc_fetch <= PC @[LR35902_Core.scala 280:24]
            dbg_op0 <= io.memReadData @[LR35902_Core.scala 281:19]
            IR <= io.memReadData @[LR35902_Core.scala 283:14]
            PC <= nextPC @[LR35902_Core.scala 284:14]
            mcycle <= UInt<1>("h0") @[LR35902_Core.scala 285:18]
            node _T_28 = lt(debugCounter, UInt<17>("h13880")) @[LR35902_Core.scala 289:29]
            when _T_28 : @[LR35902_Core.scala 289:40]
              node _T_29 = asUInt(reset) @[LR35902_Core.scala 290:19]
              node _T_30 = eq(_T_29, UInt<1>("h0")) @[LR35902_Core.scala 290:19]
              when _T_30 : @[LR35902_Core.scala 290:19]
                printf(clock, UInt<1>("h1"), "A: %x F: %x B: %x C: %x D: %x E: %x H: %x L: %x SP: %x PC: 00:%x (%x %x %x %x)\n", A, F, B, C, D, E, H, L, SP, PC, io.dbgBytes[0], io.dbgBytes[1], io.dbgBytes[2], io.dbgBytes[3]) : printf_2 @[LR35902_Core.scala 290:19]
              node _debugCounter_T = add(debugCounter, UInt<1>("h1")) @[LR35902_Core.scala 298:42]
              node _debugCounter_T_1 = tail(_debugCounter_T, 1) @[LR35902_Core.scala 298:42]
              debugCounter <= _debugCounter_T_1 @[LR35902_Core.scala 298:26]
            node _isLDrImm_T = and(io.memReadData, UInt<8>("hc7")) @[LR35902_Core.scala 302:42]
            node isLDrImm = eq(_isLDrImm_T, UInt<3>("h6")) @[LR35902_Core.scala 302:53]
            node _needsImm8_T = eq(io.memReadData, UInt<5>("h18")) @[LR35902_Core.scala 306:29]
            node _needsImm8_T_1 = or(isLDrImm, _needsImm8_T) @[LR35902_Core.scala 305:22]
            node _needsImm8_T_2 = eq(io.memReadData, UInt<6>("h20")) @[LR35902_Core.scala 307:29]
            node _needsImm8_T_3 = or(_needsImm8_T_1, _needsImm8_T_2) @[LR35902_Core.scala 306:41]
            node _needsImm8_T_4 = eq(io.memReadData, UInt<6>("h28")) @[LR35902_Core.scala 307:58]
            node _needsImm8_T_5 = or(_needsImm8_T_3, _needsImm8_T_4) @[LR35902_Core.scala 307:41]
            node _needsImm8_T_6 = eq(io.memReadData, UInt<6>("h30")) @[LR35902_Core.scala 308:29]
            node _needsImm8_T_7 = or(_needsImm8_T_5, _needsImm8_T_6) @[LR35902_Core.scala 307:70]
            node _needsImm8_T_8 = eq(io.memReadData, UInt<6>("h38")) @[LR35902_Core.scala 308:58]
            node _needsImm8_T_9 = or(_needsImm8_T_7, _needsImm8_T_8) @[LR35902_Core.scala 308:41]
            node _needsImm8_T_10 = eq(io.memReadData, UInt<8>("hc6")) @[LR35902_Core.scala 309:29]
            node _needsImm8_T_11 = or(_needsImm8_T_9, _needsImm8_T_10) @[LR35902_Core.scala 308:70]
            node _needsImm8_T_12 = eq(io.memReadData, UInt<8>("hce")) @[LR35902_Core.scala 310:29]
            node _needsImm8_T_13 = or(_needsImm8_T_11, _needsImm8_T_12) @[LR35902_Core.scala 309:41]
            node _needsImm8_T_14 = eq(io.memReadData, UInt<8>("hd6")) @[LR35902_Core.scala 311:29]
            node _needsImm8_T_15 = or(_needsImm8_T_13, _needsImm8_T_14) @[LR35902_Core.scala 310:41]
            node _needsImm8_T_16 = eq(io.memReadData, UInt<8>("hde")) @[LR35902_Core.scala 312:29]
            node _needsImm8_T_17 = or(_needsImm8_T_15, _needsImm8_T_16) @[LR35902_Core.scala 311:41]
            node _needsImm8_T_18 = eq(io.memReadData, UInt<8>("he0")) @[LR35902_Core.scala 313:29]
            node _needsImm8_T_19 = or(_needsImm8_T_17, _needsImm8_T_18) @[LR35902_Core.scala 312:41]
            node _needsImm8_T_20 = eq(io.memReadData, UInt<8>("he6")) @[LR35902_Core.scala 313:58]
            node _needsImm8_T_21 = or(_needsImm8_T_19, _needsImm8_T_20) @[LR35902_Core.scala 313:41]
            node _needsImm8_T_22 = eq(io.memReadData, UInt<8>("he8")) @[LR35902_Core.scala 314:29]
            node _needsImm8_T_23 = or(_needsImm8_T_21, _needsImm8_T_22) @[LR35902_Core.scala 313:70]
            node _needsImm8_T_24 = eq(io.memReadData, UInt<8>("hee")) @[LR35902_Core.scala 314:58]
            node _needsImm8_T_25 = or(_needsImm8_T_23, _needsImm8_T_24) @[LR35902_Core.scala 314:41]
            node _needsImm8_T_26 = eq(io.memReadData, UInt<8>("hf0")) @[LR35902_Core.scala 315:29]
            node _needsImm8_T_27 = or(_needsImm8_T_25, _needsImm8_T_26) @[LR35902_Core.scala 314:70]
            node _needsImm8_T_28 = eq(io.memReadData, UInt<8>("hf6")) @[LR35902_Core.scala 315:58]
            node _needsImm8_T_29 = or(_needsImm8_T_27, _needsImm8_T_28) @[LR35902_Core.scala 315:41]
            node _needsImm8_T_30 = eq(io.memReadData, UInt<8>("hf8")) @[LR35902_Core.scala 316:29]
            node _needsImm8_T_31 = or(_needsImm8_T_29, _needsImm8_T_30) @[LR35902_Core.scala 315:70]
            node _needsImm8_T_32 = eq(io.memReadData, UInt<8>("hfe")) @[LR35902_Core.scala 316:58]
            node needsImm8 = or(_needsImm8_T_31, _needsImm8_T_32) @[LR35902_Core.scala 316:41]
            node _needsImm16_T = eq(io.memReadData, UInt<8>("hc2")) @[LR35902_Core.scala 321:27]
            node _needsImm16_T_1 = eq(io.memReadData, UInt<8>("hca")) @[LR35902_Core.scala 321:56]
            node _needsImm16_T_2 = or(_needsImm16_T, _needsImm16_T_1) @[LR35902_Core.scala 321:39]
            node _needsImm16_T_3 = eq(io.memReadData, UInt<8>("hd2")) @[LR35902_Core.scala 322:29]
            node _needsImm16_T_4 = or(_needsImm16_T_2, _needsImm16_T_3) @[LR35902_Core.scala 321:68]
            node _needsImm16_T_5 = eq(io.memReadData, UInt<8>("hda")) @[LR35902_Core.scala 322:58]
            node _needsImm16_T_6 = or(_needsImm16_T_4, _needsImm16_T_5) @[LR35902_Core.scala 322:41]
            node _needsImm16_T_7 = eq(io.memReadData, UInt<8>("hc3")) @[LR35902_Core.scala 323:29]
            node _needsImm16_T_8 = or(_needsImm16_T_6, _needsImm16_T_7) @[LR35902_Core.scala 322:70]
            node _needsImm16_T_9 = eq(io.memReadData, UInt<8>("hc4")) @[LR35902_Core.scala 324:29]
            node _needsImm16_T_10 = or(_needsImm16_T_8, _needsImm16_T_9) @[LR35902_Core.scala 323:41]
            node _needsImm16_T_11 = eq(io.memReadData, UInt<8>("hcc")) @[LR35902_Core.scala 324:58]
            node _needsImm16_T_12 = or(_needsImm16_T_10, _needsImm16_T_11) @[LR35902_Core.scala 324:41]
            node _needsImm16_T_13 = eq(io.memReadData, UInt<8>("hd4")) @[LR35902_Core.scala 325:29]
            node _needsImm16_T_14 = or(_needsImm16_T_12, _needsImm16_T_13) @[LR35902_Core.scala 324:70]
            node _needsImm16_T_15 = eq(io.memReadData, UInt<8>("hdc")) @[LR35902_Core.scala 325:58]
            node _needsImm16_T_16 = or(_needsImm16_T_14, _needsImm16_T_15) @[LR35902_Core.scala 325:41]
            node _needsImm16_T_17 = eq(io.memReadData, UInt<8>("hcd")) @[LR35902_Core.scala 326:29]
            node _needsImm16_T_18 = or(_needsImm16_T_16, _needsImm16_T_17) @[LR35902_Core.scala 325:70]
            node _needsImm16_T_19 = eq(io.memReadData, UInt<8>("hea")) @[LR35902_Core.scala 327:29]
            node _needsImm16_T_20 = or(_needsImm16_T_18, _needsImm16_T_19) @[LR35902_Core.scala 326:41]
            node _needsImm16_T_21 = eq(io.memReadData, UInt<8>("hfa")) @[LR35902_Core.scala 327:58]
            node _needsImm16_T_22 = or(_needsImm16_T_20, _needsImm16_T_21) @[LR35902_Core.scala 327:41]
            node _needsImm16_T_23 = eq(io.memReadData, UInt<1>("h1")) @[LR35902_Core.scala 328:29]
            node _needsImm16_T_24 = or(_needsImm16_T_22, _needsImm16_T_23) @[LR35902_Core.scala 327:70]
            node _needsImm16_T_25 = eq(io.memReadData, UInt<4>("h8")) @[LR35902_Core.scala 328:58]
            node _needsImm16_T_26 = or(_needsImm16_T_24, _needsImm16_T_25) @[LR35902_Core.scala 328:41]
            node _needsImm16_T_27 = eq(io.memReadData, UInt<5>("h11")) @[LR35902_Core.scala 329:29]
            node _needsImm16_T_28 = or(_needsImm16_T_26, _needsImm16_T_27) @[LR35902_Core.scala 328:70]
            node _needsImm16_T_29 = eq(io.memReadData, UInt<6>("h21")) @[LR35902_Core.scala 329:58]
            node _needsImm16_T_30 = or(_needsImm16_T_28, _needsImm16_T_29) @[LR35902_Core.scala 329:41]
            node _needsImm16_T_31 = eq(io.memReadData, UInt<6>("h31")) @[LR35902_Core.scala 330:29]
            node needsImm16 = or(_needsImm16_T_30, _needsImm16_T_31) @[LR35902_Core.scala 329:70]
            node _T_31 = eq(io.memReadData, UInt<8>("hcb")) @[LR35902_Core.scala 332:31]
            when _T_31 : @[LR35902_Core.scala 332:44]
              state <= UInt<3>("h5") @[LR35902_Core.scala 333:19]
            else :
              node _T_32 = eq(io.memReadData, UInt<7>("h76")) @[LR35902_Core.scala 334:37]
              when _T_32 : @[LR35902_Core.scala 334:50]
                state <= UInt<3>("h6") @[LR35902_Core.scala 335:19]
                halted <= UInt<1>("h1") @[LR35902_Core.scala 336:20]
              else :
                when needsImm8 : @[LR35902_Core.scala 337:34]
                  state <= UInt<3>("h1") @[LR35902_Core.scala 338:19]
                else :
                  when needsImm16 : @[LR35902_Core.scala 339:35]
                    state <= UInt<3>("h2") @[LR35902_Core.scala 340:19]
                  else :
                    state <= UInt<3>("h4") @[LR35902_Core.scala 342:19]
                    PC_sampled <= nextPC @[LR35902_Core.scala 345:24]
                    SP_sampled <= SP @[LR35902_Core.scala 346:24]
                    A_sampled <= A @[LR35902_Core.scala 347:24]
                    F_sampled <= F @[LR35902_Core.scala 348:24]
                    B_sampled <= B @[LR35902_Core.scala 349:24]
                    C_sampled <= C @[LR35902_Core.scala 350:24]
                    D_sampled <= D @[LR35902_Core.scala 351:24]
                    E_sampled <= E @[LR35902_Core.scala 352:24]
                    H_sampled <= H @[LR35902_Core.scala 353:24]
                    L_sampled <= L @[LR35902_Core.scala 354:24]
      else :
        node _T_33 = eq(UInt<3>("h1"), state) @[LR35902_Core.scala 211:17]
        when _T_33 : @[LR35902_Core.scala 211:17]
          busAddr <= PC @[LR35902_Core.scala 367:15]
          busRead <= UInt<1>("h1") @[LR35902_Core.scala 368:15]
          node _T_34 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 370:19]
          when _T_34 : @[LR35902_Core.scala 370:28]
            imm8 <= io.memReadData @[LR35902_Core.scala 371:16]
            node _newPC_T = add(PC, UInt<1>("h1")) @[LR35902_Core.scala 372:24]
            node newPC = tail(_newPC_T, 1) @[LR35902_Core.scala 372:24]
            PC <= newPC @[LR35902_Core.scala 373:16]
            mcycle <= UInt<1>("h0") @[LR35902_Core.scala 374:16]
            state <= UInt<3>("h4") @[LR35902_Core.scala 375:16]
            PC_sampled <= newPC @[LR35902_Core.scala 378:20]
            SP_sampled <= SP @[LR35902_Core.scala 379:20]
            A_sampled <= A @[LR35902_Core.scala 380:20]
            F_sampled <= F @[LR35902_Core.scala 381:20]
            B_sampled <= B @[LR35902_Core.scala 382:20]
            C_sampled <= C @[LR35902_Core.scala 383:20]
            D_sampled <= D @[LR35902_Core.scala 384:20]
            E_sampled <= E @[LR35902_Core.scala 385:20]
            H_sampled <= H @[LR35902_Core.scala 386:20]
            L_sampled <= L @[LR35902_Core.scala 387:20]
        else :
          node _T_35 = eq(UInt<3>("h2"), state) @[LR35902_Core.scala 211:17]
          when _T_35 : @[LR35902_Core.scala 211:17]
            busAddr <= PC @[LR35902_Core.scala 395:15]
            busRead <= UInt<1>("h1") @[LR35902_Core.scala 396:15]
            node _T_36 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 398:19]
            when _T_36 : @[LR35902_Core.scala 398:28]
              imm16 <= io.memReadData @[LR35902_Core.scala 399:16]
              node _PC_T = add(PC, UInt<1>("h1")) @[LR35902_Core.scala 400:22]
              node _PC_T_1 = tail(_PC_T, 1) @[LR35902_Core.scala 400:22]
              PC <= _PC_T_1 @[LR35902_Core.scala 400:16]
              state <= UInt<3>("h3") @[LR35902_Core.scala 401:16]
          else :
            node _T_37 = eq(UInt<3>("h3"), state) @[LR35902_Core.scala 211:17]
            when _T_37 : @[LR35902_Core.scala 211:17]
              busAddr <= PC @[LR35902_Core.scala 409:15]
              busRead <= UInt<1>("h1") @[LR35902_Core.scala 410:15]
              node _T_38 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 412:19]
              when _T_38 : @[LR35902_Core.scala 412:28]
                node _imm16_T = bits(imm16, 7, 0) @[LR35902_Core.scala 413:44]
                node _imm16_T_1 = cat(io.memReadData, _imm16_T) @[Cat.scala 33:92]
                imm16 <= _imm16_T_1 @[LR35902_Core.scala 413:16]
                node _newPC_T_1 = add(PC, UInt<1>("h1")) @[LR35902_Core.scala 414:24]
                node newPC_1 = tail(_newPC_T_1, 1) @[LR35902_Core.scala 414:24]
                PC <= newPC_1 @[LR35902_Core.scala 415:16]
                mcycle <= UInt<1>("h0") @[LR35902_Core.scala 416:16]
                state <= UInt<3>("h4") @[LR35902_Core.scala 417:16]
                PC_sampled <= newPC_1 @[LR35902_Core.scala 420:20]
                SP_sampled <= SP @[LR35902_Core.scala 421:20]
                A_sampled <= A @[LR35902_Core.scala 422:20]
                F_sampled <= F @[LR35902_Core.scala 423:20]
                B_sampled <= B @[LR35902_Core.scala 424:20]
                C_sampled <= C @[LR35902_Core.scala 425:20]
                D_sampled <= D @[LR35902_Core.scala 426:20]
                E_sampled <= E @[LR35902_Core.scala 427:20]
                H_sampled <= H @[LR35902_Core.scala 428:20]
                L_sampled <= L @[LR35902_Core.scala 429:20]
            else :
              node _T_39 = eq(UInt<3>("h5"), state) @[LR35902_Core.scala 211:17]
              when _T_39 : @[LR35902_Core.scala 211:17]
                busAddr <= PC @[LR35902_Core.scala 437:15]
                busRead <= UInt<1>("h1") @[LR35902_Core.scala 438:15]
                node _T_40 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 440:19]
                when _T_40 : @[LR35902_Core.scala 440:28]
                  IR2 <= io.memReadData @[LR35902_Core.scala 441:16]
                  node _newPC_T_2 = add(PC, UInt<1>("h1")) @[LR35902_Core.scala 442:24]
                  node newPC_2 = tail(_newPC_T_2, 1) @[LR35902_Core.scala 442:24]
                  PC <= newPC_2 @[LR35902_Core.scala 443:16]
                  mcycle <= UInt<1>("h1") @[LR35902_Core.scala 444:16]
                  state <= UInt<3>("h4") @[LR35902_Core.scala 445:16]
                  PC_sampled <= newPC_2 @[LR35902_Core.scala 448:20]
                  SP_sampled <= SP @[LR35902_Core.scala 449:20]
                  A_sampled <= A @[LR35902_Core.scala 450:20]
                  F_sampled <= F @[LR35902_Core.scala 451:20]
                  B_sampled <= B @[LR35902_Core.scala 452:20]
                  C_sampled <= C @[LR35902_Core.scala 453:20]
                  D_sampled <= D @[LR35902_Core.scala 454:20]
                  E_sampled <= E @[LR35902_Core.scala 455:20]
                  H_sampled <= H @[LR35902_Core.scala 456:20]
                  L_sampled <= L @[LR35902_Core.scala 457:20]
              else :
                node _T_41 = eq(UInt<3>("h4"), state) @[LR35902_Core.scala 211:17]
                when _T_41 : @[LR35902_Core.scala 211:17]
                  node _T_42 = eq(IR, UInt<8>("hcb")) @[LR35902_Core.scala 466:15]
                  when _T_42 : @[LR35902_Core.scala 466:28]
                    wire cbOut : { A : UInt<8>, F : UInt<8>, B : UInt<8>, C : UInt<8>, D : UInt<8>, E : UInt<8>, H : UInt<8>, L : UInt<8>, imm8 : UInt<8>, done : UInt<1>, next_mcycle : UInt<3>} @[MicrocodeCB.scala 44:19]
                    cbOut.A <= A_sampled @[MicrocodeCB.scala 47:11]
                    cbOut.F <= F_sampled @[MicrocodeCB.scala 48:11]
                    cbOut.B <= B_sampled @[MicrocodeCB.scala 49:11]
                    cbOut.C <= C_sampled @[MicrocodeCB.scala 50:11]
                    cbOut.D <= D_sampled @[MicrocodeCB.scala 51:11]
                    cbOut.E <= E_sampled @[MicrocodeCB.scala 52:11]
                    cbOut.H <= H_sampled @[MicrocodeCB.scala 53:11]
                    cbOut.L <= L_sampled @[MicrocodeCB.scala 54:11]
                    cbOut.imm8 <= CB_imm8 @[MicrocodeCB.scala 55:14]
                    cbOut.done <= UInt<1>("h0") @[MicrocodeCB.scala 57:14]
                    cbOut.next_mcycle <= mcycle @[MicrocodeCB.scala 58:21]
                    mcBus.memAddr <= UInt<1>("h0") @[MicrocodeCB.scala 60:21]
                    mcBus.memRead <= UInt<1>("h0") @[MicrocodeCB.scala 61:21]
                    mcBus.memWrite <= UInt<1>("h0") @[MicrocodeCB.scala 62:21]
                    mcBus.memWriteData <= UInt<1>("h0") @[MicrocodeCB.scala 63:21]
                    node cbOut_group = bits(IR2, 7, 6) @[MicrocodeCB.scala 66:21]
                    node cbOut_bitIdx = bits(IR2, 5, 3) @[MicrocodeCB.scala 67:21]
                    node cbOut_regIdx = bits(IR2, 2, 0) @[MicrocodeCB.scala 68:21]
                    node cbOut_isHL = eq(cbOut_regIdx, UInt<3>("h6")) @[MicrocodeCB.scala 70:23]
                    node cbOut_HL = cat(H_sampled, L_sampled) @[Cat.scala 33:92]
                    node _cbOut_T = eq(mcycle, UInt<1>("h1")) @[MicrocodeCB.scala 98:17]
                    when _cbOut_T : @[MicrocodeCB.scala 98:26]
                      when cbOut_isHL : @[MicrocodeCB.scala 99:18]
                        mcBus.memAddr <= cbOut_HL @[MicrocodeCB.scala 100:20]
                        mcBus.memRead <= UInt<1>("h1") @[MicrocodeCB.scala 101:20]
                        node _cbOut_T_1 = eq(tcycle, UInt<2>("h3")) @[MicrocodeCB.scala 102:21]
                        when _cbOut_T_1 : @[MicrocodeCB.scala 102:30]
                          cbOut.imm8 <= mcBus.memReadData @[MicrocodeCB.scala 103:20]
                          cbOut.next_mcycle <= UInt<2>("h2") @[MicrocodeCB.scala 104:27]
                      else :
                        node _cbOut_T_2 = eq(tcycle, UInt<2>("h3")) @[MicrocodeCB.scala 107:21]
                        when _cbOut_T_2 : @[MicrocodeCB.scala 107:30]
                          node _cbOut_out_imm8_T = eq(UInt<1>("h0"), cbOut_regIdx) @[Mux.scala 81:61]
                          node _cbOut_out_imm8_T_1 = mux(_cbOut_out_imm8_T, B_sampled, UInt<1>("h0")) @[Mux.scala 81:58]
                          node _cbOut_out_imm8_T_2 = eq(UInt<1>("h1"), cbOut_regIdx) @[Mux.scala 81:61]
                          node _cbOut_out_imm8_T_3 = mux(_cbOut_out_imm8_T_2, C_sampled, _cbOut_out_imm8_T_1) @[Mux.scala 81:58]
                          node _cbOut_out_imm8_T_4 = eq(UInt<2>("h2"), cbOut_regIdx) @[Mux.scala 81:61]
                          node _cbOut_out_imm8_T_5 = mux(_cbOut_out_imm8_T_4, D_sampled, _cbOut_out_imm8_T_3) @[Mux.scala 81:58]
                          node _cbOut_out_imm8_T_6 = eq(UInt<2>("h3"), cbOut_regIdx) @[Mux.scala 81:61]
                          node _cbOut_out_imm8_T_7 = mux(_cbOut_out_imm8_T_6, E_sampled, _cbOut_out_imm8_T_5) @[Mux.scala 81:58]
                          node _cbOut_out_imm8_T_8 = eq(UInt<3>("h4"), cbOut_regIdx) @[Mux.scala 81:61]
                          node _cbOut_out_imm8_T_9 = mux(_cbOut_out_imm8_T_8, H_sampled, _cbOut_out_imm8_T_7) @[Mux.scala 81:58]
                          node _cbOut_out_imm8_T_10 = eq(UInt<3>("h5"), cbOut_regIdx) @[Mux.scala 81:61]
                          node _cbOut_out_imm8_T_11 = mux(_cbOut_out_imm8_T_10, L_sampled, _cbOut_out_imm8_T_9) @[Mux.scala 81:58]
                          node _cbOut_out_imm8_T_12 = eq(UInt<3>("h7"), cbOut_regIdx) @[Mux.scala 81:61]
                          node _cbOut_out_imm8_T_13 = mux(_cbOut_out_imm8_T_12, A_sampled, _cbOut_out_imm8_T_11) @[Mux.scala 81:58]
                          cbOut.imm8 <= _cbOut_out_imm8_T_13 @[MicrocodeCB.scala 108:20]
                          cbOut.next_mcycle <= UInt<2>("h2") @[MicrocodeCB.scala 109:27]
                    node _cbOut_T_3 = eq(mcycle, UInt<2>("h2")) @[MicrocodeCB.scala 117:17]
                    when _cbOut_T_3 : @[MicrocodeCB.scala 117:26]
                      wire cbOut_result : UInt<8> @[MicrocodeCB.scala 120:25]
                      wire cbOut_flagZ : UInt<1> @[MicrocodeCB.scala 122:23]
                      wire cbOut_flagN : UInt<1> @[MicrocodeCB.scala 123:23]
                      wire cbOut_flagH : UInt<1> @[MicrocodeCB.scala 124:23]
                      wire cbOut_flagC : UInt<1> @[MicrocodeCB.scala 125:23]
                      cbOut_result <= CB_imm8 @[MicrocodeCB.scala 128:14]
                      node _cbOut_flagZ_T = bits(F_sampled, 7, 7) @[MicrocodeCB.scala 129:20]
                      cbOut_flagZ <= _cbOut_flagZ_T @[MicrocodeCB.scala 129:13]
                      node _cbOut_flagN_T = bits(F_sampled, 6, 6) @[MicrocodeCB.scala 130:20]
                      cbOut_flagN <= _cbOut_flagN_T @[MicrocodeCB.scala 130:13]
                      node _cbOut_flagH_T = bits(F_sampled, 5, 5) @[MicrocodeCB.scala 131:20]
                      cbOut_flagH <= _cbOut_flagH_T @[MicrocodeCB.scala 131:13]
                      node _cbOut_flagC_T = bits(F_sampled, 4, 4) @[MicrocodeCB.scala 132:20]
                      cbOut_flagC <= _cbOut_flagC_T @[MicrocodeCB.scala 132:13]
                      node _cbOut_T_4 = eq(UInt<1>("h0"), cbOut_group) @[MicrocodeCB.scala 134:21]
                      when _cbOut_T_4 : @[MicrocodeCB.scala 134:21]
                        node _cbOut_T_5 = eq(UInt<1>("h0"), cbOut_bitIdx) @[MicrocodeCB.scala 138:26]
                        when _cbOut_T_5 : @[MicrocodeCB.scala 138:26]
                          node cbOut_c = bits(CB_imm8, 7, 7) @[MicrocodeCB.scala 139:43]
                          node _cbOut_result_T = bits(CB_imm8, 6, 0) @[MicrocodeCB.scala 139:69]
                          node _cbOut_result_T_1 = cat(_cbOut_result_T, cbOut_c) @[Cat.scala 33:92]
                          cbOut_result <= _cbOut_result_T_1 @[MicrocodeCB.scala 139:55]
                          cbOut_flagC <= cbOut_c @[MicrocodeCB.scala 139:86]
                        else :
                          node _cbOut_T_6 = eq(UInt<1>("h1"), cbOut_bitIdx) @[MicrocodeCB.scala 138:26]
                          when _cbOut_T_6 : @[MicrocodeCB.scala 138:26]
                            node cbOut_c_1 = bits(CB_imm8, 0, 0) @[MicrocodeCB.scala 140:43]
                            node _cbOut_result_T_2 = bits(CB_imm8, 7, 1) @[MicrocodeCB.scala 140:72]
                            node _cbOut_result_T_3 = cat(cbOut_c_1, _cbOut_result_T_2) @[Cat.scala 33:92]
                            cbOut_result <= _cbOut_result_T_3 @[MicrocodeCB.scala 140:55]
                            cbOut_flagC <= cbOut_c_1 @[MicrocodeCB.scala 140:86]
                          else :
                            node _cbOut_T_7 = eq(UInt<2>("h2"), cbOut_bitIdx) @[MicrocodeCB.scala 138:26]
                            when _cbOut_T_7 : @[MicrocodeCB.scala 138:26]
                              node cbOut_c_2 = bits(CB_imm8, 7, 7) @[MicrocodeCB.scala 141:43]
                              node _cbOut_result_T_4 = bits(CB_imm8, 6, 0) @[MicrocodeCB.scala 141:69]
                              node _cbOut_result_T_5 = bits(F_sampled, 4, 4) @[MicrocodeCB.scala 141:80]
                              node _cbOut_result_T_6 = cat(_cbOut_result_T_4, _cbOut_result_T_5) @[Cat.scala 33:92]
                              cbOut_result <= _cbOut_result_T_6 @[MicrocodeCB.scala 141:55]
                              cbOut_flagC <= cbOut_c_2 @[MicrocodeCB.scala 141:92]
                            else :
                              node _cbOut_T_8 = eq(UInt<2>("h3"), cbOut_bitIdx) @[MicrocodeCB.scala 138:26]
                              when _cbOut_T_8 : @[MicrocodeCB.scala 138:26]
                                node cbOut_c_3 = bits(CB_imm8, 0, 0) @[MicrocodeCB.scala 142:43]
                                node _cbOut_result_T_7 = bits(F_sampled, 4, 4) @[MicrocodeCB.scala 142:66]
                                node _cbOut_result_T_8 = bits(CB_imm8, 7, 1) @[MicrocodeCB.scala 142:78]
                                node _cbOut_result_T_9 = cat(_cbOut_result_T_7, _cbOut_result_T_8) @[Cat.scala 33:92]
                                cbOut_result <= _cbOut_result_T_9 @[MicrocodeCB.scala 142:55]
                                cbOut_flagC <= cbOut_c_3 @[MicrocodeCB.scala 142:92]
                              else :
                                node _cbOut_T_9 = eq(UInt<3>("h4"), cbOut_bitIdx) @[MicrocodeCB.scala 138:26]
                                when _cbOut_T_9 : @[MicrocodeCB.scala 138:26]
                                  node cbOut_c_4 = bits(CB_imm8, 7, 7) @[MicrocodeCB.scala 143:43]
                                  node _cbOut_result_T_10 = bits(CB_imm8, 6, 0) @[MicrocodeCB.scala 143:69]
                                  node _cbOut_result_T_11 = cat(_cbOut_result_T_10, UInt<1>("h0")) @[Cat.scala 33:92]
                                  cbOut_result <= _cbOut_result_T_11 @[MicrocodeCB.scala 143:55]
                                  cbOut_flagC <= cbOut_c_4 @[MicrocodeCB.scala 143:88]
                                else :
                                  node _cbOut_T_10 = eq(UInt<3>("h5"), cbOut_bitIdx) @[MicrocodeCB.scala 138:26]
                                  when _cbOut_T_10 : @[MicrocodeCB.scala 138:26]
                                    node cbOut_c_5 = bits(CB_imm8, 0, 0) @[MicrocodeCB.scala 144:43]
                                    node _cbOut_result_T_12 = bits(CB_imm8, 7, 7) @[MicrocodeCB.scala 144:69]
                                    node _cbOut_result_T_13 = bits(CB_imm8, 7, 1) @[MicrocodeCB.scala 144:81]
                                    node _cbOut_result_T_14 = cat(_cbOut_result_T_12, _cbOut_result_T_13) @[Cat.scala 33:92]
                                    cbOut_result <= _cbOut_result_T_14 @[MicrocodeCB.scala 144:55]
                                    cbOut_flagC <= cbOut_c_5 @[MicrocodeCB.scala 144:95]
                                  else :
                                    node _cbOut_T_11 = eq(UInt<3>("h6"), cbOut_bitIdx) @[MicrocodeCB.scala 138:26]
                                    when _cbOut_T_11 : @[MicrocodeCB.scala 138:26]
                                      node _cbOut_result_T_15 = bits(CB_imm8, 3, 0) @[MicrocodeCB.scala 145:49]
                                      node _cbOut_result_T_16 = bits(CB_imm8, 7, 4) @[MicrocodeCB.scala 145:63]
                                      node _cbOut_result_T_17 = cat(_cbOut_result_T_15, _cbOut_result_T_16) @[Cat.scala 33:92]
                                      cbOut_result <= _cbOut_result_T_17 @[MicrocodeCB.scala 145:35]
                                      cbOut_flagC <= UInt<1>("h0") @[MicrocodeCB.scala 145:77]
                                    else :
                                      node _cbOut_T_12 = eq(UInt<3>("h7"), cbOut_bitIdx) @[MicrocodeCB.scala 138:26]
                                      when _cbOut_T_12 : @[MicrocodeCB.scala 138:26]
                                        node cbOut_c_6 = bits(CB_imm8, 0, 0) @[MicrocodeCB.scala 146:43]
                                        node _cbOut_result_T_18 = bits(CB_imm8, 7, 1) @[MicrocodeCB.scala 146:74]
                                        node _cbOut_result_T_19 = cat(UInt<1>("h0"), _cbOut_result_T_18) @[Cat.scala 33:92]
                                        cbOut_result <= _cbOut_result_T_19 @[MicrocodeCB.scala 146:55]
                                        cbOut_flagC <= cbOut_c_6 @[MicrocodeCB.scala 146:88]
                        node _cbOut_flagZ_T_1 = eq(cbOut_result, UInt<1>("h0")) @[MicrocodeCB.scala 148:27]
                        cbOut_flagZ <= _cbOut_flagZ_T_1 @[MicrocodeCB.scala 148:17]
                        cbOut_flagN <= UInt<1>("h0") @[MicrocodeCB.scala 149:17]
                        cbOut_flagH <= UInt<1>("h0") @[MicrocodeCB.scala 150:17]
                      else :
                        node _cbOut_T_13 = eq(UInt<1>("h1"), cbOut_group) @[MicrocodeCB.scala 134:21]
                        when _cbOut_T_13 : @[MicrocodeCB.scala 134:21]
                          node _cbOut_flagZ_T_2 = dshr(CB_imm8, cbOut_bitIdx) @[MicrocodeCB.scala 155:28]
                          node _cbOut_flagZ_T_3 = bits(_cbOut_flagZ_T_2, 0, 0) @[MicrocodeCB.scala 155:28]
                          node _cbOut_flagZ_T_4 = eq(_cbOut_flagZ_T_3, UInt<1>("h0")) @[MicrocodeCB.scala 155:20]
                          cbOut_flagZ <= _cbOut_flagZ_T_4 @[MicrocodeCB.scala 155:17]
                          cbOut_flagN <= UInt<1>("h0") @[MicrocodeCB.scala 156:17]
                          cbOut_flagH <= UInt<1>("h1") @[MicrocodeCB.scala 157:17]
                        else :
                          node _cbOut_T_14 = eq(UInt<2>("h2"), cbOut_group) @[MicrocodeCB.scala 134:21]
                          when _cbOut_T_14 : @[MicrocodeCB.scala 134:21]
                            node _cbOut_result_T_20 = dshl(UInt<1>("h1"), cbOut_bitIdx) @[MicrocodeCB.scala 162:37]
                            node _cbOut_result_T_21 = not(_cbOut_result_T_20) @[MicrocodeCB.scala 162:31]
                            node _cbOut_result_T_22 = and(CB_imm8, _cbOut_result_T_21) @[MicrocodeCB.scala 162:29]
                            cbOut_result <= _cbOut_result_T_22 @[MicrocodeCB.scala 162:18]
                          else :
                            node _cbOut_T_15 = eq(UInt<2>("h3"), cbOut_group) @[MicrocodeCB.scala 134:21]
                            when _cbOut_T_15 : @[MicrocodeCB.scala 134:21]
                              node _cbOut_result_T_23 = dshl(UInt<1>("h1"), cbOut_bitIdx) @[MicrocodeCB.scala 167:36]
                              node _cbOut_result_T_24 = or(CB_imm8, _cbOut_result_T_23) @[MicrocodeCB.scala 167:29]
                              cbOut_result <= _cbOut_result_T_24 @[MicrocodeCB.scala 167:18]
                      node cbOut_out_F_lo = cat(cbOut_flagC, UInt<4>("h0")) @[Cat.scala 33:92]
                      node cbOut_out_F_hi_hi = cat(cbOut_flagZ, cbOut_flagN) @[Cat.scala 33:92]
                      node cbOut_out_F_hi = cat(cbOut_out_F_hi_hi, cbOut_flagH) @[Cat.scala 33:92]
                      node _cbOut_out_F_T = cat(cbOut_out_F_hi, cbOut_out_F_lo) @[Cat.scala 33:92]
                      cbOut.F <= _cbOut_out_F_T @[MicrocodeCB.scala 171:13]
                      node _cbOut_T_16 = eq(cbOut_isHL, UInt<1>("h0")) @[MicrocodeCB.scala 173:12]
                      when _cbOut_T_16 : @[MicrocodeCB.scala 173:19]
                        node _cbOut_T_17 = eq(UInt<1>("h0"), cbOut_regIdx) @[MicrocodeCB.scala 84:17]
                        when _cbOut_T_17 : @[MicrocodeCB.scala 84:17]
                          cbOut.B <= cbOut_result @[MicrocodeCB.scala 85:25]
                        else :
                          node _cbOut_T_18 = eq(UInt<1>("h1"), cbOut_regIdx) @[MicrocodeCB.scala 84:17]
                          when _cbOut_T_18 : @[MicrocodeCB.scala 84:17]
                            cbOut.C <= cbOut_result @[MicrocodeCB.scala 86:25]
                          else :
                            node _cbOut_T_19 = eq(UInt<2>("h2"), cbOut_regIdx) @[MicrocodeCB.scala 84:17]
                            when _cbOut_T_19 : @[MicrocodeCB.scala 84:17]
                              cbOut.D <= cbOut_result @[MicrocodeCB.scala 87:25]
                            else :
                              node _cbOut_T_20 = eq(UInt<2>("h3"), cbOut_regIdx) @[MicrocodeCB.scala 84:17]
                              when _cbOut_T_20 : @[MicrocodeCB.scala 84:17]
                                cbOut.E <= cbOut_result @[MicrocodeCB.scala 88:25]
                              else :
                                node _cbOut_T_21 = eq(UInt<3>("h4"), cbOut_regIdx) @[MicrocodeCB.scala 84:17]
                                when _cbOut_T_21 : @[MicrocodeCB.scala 84:17]
                                  cbOut.H <= cbOut_result @[MicrocodeCB.scala 89:25]
                                else :
                                  node _cbOut_T_22 = eq(UInt<3>("h5"), cbOut_regIdx) @[MicrocodeCB.scala 84:17]
                                  when _cbOut_T_22 : @[MicrocodeCB.scala 84:17]
                                    cbOut.L <= cbOut_result @[MicrocodeCB.scala 90:25]
                                  else :
                                    node _cbOut_T_23 = eq(UInt<3>("h7"), cbOut_regIdx) @[MicrocodeCB.scala 84:17]
                                    when _cbOut_T_23 : @[MicrocodeCB.scala 84:17]
                                      cbOut.A <= cbOut_result @[MicrocodeCB.scala 91:25]
                        node _cbOut_T_24 = eq(tcycle, UInt<2>("h3")) @[MicrocodeCB.scala 175:21]
                        when _cbOut_T_24 : @[MicrocodeCB.scala 175:30]
                          cbOut.done <= UInt<1>("h1") @[MicrocodeCB.scala 175:41]
                      else :
                        cbOut.imm8 <= cbOut_result @[MicrocodeCB.scala 177:18]
                        node _cbOut_T_25 = eq(tcycle, UInt<2>("h3")) @[MicrocodeCB.scala 178:21]
                        when _cbOut_T_25 : @[MicrocodeCB.scala 178:30]
                          cbOut.next_mcycle <= UInt<2>("h3") @[MicrocodeCB.scala 178:48]
                    node _cbOut_T_26 = eq(mcycle, UInt<2>("h3")) @[MicrocodeCB.scala 185:17]
                    when _cbOut_T_26 : @[MicrocodeCB.scala 185:26]
                      mcBus.memAddr <= cbOut_HL @[MicrocodeCB.scala 186:18]
                      mcBus.memWrite <= UInt<1>("h1") @[MicrocodeCB.scala 187:19]
                      mcBus.memWriteData <= CB_imm8 @[MicrocodeCB.scala 188:23]
                      node _cbOut_T_27 = eq(tcycle, UInt<2>("h3")) @[MicrocodeCB.scala 189:19]
                      when _cbOut_T_27 : @[MicrocodeCB.scala 189:28]
                        cbOut.done <= UInt<1>("h1") @[MicrocodeCB.scala 189:39]
                    busAddr <= mcBus.memAddr @[LR35902_Core.scala 480:22]
                    busRead <= mcBus.memRead @[LR35902_Core.scala 481:22]
                    busWrite <= mcBus.memWrite @[LR35902_Core.scala 482:22]
                    busWriteData <= mcBus.memWriteData @[LR35902_Core.scala 483:22]
                    node _T_43 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 486:21]
                    when _T_43 : @[LR35902_Core.scala 486:30]
                      A <= cbOut.A @[LR35902_Core.scala 488:14]
                      F <= cbOut.F @[LR35902_Core.scala 489:14]
                      B <= cbOut.B @[LR35902_Core.scala 490:14]
                      C <= cbOut.C @[LR35902_Core.scala 491:14]
                      D <= cbOut.D @[LR35902_Core.scala 492:14]
                      E <= cbOut.E @[LR35902_Core.scala 493:14]
                      H <= cbOut.H @[LR35902_Core.scala 494:14]
                      L <= cbOut.L @[LR35902_Core.scala 495:14]
                      CB_imm8 <= cbOut.imm8 @[LR35902_Core.scala 497:19]
                      A_sampled <= cbOut.A @[LR35902_Core.scala 500:22]
                      F_sampled <= cbOut.F @[LR35902_Core.scala 501:22]
                      B_sampled <= cbOut.B @[LR35902_Core.scala 502:22]
                      C_sampled <= cbOut.C @[LR35902_Core.scala 503:22]
                      D_sampled <= cbOut.D @[LR35902_Core.scala 504:22]
                      E_sampled <= cbOut.E @[LR35902_Core.scala 505:22]
                      H_sampled <= cbOut.H @[LR35902_Core.scala 506:22]
                      L_sampled <= cbOut.L @[LR35902_Core.scala 507:22]
                      when cbOut.done : @[LR35902_Core.scala 509:28]
                        mcycle <= UInt<1>("h0") @[LR35902_Core.scala 510:20]
                        state <= UInt<3>("h0") @[LR35902_Core.scala 511:20]
                      else :
                        mcycle <= cbOut.next_mcycle @[LR35902_Core.scala 513:20]
                  else :
                    busAddr <= mcBus.memAddr @[LR35902_Core.scala 519:22]
                    busRead <= mcBus.memRead @[LR35902_Core.scala 520:22]
                    busWrite <= mcBus.memWrite @[LR35902_Core.scala 521:22]
                    busWriteData <= mcBus.memWriteData @[LR35902_Core.scala 522:22]
                    node _T_44 = eq(tcycle, UInt<2>("h3")) @[LR35902_Core.scala 525:21]
                    when _T_44 : @[LR35902_Core.scala 525:30]
                      node _T_45 = eq(IR, UInt<8>("hcd")) @[LR35902_Core.scala 527:19]
                      node _T_46 = eq(IR, UInt<8>("hc9")) @[LR35902_Core.scala 527:37]
                      node _T_47 = or(_T_45, _T_46) @[LR35902_Core.scala 527:31]
                      when _T_47 : @[LR35902_Core.scala 527:50]
                        skip
                      node _T_48 = neq(u.PC, PC_sampled) @[LR35902_Core.scala 532:21]
                      when _T_48 : @[LR35902_Core.scala 532:37]
                        PC <= u.PC @[LR35902_Core.scala 533:16]
                      SP <= u.SP @[LR35902_Core.scala 535:14]
                      A <= u.A @[LR35902_Core.scala 536:14]
                      F <= u.F @[LR35902_Core.scala 537:14]
                      B <= u.B @[LR35902_Core.scala 538:14]
                      C <= u.C @[LR35902_Core.scala 539:14]
                      D <= u.D @[LR35902_Core.scala 540:14]
                      E <= u.E @[LR35902_Core.scala 541:14]
                      H <= u.H @[LR35902_Core.scala 542:14]
                      L <= u.L @[LR35902_Core.scala 543:14]
                      PC_sampled <= u.PC @[LR35902_Core.scala 547:22]
                      SP_sampled <= u.SP @[LR35902_Core.scala 548:22]
                      A_sampled <= u.A @[LR35902_Core.scala 549:22]
                      F_sampled <= u.F @[LR35902_Core.scala 550:22]
                      B_sampled <= u.B @[LR35902_Core.scala 551:22]
                      C_sampled <= u.C @[LR35902_Core.scala 552:22]
                      D_sampled <= u.D @[LR35902_Core.scala 553:22]
                      E_sampled <= u.E @[LR35902_Core.scala 554:22]
                      H_sampled <= u.H @[LR35902_Core.scala 555:22]
                      L_sampled <= u.L @[LR35902_Core.scala 556:22]
                      IME <= u.IME @[LR35902_Core.scala 560:23]
                      IME_pending <= u.IME_pending @[LR35902_Core.scala 561:23]
                      node _T_49 = and(u.done, IME_pending) @[LR35902_Core.scala 563:24]
                      when _T_49 : @[LR35902_Core.scala 563:40]
                        IME <= UInt<1>("h1") @[LR35902_Core.scala 564:17]
                        IME_pending <= UInt<1>("h0") @[LR35902_Core.scala 565:25]
                      when u.done : @[LR35902_Core.scala 568:24]
                        mcycle <= UInt<1>("h0") @[LR35902_Core.scala 569:20]
                        state <= UInt<3>("h0") @[LR35902_Core.scala 570:20]
                      else :
                        mcycle <= u.next_mcycle @[LR35902_Core.scala 572:20]
                else :
                  node _T_50 = eq(UInt<3>("h6"), state) @[LR35902_Core.scala 211:17]
                  when _T_50 : @[LR35902_Core.scala 211:17]
                    node _pending_T = and(io.ieReg, io.ifReg) @[LR35902_Core.scala 587:31]
                    node pending = orr(_pending_T) @[LR35902_Core.scala 587:43]
                    when pending : @[LR35902_Core.scala 589:22]
                      halted <= UInt<1>("h0") @[LR35902_Core.scala 591:16]
                      when IME : @[LR35902_Core.scala 593:20]
                        irqVectorLatched <= intr.io.irq_vector @[LR35902_Core.scala 597:28]
                        irqIndexLatched <= intr.io.irq_index @[LR35902_Core.scala 598:28]
                        IME <= UInt<1>("h0") @[LR35902_Core.scala 600:18]
                        mcycle <= UInt<1>("h0") @[LR35902_Core.scala 601:18]
                        tcycle <= UInt<1>("h0") @[LR35902_Core.scala 602:18]
                        state <= UInt<3>("h7") @[LR35902_Core.scala 603:18]
                      else :
                        mcycle <= UInt<1>("h0") @[LR35902_Core.scala 611:18]
                        tcycle <= UInt<1>("h0") @[LR35902_Core.scala 612:18]
                        state <= UInt<3>("h0") @[LR35902_Core.scala 613:18]
                    else :
                      halted <= UInt<1>("h1") @[LR35902_Core.scala 620:16]
                      mcycle <= mcycle @[LR35902_Core.scala 624:16]
                      tcycle <= tcycle @[LR35902_Core.scala 625:16]
    io.memAddr <= busAddr @[LR35902_Core.scala 638:19]
    io.memRead <= busRead @[LR35902_Core.scala 639:19]
    io.memWrite <= busWrite @[LR35902_Core.scala 640:19]
    io.memWriteData <= busWriteData @[LR35902_Core.scala 641:19]
    io.dbg_pc <= PC @[LR35902_Core.scala 643:17]
    io.dbg_opcode <= IR @[LR35902_Core.scala 644:17]
    io.dbg_sp <= SP @[LR35902_Core.scala 645:17]
    io.dbg_a <= A @[LR35902_Core.scala 647:12]
    io.dbg_f <= F @[LR35902_Core.scala 648:12]
    io.dbg_b <= B @[LR35902_Core.scala 649:12]
    io.dbg_c <= C @[LR35902_Core.scala 650:12]
    io.dbg_d <= D @[LR35902_Core.scala 651:12]
    io.dbg_e <= E @[LR35902_Core.scala 652:12]
    io.dbg_h <= H @[LR35902_Core.scala 653:12]
    io.dbg_l <= L @[LR35902_Core.scala 654:12]
    io.dbg_state <= state @[LR35902_Core.scala 656:17]
    io.dbg_tcycle <= tcycle @[LR35902_Core.scala 657:17]
    io.dbg_mcycle <= mcycle @[LR35902_Core.scala 658:17]
    io.dbg_IR <= IR @[LR35902_Core.scala 659:17]

  module VRAM :
    input clock : Clock
    input reset : Reset
    output io : { flip addr : UInt<13>, flip read : UInt<1>, flip write : UInt<1>, flip wdata : UInt<8>, rdata : UInt<8>}

    smem mem : UInt<8> [8192] @[VRAM.scala 16:24]
    wire _io_rdata_WIRE : UInt @[VRAM.scala 20:23]
    _io_rdata_WIRE is invalid @[VRAM.scala 20:23]
    when io.read : @[VRAM.scala 20:23]
      _io_rdata_WIRE <= io.addr @[VRAM.scala 20:23]
      node _io_rdata_T = or(_io_rdata_WIRE, UInt<13>("h0")) @[VRAM.scala 20:23]
      node _io_rdata_T_1 = bits(_io_rdata_T, 12, 0) @[VRAM.scala 20:23]
      read mport io_rdata_MPORT = mem[_io_rdata_T_1], clock @[VRAM.scala 20:23]
    io.rdata <= io_rdata_MPORT @[VRAM.scala 20:12]
    when io.write : @[VRAM.scala 23:18]
      write mport MPORT = mem[io.addr], clock
      MPORT <= io.wdata


  module PixelFIFO :
    input clock : Clock
    input reset : Reset
    output io : { flip pushEnable : UInt<1>, flip pushPixels : UInt<2>[8], flip popEnable : UInt<1>, outPixel : UInt<2>, hasData : UInt<1>, size : UInt<6>, flip clear : UInt<1>}

    reg fifo : UInt<2>[32], clock with :
      reset => (UInt<1>("h0"), fifo) @[PPU.scala 17:17]
    reg head : UInt<5>, clock with :
      reset => (reset, UInt<5>("h0")) @[PPU.scala 18:21]
    reg tail : UInt<5>, clock with :
      reset => (reset, UInt<5>("h0")) @[PPU.scala 19:21]
    reg count : UInt<6>, clock with :
      reset => (reset, UInt<6>("h0")) @[PPU.scala 20:22]
    io.outPixel <= fifo[head] @[PPU.scala 22:15]
    node _io_hasData_T = gt(count, UInt<1>("h0")) @[PPU.scala 23:24]
    io.hasData <= _io_hasData_T @[PPU.scala 23:15]
    io.size <= count @[PPU.scala 24:15]
    when io.clear : @[PPU.scala 26:18]
      head <= UInt<1>("h0") @[PPU.scala 27:10]
      tail <= UInt<1>("h0") @[PPU.scala 28:10]
      count <= UInt<1>("h0") @[PPU.scala 29:11]
    else :
      node _T = and(io.pushEnable, io.popEnable) @[PPU.scala 30:28]
      when _T : @[PPU.scala 30:45]
        node _T_1 = add(tail, UInt<1>("h0")) @[PPU.scala 32:18]
        node _T_2 = tail(_T_1, 1) @[PPU.scala 32:18]
        node _T_3 = and(_T_2, UInt<5>("h1f")) @[PPU.scala 32:26]
        fifo[_T_3] <= io.pushPixels[0] @[PPU.scala 32:36]
        node _T_4 = add(tail, UInt<1>("h1")) @[PPU.scala 32:18]
        node _T_5 = tail(_T_4, 1) @[PPU.scala 32:18]
        node _T_6 = and(_T_5, UInt<5>("h1f")) @[PPU.scala 32:26]
        fifo[_T_6] <= io.pushPixels[1] @[PPU.scala 32:36]
        node _T_7 = add(tail, UInt<2>("h2")) @[PPU.scala 32:18]
        node _T_8 = tail(_T_7, 1) @[PPU.scala 32:18]
        node _T_9 = and(_T_8, UInt<5>("h1f")) @[PPU.scala 32:26]
        fifo[_T_9] <= io.pushPixels[2] @[PPU.scala 32:36]
        node _T_10 = add(tail, UInt<2>("h3")) @[PPU.scala 32:18]
        node _T_11 = tail(_T_10, 1) @[PPU.scala 32:18]
        node _T_12 = and(_T_11, UInt<5>("h1f")) @[PPU.scala 32:26]
        fifo[_T_12] <= io.pushPixels[3] @[PPU.scala 32:36]
        node _T_13 = add(tail, UInt<3>("h4")) @[PPU.scala 32:18]
        node _T_14 = tail(_T_13, 1) @[PPU.scala 32:18]
        node _T_15 = and(_T_14, UInt<5>("h1f")) @[PPU.scala 32:26]
        fifo[_T_15] <= io.pushPixels[4] @[PPU.scala 32:36]
        node _T_16 = add(tail, UInt<3>("h5")) @[PPU.scala 32:18]
        node _T_17 = tail(_T_16, 1) @[PPU.scala 32:18]
        node _T_18 = and(_T_17, UInt<5>("h1f")) @[PPU.scala 32:26]
        fifo[_T_18] <= io.pushPixels[5] @[PPU.scala 32:36]
        node _T_19 = add(tail, UInt<3>("h6")) @[PPU.scala 32:18]
        node _T_20 = tail(_T_19, 1) @[PPU.scala 32:18]
        node _T_21 = and(_T_20, UInt<5>("h1f")) @[PPU.scala 32:26]
        fifo[_T_21] <= io.pushPixels[6] @[PPU.scala 32:36]
        node _T_22 = add(tail, UInt<3>("h7")) @[PPU.scala 32:18]
        node _T_23 = tail(_T_22, 1) @[PPU.scala 32:18]
        node _T_24 = and(_T_23, UInt<5>("h1f")) @[PPU.scala 32:26]
        fifo[_T_24] <= io.pushPixels[7] @[PPU.scala 32:36]
        fifo[head] is invalid @[PPU.scala 34:16]
        node _tail_T = add(tail, UInt<4>("h8")) @[PPU.scala 35:19]
        node _tail_T_1 = tail(_tail_T, 1) @[PPU.scala 35:19]
        node _tail_T_2 = and(_tail_T_1, UInt<5>("h1f")) @[PPU.scala 35:27]
        tail <= _tail_T_2 @[PPU.scala 35:10]
        node _head_T = add(head, UInt<1>("h1")) @[PPU.scala 36:19]
        node _head_T_1 = tail(_head_T, 1) @[PPU.scala 36:19]
        node _head_T_2 = and(_head_T_1, UInt<5>("h1f")) @[PPU.scala 36:27]
        head <= _head_T_2 @[PPU.scala 36:10]
        node _count_T = add(count, UInt<3>("h7")) @[PPU.scala 37:20]
        node _count_T_1 = tail(_count_T, 1) @[PPU.scala 37:20]
        count <= _count_T_1 @[PPU.scala 37:11]
      else :
        when io.pushEnable : @[PPU.scala 38:29]
          node _T_25 = add(tail, UInt<1>("h0")) @[PPU.scala 40:18]
          node _T_26 = tail(_T_25, 1) @[PPU.scala 40:18]
          node _T_27 = and(_T_26, UInt<5>("h1f")) @[PPU.scala 40:26]
          fifo[_T_27] <= io.pushPixels[0] @[PPU.scala 40:36]
          node _T_28 = add(tail, UInt<1>("h1")) @[PPU.scala 40:18]
          node _T_29 = tail(_T_28, 1) @[PPU.scala 40:18]
          node _T_30 = and(_T_29, UInt<5>("h1f")) @[PPU.scala 40:26]
          fifo[_T_30] <= io.pushPixels[1] @[PPU.scala 40:36]
          node _T_31 = add(tail, UInt<2>("h2")) @[PPU.scala 40:18]
          node _T_32 = tail(_T_31, 1) @[PPU.scala 40:18]
          node _T_33 = and(_T_32, UInt<5>("h1f")) @[PPU.scala 40:26]
          fifo[_T_33] <= io.pushPixels[2] @[PPU.scala 40:36]
          node _T_34 = add(tail, UInt<2>("h3")) @[PPU.scala 40:18]
          node _T_35 = tail(_T_34, 1) @[PPU.scala 40:18]
          node _T_36 = and(_T_35, UInt<5>("h1f")) @[PPU.scala 40:26]
          fifo[_T_36] <= io.pushPixels[3] @[PPU.scala 40:36]
          node _T_37 = add(tail, UInt<3>("h4")) @[PPU.scala 40:18]
          node _T_38 = tail(_T_37, 1) @[PPU.scala 40:18]
          node _T_39 = and(_T_38, UInt<5>("h1f")) @[PPU.scala 40:26]
          fifo[_T_39] <= io.pushPixels[4] @[PPU.scala 40:36]
          node _T_40 = add(tail, UInt<3>("h5")) @[PPU.scala 40:18]
          node _T_41 = tail(_T_40, 1) @[PPU.scala 40:18]
          node _T_42 = and(_T_41, UInt<5>("h1f")) @[PPU.scala 40:26]
          fifo[_T_42] <= io.pushPixels[5] @[PPU.scala 40:36]
          node _T_43 = add(tail, UInt<3>("h6")) @[PPU.scala 40:18]
          node _T_44 = tail(_T_43, 1) @[PPU.scala 40:18]
          node _T_45 = and(_T_44, UInt<5>("h1f")) @[PPU.scala 40:26]
          fifo[_T_45] <= io.pushPixels[6] @[PPU.scala 40:36]
          node _T_46 = add(tail, UInt<3>("h7")) @[PPU.scala 40:18]
          node _T_47 = tail(_T_46, 1) @[PPU.scala 40:18]
          node _T_48 = and(_T_47, UInt<5>("h1f")) @[PPU.scala 40:26]
          fifo[_T_48] <= io.pushPixels[7] @[PPU.scala 40:36]
          node _tail_T_3 = add(tail, UInt<4>("h8")) @[PPU.scala 42:19]
          node _tail_T_4 = tail(_tail_T_3, 1) @[PPU.scala 42:19]
          node _tail_T_5 = and(_tail_T_4, UInt<5>("h1f")) @[PPU.scala 42:27]
          tail <= _tail_T_5 @[PPU.scala 42:10]
          node _count_T_2 = add(count, UInt<4>("h8")) @[PPU.scala 43:20]
          node _count_T_3 = tail(_count_T_2, 1) @[PPU.scala 43:20]
          count <= _count_T_3 @[PPU.scala 43:11]
        else :
          node _T_49 = and(io.popEnable, io.hasData) @[PPU.scala 44:27]
          when _T_49 : @[PPU.scala 44:42]
            fifo[head] is invalid @[PPU.scala 45:16]
            node _head_T_3 = add(head, UInt<1>("h1")) @[PPU.scala 46:19]
            node _head_T_4 = tail(_head_T_3, 1) @[PPU.scala 46:19]
            node _head_T_5 = and(_head_T_4, UInt<5>("h1f")) @[PPU.scala 46:27]
            head <= _head_T_5 @[PPU.scala 46:10]
            node _count_T_4 = sub(count, UInt<1>("h1")) @[PPU.scala 47:20]
            node _count_T_5 = tail(_count_T_4, 1) @[PPU.scala 47:20]
            count <= _count_T_5 @[PPU.scala 47:11]


  module PPU :
    input clock : Clock
    input reset : Reset
    output io : { vramAddr : UInt<13>, vramRead : UInt<1>, flip vramData : UInt<8>, oamAddr : UInt<8>, oamRead : UInt<1>, flip oamData : UInt<8>, flip lcdc : UInt<8>, flip stat : UInt<8>, flip scy : UInt<8>, flip scx : UInt<8>, ly : UInt<8>, flip lyc : UInt<8>, flip bgp : UInt<8>, flip obp0 : UInt<8>, flip obp1 : UInt<8>, flip wy : UInt<8>, flip wx : UInt<8>, vblankIRQ : UInt<1>, lcdStatIRQ : UInt<1>, pixelValid : UInt<1>, pixelX : UInt<8>, pixelY : UInt<8>, pixelColor : UInt<2>, hblank : UInt<1>, vblank : UInt<1>, lcdEnable : UInt<1>}

    reg dotCounter : UInt<9>, clock with :
      reset => (reset, UInt<9>("h0")) @[PPU.scala 101:27]
    reg lyReg : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[PPU.scala 102:22]
    node lcdEnable = bits(io.lcdc, 7, 7) @[PPU.scala 104:26]
    reg vblankIRQ : UInt<1>, clock with :
      reset => (reset, UInt<1>("h0")) @[PPU.scala 117:26]
    reg statIRQ : UInt<1>, clock with :
      reset => (reset, UInt<1>("h0")) @[PPU.scala 118:24]
    reg pixelsDrawnThisLine : UInt<9>, clock with :
      reset => (reset, UInt<9>("h0")) @[PPU.scala 123:36]
    node _T = eq(lcdEnable, UInt<1>("h0")) @[PPU.scala 130:8]
    when _T : @[PPU.scala 130:20]
      dotCounter <= UInt<1>("h0") @[PPU.scala 131:16]
      lyReg <= UInt<1>("h0") @[PPU.scala 132:16]
      vblankIRQ <= UInt<1>("h0") @[PPU.scala 133:16]
      statIRQ <= UInt<1>("h0") @[PPU.scala 134:16]
    else :
      node _dotCounter_T = add(dotCounter, UInt<1>("h1")) @[PPU.scala 136:30]
      node _dotCounter_T_1 = tail(_dotCounter_T, 1) @[PPU.scala 136:30]
      dotCounter <= _dotCounter_T_1 @[PPU.scala 136:16]
      node _T_1 = sub(UInt<9>("h1c8"), UInt<1>("h1")) @[PPU.scala 139:44]
      node _T_2 = tail(_T_1, 1) @[PPU.scala 139:44]
      node _T_3 = eq(dotCounter, _T_2) @[PPU.scala 139:21]
      when _T_3 : @[PPU.scala 139:52]
        dotCounter <= UInt<1>("h0") @[PPU.scala 140:18]
        node _T_4 = eq(lyReg, UInt<8>("h99")) @[PPU.scala 142:18]
        when _T_4 : @[PPU.scala 142:29]
          lyReg <= UInt<1>("h0") @[PPU.scala 143:15]
          vblankIRQ <= UInt<1>("h0") @[PPU.scala 144:19]
        else :
          node _lyReg_T = add(lyReg, UInt<1>("h1")) @[PPU.scala 146:24]
          node _lyReg_T_1 = tail(_lyReg_T, 1) @[PPU.scala 146:24]
          lyReg <= _lyReg_T_1 @[PPU.scala 146:15]
          node _T_5 = eq(lyReg, UInt<8>("h8f")) @[PPU.scala 149:20]
          when _T_5 : @[PPU.scala 149:31]
            vblankIRQ <= UInt<1>("h1") @[PPU.scala 150:21]
          else :
            vblankIRQ <= UInt<1>("h0") @[PPU.scala 152:21]
    inst vram of VRAM @[PPU.scala 164:20]
    vram.clock <= clock
    vram.reset <= reset
    vram.io.addr <= io.vramAddr @[PPU.scala 167:17]
    vram.io.read <= io.vramRead @[PPU.scala 168:17]
    vram.io.write <= UInt<1>("h0") @[PPU.scala 169:17]
    vram.io.wdata <= UInt<1>("h0") @[PPU.scala 170:17]
    node windowTileMap = bits(io.lcdc, 6, 6) @[PPU.scala 172:31]
    node windowEnable = bits(io.lcdc, 5, 5) @[PPU.scala 173:31]
    node bgWindowTiles = bits(io.lcdc, 4, 4) @[PPU.scala 174:31]
    node bgTileMap = bits(io.lcdc, 3, 3) @[PPU.scala 175:31]
    node objSize = bits(io.lcdc, 2, 2) @[PPU.scala 176:31]
    node objEnable = bits(io.lcdc, 1, 1) @[PPU.scala 177:31]
    node bgWindowEnable = bits(io.lcdc, 0, 0) @[PPU.scala 178:31]
    inst pixelFIFO of PixelFIFO @[PPU.scala 180:25]
    pixelFIFO.clock <= clock
    pixelFIFO.reset <= reset
    pixelFIFO.io.pushEnable <= UInt<1>("h0") @[PPU.scala 181:27]
    pixelFIFO.io.popEnable <= UInt<1>("h0") @[PPU.scala 182:27]
    wire _WIRE : UInt<2>[8] @[PPU.scala 183:37]
    _WIRE[0] <= UInt<2>("h0") @[PPU.scala 183:37]
    _WIRE[1] <= UInt<2>("h0") @[PPU.scala 183:37]
    _WIRE[2] <= UInt<2>("h0") @[PPU.scala 183:37]
    _WIRE[3] <= UInt<2>("h0") @[PPU.scala 183:37]
    _WIRE[4] <= UInt<2>("h0") @[PPU.scala 183:37]
    _WIRE[5] <= UInt<2>("h0") @[PPU.scala 183:37]
    _WIRE[6] <= UInt<2>("h0") @[PPU.scala 183:37]
    _WIRE[7] <= UInt<2>("h0") @[PPU.scala 183:37]
    pixelFIFO.io.pushPixels[0] <= _WIRE[0] @[PPU.scala 183:27]
    pixelFIFO.io.pushPixels[1] <= _WIRE[1] @[PPU.scala 183:27]
    pixelFIFO.io.pushPixels[2] <= _WIRE[2] @[PPU.scala 183:27]
    pixelFIFO.io.pushPixels[3] <= _WIRE[3] @[PPU.scala 183:27]
    pixelFIFO.io.pushPixels[4] <= _WIRE[4] @[PPU.scala 183:27]
    pixelFIFO.io.pushPixels[5] <= _WIRE[5] @[PPU.scala 183:27]
    pixelFIFO.io.pushPixels[6] <= _WIRE[6] @[PPU.scala 183:27]
    pixelFIFO.io.pushPixels[7] <= _WIRE[7] @[PPU.scala 183:27]
    pixelFIFO.io.clear <= UInt<1>("h0") @[PPU.scala 184:22]
    reg fetcherState : UInt<3>, clock with :
      reset => (reset, UInt<3>("h0")) @[PPU.scala 197:29]
    reg fetcherX : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[PPU.scala 198:25]
    reg fetcherDotCount : UInt<2>, clock with :
      reset => (reset, UInt<2>("h0")) @[PPU.scala 199:32]
    reg tileNum : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[PPU.scala 200:24]
    reg tileDataLow : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[PPU.scala 201:28]
    reg tileDataHigh : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[PPU.scala 202:29]
    reg xPos : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[PPU.scala 203:21]
    reg discardPixels : UInt<4>, clock with :
      reset => (reset, UInt<4>("h0")) @[PPU.scala 204:30]
    wire pixelValid : UInt<1> @[PPU.scala 206:31]
    pixelValid <= UInt<1>("h0") @[PPU.scala 206:31]
    wire pixelColor : UInt<2> @[PPU.scala 207:31]
    pixelColor <= UInt<2>("h0") @[PPU.scala 207:31]
    reg pixelsOutputThisLine : UInt<9>, clock with :
      reset => (reset, UInt<9>("h0")) @[PPU.scala 210:37]
    node _T_6 = eq(dotCounter, UInt<1>("h0")) @[PPU.scala 212:19]
    when _T_6 : @[PPU.scala 212:28]
      pixelsOutputThisLine <= UInt<1>("h0") @[PPU.scala 213:26]
    else :
      node _T_7 = lt(lyReg, UInt<8>("h90")) @[PPU.scala 214:34]
      node _T_8 = and(pixelValid, _T_7) @[PPU.scala 214:25]
      when _T_8 : @[PPU.scala 214:50]
        node _pixelsOutputThisLine_T = add(pixelsOutputThisLine, UInt<1>("h1")) @[PPU.scala 215:50]
        node _pixelsOutputThisLine_T_1 = tail(_pixelsOutputThisLine_T, 1) @[PPU.scala 215:50]
        pixelsOutputThisLine <= _pixelsOutputThisLine_T_1 @[PPU.scala 215:26]
    io.vramAddr <= UInt<1>("h0") @[PPU.scala 218:15]
    io.vramRead <= UInt<1>("h0") @[PPU.scala 219:15]
    io.oamAddr <= UInt<1>("h0") @[PPU.scala 220:14]
    io.oamRead <= UInt<1>("h0") @[PPU.scala 221:14]
    wire mode : UInt<2> @[PPU.scala 224:18]
    node _T_9 = geq(lyReg, UInt<8>("h90")) @[PPU.scala 225:14]
    when _T_9 : @[PPU.scala 225:31]
      mode <= UInt<2>("h1") @[PPU.scala 226:10]
    else :
      node _T_10 = lt(dotCounter, UInt<7>("h50")) @[PPU.scala 227:25]
      when _T_10 : @[PPU.scala 227:33]
        mode <= UInt<2>("h2") @[PPU.scala 228:10]
      else :
        node _T_11 = lt(xPos, UInt<8>("ha0")) @[PPU.scala 229:19]
        node _T_12 = lt(lyReg, UInt<8>("h90")) @[PPU.scala 229:36]
        node _T_13 = and(_T_11, _T_12) @[PPU.scala 229:27]
        when _T_13 : @[PPU.scala 229:52]
          mode <= UInt<2>("h3") @[PPU.scala 232:10]
        else :
          mode <= UInt<2>("h0") @[PPU.scala 234:10]
    node _T_14 = eq(dotCounter, UInt<1>("h0")) @[PPU.scala 238:19]
    node _T_15 = lt(lyReg, UInt<8>("h90")) @[PPU.scala 238:36]
    node _T_16 = and(_T_14, _T_15) @[PPU.scala 238:27]
    node _T_17 = and(_T_16, lcdEnable) @[PPU.scala 238:51]
    when _T_17 : @[PPU.scala 238:65]
      xPos <= UInt<1>("h0") @[PPU.scala 239:10]
      fetcherX <= UInt<1>("h0") @[PPU.scala 240:14]
      fetcherState <= UInt<3>("h0") @[PPU.scala 241:18]
      fetcherDotCount <= UInt<1>("h0") @[PPU.scala 242:21]
      node _discardPixels_T = and(io.scx, UInt<3>("h7")) @[PPU.scala 243:30]
      discardPixels <= _discardPixels_T @[PPU.scala 243:19]
      pixelFIFO.io.clear <= UInt<1>("h1") @[PPU.scala 244:24]
      pixelsDrawnThisLine <= UInt<1>("h0") @[PPU.scala 245:25]
    node _T_18 = eq(dotCounter, UInt<1>("h1")) @[PPU.scala 249:19]
    node _T_19 = eq(lyReg, UInt<1>("h0")) @[PPU.scala 249:36]
    node _T_20 = and(_T_18, _T_19) @[PPU.scala 249:27]
    when _T_20 : @[PPU.scala 249:45]
      skip
    node _T_21 = eq(mode, UInt<2>("h3")) @[PPU.scala 255:13]
    node _T_22 = lt(lyReg, UInt<8>("h90")) @[PPU.scala 255:39]
    node _T_23 = and(_T_21, _T_22) @[PPU.scala 255:30]
    node _T_24 = and(_T_23, lcdEnable) @[PPU.scala 255:54]
    when _T_24 : @[PPU.scala 255:68]
      node _T_25 = eq(lyReg, UInt<1>("h0")) @[PPU.scala 258:16]
      node _T_26 = lt(dotCounter, UInt<8>("hfa")) @[PPU.scala 258:38]
      node _T_27 = and(_T_25, _T_26) @[PPU.scala 258:24]
      when _T_27 : @[PPU.scala 258:47]
        skip
      node _T_28 = eq(UInt<3>("h0"), fetcherState) @[PPU.scala 264:26]
      when _T_28 : @[PPU.scala 264:26]
        node mapBase = mux(bgTileMap, UInt<13>("h1c00"), UInt<13>("h1800")) @[PPU.scala 267:29]
        node _scrolledY_T = add(lyReg, io.scy) @[PPU.scala 268:33]
        node _scrolledY_T_1 = tail(_scrolledY_T, 1) @[PPU.scala 268:33]
        node scrolledY = and(_scrolledY_T_1, UInt<8>("hff")) @[PPU.scala 268:44]
        node _scrolledX_T = add(fetcherX, io.scx) @[PPU.scala 269:36]
        node _scrolledX_T_1 = tail(_scrolledX_T, 1) @[PPU.scala 269:36]
        node scrolledX = and(_scrolledX_T_1, UInt<8>("hff")) @[PPU.scala 269:47]
        node tileY = shr(scrolledY, 3) @[PPU.scala 270:37]
        node tileX = shr(scrolledX, 3) @[PPU.scala 271:37]
        node _mapAddr_T = mul(tileY, UInt<6>("h20")) @[PPU.scala 272:43]
        node _mapAddr_T_1 = add(mapBase, _mapAddr_T) @[PPU.scala 272:34]
        node _mapAddr_T_2 = tail(_mapAddr_T_1, 1) @[PPU.scala 272:34]
        node _mapAddr_T_3 = add(_mapAddr_T_2, tileX) @[PPU.scala 272:51]
        node mapAddr = tail(_mapAddr_T_3, 1) @[PPU.scala 272:51]
        node _io_vramAddr_T = bits(mapAddr, 12, 0) @[PPU.scala 274:31]
        io.vramAddr <= _io_vramAddr_T @[PPU.scala 274:21]
        io.vramRead <= UInt<1>("h1") @[PPU.scala 275:21]
        fetcherState <= UInt<3>("h2") @[PPU.scala 276:22]
      else :
        node _T_29 = eq(UInt<3>("h2"), fetcherState) @[PPU.scala 264:26]
        when _T_29 : @[PPU.scala 264:26]
          tileNum <= vram.io.rdata @[PPU.scala 280:17]
          fetcherState <= UInt<3>("h1") @[PPU.scala 281:22]
        else :
          node _T_30 = eq(UInt<3>("h1"), fetcherState) @[PPU.scala 264:26]
          when _T_30 : @[PPU.scala 264:26]
            node tileDataBase = mux(bgWindowTiles, UInt<1>("h0"), UInt<12>("h800")) @[PPU.scala 285:31]
            node _tileIndex_T = asSInt(tileNum) @[PPU.scala 288:20]
            node _tileIndex_T_1 = add(_tileIndex_T, asSInt(UInt<9>("h80"))) @[PPU.scala 288:27]
            node _tileIndex_T_2 = tail(_tileIndex_T_1, 1) @[PPU.scala 288:27]
            node _tileIndex_T_3 = asSInt(_tileIndex_T_2) @[PPU.scala 288:27]
            node _tileIndex_T_4 = asUInt(_tileIndex_T_3) @[PPU.scala 288:36]
            node tileIndex = mux(bgWindowTiles, tileNum, _tileIndex_T_4) @[PPU.scala 286:28]
            node _scrolledY_T_2 = add(lyReg, io.scy) @[PPU.scala 289:32]
            node _scrolledY_T_3 = tail(_scrolledY_T_2, 1) @[PPU.scala 289:32]
            node scrolledY_1 = and(_scrolledY_T_3, UInt<8>("hff")) @[PPU.scala 289:43]
            node pixelRow = and(scrolledY_1, UInt<3>("h7")) @[PPU.scala 290:35]
            node _tileAddr_T = mul(tileIndex, UInt<5>("h10")) @[PPU.scala 291:50]
            node _tileAddr_T_1 = add(tileDataBase, _tileAddr_T) @[PPU.scala 291:37]
            node _tileAddr_T_2 = tail(_tileAddr_T_1, 1) @[PPU.scala 291:37]
            node _tileAddr_T_3 = mul(pixelRow, UInt<2>("h2")) @[PPU.scala 291:70]
            node _tileAddr_T_4 = add(_tileAddr_T_2, _tileAddr_T_3) @[PPU.scala 291:58]
            node tileAddr = tail(_tileAddr_T_4, 1) @[PPU.scala 291:58]
            node _io_vramAddr_T_1 = bits(tileAddr, 12, 0) @[PPU.scala 293:32]
            io.vramAddr <= _io_vramAddr_T_1 @[PPU.scala 293:21]
            io.vramRead <= UInt<1>("h1") @[PPU.scala 294:21]
            fetcherState <= UInt<3>("h4") @[PPU.scala 295:22]
          else :
            node _T_31 = eq(UInt<3>("h4"), fetcherState) @[PPU.scala 264:26]
            when _T_31 : @[PPU.scala 264:26]
              tileDataLow <= vram.io.rdata @[PPU.scala 299:21]
              fetcherState <= UInt<3>("h3") @[PPU.scala 300:22]
            else :
              node _T_32 = eq(UInt<3>("h3"), fetcherState) @[PPU.scala 264:26]
              when _T_32 : @[PPU.scala 264:26]
                node tileDataBase_1 = mux(bgWindowTiles, UInt<1>("h0"), UInt<12>("h800")) @[PPU.scala 304:31]
                node _tileIndex_T_5 = asSInt(tileNum) @[PPU.scala 307:20]
                node _tileIndex_T_6 = add(_tileIndex_T_5, asSInt(UInt<9>("h80"))) @[PPU.scala 307:27]
                node _tileIndex_T_7 = tail(_tileIndex_T_6, 1) @[PPU.scala 307:27]
                node _tileIndex_T_8 = asSInt(_tileIndex_T_7) @[PPU.scala 307:27]
                node _tileIndex_T_9 = asUInt(_tileIndex_T_8) @[PPU.scala 307:36]
                node tileIndex_1 = mux(bgWindowTiles, tileNum, _tileIndex_T_9) @[PPU.scala 305:28]
                node _scrolledY_T_4 = add(lyReg, io.scy) @[PPU.scala 308:32]
                node _scrolledY_T_5 = tail(_scrolledY_T_4, 1) @[PPU.scala 308:32]
                node scrolledY_2 = and(_scrolledY_T_5, UInt<8>("hff")) @[PPU.scala 308:43]
                node pixelRow_1 = and(scrolledY_2, UInt<3>("h7")) @[PPU.scala 309:35]
                node _tileAddr_T_5 = mul(tileIndex_1, UInt<5>("h10")) @[PPU.scala 310:50]
                node _tileAddr_T_6 = add(tileDataBase_1, _tileAddr_T_5) @[PPU.scala 310:37]
                node _tileAddr_T_7 = tail(_tileAddr_T_6, 1) @[PPU.scala 310:37]
                node _tileAddr_T_8 = mul(pixelRow_1, UInt<2>("h2")) @[PPU.scala 310:70]
                node _tileAddr_T_9 = add(_tileAddr_T_7, _tileAddr_T_8) @[PPU.scala 310:58]
                node _tileAddr_T_10 = tail(_tileAddr_T_9, 1) @[PPU.scala 310:58]
                node _tileAddr_T_11 = add(_tileAddr_T_10, UInt<1>("h1")) @[PPU.scala 310:77]
                node tileAddr_1 = tail(_tileAddr_T_11, 1) @[PPU.scala 310:77]
                node _io_vramAddr_T_2 = bits(tileAddr_1, 12, 0) @[PPU.scala 312:32]
                io.vramAddr <= _io_vramAddr_T_2 @[PPU.scala 312:21]
                io.vramRead <= UInt<1>("h1") @[PPU.scala 313:21]
                fetcherState <= UInt<3>("h5") @[PPU.scala 315:22]
              else :
                node _T_33 = eq(UInt<3>("h5"), fetcherState) @[PPU.scala 264:26]
                when _T_33 : @[PPU.scala 264:26]
                  tileDataHigh <= vram.io.rdata @[PPU.scala 319:22]
                  fetcherState <= UInt<3>("h6") @[PPU.scala 320:22]
                else :
                  node _T_34 = eq(UInt<3>("h6"), fetcherState) @[PPU.scala 264:26]
                  when _T_34 : @[PPU.scala 264:26]
                    node _T_35 = leq(pixelFIFO.io.size, UInt<5>("h10")) @[PPU.scala 324:32]
                    when _T_35 : @[PPU.scala 324:41]
                      wire px : UInt<2>[8] @[PPU.scala 325:24]
                      node _lo_T = shr(tileDataLow, 7) @[PPU.scala 327:36]
                      node lo = and(_lo_T, UInt<1>("h1")) @[PPU.scala 327:49]
                      node _hi_T = shr(tileDataHigh, 7) @[PPU.scala 328:36]
                      node hi = and(_hi_T, UInt<1>("h1")) @[PPU.scala 328:49]
                      node _px_0_T = cat(hi, lo) @[Cat.scala 33:92]
                      px[0] <= _px_0_T @[PPU.scala 329:19]
                      node _lo_T_1 = shr(tileDataLow, 6) @[PPU.scala 327:36]
                      node lo_1 = and(_lo_T_1, UInt<1>("h1")) @[PPU.scala 327:49]
                      node _hi_T_1 = shr(tileDataHigh, 6) @[PPU.scala 328:36]
                      node hi_1 = and(_hi_T_1, UInt<1>("h1")) @[PPU.scala 328:49]
                      node _px_1_T = cat(hi_1, lo_1) @[Cat.scala 33:92]
                      px[1] <= _px_1_T @[PPU.scala 329:19]
                      node _lo_T_2 = shr(tileDataLow, 5) @[PPU.scala 327:36]
                      node lo_2 = and(_lo_T_2, UInt<1>("h1")) @[PPU.scala 327:49]
                      node _hi_T_2 = shr(tileDataHigh, 5) @[PPU.scala 328:36]
                      node hi_2 = and(_hi_T_2, UInt<1>("h1")) @[PPU.scala 328:49]
                      node _px_2_T = cat(hi_2, lo_2) @[Cat.scala 33:92]
                      px[2] <= _px_2_T @[PPU.scala 329:19]
                      node _lo_T_3 = shr(tileDataLow, 4) @[PPU.scala 327:36]
                      node lo_3 = and(_lo_T_3, UInt<1>("h1")) @[PPU.scala 327:49]
                      node _hi_T_3 = shr(tileDataHigh, 4) @[PPU.scala 328:36]
                      node hi_3 = and(_hi_T_3, UInt<1>("h1")) @[PPU.scala 328:49]
                      node _px_3_T = cat(hi_3, lo_3) @[Cat.scala 33:92]
                      px[3] <= _px_3_T @[PPU.scala 329:19]
                      node _lo_T_4 = shr(tileDataLow, 3) @[PPU.scala 327:36]
                      node lo_4 = and(_lo_T_4, UInt<1>("h1")) @[PPU.scala 327:49]
                      node _hi_T_4 = shr(tileDataHigh, 3) @[PPU.scala 328:36]
                      node hi_4 = and(_hi_T_4, UInt<1>("h1")) @[PPU.scala 328:49]
                      node _px_4_T = cat(hi_4, lo_4) @[Cat.scala 33:92]
                      px[4] <= _px_4_T @[PPU.scala 329:19]
                      node _lo_T_5 = shr(tileDataLow, 2) @[PPU.scala 327:36]
                      node lo_5 = and(_lo_T_5, UInt<1>("h1")) @[PPU.scala 327:49]
                      node _hi_T_5 = shr(tileDataHigh, 2) @[PPU.scala 328:36]
                      node hi_5 = and(_hi_T_5, UInt<1>("h1")) @[PPU.scala 328:49]
                      node _px_5_T = cat(hi_5, lo_5) @[Cat.scala 33:92]
                      px[5] <= _px_5_T @[PPU.scala 329:19]
                      node _lo_T_6 = shr(tileDataLow, 1) @[PPU.scala 327:36]
                      node lo_6 = and(_lo_T_6, UInt<1>("h1")) @[PPU.scala 327:49]
                      node _hi_T_6 = shr(tileDataHigh, 1) @[PPU.scala 328:36]
                      node hi_6 = and(_hi_T_6, UInt<1>("h1")) @[PPU.scala 328:49]
                      node _px_6_T = cat(hi_6, lo_6) @[Cat.scala 33:92]
                      px[6] <= _px_6_T @[PPU.scala 329:19]
                      node _lo_T_7 = shr(tileDataLow, 0) @[PPU.scala 327:36]
                      node lo_7 = and(_lo_T_7, UInt<1>("h1")) @[PPU.scala 327:49]
                      node _hi_T_7 = shr(tileDataHigh, 0) @[PPU.scala 328:36]
                      node hi_7 = and(_hi_T_7, UInt<1>("h1")) @[PPU.scala 328:49]
                      node _px_7_T = cat(hi_7, lo_7) @[Cat.scala 33:92]
                      px[7] <= _px_7_T @[PPU.scala 329:19]
                      pixelFIFO.io.pushEnable <= UInt<1>("h1") @[PPU.scala 332:35]
                      pixelFIFO.io.pushPixels[0] <= px[0] @[PPU.scala 333:35]
                      pixelFIFO.io.pushPixels[1] <= px[1] @[PPU.scala 333:35]
                      pixelFIFO.io.pushPixels[2] <= px[2] @[PPU.scala 333:35]
                      pixelFIFO.io.pushPixels[3] <= px[3] @[PPU.scala 333:35]
                      pixelFIFO.io.pushPixels[4] <= px[4] @[PPU.scala 333:35]
                      pixelFIFO.io.pushPixels[5] <= px[5] @[PPU.scala 333:35]
                      pixelFIFO.io.pushPixels[6] <= px[6] @[PPU.scala 333:35]
                      pixelFIFO.io.pushPixels[7] <= px[7] @[PPU.scala 333:35]
                      node _fetcherX_T = add(fetcherX, UInt<4>("h8")) @[PPU.scala 335:32]
                      node _fetcherX_T_1 = tail(_fetcherX_T, 1) @[PPU.scala 335:32]
                      fetcherX <= _fetcherX_T_1 @[PPU.scala 335:20]
                      fetcherState <= UInt<3>("h0") @[PPU.scala 336:24]
      node _T_36 = lt(xPos, UInt<8>("ha0")) @[PPU.scala 342:39]
      node _T_37 = and(pixelFIFO.io.hasData, _T_36) @[PPU.scala 342:31]
      when _T_37 : @[PPU.scala 342:48]
        node _T_38 = gt(discardPixels, UInt<1>("h0")) @[PPU.scala 343:26]
        when _T_38 : @[PPU.scala 343:33]
          pixelFIFO.io.popEnable <= UInt<1>("h1") @[PPU.scala 344:32]
          node _discardPixels_T_1 = sub(discardPixels, UInt<1>("h1")) @[PPU.scala 345:40]
          node _discardPixels_T_2 = tail(_discardPixels_T_1, 1) @[PPU.scala 345:40]
          discardPixels <= _discardPixels_T_2 @[PPU.scala 345:23]
        else :
          pixelFIFO.io.popEnable <= UInt<1>("h1") @[PPU.scala 347:32]
          node palShift = shl(pixelFIFO.io.outPixel, 1) @[PPU.scala 349:28]
          node _palPx_T = dshr(io.bgp, palShift) @[PPU.scala 350:29]
          node palPx = and(_palPx_T, UInt<2>("h3")) @[PPU.scala 350:43]
          pixelValid <= UInt<1>("h1") @[PPU.scala 352:20]
          pixelColor <= palPx @[PPU.scala 353:20]
          node _xPos_T = add(xPos, UInt<1>("h1")) @[PPU.scala 354:22]
          node _xPos_T_1 = tail(_xPos_T, 1) @[PPU.scala 354:22]
          xPos <= _xPos_T_1 @[PPU.scala 354:14]
          node _pixelsDrawnThisLine_T = add(pixelsDrawnThisLine, UInt<1>("h1")) @[PPU.scala 357:52]
          node _pixelsDrawnThisLine_T_1 = tail(_pixelsDrawnThisLine_T, 1) @[PPU.scala 357:52]
          pixelsDrawnThisLine <= _pixelsDrawnThisLine_T_1 @[PPU.scala 357:29]
      node _T_39 = eq(lyReg, UInt<1>("h0")) @[PPU.scala 362:16]
      node _T_40 = eq(dotCounter, UInt<7>("h64")) @[PPU.scala 362:38]
      node _T_41 = and(_T_39, _T_40) @[PPU.scala 362:24]
      when _T_41 : @[PPU.scala 362:49]
        skip
      node _T_42 = eq(lyReg, UInt<1>("h0")) @[PPU.scala 365:16]
      node _T_43 = eq(dotCounter, UInt<8>("hc8")) @[PPU.scala 365:38]
      node _T_44 = and(_T_42, _T_43) @[PPU.scala 365:24]
      when _T_44 : @[PPU.scala 365:49]
        skip
      node _T_45 = eq(lyReg, UInt<1>("h0")) @[PPU.scala 368:16]
      node _T_46 = eq(dotCounter, UInt<8>("hfb")) @[PPU.scala 368:38]
      node _T_47 = and(_T_45, _T_46) @[PPU.scala 368:24]
      when _T_47 : @[PPU.scala 368:49]
        skip
    node _T_48 = eq(lyReg, UInt<8>("h99")) @[PPU.scala 374:14]
    node _T_49 = sub(UInt<9>("h1c8"), UInt<1>("h1")) @[PPU.scala 374:61]
    node _T_50 = tail(_T_49, 1) @[PPU.scala 374:61]
    node _T_51 = eq(dotCounter, _T_50) @[PPU.scala 374:38]
    node _T_52 = and(_T_48, _T_51) @[PPU.scala 374:24]
    when _T_52 : @[PPU.scala 374:69]
      skip
    io.ly <= lyReg @[PPU.scala 381:9]
    io.vblankIRQ <= vblankIRQ @[PPU.scala 382:16]
    io.lcdStatIRQ <= statIRQ @[PPU.scala 383:17]
    io.pixelValid <= pixelValid @[PPU.scala 384:17]
    io.pixelX <= xPos @[PPU.scala 385:13]
    io.pixelY <= lyReg @[PPU.scala 386:13]
    io.pixelColor <= pixelColor @[PPU.scala 387:17]
    node _io_hblank_T = eq(mode, UInt<2>("h0")) @[PPU.scala 390:22]
    io.hblank <= _io_hblank_T @[PPU.scala 390:13]
    node _io_vblank_T = eq(mode, UInt<2>("h1")) @[PPU.scala 391:22]
    io.vblank <= _io_vblank_T @[PPU.scala 391:13]
    io.lcdEnable <= lcdEnable @[PPU.scala 392:16]

  module BootRom :
    input clock : Clock
    input reset : Reset
    output io : { flip address : UInt<16>, dataOut : UInt<8>, valid : UInt<1>, flip enabled : UInt<1>}

    wire bootRomData : UInt<8>[256] @[BootRom.scala 25:28]
    bootRomData[0] <= UInt<6>("h31") @[BootRom.scala 25:28]
    bootRomData[1] <= UInt<8>("hfe") @[BootRom.scala 25:28]
    bootRomData[2] <= UInt<8>("hff") @[BootRom.scala 25:28]
    bootRomData[3] <= UInt<8>("haf") @[BootRom.scala 25:28]
    bootRomData[4] <= UInt<6>("h21") @[BootRom.scala 25:28]
    bootRomData[5] <= UInt<8>("hff") @[BootRom.scala 25:28]
    bootRomData[6] <= UInt<8>("h9f") @[BootRom.scala 25:28]
    bootRomData[7] <= UInt<6>("h32") @[BootRom.scala 25:28]
    bootRomData[8] <= UInt<8>("hcb") @[BootRom.scala 25:28]
    bootRomData[9] <= UInt<7>("h7c") @[BootRom.scala 25:28]
    bootRomData[10] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[11] <= UInt<8>("hfb") @[BootRom.scala 25:28]
    bootRomData[12] <= UInt<6>("h21") @[BootRom.scala 25:28]
    bootRomData[13] <= UInt<6>("h26") @[BootRom.scala 25:28]
    bootRomData[14] <= UInt<8>("hff") @[BootRom.scala 25:28]
    bootRomData[15] <= UInt<4>("he") @[BootRom.scala 25:28]
    bootRomData[16] <= UInt<5>("h11") @[BootRom.scala 25:28]
    bootRomData[17] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[18] <= UInt<8>("h80") @[BootRom.scala 25:28]
    bootRomData[19] <= UInt<6>("h32") @[BootRom.scala 25:28]
    bootRomData[20] <= UInt<8>("he2") @[BootRom.scala 25:28]
    bootRomData[21] <= UInt<4>("hc") @[BootRom.scala 25:28]
    bootRomData[22] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[23] <= UInt<8>("hf3") @[BootRom.scala 25:28]
    bootRomData[24] <= UInt<8>("he2") @[BootRom.scala 25:28]
    bootRomData[25] <= UInt<6>("h32") @[BootRom.scala 25:28]
    bootRomData[26] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[27] <= UInt<7>("h77") @[BootRom.scala 25:28]
    bootRomData[28] <= UInt<7>("h77") @[BootRom.scala 25:28]
    bootRomData[29] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[30] <= UInt<8>("hfc") @[BootRom.scala 25:28]
    bootRomData[31] <= UInt<8>("he0") @[BootRom.scala 25:28]
    bootRomData[32] <= UInt<7>("h47") @[BootRom.scala 25:28]
    bootRomData[33] <= UInt<5>("h11") @[BootRom.scala 25:28]
    bootRomData[34] <= UInt<3>("h4") @[BootRom.scala 25:28]
    bootRomData[35] <= UInt<1>("h1") @[BootRom.scala 25:28]
    bootRomData[36] <= UInt<6>("h21") @[BootRom.scala 25:28]
    bootRomData[37] <= UInt<5>("h10") @[BootRom.scala 25:28]
    bootRomData[38] <= UInt<8>("h80") @[BootRom.scala 25:28]
    bootRomData[39] <= UInt<5>("h1a") @[BootRom.scala 25:28]
    bootRomData[40] <= UInt<8>("hcd") @[BootRom.scala 25:28]
    bootRomData[41] <= UInt<8>("h95") @[BootRom.scala 25:28]
    bootRomData[42] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[43] <= UInt<8>("hcd") @[BootRom.scala 25:28]
    bootRomData[44] <= UInt<8>("h96") @[BootRom.scala 25:28]
    bootRomData[45] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[46] <= UInt<5>("h13") @[BootRom.scala 25:28]
    bootRomData[47] <= UInt<7>("h7b") @[BootRom.scala 25:28]
    bootRomData[48] <= UInt<8>("hfe") @[BootRom.scala 25:28]
    bootRomData[49] <= UInt<6>("h34") @[BootRom.scala 25:28]
    bootRomData[50] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[51] <= UInt<8>("hf3") @[BootRom.scala 25:28]
    bootRomData[52] <= UInt<5>("h11") @[BootRom.scala 25:28]
    bootRomData[53] <= UInt<8>("hd8") @[BootRom.scala 25:28]
    bootRomData[54] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[55] <= UInt<3>("h6") @[BootRom.scala 25:28]
    bootRomData[56] <= UInt<4>("h8") @[BootRom.scala 25:28]
    bootRomData[57] <= UInt<5>("h1a") @[BootRom.scala 25:28]
    bootRomData[58] <= UInt<5>("h13") @[BootRom.scala 25:28]
    bootRomData[59] <= UInt<6>("h22") @[BootRom.scala 25:28]
    bootRomData[60] <= UInt<6>("h23") @[BootRom.scala 25:28]
    bootRomData[61] <= UInt<3>("h5") @[BootRom.scala 25:28]
    bootRomData[62] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[63] <= UInt<8>("hf9") @[BootRom.scala 25:28]
    bootRomData[64] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[65] <= UInt<5>("h19") @[BootRom.scala 25:28]
    bootRomData[66] <= UInt<8>("hea") @[BootRom.scala 25:28]
    bootRomData[67] <= UInt<5>("h10") @[BootRom.scala 25:28]
    bootRomData[68] <= UInt<8>("h99") @[BootRom.scala 25:28]
    bootRomData[69] <= UInt<6>("h21") @[BootRom.scala 25:28]
    bootRomData[70] <= UInt<6>("h2f") @[BootRom.scala 25:28]
    bootRomData[71] <= UInt<8>("h99") @[BootRom.scala 25:28]
    bootRomData[72] <= UInt<4>("he") @[BootRom.scala 25:28]
    bootRomData[73] <= UInt<4>("hc") @[BootRom.scala 25:28]
    bootRomData[74] <= UInt<6>("h3d") @[BootRom.scala 25:28]
    bootRomData[75] <= UInt<6>("h28") @[BootRom.scala 25:28]
    bootRomData[76] <= UInt<4>("h8") @[BootRom.scala 25:28]
    bootRomData[77] <= UInt<6>("h32") @[BootRom.scala 25:28]
    bootRomData[78] <= UInt<4>("hd") @[BootRom.scala 25:28]
    bootRomData[79] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[80] <= UInt<8>("hf9") @[BootRom.scala 25:28]
    bootRomData[81] <= UInt<6>("h2e") @[BootRom.scala 25:28]
    bootRomData[82] <= UInt<4>("hf") @[BootRom.scala 25:28]
    bootRomData[83] <= UInt<5>("h18") @[BootRom.scala 25:28]
    bootRomData[84] <= UInt<8>("hf3") @[BootRom.scala 25:28]
    bootRomData[85] <= UInt<7>("h67") @[BootRom.scala 25:28]
    bootRomData[86] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[87] <= UInt<7>("h64") @[BootRom.scala 25:28]
    bootRomData[88] <= UInt<7>("h57") @[BootRom.scala 25:28]
    bootRomData[89] <= UInt<8>("he0") @[BootRom.scala 25:28]
    bootRomData[90] <= UInt<7>("h42") @[BootRom.scala 25:28]
    bootRomData[91] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[92] <= UInt<8>("h91") @[BootRom.scala 25:28]
    bootRomData[93] <= UInt<8>("he0") @[BootRom.scala 25:28]
    bootRomData[94] <= UInt<7>("h40") @[BootRom.scala 25:28]
    bootRomData[95] <= UInt<3>("h4") @[BootRom.scala 25:28]
    bootRomData[96] <= UInt<5>("h1e") @[BootRom.scala 25:28]
    bootRomData[97] <= UInt<2>("h2") @[BootRom.scala 25:28]
    bootRomData[98] <= UInt<4>("he") @[BootRom.scala 25:28]
    bootRomData[99] <= UInt<4>("hc") @[BootRom.scala 25:28]
    bootRomData[100] <= UInt<8>("hf0") @[BootRom.scala 25:28]
    bootRomData[101] <= UInt<7>("h44") @[BootRom.scala 25:28]
    bootRomData[102] <= UInt<8>("hfe") @[BootRom.scala 25:28]
    bootRomData[103] <= UInt<8>("h90") @[BootRom.scala 25:28]
    bootRomData[104] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[105] <= UInt<8>("hfa") @[BootRom.scala 25:28]
    bootRomData[106] <= UInt<4>("hd") @[BootRom.scala 25:28]
    bootRomData[107] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[108] <= UInt<8>("hf7") @[BootRom.scala 25:28]
    bootRomData[109] <= UInt<5>("h1d") @[BootRom.scala 25:28]
    bootRomData[110] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[111] <= UInt<8>("hf2") @[BootRom.scala 25:28]
    bootRomData[112] <= UInt<4>("he") @[BootRom.scala 25:28]
    bootRomData[113] <= UInt<5>("h13") @[BootRom.scala 25:28]
    bootRomData[114] <= UInt<6>("h24") @[BootRom.scala 25:28]
    bootRomData[115] <= UInt<7>("h7c") @[BootRom.scala 25:28]
    bootRomData[116] <= UInt<5>("h1e") @[BootRom.scala 25:28]
    bootRomData[117] <= UInt<8>("h83") @[BootRom.scala 25:28]
    bootRomData[118] <= UInt<8>("hfe") @[BootRom.scala 25:28]
    bootRomData[119] <= UInt<7>("h62") @[BootRom.scala 25:28]
    bootRomData[120] <= UInt<6>("h28") @[BootRom.scala 25:28]
    bootRomData[121] <= UInt<3>("h6") @[BootRom.scala 25:28]
    bootRomData[122] <= UInt<5>("h1e") @[BootRom.scala 25:28]
    bootRomData[123] <= UInt<8>("hc1") @[BootRom.scala 25:28]
    bootRomData[124] <= UInt<8>("hfe") @[BootRom.scala 25:28]
    bootRomData[125] <= UInt<7>("h64") @[BootRom.scala 25:28]
    bootRomData[126] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[127] <= UInt<3>("h6") @[BootRom.scala 25:28]
    bootRomData[128] <= UInt<7>("h7b") @[BootRom.scala 25:28]
    bootRomData[129] <= UInt<8>("he2") @[BootRom.scala 25:28]
    bootRomData[130] <= UInt<4>("hc") @[BootRom.scala 25:28]
    bootRomData[131] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[132] <= UInt<8>("h87") @[BootRom.scala 25:28]
    bootRomData[133] <= UInt<8>("he2") @[BootRom.scala 25:28]
    bootRomData[134] <= UInt<8>("hf0") @[BootRom.scala 25:28]
    bootRomData[135] <= UInt<7>("h42") @[BootRom.scala 25:28]
    bootRomData[136] <= UInt<8>("h90") @[BootRom.scala 25:28]
    bootRomData[137] <= UInt<8>("he0") @[BootRom.scala 25:28]
    bootRomData[138] <= UInt<7>("h42") @[BootRom.scala 25:28]
    bootRomData[139] <= UInt<5>("h15") @[BootRom.scala 25:28]
    bootRomData[140] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[141] <= UInt<8>("hd2") @[BootRom.scala 25:28]
    bootRomData[142] <= UInt<3>("h5") @[BootRom.scala 25:28]
    bootRomData[143] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[144] <= UInt<7>("h4f") @[BootRom.scala 25:28]
    bootRomData[145] <= UInt<5>("h16") @[BootRom.scala 25:28]
    bootRomData[146] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[147] <= UInt<5>("h18") @[BootRom.scala 25:28]
    bootRomData[148] <= UInt<8>("hcb") @[BootRom.scala 25:28]
    bootRomData[149] <= UInt<7>("h4f") @[BootRom.scala 25:28]
    bootRomData[150] <= UInt<3>("h6") @[BootRom.scala 25:28]
    bootRomData[151] <= UInt<3>("h4") @[BootRom.scala 25:28]
    bootRomData[152] <= UInt<8>("hc5") @[BootRom.scala 25:28]
    bootRomData[153] <= UInt<8>("hcb") @[BootRom.scala 25:28]
    bootRomData[154] <= UInt<5>("h11") @[BootRom.scala 25:28]
    bootRomData[155] <= UInt<5>("h17") @[BootRom.scala 25:28]
    bootRomData[156] <= UInt<8>("hc1") @[BootRom.scala 25:28]
    bootRomData[157] <= UInt<8>("hcb") @[BootRom.scala 25:28]
    bootRomData[158] <= UInt<5>("h11") @[BootRom.scala 25:28]
    bootRomData[159] <= UInt<5>("h17") @[BootRom.scala 25:28]
    bootRomData[160] <= UInt<3>("h5") @[BootRom.scala 25:28]
    bootRomData[161] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[162] <= UInt<8>("hf5") @[BootRom.scala 25:28]
    bootRomData[163] <= UInt<6>("h22") @[BootRom.scala 25:28]
    bootRomData[164] <= UInt<6>("h23") @[BootRom.scala 25:28]
    bootRomData[165] <= UInt<6>("h22") @[BootRom.scala 25:28]
    bootRomData[166] <= UInt<6>("h23") @[BootRom.scala 25:28]
    bootRomData[167] <= UInt<8>("hc9") @[BootRom.scala 25:28]
    bootRomData[168] <= UInt<8>("hce") @[BootRom.scala 25:28]
    bootRomData[169] <= UInt<8>("hed") @[BootRom.scala 25:28]
    bootRomData[170] <= UInt<7>("h66") @[BootRom.scala 25:28]
    bootRomData[171] <= UInt<7>("h66") @[BootRom.scala 25:28]
    bootRomData[172] <= UInt<8>("hcc") @[BootRom.scala 25:28]
    bootRomData[173] <= UInt<4>("hd") @[BootRom.scala 25:28]
    bootRomData[174] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[175] <= UInt<4>("hb") @[BootRom.scala 25:28]
    bootRomData[176] <= UInt<2>("h3") @[BootRom.scala 25:28]
    bootRomData[177] <= UInt<7>("h73") @[BootRom.scala 25:28]
    bootRomData[178] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[179] <= UInt<8>("h83") @[BootRom.scala 25:28]
    bootRomData[180] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[181] <= UInt<4>("hc") @[BootRom.scala 25:28]
    bootRomData[182] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[183] <= UInt<4>("hd") @[BootRom.scala 25:28]
    bootRomData[184] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[185] <= UInt<4>("h8") @[BootRom.scala 25:28]
    bootRomData[186] <= UInt<5>("h11") @[BootRom.scala 25:28]
    bootRomData[187] <= UInt<5>("h1f") @[BootRom.scala 25:28]
    bootRomData[188] <= UInt<8>("h88") @[BootRom.scala 25:28]
    bootRomData[189] <= UInt<8>("h89") @[BootRom.scala 25:28]
    bootRomData[190] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[191] <= UInt<4>("he") @[BootRom.scala 25:28]
    bootRomData[192] <= UInt<8>("hdc") @[BootRom.scala 25:28]
    bootRomData[193] <= UInt<8>("hcc") @[BootRom.scala 25:28]
    bootRomData[194] <= UInt<7>("h6e") @[BootRom.scala 25:28]
    bootRomData[195] <= UInt<8>("he6") @[BootRom.scala 25:28]
    bootRomData[196] <= UInt<8>("hdd") @[BootRom.scala 25:28]
    bootRomData[197] <= UInt<8>("hdd") @[BootRom.scala 25:28]
    bootRomData[198] <= UInt<8>("hd9") @[BootRom.scala 25:28]
    bootRomData[199] <= UInt<8>("h99") @[BootRom.scala 25:28]
    bootRomData[200] <= UInt<8>("hbb") @[BootRom.scala 25:28]
    bootRomData[201] <= UInt<8>("hbb") @[BootRom.scala 25:28]
    bootRomData[202] <= UInt<7>("h67") @[BootRom.scala 25:28]
    bootRomData[203] <= UInt<7>("h63") @[BootRom.scala 25:28]
    bootRomData[204] <= UInt<7>("h6e") @[BootRom.scala 25:28]
    bootRomData[205] <= UInt<4>("he") @[BootRom.scala 25:28]
    bootRomData[206] <= UInt<8>("hec") @[BootRom.scala 25:28]
    bootRomData[207] <= UInt<8>("hcc") @[BootRom.scala 25:28]
    bootRomData[208] <= UInt<8>("hdd") @[BootRom.scala 25:28]
    bootRomData[209] <= UInt<8>("hdc") @[BootRom.scala 25:28]
    bootRomData[210] <= UInt<8>("h99") @[BootRom.scala 25:28]
    bootRomData[211] <= UInt<8>("h9f") @[BootRom.scala 25:28]
    bootRomData[212] <= UInt<8>("hbb") @[BootRom.scala 25:28]
    bootRomData[213] <= UInt<8>("hb9") @[BootRom.scala 25:28]
    bootRomData[214] <= UInt<6>("h33") @[BootRom.scala 25:28]
    bootRomData[215] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[216] <= UInt<6>("h3c") @[BootRom.scala 25:28]
    bootRomData[217] <= UInt<7>("h42") @[BootRom.scala 25:28]
    bootRomData[218] <= UInt<8>("hb9") @[BootRom.scala 25:28]
    bootRomData[219] <= UInt<8>("ha5") @[BootRom.scala 25:28]
    bootRomData[220] <= UInt<8>("hb9") @[BootRom.scala 25:28]
    bootRomData[221] <= UInt<8>("ha5") @[BootRom.scala 25:28]
    bootRomData[222] <= UInt<7>("h42") @[BootRom.scala 25:28]
    bootRomData[223] <= UInt<6>("h3c") @[BootRom.scala 25:28]
    bootRomData[224] <= UInt<6>("h21") @[BootRom.scala 25:28]
    bootRomData[225] <= UInt<3>("h4") @[BootRom.scala 25:28]
    bootRomData[226] <= UInt<1>("h1") @[BootRom.scala 25:28]
    bootRomData[227] <= UInt<5>("h11") @[BootRom.scala 25:28]
    bootRomData[228] <= UInt<8>("ha8") @[BootRom.scala 25:28]
    bootRomData[229] <= UInt<1>("h0") @[BootRom.scala 25:28]
    bootRomData[230] <= UInt<5>("h1a") @[BootRom.scala 25:28]
    bootRomData[231] <= UInt<5>("h13") @[BootRom.scala 25:28]
    bootRomData[232] <= UInt<8>("hbe") @[BootRom.scala 25:28]
    bootRomData[233] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[234] <= UInt<8>("hfe") @[BootRom.scala 25:28]
    bootRomData[235] <= UInt<6>("h23") @[BootRom.scala 25:28]
    bootRomData[236] <= UInt<7>("h7d") @[BootRom.scala 25:28]
    bootRomData[237] <= UInt<8>("hfe") @[BootRom.scala 25:28]
    bootRomData[238] <= UInt<6>("h34") @[BootRom.scala 25:28]
    bootRomData[239] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[240] <= UInt<8>("hf5") @[BootRom.scala 25:28]
    bootRomData[241] <= UInt<3>("h6") @[BootRom.scala 25:28]
    bootRomData[242] <= UInt<5>("h19") @[BootRom.scala 25:28]
    bootRomData[243] <= UInt<7>("h78") @[BootRom.scala 25:28]
    bootRomData[244] <= UInt<8>("h86") @[BootRom.scala 25:28]
    bootRomData[245] <= UInt<6>("h23") @[BootRom.scala 25:28]
    bootRomData[246] <= UInt<3>("h5") @[BootRom.scala 25:28]
    bootRomData[247] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[248] <= UInt<8>("hfb") @[BootRom.scala 25:28]
    bootRomData[249] <= UInt<8>("h86") @[BootRom.scala 25:28]
    bootRomData[250] <= UInt<6>("h20") @[BootRom.scala 25:28]
    bootRomData[251] <= UInt<8>("hfe") @[BootRom.scala 25:28]
    bootRomData[252] <= UInt<6>("h3e") @[BootRom.scala 25:28]
    bootRomData[253] <= UInt<1>("h1") @[BootRom.scala 25:28]
    bootRomData[254] <= UInt<8>("he0") @[BootRom.scala 25:28]
    bootRomData[255] <= UInt<7>("h50") @[BootRom.scala 25:28]
    node inBootRange = lt(io.address, UInt<9>("h100")) @[BootRom.scala 61:32]
    node _io_valid_T = and(io.enabled, inBootRange) @[BootRom.scala 62:26]
    io.valid <= _io_valid_T @[BootRom.scala 62:12]
    node _io_dataOut_T = bits(io.address, 7, 0) @[BootRom.scala 66:39]
    io.dataOut <= bootRomData[_io_dataOut_T] @[BootRom.scala 66:14]

  module IORegisters :
    input clock : Clock
    input reset : Reset
    output io : { flip addr : UInt<8>, flip write : UInt<1>, flip writeData : UInt<8>, readData : UInt<8>, ifReg : UInt<8>, flip vblankIRQ : UInt<1>, flip lcdStatIRQ : UInt<1>, flip timerIRQ : UInt<1>, serialOut : UInt<8>, serialValid : UInt<1>, ppuLcdc : UInt<8>, ppuStat : UInt<8>, ppuScy : UInt<8>, ppuScx : UInt<8>, flip ppuLy : UInt<8>, ppuLyc : UInt<8>, ppuBgp : UInt<8>, ppuObp0 : UInt<8>, ppuObp1 : UInt<8>, ppuWy : UInt<8>, ppuWx : UInt<8>}

    reg regP1 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hff")) @[IORegisters.scala 52:22]
    reg regSB : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 57:22]
    reg regSC : UInt<8>, clock with :
      reset => (reset, UInt<8>("h7e")) @[IORegisters.scala 58:22]
    reg serialOutReg : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 61:29]
    reg serialValidReg : UInt<1>, clock with :
      reset => (reset, UInt<1>("h0")) @[IORegisters.scala 62:31]
    serialValidReg <= UInt<1>("h0") @[IORegisters.scala 63:18]
    reg regDIV : UInt<8>, clock with :
      reset => (reset, UInt<8>("hab")) @[IORegisters.scala 68:24]
    reg regTIMA : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 69:24]
    reg regTMA : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 70:24]
    reg regTAC : UInt<8>, clock with :
      reset => (reset, UInt<8>("hf8")) @[IORegisters.scala 71:24]
    reg divCounter : UInt<16>, clock with :
      reset => (reset, UInt<16>("h0")) @[IORegisters.scala 73:27]
    node _divCounter_T = add(divCounter, UInt<1>("h1")) @[IORegisters.scala 76:28]
    node _divCounter_T_1 = tail(_divCounter_T, 1) @[IORegisters.scala 76:28]
    divCounter <= _divCounter_T_1 @[IORegisters.scala 76:14]
    node _T = eq(divCounter, UInt<8>("hff")) @[IORegisters.scala 77:19]
    when _T : @[IORegisters.scala 77:30]
      node _regDIV_T = add(regDIV, UInt<1>("h1")) @[IORegisters.scala 78:22]
      node _regDIV_T_1 = tail(_regDIV_T, 1) @[IORegisters.scala 78:22]
      regDIV <= _regDIV_T_1 @[IORegisters.scala 78:12]
      divCounter <= UInt<1>("h0") @[IORegisters.scala 79:16]
    reg regIF : UInt<8>, clock with :
      reset => (reset, UInt<8>("he1")) @[IORegisters.scala 85:22]
    io.ifReg <= regIF @[IORegisters.scala 87:12]
    reg regNR10 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h80")) @[IORegisters.scala 92:24]
    reg regNR11 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hbf")) @[IORegisters.scala 93:24]
    reg regNR12 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hf3")) @[IORegisters.scala 94:24]
    reg regNR13 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hff")) @[IORegisters.scala 95:24]
    reg regNR14 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hbf")) @[IORegisters.scala 96:24]
    reg regNR21 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h3f")) @[IORegisters.scala 97:24]
    reg regNR22 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 98:24]
    reg regNR23 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hff")) @[IORegisters.scala 99:24]
    reg regNR24 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hbf")) @[IORegisters.scala 100:24]
    reg regNR30 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h7f")) @[IORegisters.scala 101:24]
    reg regNR31 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hff")) @[IORegisters.scala 102:24]
    reg regNR32 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h9f")) @[IORegisters.scala 103:24]
    reg regNR33 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hff")) @[IORegisters.scala 104:24]
    reg regNR34 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hbf")) @[IORegisters.scala 105:24]
    reg regNR41 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hff")) @[IORegisters.scala 106:24]
    reg regNR42 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 107:24]
    reg regNR43 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 108:24]
    reg regNR44 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hbf")) @[IORegisters.scala 109:24]
    reg regNR50 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h77")) @[IORegisters.scala 110:24]
    reg regNR51 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hf3")) @[IORegisters.scala 111:24]
    reg regNR52 : UInt<8>, clock with :
      reset => (reset, UInt<8>("hf1")) @[IORegisters.scala 112:24]
    reg regLCDC : UInt<8>, clock with :
      reset => (reset, UInt<8>("h91")) @[IORegisters.scala 117:24]
    reg regSTAT : UInt<8>, clock with :
      reset => (reset, UInt<8>("h85")) @[IORegisters.scala 118:24]
    reg regSCY : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 119:24]
    reg regSCX : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 120:24]
    reg regLYC : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 121:24]
    reg regDMA : UInt<8>, clock with :
      reset => (reset, UInt<8>("hff")) @[IORegisters.scala 122:24]
    reg regBGP : UInt<8>, clock with :
      reset => (reset, UInt<8>("hfc")) @[IORegisters.scala 123:24]
    reg regOBP0 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 124:24]
    reg regOBP1 : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 125:24]
    reg regWY : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 126:24]
    reg regWX : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[IORegisters.scala 127:24]
    reg regBOOT : UInt<8>, clock with :
      reset => (reset, UInt<8>("hff")) @[IORegisters.scala 132:24]
    wire readData : UInt<8> @[IORegisters.scala 138:29]
    readData <= UInt<8>("hff") @[IORegisters.scala 138:29]
    node _T_1 = eq(UInt<1>("h0"), io.addr) @[IORegisters.scala 140:19]
    when _T_1 : @[IORegisters.scala 140:19]
      readData <= regP1 @[IORegisters.scala 142:27]
    else :
      node _T_2 = eq(UInt<1>("h1"), io.addr) @[IORegisters.scala 140:19]
      when _T_2 : @[IORegisters.scala 140:19]
        readData <= regSB @[IORegisters.scala 145:27]
      else :
        node _T_3 = eq(UInt<2>("h2"), io.addr) @[IORegisters.scala 140:19]
        when _T_3 : @[IORegisters.scala 140:19]
          readData <= regSC @[IORegisters.scala 146:27]
        else :
          node _T_4 = eq(UInt<4>("hf"), io.addr) @[IORegisters.scala 140:19]
          when _T_4 : @[IORegisters.scala 140:19]
            readData <= regIF @[IORegisters.scala 150:27]
          else :
            node _T_5 = eq(UInt<5>("h10"), io.addr) @[IORegisters.scala 140:19]
            when _T_5 : @[IORegisters.scala 140:19]
              readData <= regNR10 @[IORegisters.scala 153:27]
            else :
              node _T_6 = eq(UInt<5>("h11"), io.addr) @[IORegisters.scala 140:19]
              when _T_6 : @[IORegisters.scala 140:19]
                readData <= regNR11 @[IORegisters.scala 154:27]
              else :
                node _T_7 = eq(UInt<5>("h12"), io.addr) @[IORegisters.scala 140:19]
                when _T_7 : @[IORegisters.scala 140:19]
                  readData <= regNR12 @[IORegisters.scala 155:27]
                else :
                  node _T_8 = eq(UInt<5>("h13"), io.addr) @[IORegisters.scala 140:19]
                  when _T_8 : @[IORegisters.scala 140:19]
                    readData <= regNR13 @[IORegisters.scala 156:27]
                  else :
                    node _T_9 = eq(UInt<5>("h14"), io.addr) @[IORegisters.scala 140:19]
                    when _T_9 : @[IORegisters.scala 140:19]
                      readData <= regNR14 @[IORegisters.scala 157:27]
                    else :
                      node _T_10 = eq(UInt<5>("h16"), io.addr) @[IORegisters.scala 140:19]
                      when _T_10 : @[IORegisters.scala 140:19]
                        readData <= regNR21 @[IORegisters.scala 158:27]
                      else :
                        node _T_11 = eq(UInt<5>("h17"), io.addr) @[IORegisters.scala 140:19]
                        when _T_11 : @[IORegisters.scala 140:19]
                          readData <= regNR22 @[IORegisters.scala 159:27]
                        else :
                          node _T_12 = eq(UInt<5>("h18"), io.addr) @[IORegisters.scala 140:19]
                          when _T_12 : @[IORegisters.scala 140:19]
                            readData <= regNR23 @[IORegisters.scala 160:27]
                          else :
                            node _T_13 = eq(UInt<5>("h19"), io.addr) @[IORegisters.scala 140:19]
                            when _T_13 : @[IORegisters.scala 140:19]
                              readData <= regNR24 @[IORegisters.scala 161:27]
                            else :
                              node _T_14 = eq(UInt<5>("h1a"), io.addr) @[IORegisters.scala 140:19]
                              when _T_14 : @[IORegisters.scala 140:19]
                                readData <= regNR30 @[IORegisters.scala 162:27]
                              else :
                                node _T_15 = eq(UInt<5>("h1b"), io.addr) @[IORegisters.scala 140:19]
                                when _T_15 : @[IORegisters.scala 140:19]
                                  readData <= regNR31 @[IORegisters.scala 163:27]
                                else :
                                  node _T_16 = eq(UInt<5>("h1c"), io.addr) @[IORegisters.scala 140:19]
                                  when _T_16 : @[IORegisters.scala 140:19]
                                    readData <= regNR32 @[IORegisters.scala 164:27]
                                  else :
                                    node _T_17 = eq(UInt<5>("h1d"), io.addr) @[IORegisters.scala 140:19]
                                    when _T_17 : @[IORegisters.scala 140:19]
                                      readData <= regNR33 @[IORegisters.scala 165:27]
                                    else :
                                      node _T_18 = eq(UInt<5>("h1e"), io.addr) @[IORegisters.scala 140:19]
                                      when _T_18 : @[IORegisters.scala 140:19]
                                        readData <= regNR34 @[IORegisters.scala 166:27]
                                      else :
                                        node _T_19 = eq(UInt<6>("h20"), io.addr) @[IORegisters.scala 140:19]
                                        when _T_19 : @[IORegisters.scala 140:19]
                                          readData <= regNR41 @[IORegisters.scala 167:27]
                                        else :
                                          node _T_20 = eq(UInt<6>("h21"), io.addr) @[IORegisters.scala 140:19]
                                          when _T_20 : @[IORegisters.scala 140:19]
                                            readData <= regNR42 @[IORegisters.scala 168:27]
                                          else :
                                            node _T_21 = eq(UInt<6>("h22"), io.addr) @[IORegisters.scala 140:19]
                                            when _T_21 : @[IORegisters.scala 140:19]
                                              readData <= regNR43 @[IORegisters.scala 169:27]
                                            else :
                                              node _T_22 = eq(UInt<6>("h23"), io.addr) @[IORegisters.scala 140:19]
                                              when _T_22 : @[IORegisters.scala 140:19]
                                                readData <= regNR44 @[IORegisters.scala 170:27]
                                              else :
                                                node _T_23 = eq(UInt<6>("h24"), io.addr) @[IORegisters.scala 140:19]
                                                when _T_23 : @[IORegisters.scala 140:19]
                                                  readData <= regNR50 @[IORegisters.scala 171:27]
                                                else :
                                                  node _T_24 = eq(UInt<6>("h25"), io.addr) @[IORegisters.scala 140:19]
                                                  when _T_24 : @[IORegisters.scala 140:19]
                                                    readData <= regNR51 @[IORegisters.scala 172:27]
                                                  else :
                                                    node _T_25 = eq(UInt<6>("h26"), io.addr) @[IORegisters.scala 140:19]
                                                    when _T_25 : @[IORegisters.scala 140:19]
                                                      readData <= regNR52 @[IORegisters.scala 173:27]
                                                    else :
                                                      node _T_26 = eq(UInt<7>("h40"), io.addr) @[IORegisters.scala 140:19]
                                                      when _T_26 : @[IORegisters.scala 140:19]
                                                        readData <= regLCDC @[IORegisters.scala 176:27]
                                                      else :
                                                        node _T_27 = eq(UInt<7>("h41"), io.addr) @[IORegisters.scala 140:19]
                                                        when _T_27 : @[IORegisters.scala 140:19]
                                                          readData <= regSTAT @[IORegisters.scala 177:27]
                                                        else :
                                                          node _T_28 = eq(UInt<7>("h42"), io.addr) @[IORegisters.scala 140:19]
                                                          when _T_28 : @[IORegisters.scala 140:19]
                                                            readData <= regSCY @[IORegisters.scala 178:27]
                                                          else :
                                                            node _T_29 = eq(UInt<7>("h43"), io.addr) @[IORegisters.scala 140:19]
                                                            when _T_29 : @[IORegisters.scala 140:19]
                                                              readData <= regSCX @[IORegisters.scala 179:27]
                                                            else :
                                                              node _T_30 = eq(UInt<7>("h44"), io.addr) @[IORegisters.scala 140:19]
                                                              when _T_30 : @[IORegisters.scala 140:19]
                                                                readData <= io.ppuLy @[IORegisters.scala 180:27]
                                                              else :
                                                                node _T_31 = eq(UInt<7>("h45"), io.addr) @[IORegisters.scala 140:19]
                                                                when _T_31 : @[IORegisters.scala 140:19]
                                                                  readData <= regLYC @[IORegisters.scala 181:27]
                                                                else :
                                                                  node _T_32 = eq(UInt<7>("h46"), io.addr) @[IORegisters.scala 140:19]
                                                                  when _T_32 : @[IORegisters.scala 140:19]
                                                                    readData <= regDMA @[IORegisters.scala 182:27]
                                                                  else :
                                                                    node _T_33 = eq(UInt<7>("h47"), io.addr) @[IORegisters.scala 140:19]
                                                                    when _T_33 : @[IORegisters.scala 140:19]
                                                                      readData <= regBGP @[IORegisters.scala 183:27]
                                                                    else :
                                                                      node _T_34 = eq(UInt<7>("h48"), io.addr) @[IORegisters.scala 140:19]
                                                                      when _T_34 : @[IORegisters.scala 140:19]
                                                                        readData <= regOBP0 @[IORegisters.scala 184:27]
                                                                      else :
                                                                        node _T_35 = eq(UInt<7>("h49"), io.addr) @[IORegisters.scala 140:19]
                                                                        when _T_35 : @[IORegisters.scala 140:19]
                                                                          readData <= regOBP1 @[IORegisters.scala 185:27]
                                                                        else :
                                                                          node _T_36 = eq(UInt<7>("h4a"), io.addr) @[IORegisters.scala 140:19]
                                                                          when _T_36 : @[IORegisters.scala 140:19]
                                                                            readData <= regWY @[IORegisters.scala 186:27]
                                                                          else :
                                                                            node _T_37 = eq(UInt<7>("h4b"), io.addr) @[IORegisters.scala 140:19]
                                                                            when _T_37 : @[IORegisters.scala 140:19]
                                                                              readData <= regWX @[IORegisters.scala 187:27]
                                                                            else :
                                                                              node _T_38 = eq(UInt<7>("h50"), io.addr) @[IORegisters.scala 140:19]
                                                                              when _T_38 : @[IORegisters.scala 140:19]
                                                                                readData <= regBOOT @[IORegisters.scala 190:27]
    io.readData <= readData @[IORegisters.scala 193:15]
    when io.write : @[IORegisters.scala 198:18]
      node _T_39 = eq(UInt<1>("h0"), io.addr) @[IORegisters.scala 199:21]
      when _T_39 : @[IORegisters.scala 199:21]
        node _regP1_T = or(io.writeData, UInt<8>("hcf")) @[IORegisters.scala 201:42]
        regP1 <= _regP1_T @[IORegisters.scala 201:26]
      else :
        node _T_40 = eq(UInt<1>("h1"), io.addr) @[IORegisters.scala 199:21]
        when _T_40 : @[IORegisters.scala 199:21]
          regSB <= io.writeData @[IORegisters.scala 205:15]
        else :
          node _T_41 = eq(UInt<2>("h2"), io.addr) @[IORegisters.scala 199:21]
          when _T_41 : @[IORegisters.scala 199:21]
            node _T_42 = bits(io.writeData, 7, 7) @[IORegisters.scala 209:26]
            when _T_42 : @[IORegisters.scala 209:31]
              serialOutReg <= regSB @[IORegisters.scala 212:24]
              serialValidReg <= UInt<1>("h1") @[IORegisters.scala 213:26]
              node _regSC_T = and(io.writeData, UInt<7>("h7f")) @[IORegisters.scala 214:33]
              regSC <= _regSC_T @[IORegisters.scala 214:17]
            else :
              regSC <= io.writeData @[IORegisters.scala 216:17]
          else :
            node _T_43 = eq(UInt<4>("hf"), io.addr) @[IORegisters.scala 199:21]
            when _T_43 : @[IORegisters.scala 199:21]
              regIF <= io.writeData @[IORegisters.scala 221:26]
            else :
              node _T_44 = eq(UInt<5>("h10"), io.addr) @[IORegisters.scala 199:21]
              when _T_44 : @[IORegisters.scala 199:21]
                regNR10 <= io.writeData @[IORegisters.scala 224:28]
              else :
                node _T_45 = eq(UInt<5>("h11"), io.addr) @[IORegisters.scala 199:21]
                when _T_45 : @[IORegisters.scala 199:21]
                  regNR11 <= io.writeData @[IORegisters.scala 225:28]
                else :
                  node _T_46 = eq(UInt<5>("h12"), io.addr) @[IORegisters.scala 199:21]
                  when _T_46 : @[IORegisters.scala 199:21]
                    regNR12 <= io.writeData @[IORegisters.scala 226:28]
                  else :
                    node _T_47 = eq(UInt<5>("h13"), io.addr) @[IORegisters.scala 199:21]
                    when _T_47 : @[IORegisters.scala 199:21]
                      regNR13 <= io.writeData @[IORegisters.scala 227:28]
                    else :
                      node _T_48 = eq(UInt<5>("h14"), io.addr) @[IORegisters.scala 199:21]
                      when _T_48 : @[IORegisters.scala 199:21]
                        regNR14 <= io.writeData @[IORegisters.scala 228:28]
                      else :
                        node _T_49 = eq(UInt<5>("h16"), io.addr) @[IORegisters.scala 199:21]
                        when _T_49 : @[IORegisters.scala 199:21]
                          regNR21 <= io.writeData @[IORegisters.scala 229:28]
                        else :
                          node _T_50 = eq(UInt<5>("h17"), io.addr) @[IORegisters.scala 199:21]
                          when _T_50 : @[IORegisters.scala 199:21]
                            regNR22 <= io.writeData @[IORegisters.scala 230:28]
                          else :
                            node _T_51 = eq(UInt<5>("h18"), io.addr) @[IORegisters.scala 199:21]
                            when _T_51 : @[IORegisters.scala 199:21]
                              regNR23 <= io.writeData @[IORegisters.scala 231:28]
                            else :
                              node _T_52 = eq(UInt<5>("h19"), io.addr) @[IORegisters.scala 199:21]
                              when _T_52 : @[IORegisters.scala 199:21]
                                regNR24 <= io.writeData @[IORegisters.scala 232:28]
                              else :
                                node _T_53 = eq(UInt<5>("h1a"), io.addr) @[IORegisters.scala 199:21]
                                when _T_53 : @[IORegisters.scala 199:21]
                                  regNR30 <= io.writeData @[IORegisters.scala 233:28]
                                else :
                                  node _T_54 = eq(UInt<5>("h1b"), io.addr) @[IORegisters.scala 199:21]
                                  when _T_54 : @[IORegisters.scala 199:21]
                                    regNR31 <= io.writeData @[IORegisters.scala 234:28]
                                  else :
                                    node _T_55 = eq(UInt<5>("h1c"), io.addr) @[IORegisters.scala 199:21]
                                    when _T_55 : @[IORegisters.scala 199:21]
                                      regNR32 <= io.writeData @[IORegisters.scala 235:28]
                                    else :
                                      node _T_56 = eq(UInt<5>("h1d"), io.addr) @[IORegisters.scala 199:21]
                                      when _T_56 : @[IORegisters.scala 199:21]
                                        regNR33 <= io.writeData @[IORegisters.scala 236:28]
                                      else :
                                        node _T_57 = eq(UInt<5>("h1e"), io.addr) @[IORegisters.scala 199:21]
                                        when _T_57 : @[IORegisters.scala 199:21]
                                          regNR34 <= io.writeData @[IORegisters.scala 237:28]
                                        else :
                                          node _T_58 = eq(UInt<6>("h20"), io.addr) @[IORegisters.scala 199:21]
                                          when _T_58 : @[IORegisters.scala 199:21]
                                            regNR41 <= io.writeData @[IORegisters.scala 238:28]
                                          else :
                                            node _T_59 = eq(UInt<6>("h21"), io.addr) @[IORegisters.scala 199:21]
                                            when _T_59 : @[IORegisters.scala 199:21]
                                              regNR42 <= io.writeData @[IORegisters.scala 239:28]
                                            else :
                                              node _T_60 = eq(UInt<6>("h22"), io.addr) @[IORegisters.scala 199:21]
                                              when _T_60 : @[IORegisters.scala 199:21]
                                                regNR43 <= io.writeData @[IORegisters.scala 240:28]
                                              else :
                                                node _T_61 = eq(UInt<6>("h23"), io.addr) @[IORegisters.scala 199:21]
                                                when _T_61 : @[IORegisters.scala 199:21]
                                                  regNR44 <= io.writeData @[IORegisters.scala 241:28]
                                                else :
                                                  node _T_62 = eq(UInt<6>("h24"), io.addr) @[IORegisters.scala 199:21]
                                                  when _T_62 : @[IORegisters.scala 199:21]
                                                    regNR50 <= io.writeData @[IORegisters.scala 242:28]
                                                  else :
                                                    node _T_63 = eq(UInt<6>("h25"), io.addr) @[IORegisters.scala 199:21]
                                                    when _T_63 : @[IORegisters.scala 199:21]
                                                      regNR51 <= io.writeData @[IORegisters.scala 243:28]
                                                    else :
                                                      node _T_64 = eq(UInt<6>("h26"), io.addr) @[IORegisters.scala 199:21]
                                                      when _T_64 : @[IORegisters.scala 199:21]
                                                        regNR52 <= io.writeData @[IORegisters.scala 244:28]
                                                      else :
                                                        node _T_65 = eq(UInt<7>("h40"), io.addr) @[IORegisters.scala 199:21]
                                                        when _T_65 : @[IORegisters.scala 199:21]
                                                          regLCDC <= io.writeData @[IORegisters.scala 247:28]
                                                        else :
                                                          node _T_66 = eq(UInt<7>("h41"), io.addr) @[IORegisters.scala 199:21]
                                                          when _T_66 : @[IORegisters.scala 199:21]
                                                            regSTAT <= io.writeData @[IORegisters.scala 248:28]
                                                          else :
                                                            node _T_67 = eq(UInt<7>("h42"), io.addr) @[IORegisters.scala 199:21]
                                                            when _T_67 : @[IORegisters.scala 199:21]
                                                              regSCY <= io.writeData @[IORegisters.scala 249:27]
                                                            else :
                                                              node _T_68 = eq(UInt<7>("h43"), io.addr) @[IORegisters.scala 199:21]
                                                              when _T_68 : @[IORegisters.scala 199:21]
                                                                regSCX <= io.writeData @[IORegisters.scala 250:27]
                                                              else :
                                                                node _T_69 = eq(UInt<7>("h44"), io.addr) @[IORegisters.scala 199:21]
                                                                when _T_69 : @[IORegisters.scala 199:21]
                                                                  skip
                                                                else :
                                                                  node _T_70 = eq(UInt<7>("h45"), io.addr) @[IORegisters.scala 199:21]
                                                                  when _T_70 : @[IORegisters.scala 199:21]
                                                                    regLYC <= io.writeData @[IORegisters.scala 252:27]
                                                                  else :
                                                                    node _T_71 = eq(UInt<7>("h46"), io.addr) @[IORegisters.scala 199:21]
                                                                    when _T_71 : @[IORegisters.scala 199:21]
                                                                      regDMA <= io.writeData @[IORegisters.scala 253:27]
                                                                    else :
                                                                      node _T_72 = eq(UInt<7>("h47"), io.addr) @[IORegisters.scala 199:21]
                                                                      when _T_72 : @[IORegisters.scala 199:21]
                                                                        regBGP <= io.writeData @[IORegisters.scala 254:27]
                                                                      else :
                                                                        node _T_73 = eq(UInt<7>("h48"), io.addr) @[IORegisters.scala 199:21]
                                                                        when _T_73 : @[IORegisters.scala 199:21]
                                                                          regOBP0 <= io.writeData @[IORegisters.scala 255:28]
                                                                        else :
                                                                          node _T_74 = eq(UInt<7>("h49"), io.addr) @[IORegisters.scala 199:21]
                                                                          when _T_74 : @[IORegisters.scala 199:21]
                                                                            regOBP1 <= io.writeData @[IORegisters.scala 256:28]
                                                                          else :
                                                                            node _T_75 = eq(UInt<7>("h4a"), io.addr) @[IORegisters.scala 199:21]
                                                                            when _T_75 : @[IORegisters.scala 199:21]
                                                                              regWY <= io.writeData @[IORegisters.scala 257:26]
                                                                            else :
                                                                              node _T_76 = eq(UInt<7>("h4b"), io.addr) @[IORegisters.scala 199:21]
                                                                              when _T_76 : @[IORegisters.scala 199:21]
                                                                                regWX <= io.writeData @[IORegisters.scala 258:26]
                                                                              else :
                                                                                node _T_77 = eq(UInt<7>("h50"), io.addr) @[IORegisters.scala 199:21]
                                                                                when _T_77 : @[IORegisters.scala 199:21]
                                                                                  regBOOT <= io.writeData @[IORegisters.scala 261:28]
    io.serialOut <= serialOutReg @[IORegisters.scala 266:16]
    io.serialValid <= serialValidReg @[IORegisters.scala 267:18]
    io.ppuLcdc <= regLCDC @[IORegisters.scala 270:14]
    io.ppuStat <= regSTAT @[IORegisters.scala 271:14]
    io.ppuScy <= regSCY @[IORegisters.scala 272:14]
    io.ppuScx <= regSCX @[IORegisters.scala 273:14]
    io.ppuLyc <= regLYC @[IORegisters.scala 274:14]
    io.ppuBgp <= regBGP @[IORegisters.scala 275:14]
    io.ppuObp0 <= regOBP0 @[IORegisters.scala 276:14]
    io.ppuObp1 <= regOBP1 @[IORegisters.scala 277:14]
    io.ppuWy <= regWY @[IORegisters.scala 278:14]
    io.ppuWx <= regWX @[IORegisters.scala 279:14]
    when io.vblankIRQ : @[IORegisters.scala 286:22]
      node _regIF_T = or(regIF, UInt<1>("h1")) @[IORegisters.scala 287:20]
      regIF <= _regIF_T @[IORegisters.scala 287:11]
    when io.lcdStatIRQ : @[IORegisters.scala 289:23]
      node _regIF_T_1 = or(regIF, UInt<2>("h2")) @[IORegisters.scala 290:20]
      regIF <= _regIF_T_1 @[IORegisters.scala 290:11]
    when io.timerIRQ : @[IORegisters.scala 292:21]
      node _regIF_T_2 = or(regIF, UInt<3>("h4")) @[IORegisters.scala 293:20]
      regIF <= _regIF_T_2 @[IORegisters.scala 293:11]


  module Timer :
    input clock : Clock
    input reset : Reset
    output io : { flip enable : UInt<1>, flip addr : UInt<2>, flip read : UInt<1>, flip write : UInt<1>, flip wdata : UInt<8>, rdata : UInt<8>, flip tick : UInt<1>, irq : UInt<1>}

    reg div : UInt<16>, clock with :
      reset => (reset, UInt<16>("h0")) @[Timer.scala 24:21]
    reg tima : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[Timer.scala 25:21]
    reg tma : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[Timer.scala 26:21]
    reg tac : UInt<3>, clock with :
      reset => (reset, UInt<3>("h0")) @[Timer.scala 27:21]
    io.irq <= UInt<1>("h0") @[Timer.scala 29:10]
    when io.tick : @[Timer.scala 32:17]
      node _div_T = add(div, UInt<1>("h1")) @[Timer.scala 33:16]
      node _div_T_1 = tail(_div_T, 1) @[Timer.scala 33:16]
      div <= _div_T_1 @[Timer.scala 33:9]
    node _freqBit_T = bits(tac, 1, 0) @[Timer.scala 37:30]
    node _freqBit_T_1 = eq(UInt<1>("h1"), _freqBit_T) @[Mux.scala 81:61]
    node _freqBit_T_2 = mux(_freqBit_T_1, UInt<2>("h3"), UInt<4>("h9")) @[Mux.scala 81:58]
    node _freqBit_T_3 = eq(UInt<2>("h2"), _freqBit_T) @[Mux.scala 81:61]
    node _freqBit_T_4 = mux(_freqBit_T_3, UInt<3>("h5"), _freqBit_T_2) @[Mux.scala 81:58]
    node _freqBit_T_5 = eq(UInt<2>("h3"), _freqBit_T) @[Mux.scala 81:61]
    node freqBit = mux(_freqBit_T_5, UInt<3>("h7"), _freqBit_T_4) @[Mux.scala 81:58]
    node _prev_T = dshr(div, freqBit) @[Timer.scala 44:25]
    node _prev_T_1 = bits(_prev_T, 0, 0) @[Timer.scala 44:25]
    reg prev : UInt<1>, clock with :
      reset => (reset, UInt<1>("h0")) @[Timer.scala 44:21]
    prev <= _prev_T_1 @[Timer.scala 44:21]
    node _edge_T = dshr(div, freqBit) @[Timer.scala 45:26]
    node _edge_T_1 = bits(_edge_T, 0, 0) @[Timer.scala 45:26]
    node _edge_T_2 = eq(_edge_T_1, UInt<1>("h0")) @[Timer.scala 45:22]
    node edge = and(prev, _edge_T_2) @[Timer.scala 45:19]
    node _T = bits(tac, 2, 2) @[Timer.scala 47:22]
    node _T_1 = and(io.tick, _T) @[Timer.scala 47:16]
    node _T_2 = and(_T_1, edge) @[Timer.scala 47:26]
    when _T_2 : @[Timer.scala 47:35]
      node _T_3 = eq(tima, UInt<8>("hff")) @[Timer.scala 48:15]
      when _T_3 : @[Timer.scala 48:28]
        tima <= tma @[Timer.scala 49:12]
        io.irq <= UInt<1>("h1") @[Timer.scala 50:14]
      else :
        node _tima_T = add(tima, UInt<1>("h1")) @[Timer.scala 52:20]
        node _tima_T_1 = tail(_tima_T, 1) @[Timer.scala 52:20]
        tima <= _tima_T_1 @[Timer.scala 52:12]
    node _T_4 = and(io.enable, io.write) @[Timer.scala 57:18]
    when _T_4 : @[Timer.scala 57:31]
      node _T_5 = eq(UInt<1>("h0"), io.addr) @[Timer.scala 58:21]
      when _T_5 : @[Timer.scala 58:21]
        div <= UInt<1>("h0") @[Timer.scala 59:21]
      else :
        node _T_6 = eq(UInt<1>("h1"), io.addr) @[Timer.scala 58:21]
        when _T_6 : @[Timer.scala 58:21]
          tima <= io.wdata @[Timer.scala 60:22]
        else :
          node _T_7 = eq(UInt<2>("h2"), io.addr) @[Timer.scala 58:21]
          when _T_7 : @[Timer.scala 58:21]
            tma <= io.wdata @[Timer.scala 61:22]
          else :
            node _T_8 = eq(UInt<2>("h3"), io.addr) @[Timer.scala 58:21]
            when _T_8 : @[Timer.scala 58:21]
              node _tac_T = bits(io.wdata, 2, 0) @[Timer.scala 62:33]
              tac <= _tac_T @[Timer.scala 62:22]
    node _io_rdata_T = bits(div, 15, 8) @[Timer.scala 68:15]
    node _io_rdata_T_1 = cat(UInt<5>("h1f"), tac) @[Cat.scala 33:92]
    node _io_rdata_T_2 = eq(UInt<1>("h1"), io.addr) @[Mux.scala 81:61]
    node _io_rdata_T_3 = mux(_io_rdata_T_2, tima, _io_rdata_T) @[Mux.scala 81:58]
    node _io_rdata_T_4 = eq(UInt<2>("h2"), io.addr) @[Mux.scala 81:61]
    node _io_rdata_T_5 = mux(_io_rdata_T_4, tma, _io_rdata_T_3) @[Mux.scala 81:58]
    node _io_rdata_T_6 = eq(UInt<2>("h3"), io.addr) @[Mux.scala 81:61]
    node _io_rdata_T_7 = mux(_io_rdata_T_6, _io_rdata_T_1, _io_rdata_T_5) @[Mux.scala 81:58]
    io.rdata <= _io_rdata_T_7 @[Timer.scala 67:12]

  module MemoryMap :
    input clock : Clock
    input reset : Reset
    output io : { flip cpuAddress : UInt<16>, flip cpuRead : UInt<1>, flip cpuWrite : UInt<1>, flip cpuWriteData : UInt<8>, cpuReadData : UInt<8>, flip dbgAddr : UInt<16>, dbgReadData : UInt<8>[4], ieReg : UInt<8>, ifReg : UInt<8>, flip ppuVramAddr : UInt<13>, flip ppuVramRead : UInt<1>, ppuVramData : UInt<8>, flip ppuOamAddr : UInt<8>, flip ppuOamRead : UInt<1>, ppuOamData : UInt<8>, flip ppuLY : UInt<8>, flip ppuVblankIRQ : UInt<1>, flip ppuLcdStatIRQ : UInt<1>, ppuLcdc : UInt<8>, ppuStat : UInt<8>, ppuScy : UInt<8>, ppuScx : UInt<8>, ppuLyc : UInt<8>, ppuBgp : UInt<8>, ppuObp0 : UInt<8>, ppuObp1 : UInt<8>, ppuWy : UInt<8>, ppuWx : UInt<8>, bootRomEnabled : UInt<1>, flip extRomLoadAddr : UInt<32>, flip extRomLoadData : UInt<8>, flip extRomLoadEn : UInt<1>}

    inst bootRom of BootRom @[MemoryMap.scala 63:23]
    bootRom.clock <= clock
    bootRom.reset <= reset
    reg bootRomEnable : UInt<1>, clock with :
      reset => (reset, UInt<1>("h0")) @[MemoryMap.scala 64:30]
    bootRom.io.enabled <= bootRomEnable @[MemoryMap.scala 66:22]
    bootRom.io.address <= io.cpuAddress @[MemoryMap.scala 67:22]
    inst ioRegs of IORegisters @[MemoryMap.scala 72:22]
    ioRegs.clock <= clock
    ioRegs.reset <= reset
    ioRegs.io.vblankIRQ <= io.ppuVblankIRQ @[MemoryMap.scala 73:24]
    ioRegs.io.lcdStatIRQ <= io.ppuLcdStatIRQ @[MemoryMap.scala 74:24]
    ioRegs.io.timerIRQ <= UInt<1>("h0") @[MemoryMap.scala 75:24]
    ioRegs.io.ppuLy <= io.ppuLY @[MemoryMap.scala 76:24]
    ioRegs.io.addr <= UInt<1>("h0") @[MemoryMap.scala 78:23]
    ioRegs.io.write <= UInt<1>("h0") @[MemoryMap.scala 79:23]
    ioRegs.io.writeData <= UInt<1>("h0") @[MemoryMap.scala 80:23]
    inst timer of Timer @[MemoryMap.scala 85:21]
    timer.clock <= clock
    timer.reset <= reset
    timer.io.enable <= UInt<1>("h0") @[MemoryMap.scala 86:19]
    timer.io.addr <= UInt<1>("h0") @[MemoryMap.scala 87:17]
    timer.io.read <= UInt<1>("h0") @[MemoryMap.scala 88:17]
    timer.io.write <= UInt<1>("h0") @[MemoryMap.scala 89:18]
    timer.io.wdata <= UInt<1>("h0") @[MemoryMap.scala 90:18]
    timer.io.tick <= UInt<1>("h1") @[MemoryMap.scala 91:17]
    ioRegs.io.timerIRQ <= timer.io.irq @[MemoryMap.scala 94:22]
    cmem rom : UInt<8> [65536] @[MemoryMap.scala 99:16]
    when io.extRomLoadEn : @[MemoryMap.scala 102:25]
      node _T = bits(io.extRomLoadAddr, 15, 0) @[MemoryMap.scala 103:32]
      write mport MPORT = rom[_T], clock
      MPORT <= io.extRomLoadData
    infer mport cartRomOut = rom[io.cpuAddress], clock @[MemoryMap.scala 107:23]
    cmem vram : UInt<8> [8192] @[MemoryMap.scala 113:19]
    cmem extRam : UInt<8> [8192] @[MemoryMap.scala 114:19]
    cmem wram : UInt<8> [8192] @[MemoryMap.scala 115:19]
    cmem oam : UInt<8> [160] @[MemoryMap.scala 116:19]
    cmem hram : UInt<8> [127] @[MemoryMap.scala 117:19]
    reg ramEnabled : UInt<1>, clock with :
      reset => (reset, UInt<1>("h0")) @[MemoryMap.scala 119:27]
    reg regIE : UInt<8>, clock with :
      reset => (reset, UInt<8>("h0")) @[MemoryMap.scala 120:27]
    node _a_T = add(io.dbgAddr, UInt<1>("h0")) @[MemoryMap.scala 127:24]
    node a = tail(_a_T, 1) @[MemoryMap.scala 127:24]
    node _T_1 = lt(a, UInt<16>("h8000")) @[MemoryMap.scala 129:12]
    when _T_1 : @[MemoryMap.scala 129:25]
      infer mport io_dbgReadData_0_MPORT = rom[a], clock @[MemoryMap.scala 134:31]
      io.dbgReadData[0] <= io_dbgReadData_0_MPORT @[MemoryMap.scala 134:25]
    else :
      node _T_2 = geq(a, UInt<16>("hc000")) @[MemoryMap.scala 136:18]
      node _T_3 = lt(a, UInt<16>("hd000")) @[MemoryMap.scala 136:36]
      node _T_4 = and(_T_2, _T_3) @[MemoryMap.scala 136:31]
      when _T_4 : @[MemoryMap.scala 136:49]
        node _io_dbgReadData_0_T = sub(a, UInt<16>("hc000")) @[MemoryMap.scala 138:37]
        node _io_dbgReadData_0_T_1 = tail(_io_dbgReadData_0_T, 1) @[MemoryMap.scala 138:37]
        node _io_dbgReadData_0_T_2 = add(_io_dbgReadData_0_T_1, UInt<15>("h4000")) @[MemoryMap.scala 138:50]
        node _io_dbgReadData_0_T_3 = tail(_io_dbgReadData_0_T_2, 1) @[MemoryMap.scala 138:50]
        infer mport io_dbgReadData_0_MPORT_1 = rom[_io_dbgReadData_0_T_3], clock @[MemoryMap.scala 138:33]
        io.dbgReadData[0] <= io_dbgReadData_0_MPORT_1 @[MemoryMap.scala 138:27]
      else :
        node _T_5 = geq(a, UInt<16>("hd000")) @[MemoryMap.scala 140:20]
        node _T_6 = lt(a, UInt<16>("he000")) @[MemoryMap.scala 140:38]
        node _T_7 = and(_T_5, _T_6) @[MemoryMap.scala 140:33]
        when _T_7 : @[MemoryMap.scala 140:51]
          node _io_dbgReadData_0_T_4 = sub(a, UInt<16>("hc000")) @[MemoryMap.scala 142:37]
          node _io_dbgReadData_0_T_5 = tail(_io_dbgReadData_0_T_4, 1) @[MemoryMap.scala 142:37]
          node _io_dbgReadData_0_T_6 = bits(_io_dbgReadData_0_T_5, 12, 0) @[MemoryMap.scala 142:34]
          infer mport io_dbgReadData_0_MPORT_2 = wram[_io_dbgReadData_0_T_6], clock @[MemoryMap.scala 142:34]
          io.dbgReadData[0] <= io_dbgReadData_0_MPORT_2 @[MemoryMap.scala 142:27]
        else :
          node _T_8 = geq(a, UInt<16>("he000")) @[MemoryMap.scala 144:19]
          node _T_9 = lt(a, UInt<16>("hfe00")) @[MemoryMap.scala 144:37]
          node _T_10 = and(_T_8, _T_9) @[MemoryMap.scala 144:32]
          when _T_10 : @[MemoryMap.scala 144:50]
            node _io_dbgReadData_0_T_7 = sub(a, UInt<16>("he000")) @[MemoryMap.scala 146:35]
            node _io_dbgReadData_0_T_8 = tail(_io_dbgReadData_0_T_7, 1) @[MemoryMap.scala 146:35]
            node _io_dbgReadData_0_T_9 = bits(_io_dbgReadData_0_T_8, 12, 0) @[MemoryMap.scala 146:32]
            infer mport io_dbgReadData_0_MPORT_3 = wram[_io_dbgReadData_0_T_9], clock @[MemoryMap.scala 146:32]
            io.dbgReadData[0] <= io_dbgReadData_0_MPORT_3 @[MemoryMap.scala 146:25]
          else :
            io.dbgReadData[0] <= UInt<1>("h0") @[MemoryMap.scala 150:25]
    node _a_T_1 = add(io.dbgAddr, UInt<1>("h1")) @[MemoryMap.scala 127:24]
    node a_1 = tail(_a_T_1, 1) @[MemoryMap.scala 127:24]
    node _T_11 = lt(a_1, UInt<16>("h8000")) @[MemoryMap.scala 129:12]
    when _T_11 : @[MemoryMap.scala 129:25]
      infer mport io_dbgReadData_1_MPORT = rom[a_1], clock @[MemoryMap.scala 134:31]
      io.dbgReadData[1] <= io_dbgReadData_1_MPORT @[MemoryMap.scala 134:25]
    else :
      node _T_12 = geq(a_1, UInt<16>("hc000")) @[MemoryMap.scala 136:18]
      node _T_13 = lt(a_1, UInt<16>("hd000")) @[MemoryMap.scala 136:36]
      node _T_14 = and(_T_12, _T_13) @[MemoryMap.scala 136:31]
      when _T_14 : @[MemoryMap.scala 136:49]
        node _io_dbgReadData_1_T = sub(a_1, UInt<16>("hc000")) @[MemoryMap.scala 138:37]
        node _io_dbgReadData_1_T_1 = tail(_io_dbgReadData_1_T, 1) @[MemoryMap.scala 138:37]
        node _io_dbgReadData_1_T_2 = add(_io_dbgReadData_1_T_1, UInt<15>("h4000")) @[MemoryMap.scala 138:50]
        node _io_dbgReadData_1_T_3 = tail(_io_dbgReadData_1_T_2, 1) @[MemoryMap.scala 138:50]
        infer mport io_dbgReadData_1_MPORT_1 = rom[_io_dbgReadData_1_T_3], clock @[MemoryMap.scala 138:33]
        io.dbgReadData[1] <= io_dbgReadData_1_MPORT_1 @[MemoryMap.scala 138:27]
      else :
        node _T_15 = geq(a_1, UInt<16>("hd000")) @[MemoryMap.scala 140:20]
        node _T_16 = lt(a_1, UInt<16>("he000")) @[MemoryMap.scala 140:38]
        node _T_17 = and(_T_15, _T_16) @[MemoryMap.scala 140:33]
        when _T_17 : @[MemoryMap.scala 140:51]
          node _io_dbgReadData_1_T_4 = sub(a_1, UInt<16>("hc000")) @[MemoryMap.scala 142:37]
          node _io_dbgReadData_1_T_5 = tail(_io_dbgReadData_1_T_4, 1) @[MemoryMap.scala 142:37]
          node _io_dbgReadData_1_T_6 = bits(_io_dbgReadData_1_T_5, 12, 0) @[MemoryMap.scala 142:34]
          infer mport io_dbgReadData_1_MPORT_2 = wram[_io_dbgReadData_1_T_6], clock @[MemoryMap.scala 142:34]
          io.dbgReadData[1] <= io_dbgReadData_1_MPORT_2 @[MemoryMap.scala 142:27]
        else :
          node _T_18 = geq(a_1, UInt<16>("he000")) @[MemoryMap.scala 144:19]
          node _T_19 = lt(a_1, UInt<16>("hfe00")) @[MemoryMap.scala 144:37]
          node _T_20 = and(_T_18, _T_19) @[MemoryMap.scala 144:32]
          when _T_20 : @[MemoryMap.scala 144:50]
            node _io_dbgReadData_1_T_7 = sub(a_1, UInt<16>("he000")) @[MemoryMap.scala 146:35]
            node _io_dbgReadData_1_T_8 = tail(_io_dbgReadData_1_T_7, 1) @[MemoryMap.scala 146:35]
            node _io_dbgReadData_1_T_9 = bits(_io_dbgReadData_1_T_8, 12, 0) @[MemoryMap.scala 146:32]
            infer mport io_dbgReadData_1_MPORT_3 = wram[_io_dbgReadData_1_T_9], clock @[MemoryMap.scala 146:32]
            io.dbgReadData[1] <= io_dbgReadData_1_MPORT_3 @[MemoryMap.scala 146:25]
          else :
            io.dbgReadData[1] <= UInt<1>("h0") @[MemoryMap.scala 150:25]
    node _a_T_2 = add(io.dbgAddr, UInt<2>("h2")) @[MemoryMap.scala 127:24]
    node a_2 = tail(_a_T_2, 1) @[MemoryMap.scala 127:24]
    node _T_21 = lt(a_2, UInt<16>("h8000")) @[MemoryMap.scala 129:12]
    when _T_21 : @[MemoryMap.scala 129:25]
      infer mport io_dbgReadData_2_MPORT = rom[a_2], clock @[MemoryMap.scala 134:31]
      io.dbgReadData[2] <= io_dbgReadData_2_MPORT @[MemoryMap.scala 134:25]
    else :
      node _T_22 = geq(a_2, UInt<16>("hc000")) @[MemoryMap.scala 136:18]
      node _T_23 = lt(a_2, UInt<16>("hd000")) @[MemoryMap.scala 136:36]
      node _T_24 = and(_T_22, _T_23) @[MemoryMap.scala 136:31]
      when _T_24 : @[MemoryMap.scala 136:49]
        node _io_dbgReadData_2_T = sub(a_2, UInt<16>("hc000")) @[MemoryMap.scala 138:37]
        node _io_dbgReadData_2_T_1 = tail(_io_dbgReadData_2_T, 1) @[MemoryMap.scala 138:37]
        node _io_dbgReadData_2_T_2 = add(_io_dbgReadData_2_T_1, UInt<15>("h4000")) @[MemoryMap.scala 138:50]
        node _io_dbgReadData_2_T_3 = tail(_io_dbgReadData_2_T_2, 1) @[MemoryMap.scala 138:50]
        infer mport io_dbgReadData_2_MPORT_1 = rom[_io_dbgReadData_2_T_3], clock @[MemoryMap.scala 138:33]
        io.dbgReadData[2] <= io_dbgReadData_2_MPORT_1 @[MemoryMap.scala 138:27]
      else :
        node _T_25 = geq(a_2, UInt<16>("hd000")) @[MemoryMap.scala 140:20]
        node _T_26 = lt(a_2, UInt<16>("he000")) @[MemoryMap.scala 140:38]
        node _T_27 = and(_T_25, _T_26) @[MemoryMap.scala 140:33]
        when _T_27 : @[MemoryMap.scala 140:51]
          node _io_dbgReadData_2_T_4 = sub(a_2, UInt<16>("hc000")) @[MemoryMap.scala 142:37]
          node _io_dbgReadData_2_T_5 = tail(_io_dbgReadData_2_T_4, 1) @[MemoryMap.scala 142:37]
          node _io_dbgReadData_2_T_6 = bits(_io_dbgReadData_2_T_5, 12, 0) @[MemoryMap.scala 142:34]
          infer mport io_dbgReadData_2_MPORT_2 = wram[_io_dbgReadData_2_T_6], clock @[MemoryMap.scala 142:34]
          io.dbgReadData[2] <= io_dbgReadData_2_MPORT_2 @[MemoryMap.scala 142:27]
        else :
          node _T_28 = geq(a_2, UInt<16>("he000")) @[MemoryMap.scala 144:19]
          node _T_29 = lt(a_2, UInt<16>("hfe00")) @[MemoryMap.scala 144:37]
          node _T_30 = and(_T_28, _T_29) @[MemoryMap.scala 144:32]
          when _T_30 : @[MemoryMap.scala 144:50]
            node _io_dbgReadData_2_T_7 = sub(a_2, UInt<16>("he000")) @[MemoryMap.scala 146:35]
            node _io_dbgReadData_2_T_8 = tail(_io_dbgReadData_2_T_7, 1) @[MemoryMap.scala 146:35]
            node _io_dbgReadData_2_T_9 = bits(_io_dbgReadData_2_T_8, 12, 0) @[MemoryMap.scala 146:32]
            infer mport io_dbgReadData_2_MPORT_3 = wram[_io_dbgReadData_2_T_9], clock @[MemoryMap.scala 146:32]
            io.dbgReadData[2] <= io_dbgReadData_2_MPORT_3 @[MemoryMap.scala 146:25]
          else :
            io.dbgReadData[2] <= UInt<1>("h0") @[MemoryMap.scala 150:25]
    node _a_T_3 = add(io.dbgAddr, UInt<2>("h3")) @[MemoryMap.scala 127:24]
    node a_3 = tail(_a_T_3, 1) @[MemoryMap.scala 127:24]
    node _T_31 = lt(a_3, UInt<16>("h8000")) @[MemoryMap.scala 129:12]
    when _T_31 : @[MemoryMap.scala 129:25]
      infer mport io_dbgReadData_3_MPORT = rom[a_3], clock @[MemoryMap.scala 134:31]
      io.dbgReadData[3] <= io_dbgReadData_3_MPORT @[MemoryMap.scala 134:25]
    else :
      node _T_32 = geq(a_3, UInt<16>("hc000")) @[MemoryMap.scala 136:18]
      node _T_33 = lt(a_3, UInt<16>("hd000")) @[MemoryMap.scala 136:36]
      node _T_34 = and(_T_32, _T_33) @[MemoryMap.scala 136:31]
      when _T_34 : @[MemoryMap.scala 136:49]
        node _io_dbgReadData_3_T = sub(a_3, UInt<16>("hc000")) @[MemoryMap.scala 138:37]
        node _io_dbgReadData_3_T_1 = tail(_io_dbgReadData_3_T, 1) @[MemoryMap.scala 138:37]
        node _io_dbgReadData_3_T_2 = add(_io_dbgReadData_3_T_1, UInt<15>("h4000")) @[MemoryMap.scala 138:50]
        node _io_dbgReadData_3_T_3 = tail(_io_dbgReadData_3_T_2, 1) @[MemoryMap.scala 138:50]
        infer mport io_dbgReadData_3_MPORT_1 = rom[_io_dbgReadData_3_T_3], clock @[MemoryMap.scala 138:33]
        io.dbgReadData[3] <= io_dbgReadData_3_MPORT_1 @[MemoryMap.scala 138:27]
      else :
        node _T_35 = geq(a_3, UInt<16>("hd000")) @[MemoryMap.scala 140:20]
        node _T_36 = lt(a_3, UInt<16>("he000")) @[MemoryMap.scala 140:38]
        node _T_37 = and(_T_35, _T_36) @[MemoryMap.scala 140:33]
        when _T_37 : @[MemoryMap.scala 140:51]
          node _io_dbgReadData_3_T_4 = sub(a_3, UInt<16>("hc000")) @[MemoryMap.scala 142:37]
          node _io_dbgReadData_3_T_5 = tail(_io_dbgReadData_3_T_4, 1) @[MemoryMap.scala 142:37]
          node _io_dbgReadData_3_T_6 = bits(_io_dbgReadData_3_T_5, 12, 0) @[MemoryMap.scala 142:34]
          infer mport io_dbgReadData_3_MPORT_2 = wram[_io_dbgReadData_3_T_6], clock @[MemoryMap.scala 142:34]
          io.dbgReadData[3] <= io_dbgReadData_3_MPORT_2 @[MemoryMap.scala 142:27]
        else :
          node _T_38 = geq(a_3, UInt<16>("he000")) @[MemoryMap.scala 144:19]
          node _T_39 = lt(a_3, UInt<16>("hfe00")) @[MemoryMap.scala 144:37]
          node _T_40 = and(_T_38, _T_39) @[MemoryMap.scala 144:32]
          when _T_40 : @[MemoryMap.scala 144:50]
            node _io_dbgReadData_3_T_7 = sub(a_3, UInt<16>("he000")) @[MemoryMap.scala 146:35]
            node _io_dbgReadData_3_T_8 = tail(_io_dbgReadData_3_T_7, 1) @[MemoryMap.scala 146:35]
            node _io_dbgReadData_3_T_9 = bits(_io_dbgReadData_3_T_8, 12, 0) @[MemoryMap.scala 146:32]
            infer mport io_dbgReadData_3_MPORT_3 = wram[_io_dbgReadData_3_T_9], clock @[MemoryMap.scala 146:32]
            io.dbgReadData[3] <= io_dbgReadData_3_MPORT_3 @[MemoryMap.scala 146:25]
          else :
            io.dbgReadData[3] <= UInt<1>("h0") @[MemoryMap.scala 150:25]
    wire rdata : UInt<8> @[MemoryMap.scala 158:26]
    rdata <= UInt<8>("hff") @[MemoryMap.scala 158:26]
    when bootRom.io.valid : @[MemoryMap.scala 160:26]
      rdata <= bootRom.io.dataOut @[MemoryMap.scala 161:11]
    else :
      node _T_41 = lt(io.cpuAddress, UInt<16>("h8000")) @[MemoryMap.scala 163:19]
      when _T_41 : @[MemoryMap.scala 163:32]
        rdata <= cartRomOut @[MemoryMap.scala 164:11]
      else :
        node _T_42 = geq(io.cpuAddress, UInt<16>("hc000")) @[MemoryMap.scala 168:19]
        node _T_43 = lt(io.cpuAddress, UInt<16>("hd000")) @[MemoryMap.scala 168:40]
        node _T_44 = and(_T_42, _T_43) @[MemoryMap.scala 168:32]
        when _T_44 : @[MemoryMap.scala 168:53]
          node _rdata_T = sub(io.cpuAddress, UInt<16>("hc000")) @[MemoryMap.scala 169:24]
          node _rdata_T_1 = tail(_rdata_T, 1) @[MemoryMap.scala 169:24]
          node _rdata_T_2 = add(_rdata_T_1, UInt<15>("h4000")) @[MemoryMap.scala 169:37]
          node _rdata_T_3 = tail(_rdata_T_2, 1) @[MemoryMap.scala 169:37]
          infer mport rdata_MPORT = rom[_rdata_T_3], clock @[MemoryMap.scala 169:17]
          rdata <= rdata_MPORT @[MemoryMap.scala 169:11]
        else :
          node _T_45 = lt(io.cpuAddress, UInt<16>("he000")) @[MemoryMap.scala 172:19]
          when _T_45 : @[MemoryMap.scala 172:32]
            node _rdata_T_4 = sub(io.cpuAddress, UInt<16>("hc000")) @[MemoryMap.scala 173:24]
            node _rdata_T_5 = tail(_rdata_T_4, 1) @[MemoryMap.scala 173:24]
            node _rdata_T_6 = bits(_rdata_T_5, 12, 0) @[MemoryMap.scala 173:18]
            infer mport rdata_MPORT_1 = wram[_rdata_T_6], clock @[MemoryMap.scala 173:18]
            rdata <= rdata_MPORT_1 @[MemoryMap.scala 173:11]
          else :
            node _T_46 = lt(io.cpuAddress, UInt<16>("hfe00")) @[MemoryMap.scala 175:19]
            when _T_46 : @[MemoryMap.scala 175:32]
              node _rdata_T_7 = sub(io.cpuAddress, UInt<16>("he000")) @[MemoryMap.scala 176:24]
              node _rdata_T_8 = tail(_rdata_T_7, 1) @[MemoryMap.scala 176:24]
              node _rdata_T_9 = bits(_rdata_T_8, 12, 0) @[MemoryMap.scala 176:18]
              infer mport rdata_MPORT_2 = wram[_rdata_T_9], clock @[MemoryMap.scala 176:18]
              rdata <= rdata_MPORT_2 @[MemoryMap.scala 176:11]
            else :
              node _T_47 = lt(io.cpuAddress, UInt<16>("hfea0")) @[MemoryMap.scala 178:19]
              when _T_47 : @[MemoryMap.scala 178:32]
                node _rdata_T_10 = sub(io.cpuAddress, UInt<16>("hfe00")) @[MemoryMap.scala 179:23]
                node _rdata_T_11 = tail(_rdata_T_10, 1) @[MemoryMap.scala 179:23]
                node _rdata_T_12 = bits(_rdata_T_11, 7, 0) @[MemoryMap.scala 179:17]
                infer mport rdata_MPORT_3 = oam[_rdata_T_12], clock @[MemoryMap.scala 179:17]
                rdata <= rdata_MPORT_3 @[MemoryMap.scala 179:11]
              else :
                node _T_48 = lt(io.cpuAddress, UInt<16>("hff00")) @[MemoryMap.scala 181:19]
                when _T_48 : @[MemoryMap.scala 181:32]
                  rdata <= UInt<8>("hff") @[MemoryMap.scala 182:11]
                else :
                  node _T_49 = lt(io.cpuAddress, UInt<16>("hff80")) @[MemoryMap.scala 184:19]
                  when _T_49 : @[MemoryMap.scala 184:32]
                    node _ioAddr_T = sub(io.cpuAddress, UInt<16>("hff00")) @[MemoryMap.scala 185:23]
                    node ioAddr = tail(_ioAddr_T, 1) @[MemoryMap.scala 185:23]
                    ioRegs.io.addr <= ioAddr @[MemoryMap.scala 186:20]
                    node _T_50 = geq(ioAddr, UInt<3>("h4")) @[MemoryMap.scala 187:17]
                    node _T_51 = leq(ioAddr, UInt<3>("h7")) @[MemoryMap.scala 187:38]
                    node _T_52 = and(_T_50, _T_51) @[MemoryMap.scala 187:28]
                    when _T_52 : @[MemoryMap.scala 187:50]
                      timer.io.enable <= UInt<1>("h1") @[MemoryMap.scala 188:23]
                      node _timer_io_addr_T = sub(ioAddr, UInt<3>("h4")) @[MemoryMap.scala 189:31]
                      node _timer_io_addr_T_1 = tail(_timer_io_addr_T, 1) @[MemoryMap.scala 189:31]
                      timer.io.addr <= _timer_io_addr_T_1 @[MemoryMap.scala 189:21]
                      timer.io.read <= UInt<1>("h1") @[MemoryMap.scala 190:21]
                      rdata <= timer.io.rdata @[MemoryMap.scala 191:13]
                    else :
                      node _T_53 = eq(ioAddr, UInt<7>("h44")) @[MemoryMap.scala 192:23]
                      when _T_53 : @[MemoryMap.scala 192:36]
                        rdata <= UInt<8>("h90") @[MemoryMap.scala 193:13]
                      else :
                        node _T_54 = eq(ioAddr, UInt<7>("h50")) @[MemoryMap.scala 195:23]
                        when _T_54 : @[MemoryMap.scala 195:36]
                          node _rdata_T_13 = mux(bootRomEnable, UInt<1>("h0"), UInt<1>("h1")) @[MemoryMap.scala 196:19]
                          rdata <= _rdata_T_13 @[MemoryMap.scala 196:13]
                        else :
                          rdata <= ioRegs.io.readData @[MemoryMap.scala 198:13]
                  else :
                    node _T_55 = lt(io.cpuAddress, UInt<16>("hffff")) @[MemoryMap.scala 201:19]
                    when _T_55 : @[MemoryMap.scala 201:32]
                      node _rdata_T_14 = sub(io.cpuAddress, UInt<16>("hff80")) @[MemoryMap.scala 202:24]
                      node _rdata_T_15 = tail(_rdata_T_14, 1) @[MemoryMap.scala 202:24]
                      node _rdata_T_16 = bits(_rdata_T_15, 6, 0) @[MemoryMap.scala 202:18]
                      infer mport rdata_MPORT_4 = hram[_rdata_T_16], clock @[MemoryMap.scala 202:18]
                      rdata <= rdata_MPORT_4 @[MemoryMap.scala 202:11]
                    else :
                      rdata <= regIE @[MemoryMap.scala 205:11]
    io.cpuReadData <= rdata @[MemoryMap.scala 208:18]
    when io.cpuWrite : @[MemoryMap.scala 213:21]
      node _T_56 = lt(io.cpuAddress, UInt<14>("h2000")) @[MemoryMap.scala 214:15]
      when _T_56 : @[MemoryMap.scala 214:28]
        node _ramEnabled_T = and(io.cpuWriteData, UInt<4>("hf")) @[MemoryMap.scala 215:38]
        node _ramEnabled_T_1 = eq(_ramEnabled_T, UInt<4>("ha")) @[MemoryMap.scala 215:49]
        ramEnabled <= _ramEnabled_T_1 @[MemoryMap.scala 215:18]
      else :
        node _T_57 = lt(io.cpuAddress, UInt<15>("h4000")) @[MemoryMap.scala 217:21]
        when _T_57 : @[MemoryMap.scala 217:34]
          skip
        else :
          node _T_58 = lt(io.cpuAddress, UInt<15>("h6000")) @[MemoryMap.scala 220:21]
          when _T_58 : @[MemoryMap.scala 220:34]
            skip
          else :
            node _T_59 = lt(io.cpuAddress, UInt<16>("h8000")) @[MemoryMap.scala 223:21]
            when _T_59 : @[MemoryMap.scala 223:34]
              skip
            else :
              node _T_60 = lt(io.cpuAddress, UInt<16>("ha000")) @[MemoryMap.scala 226:21]
              when _T_60 : @[MemoryMap.scala 226:34]
                node _T_61 = sub(io.cpuAddress, UInt<16>("h8000")) @[MemoryMap.scala 227:23]
                node _T_62 = tail(_T_61, 1) @[MemoryMap.scala 227:23]
                node _T_63 = bits(_T_62, 12, 0)
                write mport MPORT_1 = vram[_T_63], clock
                MPORT_1 <= io.cpuWriteData
              else :
                node _T_64 = lt(io.cpuAddress, UInt<16>("hc000")) @[MemoryMap.scala 229:21]
                when _T_64 : @[MemoryMap.scala 229:34]
                  when ramEnabled : @[MemoryMap.scala 230:24]
                    node _T_65 = sub(io.cpuAddress, UInt<16>("ha000")) @[MemoryMap.scala 231:27]
                    node _T_66 = tail(_T_65, 1) @[MemoryMap.scala 231:27]
                    node _T_67 = bits(_T_66, 12, 0)
                    write mport MPORT_2 = extRam[_T_67], clock
                    MPORT_2 <= io.cpuWriteData
                else :
                  node _T_68 = lt(io.cpuAddress, UInt<16>("he000")) @[MemoryMap.scala 234:21]
                  when _T_68 : @[MemoryMap.scala 234:34]
                    node _T_69 = sub(io.cpuAddress, UInt<16>("hc000")) @[MemoryMap.scala 235:23]
                    node _T_70 = tail(_T_69, 1) @[MemoryMap.scala 235:23]
                    node _T_71 = bits(_T_70, 12, 0)
                    write mport MPORT_3 = wram[_T_71], clock
                    MPORT_3 <= io.cpuWriteData
                  else :
                    node _T_72 = lt(io.cpuAddress, UInt<16>("hfe00")) @[MemoryMap.scala 237:21]
                    when _T_72 : @[MemoryMap.scala 237:34]
                      node _T_73 = sub(io.cpuAddress, UInt<16>("he000")) @[MemoryMap.scala 238:23]
                      node _T_74 = tail(_T_73, 1) @[MemoryMap.scala 238:23]
                      node _T_75 = bits(_T_74, 12, 0)
                      write mport MPORT_4 = wram[_T_75], clock
                      MPORT_4 <= io.cpuWriteData
                    else :
                      node _T_76 = lt(io.cpuAddress, UInt<16>("hfea0")) @[MemoryMap.scala 240:21]
                      when _T_76 : @[MemoryMap.scala 240:34]
                        node _T_77 = sub(io.cpuAddress, UInt<16>("hfe00")) @[MemoryMap.scala 241:22]
                        node _T_78 = tail(_T_77, 1) @[MemoryMap.scala 241:22]
                        node _T_79 = bits(_T_78, 7, 0)
                        write mport MPORT_5 = oam[_T_79], clock
                        MPORT_5 <= io.cpuWriteData
                      else :
                        node _T_80 = lt(io.cpuAddress, UInt<16>("hff00")) @[MemoryMap.scala 243:21]
                        when _T_80 : @[MemoryMap.scala 243:34]
                          skip
                        else :
                          node _T_81 = lt(io.cpuAddress, UInt<16>("hff80")) @[MemoryMap.scala 246:21]
                          when _T_81 : @[MemoryMap.scala 246:34]
                            node _ioAddr_T_1 = sub(io.cpuAddress, UInt<16>("hff00")) @[MemoryMap.scala 247:25]
                            node ioAddr_1 = tail(_ioAddr_T_1, 1) @[MemoryMap.scala 247:25]
                            node _T_82 = geq(ioAddr_1, UInt<3>("h4")) @[MemoryMap.scala 249:19]
                            node _T_83 = leq(ioAddr_1, UInt<3>("h7")) @[MemoryMap.scala 249:40]
                            node _T_84 = and(_T_82, _T_83) @[MemoryMap.scala 249:30]
                            when _T_84 : @[MemoryMap.scala 249:52]
                              timer.io.enable <= UInt<1>("h1") @[MemoryMap.scala 250:25]
                              node _timer_io_addr_T_2 = sub(ioAddr_1, UInt<3>("h4")) @[MemoryMap.scala 251:33]
                              node _timer_io_addr_T_3 = tail(_timer_io_addr_T_2, 1) @[MemoryMap.scala 251:33]
                              timer.io.addr <= _timer_io_addr_T_3 @[MemoryMap.scala 251:23]
                              timer.io.write <= UInt<1>("h1") @[MemoryMap.scala 252:24]
                              timer.io.wdata <= io.cpuWriteData @[MemoryMap.scala 253:24]
                            else :
                              node _T_85 = eq(ioAddr_1, UInt<7>("h50")) @[MemoryMap.scala 254:25]
                              when _T_85 : @[MemoryMap.scala 254:38]
                                node _T_86 = neq(io.cpuWriteData, UInt<1>("h0")) @[MemoryMap.scala 255:30]
                                when _T_86 : @[MemoryMap.scala 255:39]
                                  bootRomEnable <= UInt<1>("h0") @[MemoryMap.scala 256:25]
                              else :
                                ioRegs.io.addr <= ioAddr_1 @[MemoryMap.scala 259:24]
                                ioRegs.io.write <= UInt<1>("h1") @[MemoryMap.scala 260:25]
                                ioRegs.io.writeData <= io.cpuWriteData @[MemoryMap.scala 261:29]
                          else :
                            node _T_87 = lt(io.cpuAddress, UInt<16>("hffff")) @[MemoryMap.scala 264:21]
                            when _T_87 : @[MemoryMap.scala 264:34]
                              node _T_88 = sub(io.cpuAddress, UInt<16>("hff80")) @[MemoryMap.scala 265:23]
                              node _T_89 = tail(_T_88, 1) @[MemoryMap.scala 265:23]
                              node _T_90 = bits(_T_89, 6, 0)
                              write mport MPORT_6 = hram[_T_90], clock
                              MPORT_6 <= io.cpuWriteData
                            else :
                              regIE <= io.cpuWriteData @[MemoryMap.scala 268:13]
    infer mport io_ppuVramData_MPORT = vram[io.ppuVramAddr], clock @[MemoryMap.scala 275:45]
    node _io_ppuVramData_T = mux(io.ppuVramRead, io_ppuVramData_MPORT, UInt<8>("hff")) @[MemoryMap.scala 275:24]
    io.ppuVramData <= _io_ppuVramData_T @[MemoryMap.scala 275:18]
    infer mport io_ppuOamData_MPORT = oam[io.ppuOamAddr], clock @[MemoryMap.scala 276:44]
    node _io_ppuOamData_T = mux(io.ppuOamRead, io_ppuOamData_MPORT, UInt<8>("hff")) @[MemoryMap.scala 276:24]
    io.ppuOamData <= _io_ppuOamData_T @[MemoryMap.scala 276:18]
    io.ieReg <= regIE @[MemoryMap.scala 281:12]
    io.ifReg <= ioRegs.io.ifReg @[MemoryMap.scala 282:12]
    io.ppuLcdc <= ioRegs.io.ppuLcdc @[MemoryMap.scala 284:14]
    io.ppuStat <= ioRegs.io.ppuStat @[MemoryMap.scala 285:14]
    io.ppuScy <= ioRegs.io.ppuScy @[MemoryMap.scala 286:14]
    io.ppuScx <= ioRegs.io.ppuScx @[MemoryMap.scala 287:14]
    io.ppuLyc <= ioRegs.io.ppuLyc @[MemoryMap.scala 288:14]
    io.ppuBgp <= ioRegs.io.ppuBgp @[MemoryMap.scala 289:14]
    io.ppuObp0 <= ioRegs.io.ppuObp0 @[MemoryMap.scala 290:14]
    io.ppuObp1 <= ioRegs.io.ppuObp1 @[MemoryMap.scala 291:14]
    io.ppuWy <= ioRegs.io.ppuWy @[MemoryMap.scala 292:14]
    io.ppuWx <= ioRegs.io.ppuWx @[MemoryMap.scala 293:14]
    io.bootRomEnabled <= bootRomEnable @[MemoryMap.scala 295:21]

  module GameBoySoC :
    input clock : Clock
    input reset : UInt<1>
    output io : { dbg_pc : UInt<16>, dbg_opcode : UInt<8>, dbg_a : UInt<8>, dbg_f : UInt<8>, dbg_b : UInt<8>, dbg_c : UInt<8>, dbg_d : UInt<8>, dbg_e : UInt<8>, dbg_h : UInt<8>, dbg_l : UInt<8>, dbg_state : UInt<8>, dbg_tcycle : UInt<8>, dbg_mcycle : UInt<8>, dbg_IR : UInt<8>, dbg_ly : UInt<8>, flip extRomLoadAddr : UInt<32>, flip extRomLoadData : UInt<8>, flip extRomLoadEn : UInt<1>, pixelValid : UInt<1>, pixelX : UInt<8>, pixelY : UInt<8>, pixelColor : UInt<2>, hblank : UInt<1>, vblank : UInt<1>, lcdEnable : UInt<1>}

    inst cpu of LR35902_Core @[GameBoySoC.scala 52:19]
    cpu.clock <= clock
    cpu.reset <= reset
    inst ppu of PPU @[GameBoySoC.scala 57:19]
    ppu.clock <= clock
    ppu.reset <= reset
    inst memory of MemoryMap @[GameBoySoC.scala 62:22]
    memory.clock <= clock
    memory.reset <= reset
    memory.io.dbgAddr <= cpu.io.dbg_pc @[GameBoySoC.scala 67:21]
    cpu.io.dbgBytes[0] <= memory.io.dbgReadData[0] @[GameBoySoC.scala 68:21]
    cpu.io.dbgBytes[1] <= memory.io.dbgReadData[1] @[GameBoySoC.scala 68:21]
    cpu.io.dbgBytes[2] <= memory.io.dbgReadData[2] @[GameBoySoC.scala 68:21]
    cpu.io.dbgBytes[3] <= memory.io.dbgReadData[3] @[GameBoySoC.scala 68:21]
    memory.io.cpuAddress <= cpu.io.memAddr @[GameBoySoC.scala 73:26]
    memory.io.cpuRead <= cpu.io.memRead @[GameBoySoC.scala 74:26]
    memory.io.cpuWrite <= cpu.io.memWrite @[GameBoySoC.scala 75:26]
    memory.io.cpuWriteData <= cpu.io.memWriteData @[GameBoySoC.scala 76:26]
    cpu.io.memReadData <= memory.io.cpuReadData @[GameBoySoC.scala 77:26]
    cpu.io.ieReg <= memory.io.ieReg @[GameBoySoC.scala 83:16]
    cpu.io.ifReg <= memory.io.ifReg @[GameBoySoC.scala 84:16]
    memory.io.ppuVramAddr <= ppu.io.vramAddr @[GameBoySoC.scala 89:25]
    memory.io.ppuVramRead <= ppu.io.vramRead @[GameBoySoC.scala 90:25]
    ppu.io.vramData <= memory.io.ppuVramData @[GameBoySoC.scala 91:25]
    memory.io.ppuOamAddr <= ppu.io.oamAddr @[GameBoySoC.scala 93:25]
    memory.io.ppuOamRead <= ppu.io.oamRead @[GameBoySoC.scala 94:25]
    ppu.io.oamData <= memory.io.ppuOamData @[GameBoySoC.scala 95:25]
    ppu.io.lcdc <= memory.io.ppuLcdc @[GameBoySoC.scala 98:15]
    ppu.io.stat <= memory.io.ppuStat @[GameBoySoC.scala 99:15]
    ppu.io.scy <= memory.io.ppuScy @[GameBoySoC.scala 100:15]
    ppu.io.scx <= memory.io.ppuScx @[GameBoySoC.scala 101:15]
    ppu.io.lyc <= memory.io.ppuLyc @[GameBoySoC.scala 102:15]
    ppu.io.bgp <= memory.io.ppuBgp @[GameBoySoC.scala 103:15]
    ppu.io.obp0 <= memory.io.ppuObp0 @[GameBoySoC.scala 104:15]
    ppu.io.obp1 <= memory.io.ppuObp1 @[GameBoySoC.scala 105:15]
    ppu.io.wy <= memory.io.ppuWy @[GameBoySoC.scala 106:15]
    ppu.io.wx <= memory.io.ppuWx @[GameBoySoC.scala 107:15]
    memory.io.ppuLY <= ppu.io.ly @[GameBoySoC.scala 110:26]
    memory.io.ppuVblankIRQ <= ppu.io.vblankIRQ @[GameBoySoC.scala 111:26]
    memory.io.ppuLcdStatIRQ <= ppu.io.lcdStatIRQ @[GameBoySoC.scala 112:27]
    memory.io.extRomLoadAddr <= io.extRomLoadAddr @[GameBoySoC.scala 117:28]
    memory.io.extRomLoadData <= io.extRomLoadData @[GameBoySoC.scala 118:28]
    memory.io.extRomLoadEn <= io.extRomLoadEn @[GameBoySoC.scala 119:28]
    io.pixelValid <= ppu.io.pixelValid @[GameBoySoC.scala 124:17]
    io.pixelX <= ppu.io.pixelX @[GameBoySoC.scala 125:17]
    io.pixelY <= ppu.io.pixelY @[GameBoySoC.scala 126:17]
    io.pixelColor <= ppu.io.pixelColor @[GameBoySoC.scala 127:17]
    io.hblank <= ppu.io.hblank @[GameBoySoC.scala 130:17]
    io.vblank <= ppu.io.vblank @[GameBoySoC.scala 131:17]
    io.lcdEnable <= ppu.io.lcdEnable @[GameBoySoC.scala 132:17]
    io.dbg_pc <= cpu.io.dbg_pc @[GameBoySoC.scala 137:17]
    io.dbg_opcode <= cpu.io.dbg_opcode @[GameBoySoC.scala 138:17]
    io.dbg_a <= cpu.io.dbg_a @[GameBoySoC.scala 139:17]
    io.dbg_f <= cpu.io.dbg_f @[GameBoySoC.scala 140:17]
    io.dbg_b <= cpu.io.dbg_b @[GameBoySoC.scala 141:17]
    io.dbg_c <= cpu.io.dbg_c @[GameBoySoC.scala 142:17]
    io.dbg_d <= cpu.io.dbg_d @[GameBoySoC.scala 143:17]
    io.dbg_e <= cpu.io.dbg_e @[GameBoySoC.scala 144:17]
    io.dbg_h <= cpu.io.dbg_h @[GameBoySoC.scala 145:17]
    io.dbg_l <= cpu.io.dbg_l @[GameBoySoC.scala 146:17]
    io.dbg_state <= cpu.io.dbg_state @[GameBoySoC.scala 147:17]
    io.dbg_tcycle <= cpu.io.dbg_tcycle @[GameBoySoC.scala 148:17]
    io.dbg_mcycle <= cpu.io.dbg_mcycle @[GameBoySoC.scala 149:17]
    io.dbg_IR <= cpu.io.dbg_IR @[GameBoySoC.scala 150:17]
    io.dbg_ly <= ppu.io.ly @[GameBoySoC.scala 151:17]

