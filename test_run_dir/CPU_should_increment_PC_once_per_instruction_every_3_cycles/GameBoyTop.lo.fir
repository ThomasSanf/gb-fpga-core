FIRRTL version 1.1.0
circuit GameBoyTop :
  module LR35902 :
    input clock : Clock
    input reset : UInt<1>
    output io_memAddress : UInt<16>
    output io_memRead : UInt<1>
    output io_memWrite : UInt<1>
    output io_memWriteData : UInt<8>
    input io_memReadData : UInt<8>
    output io_dbg_pc : UInt<16>
    output io_dbg_opcode : UInt<8>
    output io_dbg_B : UInt<8>
    output io_dbg_A : UInt<8>
    output io_dbg_C : UInt<8>
    output io_dbg_D : UInt<8>
    output io_dbg_E : UInt<8>
    output io_dbg_H : UInt<8>
    output io_dbg_L : UInt<8>

    reg PC : UInt<16>, clock with :
      reset => (UInt<1>("h0"), PC) @[LR35902.scala 29:23]
    reg A : UInt<8>, clock with :
      reset => (UInt<1>("h0"), A) @[LR35902.scala 30:23]
    reg F : UInt<8>, clock with :
      reset => (UInt<1>("h0"), F) @[LR35902.scala 31:23]
    reg B : UInt<8>, clock with :
      reset => (UInt<1>("h0"), B) @[LR35902.scala 32:23]
    reg C : UInt<8>, clock with :
      reset => (UInt<1>("h0"), C) @[LR35902.scala 33:23]
    reg D : UInt<8>, clock with :
      reset => (UInt<1>("h0"), D) @[LR35902.scala 34:23]
    reg E : UInt<8>, clock with :
      reset => (UInt<1>("h0"), E) @[LR35902.scala 35:23]
    reg H : UInt<8>, clock with :
      reset => (UInt<1>("h0"), H) @[LR35902.scala 36:23]
    reg L : UInt<8>, clock with :
      reset => (UInt<1>("h0"), L) @[LR35902.scala 37:23]
    reg immDst : UInt<3>, clock with :
      reset => (UInt<1>("h0"), immDst) @[LR35902.scala 38:19]
    reg state : UInt<3>, clock with :
      reset => (UInt<1>("h0"), state) @[LR35902.scala 75:24]
    reg fetched : UInt<8>, clock with :
      reset => (UInt<1>("h0"), fetched) @[LR35902.scala 77:20]
    reg opcode : UInt<8>, clock with :
      reset => (UInt<1>("h0"), opcode) @[LR35902.scala 78:24]
    node _T = eq(UInt<3>("h0"), state) @[LR35902.scala 92:17]
    node _T_1 = eq(UInt<3>("h1"), state) @[LR35902.scala 92:17]
    node _T_2 = eq(UInt<3>("h2"), state) @[LR35902.scala 92:17]
    node _dstIdx_T = shr(opcode, 3) @[LR35902.scala 116:29]
    node dstIdx = and(_dstIdx_T, UInt<3>("h7")) @[LR35902.scala 116:43]
    node srcIdx = and(opcode, UInt<3>("h7")) @[LR35902.scala 117:27]
    node _isLdRR_T = geq(opcode, UInt<7>("h40")) @[LR35902.scala 119:17]
    node _isLdRR_T_1 = leq(opcode, UInt<7>("h7f")) @[LR35902.scala 119:40]
    node _isLdRR_T_2 = and(_isLdRR_T, _isLdRR_T_1) @[LR35902.scala 119:29]
    node _isLdRR_T_3 = neq(dstIdx, UInt<3>("h6")) @[LR35902.scala 120:19]
    node _isLdRR_T_4 = and(_isLdRR_T_2, _isLdRR_T_3) @[LR35902.scala 119:52]
    node _isLdRR_T_5 = neq(srcIdx, UInt<3>("h6")) @[LR35902.scala 120:39]
    node isLdRR = and(_isLdRR_T_4, _isLdRR_T_5) @[LR35902.scala 120:28]
    node isLdAFromHL = eq(opcode, UInt<7>("h7e")) @[LR35902.scala 122:33]
    node _T_3 = eq(UInt<1>("h0"), srcIdx) @[Mux.scala 81:61]
    node _T_4 = mux(_T_3, B, UInt<8>("h0")) @[Mux.scala 81:58]
    node _T_5 = eq(UInt<1>("h1"), srcIdx) @[Mux.scala 81:61]
    node _T_6 = mux(_T_5, C, _T_4) @[Mux.scala 81:58]
    node _T_7 = eq(UInt<2>("h2"), srcIdx) @[Mux.scala 81:61]
    node _T_8 = mux(_T_7, D, _T_6) @[Mux.scala 81:58]
    node _T_9 = eq(UInt<2>("h3"), srcIdx) @[Mux.scala 81:61]
    node _T_10 = mux(_T_9, E, _T_8) @[Mux.scala 81:58]
    node _T_11 = eq(UInt<3>("h4"), srcIdx) @[Mux.scala 81:61]
    node _T_12 = mux(_T_11, H, _T_10) @[Mux.scala 81:58]
    node _T_13 = eq(UInt<3>("h5"), srcIdx) @[Mux.scala 81:61]
    node _T_14 = mux(_T_13, L, _T_12) @[Mux.scala 81:58]
    node _T_15 = eq(UInt<3>("h7"), srcIdx) @[Mux.scala 81:61]
    node _T_16 = mux(_T_15, A, _T_14) @[Mux.scala 81:58]
    node _T_17 = eq(UInt<1>("h0"), dstIdx) @[LR35902.scala 60:17]
    node _T_18 = eq(UInt<1>("h1"), dstIdx) @[LR35902.scala 60:17]
    node _T_19 = eq(UInt<2>("h2"), dstIdx) @[LR35902.scala 60:17]
    node _T_20 = eq(UInt<2>("h3"), dstIdx) @[LR35902.scala 60:17]
    node _T_21 = eq(UInt<3>("h4"), dstIdx) @[LR35902.scala 60:17]
    node _T_22 = eq(UInt<3>("h5"), dstIdx) @[LR35902.scala 60:17]
    node _T_23 = eq(UInt<3>("h7"), dstIdx) @[LR35902.scala 60:17]
    node _GEN_0 = mux(_T_23, _T_16, A) @[LR35902.scala 60:17 67:19 30:23]
    node _GEN_1 = mux(_T_22, _T_16, L) @[LR35902.scala 60:17 66:19 37:23]
    node _GEN_2 = mux(_T_22, A, _GEN_0) @[LR35902.scala 60:17 30:23]
    node _GEN_3 = mux(_T_21, _T_16, H) @[LR35902.scala 60:17 65:19 36:23]
    node _GEN_4 = mux(_T_21, L, _GEN_1) @[LR35902.scala 60:17 37:23]
    node _GEN_5 = mux(_T_21, A, _GEN_2) @[LR35902.scala 60:17 30:23]
    node _GEN_6 = mux(_T_20, _T_16, E) @[LR35902.scala 60:17 64:19 35:23]
    node _GEN_7 = mux(_T_20, H, _GEN_3) @[LR35902.scala 60:17 36:23]
    node _GEN_8 = mux(_T_20, L, _GEN_4) @[LR35902.scala 60:17 37:23]
    node _GEN_9 = mux(_T_20, A, _GEN_5) @[LR35902.scala 60:17 30:23]
    node _GEN_10 = mux(_T_19, _T_16, D) @[LR35902.scala 60:17 63:19 34:23]
    node _GEN_11 = mux(_T_19, E, _GEN_6) @[LR35902.scala 60:17 35:23]
    node _GEN_12 = mux(_T_19, H, _GEN_7) @[LR35902.scala 60:17 36:23]
    node _GEN_13 = mux(_T_19, L, _GEN_8) @[LR35902.scala 60:17 37:23]
    node _GEN_14 = mux(_T_19, A, _GEN_9) @[LR35902.scala 60:17 30:23]
    node _GEN_15 = mux(_T_18, _T_16, C) @[LR35902.scala 60:17 62:19 33:23]
    node _GEN_16 = mux(_T_18, D, _GEN_10) @[LR35902.scala 60:17 34:23]
    node _GEN_17 = mux(_T_18, E, _GEN_11) @[LR35902.scala 60:17 35:23]
    node _GEN_18 = mux(_T_18, H, _GEN_12) @[LR35902.scala 60:17 36:23]
    node _GEN_19 = mux(_T_18, L, _GEN_13) @[LR35902.scala 60:17 37:23]
    node _GEN_20 = mux(_T_18, A, _GEN_14) @[LR35902.scala 60:17 30:23]
    node _GEN_21 = mux(_T_17, _T_16, B) @[LR35902.scala 60:17 61:19 32:23]
    node _GEN_22 = mux(_T_17, C, _GEN_15) @[LR35902.scala 60:17 33:23]
    node _GEN_23 = mux(_T_17, D, _GEN_16) @[LR35902.scala 60:17 34:23]
    node _GEN_24 = mux(_T_17, E, _GEN_17) @[LR35902.scala 60:17 35:23]
    node _GEN_25 = mux(_T_17, H, _GEN_18) @[LR35902.scala 60:17 36:23]
    node _GEN_26 = mux(_T_17, L, _GEN_19) @[LR35902.scala 60:17 37:23]
    node _GEN_27 = mux(_T_17, A, _GEN_20) @[LR35902.scala 60:17 30:23]
    node _PC_T = add(PC, UInt<1>("h1")) @[LR35902.scala 129:18]
    node _PC_T_1 = tail(_PC_T, 1) @[LR35902.scala 129:18]
    node _io_memAddress_T = cat(H, L) @[Cat.scala 33:92]
    node _PC_T_2 = add(PC, UInt<1>("h1")) @[LR35902.scala 141:18]
    node _PC_T_3 = tail(_PC_T_2, 1) @[LR35902.scala 141:18]
    node _PC_T_4 = add(PC, UInt<1>("h1")) @[LR35902.scala 149:18]
    node _PC_T_5 = tail(_PC_T_4, 1) @[LR35902.scala 149:18]
    node _T_24 = eq(UInt<1>("h0"), opcode) @[LR35902.scala 152:24]
    node _T_25 = eq(UInt<3>("h4"), opcode) @[LR35902.scala 152:24]
    node _res_T = add(B, UInt<1>("h1")) @[LR35902.scala 158:29]
    node res = tail(_res_T, 1) @[LR35902.scala 158:29]
    node z = eq(res, UInt<1>("h0")) @[LR35902.scala 160:25]
    node _h_T = and(B, UInt<4>("hf")) @[LR35902.scala 161:27]
    node h = eq(_h_T, UInt<4>("hf")) @[LR35902.scala 161:38]
    node _F_T = bits(F, 4, 4) @[LR35902.scala 162:38]
    node F_lo = cat(_F_T, UInt<4>("h0")) @[Cat.scala 33:92]
    node F_hi_hi = cat(z, UInt<1>("h0")) @[Cat.scala 33:92]
    node F_hi = cat(F_hi_hi, h) @[Cat.scala 33:92]
    node _F_T_1 = cat(F_hi, F_lo) @[Cat.scala 33:92]
    node _T_26 = eq(UInt<3>("h5"), opcode) @[LR35902.scala 152:24]
    node _res_T_1 = sub(B, UInt<1>("h1")) @[LR35902.scala 167:29]
    node res_1 = tail(_res_T_1, 1) @[LR35902.scala 167:29]
    node z_1 = eq(res_1, UInt<1>("h0")) @[LR35902.scala 169:25]
    node _h_T_1 = and(B, UInt<4>("hf")) @[LR35902.scala 170:27]
    node h_1 = eq(_h_T_1, UInt<1>("h0")) @[LR35902.scala 170:38]
    node _F_T_2 = bits(F, 4, 4) @[LR35902.scala 171:37]
    node F_lo_1 = cat(_F_T_2, UInt<4>("h0")) @[Cat.scala 33:92]
    node F_hi_hi_1 = cat(z_1, UInt<1>("h1")) @[Cat.scala 33:92]
    node F_hi_1 = cat(F_hi_hi_1, h_1) @[Cat.scala 33:92]
    node _F_T_3 = cat(F_hi_1, F_lo_1) @[Cat.scala 33:92]
    node _T_27 = eq(UInt<3>("h6"), opcode) @[LR35902.scala 152:24]
    node _T_28 = eq(UInt<4>("he"), opcode) @[LR35902.scala 152:24]
    node _T_29 = eq(UInt<5>("h16"), opcode) @[LR35902.scala 152:24]
    node _T_30 = eq(UInt<5>("h1e"), opcode) @[LR35902.scala 152:24]
    node _T_31 = eq(UInt<6>("h26"), opcode) @[LR35902.scala 152:24]
    node _T_32 = eq(UInt<6>("h2e"), opcode) @[LR35902.scala 152:24]
    node _T_33 = eq(UInt<6>("h3e"), opcode) @[LR35902.scala 152:24]
    node _GEN_28 = mux(_T_33, UInt<3>("h7"), immDst) @[LR35902.scala 152:24 181:32 38:19]
    node _GEN_29 = mux(_T_33, UInt<3>("h3"), UInt<3>("h0")) @[LR35902.scala 150:15 152:24 181:46]
    node _GEN_30 = mux(_T_32, UInt<3>("h5"), _GEN_28) @[LR35902.scala 152:24 180:32]
    node _GEN_31 = mux(_T_32, UInt<3>("h3"), _GEN_29) @[LR35902.scala 152:24 180:46]
    node _GEN_32 = mux(_T_31, UInt<3>("h4"), _GEN_30) @[LR35902.scala 152:24 179:32]
    node _GEN_33 = mux(_T_31, UInt<3>("h3"), _GEN_31) @[LR35902.scala 152:24 179:46]
    node _GEN_34 = mux(_T_30, UInt<2>("h3"), _GEN_32) @[LR35902.scala 152:24 178:32]
    node _GEN_35 = mux(_T_30, UInt<3>("h3"), _GEN_33) @[LR35902.scala 152:24 178:46]
    node _GEN_36 = mux(_T_29, UInt<2>("h2"), _GEN_34) @[LR35902.scala 152:24 177:32]
    node _GEN_37 = mux(_T_29, UInt<3>("h3"), _GEN_35) @[LR35902.scala 152:24 177:46]
    node _GEN_38 = mux(_T_28, UInt<1>("h1"), _GEN_36) @[LR35902.scala 152:24 176:32]
    node _GEN_39 = mux(_T_28, UInt<3>("h3"), _GEN_37) @[LR35902.scala 152:24 176:46]
    node _GEN_40 = mux(_T_27, UInt<1>("h0"), _GEN_38) @[LR35902.scala 152:24 175:32]
    node _GEN_41 = mux(_T_27, UInt<3>("h3"), _GEN_39) @[LR35902.scala 152:24 175:46]
    node _GEN_42 = mux(_T_26, res_1, B) @[LR35902.scala 152:24 168:15 32:23]
    node _GEN_43 = mux(_T_26, _F_T_3, F) @[LR35902.scala 152:24 171:15 31:23]
    node _GEN_44 = mux(_T_26, immDst, _GEN_40) @[LR35902.scala 152:24 38:19]
    node _GEN_45 = mux(_T_26, UInt<3>("h0"), _GEN_41) @[LR35902.scala 150:15 152:24]
    node _GEN_46 = mux(_T_25, res, _GEN_42) @[LR35902.scala 152:24 159:15]
    node _GEN_47 = mux(_T_25, _F_T_1, _GEN_43) @[LR35902.scala 152:24 162:15]
    node _GEN_48 = mux(_T_25, immDst, _GEN_44) @[LR35902.scala 152:24 38:19]
    node _GEN_49 = mux(_T_25, UInt<3>("h0"), _GEN_45) @[LR35902.scala 150:15 152:24]
    node _GEN_50 = mux(_T_24, B, _GEN_46) @[LR35902.scala 152:24 32:23]
    node _GEN_51 = mux(_T_24, F, _GEN_47) @[LR35902.scala 152:24 31:23]
    node _GEN_52 = mux(_T_24, immDst, _GEN_48) @[LR35902.scala 152:24 38:19]
    node _GEN_53 = mux(_T_24, UInt<3>("h0"), _GEN_49) @[LR35902.scala 150:15 152:24]
    node _GEN_54 = mux(isLdAFromHL, _io_memAddress_T, PC) @[LR35902.scala 135:31 137:23 84:19]
    node _GEN_55 = mux(isLdAFromHL, UInt<1>("h1"), UInt<1>("h0")) @[LR35902.scala 135:31 138:23 85:19]
    node _GEN_56 = mux(isLdAFromHL, io_memReadData, A) @[LR35902.scala 135:31 139:11 30:23]
    node _GEN_57 = mux(isLdAFromHL, _PC_T_3, _PC_T_5) @[LR35902.scala 135:31 141:12 149:12]
    node _GEN_58 = mux(isLdAFromHL, UInt<3>("h0"), _GEN_53) @[LR35902.scala 135:31 142:15]
    node _GEN_59 = mux(isLdAFromHL, B, _GEN_50) @[LR35902.scala 135:31 32:23]
    node _GEN_60 = mux(isLdAFromHL, F, _GEN_51) @[LR35902.scala 135:31 31:23]
    node _GEN_61 = mux(isLdAFromHL, immDst, _GEN_52) @[LR35902.scala 135:31 38:19]
    node _GEN_62 = mux(isLdRR, _GEN_21, _GEN_59) @[LR35902.scala 127:20]
    node _GEN_63 = mux(isLdRR, _GEN_22, C) @[LR35902.scala 127:20 33:23]
    node _GEN_64 = mux(isLdRR, _GEN_23, D) @[LR35902.scala 127:20 34:23]
    node _GEN_65 = mux(isLdRR, _GEN_24, E) @[LR35902.scala 127:20 35:23]
    node _GEN_66 = mux(isLdRR, _GEN_25, H) @[LR35902.scala 127:20 36:23]
    node _GEN_67 = mux(isLdRR, _GEN_26, L) @[LR35902.scala 127:20 37:23]
    node _GEN_68 = mux(isLdRR, _GEN_27, _GEN_56) @[LR35902.scala 127:20]
    node _GEN_69 = mux(isLdRR, _PC_T_1, _GEN_57) @[LR35902.scala 127:20 129:12]
    node _GEN_70 = mux(isLdRR, UInt<3>("h0"), _GEN_58) @[LR35902.scala 127:20 130:15]
    node _GEN_71 = mux(isLdRR, PC, _GEN_54) @[LR35902.scala 127:20 84:19]
    node _GEN_72 = mux(isLdRR, UInt<1>("h0"), _GEN_55) @[LR35902.scala 127:20 85:19]
    node _GEN_73 = mux(isLdRR, F, _GEN_60) @[LR35902.scala 127:20 31:23]
    node _GEN_74 = mux(isLdRR, immDst, _GEN_61) @[LR35902.scala 127:20 38:19]
    node _T_34 = eq(UInt<3>("h3"), state) @[LR35902.scala 92:17]
    node _T_35 = eq(UInt<1>("h0"), immDst) @[LR35902.scala 60:17]
    node _T_36 = eq(UInt<1>("h1"), immDst) @[LR35902.scala 60:17]
    node _T_37 = eq(UInt<2>("h2"), immDst) @[LR35902.scala 60:17]
    node _T_38 = eq(UInt<2>("h3"), immDst) @[LR35902.scala 60:17]
    node _T_39 = eq(UInt<3>("h4"), immDst) @[LR35902.scala 60:17]
    node _T_40 = eq(UInt<3>("h5"), immDst) @[LR35902.scala 60:17]
    node _T_41 = eq(UInt<3>("h7"), immDst) @[LR35902.scala 60:17]
    node _GEN_75 = mux(_T_41, io_memReadData, A) @[LR35902.scala 60:17 67:19 30:23]
    node _GEN_76 = mux(_T_40, io_memReadData, L) @[LR35902.scala 60:17 66:19 37:23]
    node _GEN_77 = mux(_T_40, A, _GEN_75) @[LR35902.scala 60:17 30:23]
    node _GEN_78 = mux(_T_39, io_memReadData, H) @[LR35902.scala 60:17 65:19 36:23]
    node _GEN_79 = mux(_T_39, L, _GEN_76) @[LR35902.scala 60:17 37:23]
    node _GEN_80 = mux(_T_39, A, _GEN_77) @[LR35902.scala 60:17 30:23]
    node _GEN_81 = mux(_T_38, io_memReadData, E) @[LR35902.scala 60:17 64:19 35:23]
    node _GEN_82 = mux(_T_38, H, _GEN_78) @[LR35902.scala 60:17 36:23]
    node _GEN_83 = mux(_T_38, L, _GEN_79) @[LR35902.scala 60:17 37:23]
    node _GEN_84 = mux(_T_38, A, _GEN_80) @[LR35902.scala 60:17 30:23]
    node _GEN_85 = mux(_T_37, io_memReadData, D) @[LR35902.scala 60:17 63:19 34:23]
    node _GEN_86 = mux(_T_37, E, _GEN_81) @[LR35902.scala 60:17 35:23]
    node _GEN_87 = mux(_T_37, H, _GEN_82) @[LR35902.scala 60:17 36:23]
    node _GEN_88 = mux(_T_37, L, _GEN_83) @[LR35902.scala 60:17 37:23]
    node _GEN_89 = mux(_T_37, A, _GEN_84) @[LR35902.scala 60:17 30:23]
    node _GEN_90 = mux(_T_36, io_memReadData, C) @[LR35902.scala 60:17 62:19 33:23]
    node _GEN_91 = mux(_T_36, D, _GEN_85) @[LR35902.scala 60:17 34:23]
    node _GEN_92 = mux(_T_36, E, _GEN_86) @[LR35902.scala 60:17 35:23]
    node _GEN_93 = mux(_T_36, H, _GEN_87) @[LR35902.scala 60:17 36:23]
    node _GEN_94 = mux(_T_36, L, _GEN_88) @[LR35902.scala 60:17 37:23]
    node _GEN_95 = mux(_T_36, A, _GEN_89) @[LR35902.scala 60:17 30:23]
    node _GEN_96 = mux(_T_35, io_memReadData, B) @[LR35902.scala 60:17 61:19 32:23]
    node _GEN_97 = mux(_T_35, C, _GEN_90) @[LR35902.scala 60:17 33:23]
    node _GEN_98 = mux(_T_35, D, _GEN_91) @[LR35902.scala 60:17 34:23]
    node _GEN_99 = mux(_T_35, E, _GEN_92) @[LR35902.scala 60:17 35:23]
    node _GEN_100 = mux(_T_35, H, _GEN_93) @[LR35902.scala 60:17 36:23]
    node _GEN_101 = mux(_T_35, L, _GEN_94) @[LR35902.scala 60:17 37:23]
    node _GEN_102 = mux(_T_35, A, _GEN_95) @[LR35902.scala 60:17 30:23]
    node _PC_T_6 = add(PC, UInt<1>("h1")) @[LR35902.scala 194:19]
    node _PC_T_7 = tail(_PC_T_6, 1) @[LR35902.scala 194:19]
    node _GEN_103 = mux(_T_34, UInt<1>("h1"), UInt<1>("h0")) @[LR35902.scala 92:17 192:18 85:19]
    node _GEN_104 = mux(_T_34, _GEN_96, B) @[LR35902.scala 92:17 32:23]
    node _GEN_105 = mux(_T_34, _GEN_97, C) @[LR35902.scala 92:17 33:23]
    node _GEN_106 = mux(_T_34, _GEN_98, D) @[LR35902.scala 92:17 34:23]
    node _GEN_107 = mux(_T_34, _GEN_99, E) @[LR35902.scala 92:17 35:23]
    node _GEN_108 = mux(_T_34, _GEN_100, H) @[LR35902.scala 92:17 36:23]
    node _GEN_109 = mux(_T_34, _GEN_101, L) @[LR35902.scala 92:17 37:23]
    node _GEN_110 = mux(_T_34, _GEN_102, A) @[LR35902.scala 92:17 30:23]
    node _GEN_111 = mux(_T_34, _PC_T_7, PC) @[LR35902.scala 194:13 92:17 29:23]
    node _GEN_112 = mux(_T_34, UInt<3>("h0"), state) @[LR35902.scala 195:13 92:17 75:24]
    node _GEN_113 = mux(_T_2, _GEN_62, _GEN_104) @[LR35902.scala 92:17]
    node _GEN_114 = mux(_T_2, _GEN_63, _GEN_105) @[LR35902.scala 92:17]
    node _GEN_115 = mux(_T_2, _GEN_64, _GEN_106) @[LR35902.scala 92:17]
    node _GEN_116 = mux(_T_2, _GEN_65, _GEN_107) @[LR35902.scala 92:17]
    node _GEN_117 = mux(_T_2, _GEN_66, _GEN_108) @[LR35902.scala 92:17]
    node _GEN_118 = mux(_T_2, _GEN_67, _GEN_109) @[LR35902.scala 92:17]
    node _GEN_119 = mux(_T_2, _GEN_68, _GEN_110) @[LR35902.scala 92:17]
    node _GEN_120 = mux(_T_2, _GEN_69, _GEN_111) @[LR35902.scala 92:17]
    node _GEN_121 = mux(_T_2, _GEN_70, _GEN_112) @[LR35902.scala 92:17]
    node _GEN_122 = mux(_T_2, _GEN_71, PC) @[LR35902.scala 92:17 84:19]
    node _GEN_123 = mux(_T_2, _GEN_72, _GEN_103) @[LR35902.scala 92:17]
    node _GEN_124 = mux(_T_2, _GEN_73, F) @[LR35902.scala 92:17 31:23]
    node _GEN_125 = mux(_T_2, _GEN_74, immDst) @[LR35902.scala 92:17 38:19]
    node _GEN_126 = mux(_T_1, fetched, opcode) @[LR35902.scala 107:14 92:17 78:24]
    node _GEN_127 = mux(_T_1, UInt<3>("h2"), _GEN_121) @[LR35902.scala 108:14 92:17]
    node _GEN_128 = mux(_T_1, B, _GEN_113) @[LR35902.scala 92:17 32:23]
    node _GEN_129 = mux(_T_1, C, _GEN_114) @[LR35902.scala 92:17 33:23]
    node _GEN_130 = mux(_T_1, D, _GEN_115) @[LR35902.scala 92:17 34:23]
    node _GEN_131 = mux(_T_1, E, _GEN_116) @[LR35902.scala 92:17 35:23]
    node _GEN_132 = mux(_T_1, H, _GEN_117) @[LR35902.scala 92:17 36:23]
    node _GEN_133 = mux(_T_1, L, _GEN_118) @[LR35902.scala 92:17 37:23]
    node _GEN_134 = mux(_T_1, A, _GEN_119) @[LR35902.scala 92:17 30:23]
    node _GEN_135 = mux(_T_1, PC, _GEN_120) @[LR35902.scala 92:17 29:23]
    node _GEN_136 = mux(_T_1, PC, _GEN_122) @[LR35902.scala 92:17 84:19]
    node _GEN_137 = mux(_T_1, UInt<1>("h0"), _GEN_123) @[LR35902.scala 92:17 85:19]
    node _GEN_138 = mux(_T_1, F, _GEN_124) @[LR35902.scala 92:17 31:23]
    node _GEN_139 = mux(_T_1, immDst, _GEN_125) @[LR35902.scala 92:17 38:19]
    node _GEN_140 = mux(_T, UInt<1>("h1"), _GEN_137) @[LR35902.scala 92:17 98:18]
    node _GEN_141 = mux(_T, io_memReadData, fetched) @[LR35902.scala 92:17 99:18 77:20]
    node _GEN_142 = mux(_T, UInt<3>("h1"), _GEN_127) @[LR35902.scala 92:17 100:18]
    node _GEN_143 = mux(_T, opcode, _GEN_126) @[LR35902.scala 92:17 78:24]
    node _GEN_144 = mux(_T, B, _GEN_128) @[LR35902.scala 92:17 32:23]
    node _GEN_145 = mux(_T, C, _GEN_129) @[LR35902.scala 92:17 33:23]
    node _GEN_146 = mux(_T, D, _GEN_130) @[LR35902.scala 92:17 34:23]
    node _GEN_147 = mux(_T, E, _GEN_131) @[LR35902.scala 92:17 35:23]
    node _GEN_148 = mux(_T, H, _GEN_132) @[LR35902.scala 92:17 36:23]
    node _GEN_149 = mux(_T, L, _GEN_133) @[LR35902.scala 92:17 37:23]
    node _GEN_150 = mux(_T, A, _GEN_134) @[LR35902.scala 92:17 30:23]
    node _GEN_151 = mux(_T, PC, _GEN_135) @[LR35902.scala 92:17 29:23]
    node _GEN_152 = mux(_T, PC, _GEN_136) @[LR35902.scala 92:17 84:19]
    node _GEN_153 = mux(_T, F, _GEN_138) @[LR35902.scala 92:17 31:23]
    node _GEN_154 = mux(_T, immDst, _GEN_139) @[LR35902.scala 92:17 38:19]
    io_memAddress <= _GEN_152
    io_memRead <= _GEN_140
    io_memWrite <= UInt<1>("h0") @[LR35902.scala 86:19]
    io_memWriteData <= UInt<8>("h0") @[LR35902.scala 87:19]
    io_dbg_pc <= PC @[LR35902.scala 40:13]
    io_dbg_opcode <= opcode @[LR35902.scala 79:17]
    io_dbg_B <= B @[LR35902.scala 41:13]
    io_dbg_A <= A @[LR35902.scala 42:13]
    io_dbg_C <= C @[LR35902.scala 43:13]
    io_dbg_D <= D @[LR35902.scala 44:13]
    io_dbg_E <= E @[LR35902.scala 45:13]
    io_dbg_H <= H @[LR35902.scala 46:13]
    io_dbg_L <= L @[LR35902.scala 47:13]
    PC <= mux(reset, UInt<16>("h0"), _GEN_151) @[LR35902.scala 29:{23,23}]
    A <= mux(reset, UInt<8>("h0"), _GEN_150) @[LR35902.scala 30:{23,23}]
    F <= mux(reset, UInt<8>("h0"), _GEN_153) @[LR35902.scala 31:{23,23}]
    B <= mux(reset, UInt<8>("h0"), _GEN_144) @[LR35902.scala 32:{23,23}]
    C <= mux(reset, UInt<8>("h0"), _GEN_145) @[LR35902.scala 33:{23,23}]
    D <= mux(reset, UInt<8>("h0"), _GEN_146) @[LR35902.scala 34:{23,23}]
    E <= mux(reset, UInt<8>("h0"), _GEN_147) @[LR35902.scala 35:{23,23}]
    H <= mux(reset, UInt<8>("h0"), _GEN_148) @[LR35902.scala 36:{23,23}]
    L <= mux(reset, UInt<8>("h0"), _GEN_149) @[LR35902.scala 37:{23,23}]
    immDst <= _GEN_154
    state <= mux(reset, UInt<3>("h0"), _GEN_142) @[LR35902.scala 75:{24,24}]
    fetched <= _GEN_141
    opcode <= mux(reset, UInt<8>("h0"), _GEN_143) @[LR35902.scala 78:{24,24}]

  module Bus :
    input clock : Clock
    input reset : UInt<1>
    input io_cpuAddress : UInt<16>
    input io_cpuRead : UInt<1>
    input io_cpuWrite : UInt<1>
    input io_cpuWriteData : UInt<8>
    output io_cpuReadData : UInt<8>

    mem rom : @[Bus.scala 21:16]
      data-type => UInt<8>
      depth => 32768
      read-latency => 0
      write-latency => 1
      reader => romData
      read-under-write => undefined
    node inRange = lt(io_cpuAddress, UInt<16>("h8000")) @[Bus.scala 25:22]
    node _romData_T = bits(io_cpuAddress, 14, 0) @[Bus.scala 28:25]
    node _io_cpuReadData_T = and(io_cpuRead, inRange) @[Bus.scala 30:36]
    node _io_cpuReadData_T_1 = mux(_io_cpuReadData_T, rom.romData.data, UInt<1>("h0")) @[Bus.scala 30:24]
    io_cpuReadData <= _io_cpuReadData_T_1 @[Bus.scala 30:18]
    rom.romData.addr <= _romData_T @[Bus.scala 28:25]
    rom.romData.en <= UInt<1>("h1") @[Bus.scala 28:25]
    rom.romData.clk <= clock @[Bus.scala 28:25]

  module GameBoyTop :
    input clock : Clock
    input reset : UInt<1>
    output io_dbg_pc : UInt<16>
    output io_dbg_opcode : UInt<8>
    output io_dbg_A : UInt<8>
    output io_dbg_B : UInt<8>
    output io_dbg_C : UInt<8>
    output io_dbg_D : UInt<8>
    output io_dbg_E : UInt<8>
    output io_dbg_H : UInt<8>
    output io_dbg_L : UInt<8>

    inst cpu of LR35902 @[GameBoyTop.scala 22:19]
    inst bus of Bus @[GameBoyTop.scala 23:19]
    io_dbg_pc <= cpu.io_dbg_pc @[GameBoyTop.scala 41:17]
    io_dbg_opcode <= cpu.io_dbg_opcode @[GameBoyTop.scala 42:17]
    io_dbg_A <= cpu.io_dbg_A @[GameBoyTop.scala 44:12]
    io_dbg_B <= cpu.io_dbg_B @[GameBoyTop.scala 45:12]
    io_dbg_C <= cpu.io_dbg_C @[GameBoyTop.scala 46:12]
    io_dbg_D <= cpu.io_dbg_D @[GameBoyTop.scala 47:12]
    io_dbg_E <= cpu.io_dbg_E @[GameBoyTop.scala 48:12]
    io_dbg_H <= cpu.io_dbg_H @[GameBoyTop.scala 49:12]
    io_dbg_L <= cpu.io_dbg_L @[GameBoyTop.scala 50:12]
    cpu.clock <= clock
    cpu.reset <= reset
    cpu.io_memReadData <= bus.io_cpuReadData @[GameBoyTop.scala 36:22]
    bus.clock <= clock
    bus.reset <= reset
    bus.io_cpuAddress <= cpu.io_memAddress @[GameBoyTop.scala 28:23]
    bus.io_cpuRead <= cpu.io_memRead @[GameBoyTop.scala 29:23]
    bus.io_cpuWrite <= cpu.io_memWrite @[GameBoyTop.scala 30:23]
    bus.io_cpuWriteData <= cpu.io_memWriteData @[GameBoyTop.scala 31:23]
